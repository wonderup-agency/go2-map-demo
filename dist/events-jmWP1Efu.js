async function e(e){const t=e.querySelector('[data-events="source"]'),a=Array.from(t.querySelectorAll('[data-events="event-element"]')),n=e.querySelector('[data-events="list"]'),r=e.querySelector('[data-events="event-template"]'),s=[],o=e.querySelector('[data-events="select-cities"]'),i=e.querySelector('[data-events="search"] input'),l=e.querySelector('[data-events="next"]'),d=e.querySelector('[data-events="prev"]'),c=e.querySelector('[data-events="empty"]'),u=e.querySelector("form");u&&u.addEventListener("submit",e=>{e.preventDefault(),e.stopPropagation()}),a.forEach(e=>{const t=e.querySelector('[data-events="DD"]'),a=e.querySelector('[data-events="MMM-YYYY"]'),r=e.querySelector('[data-custom="start-end-date"]'),{startDate:o,endDate:i,timezone:l}=e.dataset;if(!o||!i||!l)return e.parentElement.remove();const d=new Date(o),c=new Date(i),u=new Date,m=e=>Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());if(m(c)+864e5<=m(u))return e.parentElement.remove();const v=new Intl.DateTimeFormat("en-US",{timeZone:l,day:"2-digit",month:"short",year:"numeric"}),y=Object.fromEntries(v.formatToParts(d).map(e=>[e.type,e.value]));t.textContent=y.day,a.textContent=`${y.month} ${y.year}`;const p=new Intl.DateTimeFormat("en-US",{timeZone:l,hour:"2-digit",minute:"2-digit",hour12:!0}),h=e=>Object.fromEntries(p.formatToParts(e).map(e=>[e.type,e.value])),f=h(d),S=h(c);r.textContent=`${f.hour}:${f.minute}${f.dayPeriod} - ${S.hour}:${S.minute}${S.dayPeriod}`;const L=e.dataset.city||"";""!=L&&s.push(L),n.appendChild(e)}),r.remove(),t.remove();const m=[...new Set(s)].sort();!function(e,t){e&&t.forEach(t=>{const a=document.createElement("option");a.value=t,a.textContent=t,e.appendChild(a)})}(o,m);let v=1;function y(){const e=(o.value||"").trim(),t=(i.value||"").trim().toLowerCase(),a=Array.from(n.querySelectorAll('[data-events="event-element"]')),r=[];a.forEach(a=>{const n=(a.dataset.city||"").trim().toLowerCase(),s=(a.dataset.name||"").trim().toLowerCase(),o=(a.dataset.venue||"").trim().toLowerCase(),i=""===e||a.dataset.city.trim()===e,l=""===t||s.includes(t)||n.includes(t)||o.includes(t);i&&l?r.push(a):(a.classList.add("hide-event"),a.classList.remove("show-event"))});const s=r.length,u=Math.ceil(s/3);0===s?(l.style.display="none",d.style.display="none",c.style.display="block"):(c.style.display="none",l.style.display="block",d.style.display="block",d.disabled=1===v,l.disabled=v>=u,r.forEach((e,t)=>{t>=3*(v-1)&&t<3*v?(e.classList.add("show-event"),e.classList.remove("hide-event")):(e.classList.add("hide-event"),e.classList.remove("show-event"))}))}o.addEventListener("change",()=>{v=1,y()}),i.addEventListener("input",()=>{v=1,y()}),l.addEventListener("click",()=>{v++,y()}),d.addEventListener("click",()=>{v--,y()}),y()}export{e as default};
