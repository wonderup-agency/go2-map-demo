async function e(e){const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches,o=t?1:800,a=t?0:200,n=t?1:260,i="cubic-bezier(.22,1,.36,1)",s="bf_support_hidden",r=(e,t,o)=>{const a=new Date;a.setTime(a.getTime()+24*o*60*60*1e3),document.cookie=`${e}=${encodeURIComponent(t)};expires=${a.toUTCString()};path=/;SameSite=Lax`},d=e=>{const t=document.cookie||"";if(!t)return null;const o=t.split("; ");for(const t of o){const[o,...a]=t.split("=");if(o===e)return decodeURIComponent(a.join("="))}return null},l=()=>"1"===d(s),c=e.querySelector(".button_fixed"),u=Array.from(e.querySelectorAll('[data-button-fixed="item"]')),p=u.find(e=>e.hasAttribute("data-button-support"))||null,f=e.querySelector('[data-button-fixed="icon-headset"]'),y=e.querySelector('[data-button-fixed="icon-empathy"]'),m=e.querySelector('[data-button-fixed="icon-close"]'),h=[f,y,m].filter(Boolean),v=e=>{e&&(e.classList.remove("is-active"),e.style.display="none",e.setAttribute("aria-hidden","true"))},b=e=>{e&&(e.classList.add("is-active"),e.style.display="",e.setAttribute("aria-hidden","false"))},k=e=>(h.forEach(v),b("close"===e?m:"empathy"===e?y:f)),x=()=>{k(l()?"empathy":"headset"),c?.setAttribute("aria-expanded","false")},g=()=>{k("close"),c?.setAttribute("aria-expanded","true")};e.querySelectorAll('a[href="#"]').forEach(e=>e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation()})),u.forEach(e=>{e.style.display="none",e.style.opacity=0}),p&&l()&&(p.dataset.skip="true"),x();let E=!1;const A=e=>"none"!==getComputedStyle(e).display,w=()=>u.some(A),L=()=>{if(E)return;E=!0,g();[...u].reverse().filter(e=>!(e===p&&(l()||"true"===e.dataset.skip))).forEach((e,t)=>{e.style.display=(e=>e?.dataset?.display||"flex")(e),e.animate([{opacity:0},{opacity:1}],{duration:o,delay:t*a,easing:i,fill:"forwards"})})},S=e=>{if(e&&A(e)){e.style.willChange="transform,opacity";return void(e.animate([{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(8px)"}],{duration:n,easing:i,fill:"forwards"}).onfinish=()=>{e.style.display="none",e.style.opacity="",e.style.transform="",e.style.willChange="",w()||(E=!1,x())})}},C=()=>{if(!w())return E=!1,void x();E=!1,u.forEach(e=>A(e)&&S(e))};c?.addEventListener("click",e=>{e.target.closest('[data-button-fixed="item"]')||(E?C():L())},!0),e.addEventListener("click",e=>{const t=e.target;return t.closest("[data-close-mail]")?(e.preventDefault(),void S(u.find(e=>e.hasAttribute("data-button-mail")))):t.closest("[data-close-phone]")?(e.preventDefault(),void S(u.find(e=>e.hasAttribute("data-button-phone")))):t.closest("[data-close-support-now]")?(e.preventDefault(),r(s,"1",7),p&&(p.dataset.skip="true"),S(p),void(E||w()||x())):void 0});const D=e=>{e.target.closest('[data-component="button-fixed"]')||C()};document.addEventListener("click",D);const _=e=>{"Escape"===e.key&&C()};document.addEventListener("keydown",_),e.addEventListener("DOMNodeRemoved",t=>{t.target===e&&(document.removeEventListener("click",D),document.removeEventListener("keydown",_))}),e.__buttonFixedDebug={openAll:L,closeAll:C,collapseItem:S,_icon:{showOnlyIcon:k,setClosedIconByCookie:x,setOpenIcon:g},_cookie:{get:d,set:r,key:s}}}export{e as default};
