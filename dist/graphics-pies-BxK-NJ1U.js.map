{"version":3,"file":"graphics-pies-BxK-NJ1U.js","sources":["../src/components/graphics/graphics-pies.js"],"sourcesContent":["import * as am5 from '@amcharts/amcharts5'\r\nimport * as am5percent from '@amcharts/amcharts5/percent'\r\nimport am5themes_Animated from '@amcharts/amcharts5/themes/Animated'\r\n\r\n/**\r\n *\r\n * @param {HTMLElement} component\r\n */\r\nexport default async function (component) {\r\n  document.querySelectorAll('[data-graphic]').forEach((el) => {\r\n    const chartType = el.getAttribute('data-graphic-type') || 'pie'\r\n\r\n    // Colors\r\n    const labelColor = el.getAttribute('data-graphic-label-color') || '#2C3495'\r\n    const sliceBorderColor = el.getAttribute('data-graphic-slice-border-color') || '#F8F9FB'\r\n    const sliceFillColor1 = el.getAttribute('data-graphic-slice-fill-color1') || '#6F4B86'\r\n    const sliceFillColor2 = el.getAttribute('data-graphic-slice-fill-color2') || '#B9DDE6'\r\n\r\n    // Items\r\n    const item1 = {\r\n      label: el.getAttribute('data-graphic-item1-label') || 'Item 1',\r\n      percentage: parseFloat(el.getAttribute('data-graphic-item1-percentage') || 15),\r\n      url: el.getAttribute('data-graphic-item1-url') || '/lung-cancer/types-of-lung-cancer/small-cell-lung-cancer',\r\n    }\r\n    console.log(document.querySelector('[data-graphic-item1-url]'))\r\n    const item2 = {\r\n      label: el.getAttribute('data-graphic-item2-label') || 'Item 2',\r\n      percentage: parseFloat(el.getAttribute('data-graphic-item2-percentage') || 85),\r\n      url: el.getAttribute('data-graphic-item2-url') || '/lung-cancer/types-of-lung-cancer/non-small-cell-lung-cancer',\r\n    }\r\n\r\n    const data = [\r\n      { type: item1.label, value: item1.percentage, url: item1.url },\r\n      { type: item2.label, value: item2.percentage, url: item2.url },\r\n    ]\r\n\r\n    if (chartType === 'pie') {\r\n      createDynamicPieChart({\r\n        element: el,\r\n        labelColor,\r\n        sliceBorderColor,\r\n        sliceFillColors: [sliceFillColor1, sliceFillColor2],\r\n        data,\r\n      })\r\n    }\r\n  })\r\n\r\n  function createDynamicPieChart({ element, labelColor, sliceBorderColor, sliceFillColors, data }) {\r\n    am5.ready(function () {\r\n      const root = am5.Root.new(element)\r\n      root.setThemes([am5themes_Animated.new(root)])\r\n\r\n      // Colors\r\n      const COLOR_LABEL = am5.color(am5.Color.fromString(labelColor))\r\n      const COLOR_BORDER = am5.color(am5.Color.fromString(sliceBorderColor))\r\n      const COLOR_SLICE_1 = am5.color(am5.Color.fromString(sliceFillColors[0]))\r\n      const COLOR_SLICE_2 = am5.color(am5.Color.fromString(sliceFillColors[1]))\r\n\r\n      const REM = parseFloat(getComputedStyle(document.documentElement).fontSize) || 16\r\n      const OFFSET = Math.round(2.5 * REM)\r\n\r\n      // Chart container\r\n\r\n      const chart = root.container.children.push(\r\n        am5percent.PieChart.new(root, {\r\n          layout: root.horizontalLayout,\r\n          startAngle: 250,\r\n          endAngle: 610,\r\n        })\r\n      )\r\n\r\n      // Series\r\n      const series = chart.series.push(\r\n        am5percent.PieSeries.new(root, {\r\n          valueField: 'value',\r\n          categoryField: 'type',\r\n          alignLabels: false,\r\n          radius: am5.percent(80),\r\n        })\r\n      )\r\n\r\n      series.get('colors').set('colors', [COLOR_SLICE_1, COLOR_SLICE_2])\r\n\r\n      // Slice borders\r\n      series.slices.template.setAll({\r\n        stroke: COLOR_BORDER,\r\n        strokeWidth: 10,\r\n        strokeOpacity: 1,\r\n        interactive: false,\r\n        tooltipText: '',\r\n      })\r\n      series.slices.template.set('toggleKey', undefined)\r\n      series.slices.template.events.on('pointerdown', (ev) => ev.event?.stopPropagation?.())\r\n\r\n      // Labels\r\n      series.labelsContainer.setAll({ layer: 100 })\r\n      series.ticksContainer.setAll({ layer: 90 })\r\n\r\n      series.labels.template.setAll({\r\n        text: '{type} â†—',\r\n        populateText: true,\r\n        inside: false,\r\n        radius: OFFSET,\r\n        fontSize: 20,\r\n        fontWeight: '600',\r\n        fill: COLOR_LABEL,\r\n        paddingLeft: Math.round(1 * REM),\r\n        paddingRight: Math.round(1 * REM),\r\n        paddingTop: Math.round(0.5 * REM),\r\n        paddingBottom: Math.round(0.5 * REM),\r\n        interactive: true,\r\n        cursorOverStyle: 'pointer',\r\n      })\r\n\r\n      // Hover animation (300ms ease)\r\n      series.events.on('datavalidated', () => {\r\n        series.dataItems.forEach((di) => {\r\n          const label = di.get('label')\r\n          if (!label) return\r\n\r\n          const bg = am5.RoundedRectangle.new(root, {\r\n            fill: am5.color(0xffffff),\r\n            fillOpacity: 1,\r\n            stroke: COLOR_LABEL,\r\n            strokeWidth: 1,\r\n            strokeOpacity: 1,\r\n            cornerRadiusTL: 4,\r\n            cornerRadiusTR: 4,\r\n            cornerRadiusBR: 4,\r\n            cornerRadiusBL: 4,\r\n          })\r\n          label.set('background', bg)\r\n\r\n          // Hover in\r\n          label.events.on('pointerover', () => {\r\n            bg.animate({\r\n              key: 'fill',\r\n              to: COLOR_LABEL,\r\n              duration: 300,\r\n              easing: am5.ease.out(am5.ease.cubic),\r\n            })\r\n            label.animate({\r\n              key: 'fill',\r\n              to: am5.color(0xffffff),\r\n              duration: 300,\r\n              easing: am5.ease.out(am5.ease.cubic),\r\n            })\r\n          })\r\n\r\n          // Hover out\r\n          label.events.on('pointerout', () => {\r\n            bg.animate({\r\n              key: 'fill',\r\n              to: am5.color(0xffffff),\r\n              duration: 300,\r\n              easing: am5.ease.out(am5.ease.cubic),\r\n            })\r\n            label.animate({\r\n              key: 'fill',\r\n              to: COLOR_LABEL,\r\n              duration: 300,\r\n              easing: am5.ease.out(am5.ease.cubic),\r\n            })\r\n          })\r\n        })\r\n      })\r\n\r\n      // Clickable labels\r\n      series.labels.template.events.on('pointerdown', (ev) => {\r\n        const url = ev.target.dataItem?.dataContext?.url\r\n        if (url) window.open(url, 'noopener,noreferrer')\r\n      })\r\n\r\n      // Data\r\n      series.data.setAll(data)\r\n\r\n      // % inside slices\r\n      series.bullets.push(function (root, series, dataItem) {\r\n        const index = series.dataItems.indexOf(dataItem)\r\n        const fillColor = index === 0 ? am5.color(0xffffff) : COLOR_LABEL\r\n\r\n        return am5.Bullet.new(root, {\r\n          sprite: am5.Label.new(root, {\r\n            text: \"{valuePercentTotal.formatNumber('0.')}%\",\r\n            populateText: true,\r\n            centerX: am5.p50,\r\n            centerY: am5.p50,\r\n            fontSize: 20,\r\n            fontWeight: '800',\r\n            fill: fillColor,\r\n          }),\r\n        })\r\n      })\r\n\r\n      // Initial animation\r\n      series.appear(700)\r\n      chart.appear(700, 50)\r\n    })\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}