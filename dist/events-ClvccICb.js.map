{"version":3,"file":"events-ClvccICb.js","sources":["../src/components/events.js"],"sourcesContent":["/**\n *\n * @param {HTMLElement} component\n */\nexport default async function (component) {\n  const events = component.querySelectorAll('[data-events=\"event-element\"]')\n\n  events.forEach((event, i) => {\n    const dayEl = event.querySelector('[data-events=\"DD\"]')\n    const monthYearEl = event.querySelector('[data-events=\"MMM-YYYY\"]')\n    const timeEl = event.querySelector('[data-custom=\"start-end-date\"]')\n\n    const startDateString = event.dataset.startDate\n    const endDateString = event.dataset.endDate\n    const timezoneString = event.dataset.timezone\n\n    if (startDateString == '' || endDateString == '') {\n      // event.parentElement.remove()\n      event.parentElement.setAttribute('data-delete', 'true')\n      return\n    }\n\n    const startDate = new Date(startDateString)\n    const endDate = new Date(endDateString)\n\n    // Check if endDate is one day older than the current date in UTC\n    const now = new Date() // Current date/time in UTC\n    const utcEndDate = new Date(endDate.toISOString())\n    const utcCurrentDate = new Date(now.toISOString())\n\n    // Truncate to day for comparison (ignoring time)\n    const endDateDay = new Date(\n      utcEndDate.getUTCFullYear(),\n      utcEndDate.getUTCMonth(),\n      utcEndDate.getUTCDate()\n    )\n    const currentDateDay = new Date(\n      utcCurrentDate.getUTCFullYear(),\n      utcCurrentDate.getUTCMonth(),\n      utcCurrentDate.getUTCDate()\n    )\n\n    // Check if endDate is exactly one day after current date\n    const oneDayInMs = 24 * 60 * 60 * 1000 // One day in milliseconds\n    if (endDateDay.getTime() + oneDayInMs <= currentDateDay.getTime()) {\n      // event.parentElement.remove()\n      event.parentElement.setAttribute('data-delete', 'true')\n      return\n    }\n\n    // Format day, month, year\n    const dateOptions = {\n      timeZone: timezoneString,\n      day: '2-digit',\n      month: 'short',\n      year: 'numeric',\n    }\n    const dateFormatter = new Intl.DateTimeFormat('en-US', dateOptions)\n    const startParts = dateFormatter.formatToParts(startDate)\n\n    const day = startParts.find((part) => part.type === 'day').value\n    const month = startParts.find((part) => part.type === 'month').value\n    const year = startParts.find((part) => part.type === 'year').value\n\n    dayEl.textContent = day\n    monthYearEl.textContent = `${month} ${year}`\n\n    // Format time (HH:MM AM/PM)\n    const timeOptions = {\n      timeZone: timezoneString,\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: true,\n    }\n    const timeFormatter = new Intl.DateTimeFormat('en-US', timeOptions)\n\n    // Format start and end times\n    const startTimeParts = timeFormatter.formatToParts(startDate)\n    const endTimeParts = timeFormatter.formatToParts(endDate)\n\n    // Extract hour, minute, and period (AM/PM)\n    const startHour = startTimeParts.find((part) => part.type === 'hour').value\n    const startMinute = startTimeParts.find(\n      (part) => part.type === 'minute'\n    ).value\n    const startPeriod = startTimeParts.find(\n      (part) => part.type === 'dayPeriod'\n    ).value\n    const endHour = endTimeParts.find((part) => part.type === 'hour').value\n    const endMinute = endTimeParts.find((part) => part.type === 'minute').value\n    const endPeriod = endTimeParts.find(\n      (part) => part.type === 'dayPeriod'\n    ).value\n\n    // Combine into \"HH:MMAM - HH:MMPM\" format\n    const timeRange = `${startHour}:${startMinute}${startPeriod} - ${endHour}:${endMinute}${endPeriod}`\n    timeEl.textContent = timeRange\n  })\n\n  window.FinsweetAttributes ||= []\n  window.FinsweetAttributes.push([\n    'list',\n    (listInstances) => {\n      const citiesMap = new Map()\n      listInstances[0].items.value.forEach((item, i) => {\n        if (item.element.dataset.delete === 'true') {\n          listInstances[0].items.value = listInstances[0].items.value.filter(\n            (item) => {\n              return item.element.dataset.delete !== 'true'\n            }\n          )\n          return\n        }\n        // Collect city values (trimmed)\n        if (item.fields && item.fields.hasOwnProperty('city')) {\n          const raw = String(item.fields.city.value || '').trim()\n          if (!raw) return\n          const key = raw.toLowerCase()\n          if (!citiesMap.has(key)) {\n            citiesMap.set(key, raw) // preserve original casing for display\n          }\n        }\n      })\n\n      // Get unique cities and sort A-Z\n      const uniqueSortedCities = Array.from(citiesMap.values()).sort((a, b) =>\n        a.localeCompare(b, undefined, { sensitivity: 'base' })\n      )\n      populateSelectCities(uniqueSortedCities)\n    },\n  ])\n\n  const populateSelectCities = (citiesArr) => {\n    const selectCities = document.querySelector('[data-events=\"select-cities\"]')\n    if (selectCities) {\n      citiesArr.forEach((city) => {\n        const option = document.createElement('option')\n        option.value = city\n        option.textContent = city\n        selectCities.appendChild(option)\n      })\n    }\n  }\n}\n\n//   function debounce(func, wait) {\n//     let timeout\n//     return function (...args) {\n//       clearTimeout(timeout)\n//       timeout = setTimeout(() => {\n//         func(...args)\n//       }, wait)\n//     }\n//   }\n\n//   let firstIteration = true;\n\n// Define the debounced callback ONCE outside the hook\n// const debouncedCallback = debounce(() => {\n// console.log('Last iteration:', listInstances[0].items.value)\n// listInstances[0].items.value[1].element.querySelector('[data-events=\"DD\"]').textContent = \"WOW 1\"\n// }, 300)\n\n// Add the pagination hook\n// listInstances[0].addHook('filter', (items) => {\n//   console.log('Pagination hook called, items:', items)\n//   if(firstIteration) {\n//     debouncedCallback(items)\n//   }\n\n//   firstIteration = false;\n// })\n"],"names":[],"mappings":"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"}