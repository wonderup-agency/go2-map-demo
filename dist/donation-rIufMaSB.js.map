{"version":3,"file":"donation-rIufMaSB.js","sources":["../node_modules/postcss/lib/list.js","../src/components/forms/donation.js"],"sourcesContent":["'use strict'\n\nlet list = {\n  comma(string) {\n    return list.split(string, [','], true)\n  },\n\n  space(string) {\n    let spaces = [' ', '\\n', '\\t']\n    return list.split(string, spaces)\n  },\n\n  split(string, separators, last) {\n    let array = []\n    let current = ''\n    let split = false\n\n    let func = 0\n    let inQuote = false\n    let prevQuote = ''\n    let escape = false\n\n    for (let letter of string) {\n      if (escape) {\n        escape = false\n      } else if (letter === '\\\\') {\n        escape = true\n      } else if (inQuote) {\n        if (letter === prevQuote) {\n          inQuote = false\n        }\n      } else if (letter === '\"' || letter === \"'\") {\n        inQuote = true\n        prevQuote = letter\n      } else if (letter === '(') {\n        func += 1\n      } else if (letter === ')') {\n        if (func > 0) func -= 1\n      } else if (func === 0) {\n        if (separators.includes(letter)) split = true\n      }\n\n      if (split) {\n        if (current !== '') array.push(current.trim())\n        current = ''\n        split = false\n      } else {\n        current += letter\n      }\n    }\n\n    if (last || current !== '') array.push(current.trim())\n    return array\n  }\n}\n\nmodule.exports = list\nlist.default = list\n","import { comma } from 'postcss/lib/list'\n\nconst FU_DEBUG = true\nfunction dlog(...args) {\n  if (!FU_DEBUG) return\n  console.log('[FU Donation]', ...args)\n}\n\nfunction parseAmount(value) {\n  if (value == null) return null\n  const str = String(value)\n  const num = Number(str.replace(/[^\\d]/g, ''))\n  return Number.isFinite(num) && num > 0 ? num : null\n}\n\nfunction isCollection(x) {\n  return x instanceof NodeList || x instanceof HTMLCollection || Array.isArray(x)\n}\n\nfunction resolveToElements(input) {\n  if (!input) return []\n\n  if (input?.el || input?.element) {\n    const el = input.el ?? input.element\n    return resolveToElements(el)\n  }\n\n  if (isCollection(input)) return Array.from(input)\n\n  return [input]\n}\n\nfunction initOne(form) {\n  if (!(form instanceof HTMLElement)) {\n    dlog('SKIP: not an HTMLElement', form)\n    return\n  }\n\n  const alreadyBound = form.dataset?.fuBound === 'true' || form.getAttribute('data-fu-bound') === 'true'\n  if (alreadyBound) {\n    dlog('SKIP: already bound', form)\n    return\n  }\n\n  if (form.dataset) form.dataset.fuBound = 'true'\n  else form.setAttribute('data-fu-bound', 'true')\n\n  const campaignId = form.dataset?.campaignId ?? form.getAttribute('data-campaign-id') ?? 'FUNFTWMRGBN'\n\n  dlog('INIT form', { form, campaignId })\n\n  const amountRadios = form.querySelectorAll('input[name=\"donation-amount\"][type=\"radio\"]')\n  if (amountRadios.length > 0 && !Array.from(amountRadios).some((r) => r.checked)) {\n    amountRadios[0].checked = true\n    dlog('auto-checked first amount radio', amountRadios[0].value)\n  }\n\n  const otherButton = form.querySelector(\"[data-donation-form='other']\")\n  dlog('otherButton', otherButton ? 'FOUND' : 'MISSING')\n\n  form.addEventListener('submit', (e) => {\n    dlog('SUBMIT fired', form)\n    e.preventDefault()\n\n    const formData = new FormData(form)\n    const recurring = formData.get('recurring') ?? 'once'\n\n    const rawAmount = formData.get('donation-amount') ?? formData.get('amount') ?? formData.get('donation_amount')\n\n    const parsed = parseAmount(rawAmount)\n    const amount = parsed ?? 25\n\n    dlog('submit payload', { campaignId, recurring, rawAmount, parsed, amount })\n\n    if (typeof FundraiseUp?.openCheckout !== 'function') {\n      dlog('ABORT: FundraiseUp.openCheckout not available', { FundraiseUp })\n      return\n    }\n\n    FundraiseUp.openCheckout(campaignId, {\n      donation: { recurring, amount },\n    })\n  })\n\n  if (otherButton) {\n    otherButton.addEventListener('click', (e) => {\n      dlog('OTHER click fired', form)\n      e.preventDefault()\n\n      const formData = new FormData(form)\n      const recurring = formData.get('recurring') ?? 'once'\n\n      dlog('other payload', { campaignId, recurring })\n\n      if (typeof FundraiseUp?.openCheckout !== 'function') {\n        dlog('ABORT: FundraiseUp.openCheckout not available', { FundraiseUp })\n        return\n      }\n\n      FundraiseUp.openCheckout(campaignId, {\n        donation: { recurring },\n      })\n    })\n  }\n}\n\n/**\n * @param {HTMLElement|NodeList|HTMLCollection|Array|{el?:HTMLElement|NodeList, element?:HTMLElement|NodeList}} input\n */\nexport default function (input) {\n  dlog('init called with:', input)\n\n  const elements = resolveToElements(input)\n  dlog('resolved elements count:', elements.length, elements)\n\n  elements.forEach(initOne)\n}\n"],"names":[],"mappings":"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","x_google_ignoreList":[0]}