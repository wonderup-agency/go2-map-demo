{"version":3,"file":"mind-over-matter-B092R60D.js","sources":["../src/components/forms/mind-over-matter.js"],"sourcesContent":["import {\n  serializeInputs,\n  clearStepsErrors,\n  appendStepsErrors,\n  setButtonLoading,\n  resetButton,\n  hideFail,\n  showFail,\n  showSuccess,\n  hideForm,\n  setupOtherFieldForCheckbox,\n  setupOtherFieldForSelect,\n} from '../../utils/functions'\n\nimport validator from 'validator'\n\n/**\n * Handles form submission for a multi-step form component.\n * @param {HTMLElement} component - The form component containing steps and inputs.\n */\nexport default function (component) {\n  const formInstances = component.forEach ? component : [component]\n\n  formInstances.forEach((formInstance) => {\n    const webhookAddress = formInstance.dataset.webhook || 'https://hook.us2.make.com/ax5pllsfmf5zl2lwfprq5og2locrkmyi'\n\n    const successEl = formInstance.querySelector('.w-form-done')\n    const failEl = formInstance.querySelector('.w-form-fail')\n    const formEl = formInstance.querySelector('form')\n\n    setupOtherFieldForSelect({\n      context: formInstance,\n      selectId: 'connection-to-lung-cancer',\n      otherValue: 'other-connection',\n      fieldName: 'other-connection-to-cancer',\n      labelName: 'Specify other connection',\n      placeholder: 'Specify your connection to lung cancer',\n      wrapperClass: 'multi-form14_field-wrapper',\n    })\n    setupOtherFieldForSelect({\n      context: formInstance,\n      selectId: 'hear-about-mom',\n      otherValue: 'other-way',\n      fieldName: 'hear-about-mom-other',\n      labelName: 'How did you hear about GO2',\n      placeholder: 'Specify how did you hear about GO2',\n      wrapperClass: 'multi-form14_field-wrapper',\n    })\n\n    formInstance.addEventListener('click', async (e) => {\n      const target = e.target\n      const submitBtn = target.closest('[data-form=\"submit-btn\"]')\n      const buttonText = target.closest('.button_text')\n\n      // SUBMIT BUTTON HANDLER\n      if (submitBtn || (buttonText && submitBtn)) {\n        e.preventDefault()\n        e.stopImmediatePropagation()\n\n        // Hide fail element on button press (validations will rerun)\n        hideFail(failEl)\n\n        const submitInputsData = await serializeInputs(formEl)\n\n        // Log serialized data for debugging\n        console.log('Submit button - Serialized submit data:', submitInputsData)\n\n        const errors = []\n\n        // Submit step validations\n        if (validator.isEmpty(submitInputsData['full-name'] || '')) {\n          errors.push({\n            fieldName: 'full-name',\n            error: 'Enter your full name.',\n            appendAt: '.multi-form14_field-wrapper',\n          })\n        }\n        if (!validator.isEmail(submitInputsData['email'] || '')) {\n          errors.push({\n            fieldName: 'email',\n            error: 'Enter a valid email address (example: name@email.com)',\n            appendAt: '.multi-form14_field-wrapper',\n          })\n        }\n        const phone = submitInputsData['phone'] || ''\n        if (!validator.isMobilePhone(phone, 'any')) {\n          errors.push({\n            fieldName: 'phone',\n            error: 'Enter a valid phone number (digits only, include area code)',\n            appendAt: '.multi-form14_field-wrapper',\n          })\n        }\n        if (!validator.isPostalCode(String(submitInputsData?.['zip-code'] || ''), 'any')) {\n          errors.push({\n            fieldName: 'zip-code',\n            error: 'Enter a valid ZIP or postal code',\n            appendAt: '.multi-form14_field-wrapper',\n          })\n        }\n        if (\n          'other-connection-to-cancer' in submitInputsData &&\n          validator.isEmpty(submitInputsData['other-connection-to-cancer'] || '')\n        ) {\n          errors.push({\n            fieldName: 'other-connection-to-cancer',\n            error: 'Tell us your connection to lung cancer',\n            appendAt: '.multi-form14_field-wrapper',\n          })\n        }\n        if (\n          'hear-about-mom-other' in submitInputsData &&\n          validator.isEmpty(submitInputsData['hear-about-mom-other'] || '')\n        ) {\n          errors.push({\n            fieldName: 'hear-about-mom-other',\n            error: 'Tell us how you heard about GO2',\n            appendAt: '.multi-form14_field-wrapper',\n          })\n        }\n\n        // Clear any existing errors\n        clearStepsErrors(formEl)\n\n        // If there are errors, append them and stop\n        if (errors.length > 0) {\n          appendStepsErrors(errors)\n          return\n        }\n\n        // Set loading state\n        const submitBtnTextEl = submitBtn.querySelector('.button_text') || submitBtn.firstChild\n        const submitBtnInitialText = submitBtnTextEl?.textContent || 'Submit'\n        setButtonLoading(submitBtn)\n\n        fetch(webhookAddress, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(submitInputsData),\n        })\n          .then((response) => {\n            if (!response.ok) throw new Error('Submission failed')\n            return response.json()\n          })\n          .then((data) => {\n            hideForm(formEl)\n            showSuccess(successEl)\n          })\n          .catch((error) => {\n            console.error('Submit fetch error:', error)\n            showFail(failEl)\n          })\n          .finally(() => {\n            resetButton(submitBtn, submitBtnInitialText)\n          })\n      }\n    })\n  })\n}\n"],"names":[],"mappings":";;;AAgBA;AACA;AACA;AACA;AACe,uBAAQ,EAAE,SAAS,EAAE;AACpC,EAAE,MAAM,aAAa,GAAG,SAAS,CAAC,OAAO,GAAG,SAAS,GAAG,CAAC,SAAS;;AAElE,EAAE,aAAa,CAAC,OAAO,CAAC,CAAC,YAAY,KAAK;AAC1C,IAAI,MAAM,cAAc,GAAG,YAAY,CAAC,OAAO,CAAC,OAAO,IAAI;;AAE3D,IAAI,MAAM,SAAS,GAAG,YAAY,CAAC,aAAa,CAAC,cAAc;AAC/D,IAAI,MAAM,MAAM,GAAG,YAAY,CAAC,aAAa,CAAC,cAAc;AAC5D,IAAI,MAAM,MAAM,GAAG,YAAY,CAAC,aAAa,CAAC,MAAM;;AAEpD,IAAI,wBAAwB,CAAC;AAC7B,MAAM,OAAO,EAAE,YAAY;AAC3B,MAAM,QAAQ,EAAE,2BAA2B;AAC3C,MAAM,UAAU,EAAE,kBAAkB;AACpC,MAAM,SAAS,EAAE,4BAA4B;AAC7C,MAAM,SAAS,EAAE,0BAA0B;AAC3C,MAAM,WAAW,EAAE,wCAEf,CAAC;AACL,IAAI,wBAAwB,CAAC;AAC7B,MAAM,OAAO,EAAE,YAAY;AAC3B,MAAM,QAAQ,EAAE,gBAAgB;AAChC,MAAM,UAAU,EAAE,WAAW;AAC7B,MAAM,SAAS,EAAE,sBAAsB;AACvC,MAAM,SAAS,EAAE,4BAA4B;AAC7C,MAAM,WAAW,EAAE,oCAEf,CAAC;;AAEL,IAAI,YAAY,CAAC,gBAAgB,CAAC,OAAO,EAAE,OAAO,CAAC,KAAK;AACxD,MAAM,MAAM,MAAM,GAAG,CAAC,CAAC;AACvB,MAAM,MAAM,SAAS,GAAG,MAAM,CAAC,OAAO,CAAC,0BAA0B;AACjE,MAAM,MAAM,UAAU,GAAG,MAAM,CAAC,OAAO,CAAC,cAAc;;AAEtD;AACA,MAAM,IAAI,SAAS,KAAK,UAAU,IAAI,SAAS,CAAC,EAAE;AAClD,QAAQ,CAAC,CAAC,cAAc;AACxB,QAAQ,CAAC,CAAC,wBAAwB;;AAElC;AACA,QAAQ,QAAQ,CAAC,MAAM;;AAEvB,QAAQ,MAAM,gBAAgB,GAAG,MAAM,eAAe,CAAC,MAAM;;AAE7D;AACA,QAAQ,OAAO,CAAC,GAAG,CAAC,yCAAyC,EAAE,gBAAgB;;AAE/E,QAAQ,MAAM,MAAM,GAAG;;AAEvB;AACA,QAAQ,IAAI,SAAS,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,EAAE;AACpE,UAAU,MAAM,CAAC,IAAI,CAAC;AACtB,YAAY,SAAS,EAAE,WAAW;AAClC,YAAY,KAAK,EAAE,uBAAuB;AAC1C,YAAY,QAAQ,EAAE,6BAA6B;AACnD,WAAW;AACX,QAAQ;AACR,QAAQ,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,gBAAgB,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,EAAE;AACjE,UAAU,MAAM,CAAC,IAAI,CAAC;AACtB,YAAY,SAAS,EAAE,OAAO;AAC9B,YAAY,KAAK,EAAE,uDAAuD;AAC1E,YAAY,QAAQ,EAAE,6BAA6B;AACnD,WAAW;AACX,QAAQ;AACR,QAAQ,MAAM,KAAK,GAAG,gBAAgB,CAAC,OAAO,CAAC,IAAI;AACnD,QAAQ,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE;AACpD,UAAU,MAAM,CAAC,IAAI,CAAC;AACtB,YAAY,SAAS,EAAE,OAAO;AAC9B,YAAY,KAAK,EAAE,6DAA6D;AAChF,YAAY,QAAQ,EAAE,6BAA6B;AACnD,WAAW;AACX,QAAQ;AACR,QAAQ,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,MAAM,CAAC,gBAAgB,GAAG,UAAU,CAAC,IAAI,EAAE,CAAC,EAAE,KAAK,CAAC,EAAE;AAC1F,UAAU,MAAM,CAAC,IAAI,CAAC;AACtB,YAAY,SAAS,EAAE,UAAU;AACjC,YAAY,KAAK,EAAE,kCAAkC;AACrD,YAAY,QAAQ,EAAE,6BAA6B;AACnD,WAAW;AACX,QAAQ;AACR,QAAQ;AACR,UAAU,4BAA4B,IAAI,gBAAgB;AAC1D,UAAU,SAAS,CAAC,OAAO,CAAC,gBAAgB,CAAC,4BAA4B,CAAC,IAAI,EAAE;AAChF,UAAU;AACV,UAAU,MAAM,CAAC,IAAI,CAAC;AACtB,YAAY,SAAS,EAAE,4BAA4B;AACnD,YAAY,KAAK,EAAE,wCAAwC;AAC3D,YAAY,QAAQ,EAAE,6BAA6B;AACnD,WAAW;AACX,QAAQ;AACR,QAAQ;AACR,UAAU,sBAAsB,IAAI,gBAAgB;AACpD,UAAU,SAAS,CAAC,OAAO,CAAC,gBAAgB,CAAC,sBAAsB,CAAC,IAAI,EAAE;AAC1E,UAAU;AACV,UAAU,MAAM,CAAC,IAAI,CAAC;AACtB,YAAY,SAAS,EAAE,sBAAsB;AAC7C,YAAY,KAAK,EAAE,iCAAiC;AACpD,YAAY,QAAQ,EAAE,6BAA6B;AACnD,WAAW;AACX,QAAQ;;AAER;AACA,QAAQ,gBAAgB,CAAO;;AAE/B;AACA,QAAQ,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;AAC/B,UAAU,iBAAiB,CAAC,MAAM;AAClC,UAAU;AACV,QAAQ;;AAER;AACA,QAAQ,MAAM,eAAe,GAAG,SAAS,CAAC,aAAa,CAAC,cAAc,CAAC,IAAI,SAAS,CAAC;AACrF,QAAQ,MAAM,oBAAoB,GAAG,eAAe,EAAE,WAAW,IAAI;AACrE,QAAQ,gBAAgB,CAAC,SAAS;;AAElC,QAAQ,KAAK,CAAC,cAAc,EAAE;AAC9B,UAAU,MAAM,EAAE,MAAM;AACxB,UAAU,OAAO,EAAE,EAAE,cAAc,EAAE,kBAAkB,EAAE;AACzD,UAAU,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC;AAChD,SAAS;AACT,WAAW,IAAI,CAAC,CAAC,QAAQ,KAAK;AAC9B,YAAY,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE,MAAM,IAAI,KAAK,CAAC,mBAAmB;AACjE,YAAY,OAAO,QAAQ,CAAC,IAAI;AAChC,UAAU,CAAC;AACX,WAAW,IAAI,CAAC,CAAC,IAAI,KAAK;AAC1B,YAAY,QAAQ,CAAC,MAAM;AAC3B,YAAY,WAAW,CAAC,SAAS;AACjC,UAAU,CAAC;AACX,WAAW,KAAK,CAAC,CAAC,KAAK,KAAK;AAC5B,YAAY,OAAO,CAAC,KAAK,CAAC,qBAAqB,EAAE,KAAK;AACtD,YAAY,QAAQ,CAAC,MAAM;AAC3B,UAAU,CAAC;AACX,WAAW,OAAO,CAAC,MAAM;AACzB,YAAY,WAAW,CAAC,SAAS,EAAE,oBAAoB;AACvD,UAAU,CAAC;AACX,MAAM;AACN,IAAI,CAAC;AACL,EAAE,CAAC;AACH;;;;"}