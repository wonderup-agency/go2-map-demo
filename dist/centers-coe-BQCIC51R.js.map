{"version":3,"file":"centers-coe-BQCIC51R.js","sources":["../src/components/centers-coe.js"],"sourcesContent":["// centers-coe.js\n//\n// This component fetches facility data from an API, then draws pins on a\n// Google Map and renders a scrollable list of centers next to it.\n// Users can filter centers by typing a zip code and/or selecting designation\n// type checkboxes (e.g. Screening, Cancer Care, etc.).\n\nimport { setOptions, importLibrary } from '@googlemaps/js-api-loader'\nimport { MarkerClusterer, SuperClusterAlgorithm } from '@googlemaps/markerclusterer'\n\n// =============================================================================\n// SETTINGS — edit these values to configure the map\n// =============================================================================\n\n// Where to fetch the list of facilities from\nvar API_URL = 'https://go2-worker.nahuel-eba.workers.dev/centers'\n\n// Where to fetch the list of available designation types from\nvar DESIGNATIONS_URL = 'https://go2-worker.nahuel-eba.workers.dev/centers/designations'\n\n// Google Maps API key\nvar GOOGLE_MAPS_API_KEY = 'AIzaSyDzjnzJImLe2q2uc8ziZYmQVPrI9TDukww'\n\n// Where the map is centered when it first loads (lat/lng of central US)\nvar STARTING_LAT = 37.5\nvar STARTING_LNG = -95.7\n\n// How far zoomed in/out the map starts (lower = more zoomed out)\nvar STARTING_ZOOM = 4\n\n// How far to zoom in when a user clicks on a center\nvar CLICK_ZOOM = 14\n\n// How close pins need to be (in pixels) before they merge into a cluster\nvar CLUSTER_RADIUS = 60\n\n// -----------------------------------------------------------------------------\n// PIN IMAGES — each pin type has its own image, size, and anchor point.\n//\n// \"size\" is [width, height] in pixels — how big the pin appears on the map.\n// \"anchor\" is [x, y] — which pixel of the image sits on the exact map\n// coordinate. For a typical pin shape, use [width/2, height] so the bottom\n// center of the image touches the location.\n// -----------------------------------------------------------------------------\n\nvar COE_PIN = {\n  imageUrl: 'https://cdn.prod.website-files.com/685abc7fe66bf3b67a6af38e/699cc04ab55333725658f5c0_pin-coe.png',\n  size: [52, 52],\n  anchor: [26, 52],\n}\n\nvar NCI_PIN = {\n  imageUrl: 'https://cdn.prod.website-files.com/685abc7fe66bf3b67a6af38e/699cbe556ade1b088be0322b_pin-nci.png',\n  size: [32, 32],\n  anchor: [16, 32],\n}\n\nvar COC_PIN = {\n  imageUrl: 'https://cdn.prod.website-files.com/685abc7fe66bf3b67a6af38e/699cbe5541e827aa53093410_pin-coc.png',\n  size: [32, 32],\n  anchor: [16, 32],\n}\n\n// -----------------------------------------------------------------------------\n// DESIGNATION LABELS — human-readable names for the designation types\n// that come from the API (e.g. \"cancer_care\" becomes \"Cancer Care\").\n// Add new entries here if the API adds new types in the future.\n// -----------------------------------------------------------------------------\n\nvar DESIGNATION_LABELS = {\n  screening: 'Screening',\n  cancer_care: 'Cancer Care',\n  ipn: 'IPN',\n  biomarker: 'Biomarker',\n}\n\n// Fallback: if a type isn't in the list above, capitalize it and replace underscores\nfunction getDesignationLabel(type) {\n  if (DESIGNATION_LABELS[type]) {\n    return DESIGNATION_LABELS[type]\n  }\n  // \"some_new_type\" → \"Some new type\"\n  var words = type.replace(/_/g, ' ')\n  return words.charAt(0).toUpperCase() + words.slice(1)\n}\n\n// =============================================================================\n// HELPER FUNCTIONS\n// =============================================================================\n\n/**\n * Takes a pin config (like COE_PIN) and turns it into a Google Maps icon object.\n * Google Maps needs icons in a specific format — this does that conversion.\n */\nfunction createGoogleMapsIcon(pinConfig) {\n  return {\n    url: pinConfig.imageUrl,\n    scaledSize: new google.maps.Size(pinConfig.size[0], pinConfig.size[1]),\n    anchor: new google.maps.Point(pinConfig.anchor[0], pinConfig.anchor[1]),\n  }\n}\n\n/**\n * Creates the SVG bubble shown when multiple pins are clustered together.\n * It's a white circle with a blue border and the count number inside.\n */\nfunction createClusterIcon(count) {\n  // Make the bubble bigger when the number has more digits\n  var numberOfDigits = String(count).length\n  var bubbleSize = 36\n  if (numberOfDigits === 2) bubbleSize = 40\n  if (numberOfDigits > 2) bubbleSize = 48\n\n  var center = bubbleSize / 2\n  var radius = center - 2\n\n  var svg =\n    '<svg xmlns=\"http://www.w3.org/2000/svg\"' +\n    ' width=\"' +\n    bubbleSize +\n    '\"' +\n    ' height=\"' +\n    bubbleSize +\n    '\"' +\n    ' viewBox=\"0 0 ' +\n    bubbleSize +\n    ' ' +\n    bubbleSize +\n    '\">' +\n    '<circle cx=\"' +\n    center +\n    '\" cy=\"' +\n    center +\n    '\" r=\"' +\n    radius +\n    '\"' +\n    ' fill=\"#ffffff\" stroke=\"#2c3495\" stroke-width=\"3\"/>' +\n    '<text x=\"' +\n    center +\n    '\" y=\"' +\n    center +\n    '\"' +\n    ' text-anchor=\"middle\" dominant-baseline=\"central\"' +\n    ' fill=\"#2c3495\" font-family=\"Arial,Helvetica,sans-serif\"' +\n    ' font-weight=\"800\" font-size=\"14\">' +\n    count +\n    '</text>' +\n    '</svg>'\n\n  return {\n    url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(svg),\n    scaledSize: new google.maps.Size(bubbleSize, bubbleSize),\n    anchor: new google.maps.Point(center, center),\n  }\n}\n\n/**\n * Builds the HTML that appears in the popup when you click a pin on the map.\n */\nfunction buildInfoWindowHTML(pin) {\n  var html = '<div style=\"max-width:240px;font-family:Arial,sans-serif;\">'\n\n  // Center name\n  html += '<strong style=\"font-size:14px;\">' + pin.name + '</strong>'\n\n  // Address\n  html += '<div style=\"font-size:13px;color:#444;margin:6px 0;\">' + pin.address + '</div>'\n\n  // Photo (if available)\n  if (pin.imageUrl) {\n    html +=\n      '<img src=\"' +\n      pin.imageUrl +\n      '\"' +\n      ' alt=\"' +\n      pin.name +\n      '\"' +\n      ' style=\"width:100%;border-radius:4px;margin-bottom:6px;\" />'\n  }\n\n  // Phone number (if available)\n  if (pin.phone) {\n    html += '<div><a href=\"tel:' + pin.phone + '\" style=\"font-size:13px;\">' + pin.phone + '</a></div>'\n  }\n\n  // Directions link\n  var directionsUrl =\n    'https://www.google.com/maps/dir/?api=1' + '&destination=' + pin.lat + ',' + pin.lng + '&travelmode=driving'\n\n  html +=\n    '<div style=\"margin-top:4px;\">' +\n    '<a href=\"' +\n    directionsUrl +\n    '\" target=\"_blank\" rel=\"noopener\" style=\"font-size:13px;\">' +\n    'Get Directions</a></div>'\n\n  html += '</div>'\n  return html\n}\n\n/**\n * Takes the raw facility data from the API and turns each facility into a\n * simpler \"pin\" object with just the fields we need for the map and list.\n *\n * Some facilities have \"override addresses\" on their designations — for\n * example, a screening program at a different building. When an override\n * address exists, we use that location instead of the facility's main address.\n * This can result in one facility having multiple pins at different spots.\n *\n * Each pin also gets a \"designationTypes\" array (e.g. [\"screening\", \"cancer_care\"])\n * so we can filter by designation type later.\n */\nfunction turnFacilitiesIntoPins(facilities) {\n  var allPins = []\n\n  for (var i = 0; i < facilities.length; i++) {\n    var facility = facilities[i]\n\n    // Skip facilities that have no designations at all\n    if (!facility.designations || facility.designations.length === 0) {\n      continue\n    }\n\n    // Collect ALL designation types this facility has (e.g. [\"screening\", \"cancer_care\"])\n    var facilityDesignationTypes = []\n    for (var d = 0; d < facility.designations.length; d++) {\n      var desType = facility.designations[d].type\n      if (desType && facilityDesignationTypes.indexOf(desType) === -1) {\n        facilityDesignationTypes.push(desType)\n      }\n    }\n\n    // We use this to avoid placing two pins at the exact same spot for one facility.\n    // The key is \"lat,lng\" and the value is the location info.\n    var uniqueLocations = {}\n\n    for (var j = 0; j < facility.designations.length; j++) {\n      var designation = facility.designations[j]\n\n      // Check if this designation has an override address with valid coordinates\n      var hasOverride =\n        designation.overrides &&\n        designation.overrides.address &&\n        designation.overrides.address.latitude != null &&\n        designation.overrides.address.longitude != null\n\n      var lat, lng, address, phone, website\n\n      if (hasOverride) {\n        // Use the override address (different building/location)\n        var overrideAddr = designation.overrides.address\n        lat = parseFloat(overrideAddr.latitude)\n        lng = parseFloat(overrideAddr.longitude)\n\n        // Build a readable address string from the override parts\n        var overrideParts = [\n          overrideAddr.line1,\n          overrideAddr.line2,\n          overrideAddr.city,\n          overrideAddr.state,\n          overrideAddr.zip,\n        ]\n        address = overrideParts.filter(Boolean).join(', ')\n\n        phone = designation.overrides.phone || facility.phone\n        website = designation.overrides.url || facility.website\n      } else {\n        // Use the facility's main address\n        lat = parseFloat(facility.latitude)\n        lng = parseFloat(facility.longitude)\n\n        var mainAddr = facility.address || {}\n        var mainParts = [mainAddr.line1, mainAddr.line2, mainAddr.city, mainAddr.state, mainAddr.zip]\n        address = mainParts.filter(Boolean).join(', ')\n\n        phone = facility.phone\n        website = facility.website\n      }\n\n      // Skip if the coordinates are not valid numbers\n      if (isNaN(lat) || isNaN(lng)) {\n        continue\n      }\n\n      // Only keep the first location we find at each lat/lng\n      var locationKey = lat + ',' + lng\n      if (!uniqueLocations[locationKey]) {\n        uniqueLocations[locationKey] = {\n          lat: lat,\n          lng: lng,\n          address: address,\n          phone: phone,\n          website: website,\n        }\n      }\n    }\n\n    // Create a pin for each unique location of this facility\n    var facilityAddr = facility.address || {}\n    var locationKeys = Object.keys(uniqueLocations)\n\n    for (var k = 0; k < locationKeys.length; k++) {\n      var location = uniqueLocations[locationKeys[k]]\n\n      allPins.push({\n        fid: facility.fid,\n        name: facility.name,\n        lat: location.lat,\n        lng: location.lng,\n        address: location.address,\n        phone: location.phone,\n        website: location.website,\n        imageUrl: facility.image_url,\n        zip: facilityAddr.zip || '',\n        city: facilityAddr.city || '',\n        state: facilityAddr.state || '',\n        designationTypes: facilityDesignationTypes,\n      })\n    }\n  }\n\n  return allPins\n}\n\n// =============================================================================\n// MAIN — this function runs when the component loads on the page\n// =============================================================================\n\nexport default async function (component) {\n  console.log('[COE] Component initializing...')\n\n  // --------------------------------------------------------------------------\n  // 1. FIND THE HTML ELEMENTS WE NEED\n  // --------------------------------------------------------------------------\n\n  // The scrollable list of centers next to the map\n  var centersList = component.querySelector(\"[data-centers='list']\")\n\n  // The div where the Google Map will be rendered\n  var mapContainer = component.querySelector(\"[data-centers='map']\")\n\n  // The zip code text input for filtering\n  var zipInput = component.querySelector(\"[data-custom='centers-zip-field']\")\n\n  // The dropdown nav that holds the designation checkboxes\n  // (In Webflow this is the <nav> inside the \"Designations\" dropdown)\n  var checkboxContainer = component.querySelector('.map_filters-right-category-nav')\n\n  // Clone the list item template (we'll reuse this to create each list entry)\n  var listItemTemplate = document.querySelector('[data-centers=\"list-item\"]').cloneNode(true)\n\n  // Check if this instance should only show screening centers.\n  // Set data-show-only-screening=\"true\" on the component element in Webflow\n  // to lock this map to screening-only mode (hides the designation checkboxes).\n  var showOnlyScreening = component.getAttribute('data-show-only-screening') === 'true'\n\n  console.log('[COE] DOM elements found:', {\n    centersList: !!centersList,\n    mapContainer: !!mapContainer,\n    zipInput: !!zipInput,\n    checkboxContainer: !!checkboxContainer,\n    listItemTemplate: !!listItemTemplate,\n  })\n  console.log('[COE] Mode:', showOnlyScreening ? 'SCREENING-ONLY' : 'NORMAL (all designations)')\n\n  // Show a loading message while data is being fetched\n  centersList.innerHTML = '<p style=\"padding:1rem;color:#666;\">Loading centers...</p>'\n\n  // --------------------------------------------------------------------------\n  // 2. LOAD THE GOOGLE MAPS LIBRARY\n  // --------------------------------------------------------------------------\n\n  try {\n    setOptions({ key: GOOGLE_MAPS_API_KEY, v: 'weekly' })\n    await importLibrary('maps')\n    await importLibrary('marker')\n    console.log('[COE] Google Maps loaded successfully')\n  } catch (error) {\n    console.error('Google Maps failed to load:', error)\n    mapContainer.innerHTML =\n      '<p style=\"padding:1rem;color:red;\">Failed to load Google Maps. Please try again later.</p>'\n    return\n  }\n\n  // --------------------------------------------------------------------------\n  // 3. CREATE THE MAP\n  // --------------------------------------------------------------------------\n\n  var map = new google.maps.Map(mapContainer, {\n    center: { lat: STARTING_LAT, lng: STARTING_LNG },\n    zoom: STARTING_ZOOM,\n  })\n\n  // --------------------------------------------------------------------------\n  // 4. PREPARE THE PIN ICONS\n  //    Convert our simple pin configs into the format Google Maps expects.\n  // --------------------------------------------------------------------------\n\n  var coeIcon = createGoogleMapsIcon(COE_PIN)\n  var nciIcon = createGoogleMapsIcon(NCI_PIN)\n  var cocIcon = createGoogleMapsIcon(COC_PIN)\n\n  // This is the icon used for all markers right now.\n  // TODO: assign the correct icon per facility once the logic is defined.\n  var defaultIcon = coeIcon\n\n  // --------------------------------------------------------------------------\n  // 5. CREATE A SHARED INFO WINDOW\n  //    Only one popup can be open at a time — Google Maps reuses this one.\n  // --------------------------------------------------------------------------\n\n  var infoWindow = new google.maps.InfoWindow()\n\n  // --------------------------------------------------------------------------\n  // 6. FETCH DATA — facilities and designations at the same time\n  // --------------------------------------------------------------------------\n\n  var allFacilities = []\n  var designationTypes = [] // e.g. [\"screening\", \"cancer_care\", \"ipn\", \"biomarker\"]\n\n  try {\n    // Fetch both endpoints at the same time for speed\n    var facilitiesPromise = fetch(API_URL)\n    var designationsPromise = fetch(DESIGNATIONS_URL)\n\n    // Wait for the facilities response\n    var facilitiesResponse = await facilitiesPromise\n    if (!facilitiesResponse.ok) {\n      throw new Error('Facilities HTTP ' + facilitiesResponse.status)\n    }\n    var facilitiesData = await facilitiesResponse.json()\n    allFacilities = facilitiesData.facilities || []\n    console.log('[COE] Facilities fetched:', allFacilities.length, 'facilities')\n\n    // Wait for the designations response\n    var designationsResponse = await designationsPromise\n    if (!designationsResponse.ok) {\n      throw new Error('Designations HTTP ' + designationsResponse.status)\n    }\n    var designationsData = await designationsResponse.json()\n\n    // Extract just the type names: [\"screening\", \"cancer_care\", \"ipn\", \"biomarker\"]\n    if (designationsData.types && designationsData.types.length > 0) {\n      for (var i = 0; i < designationsData.types.length; i++) {\n        designationTypes.push(designationsData.types[i].type)\n      }\n    }\n    console.log('[COE] Designation types from API:', designationTypes)\n  } catch (error) {\n    console.error('Error fetching data:', error)\n    centersList.innerHTML = '<p style=\"padding:1rem;color:red;\">Failed to load centers. Please try again later.</p>'\n    return\n  }\n\n  // --------------------------------------------------------------------------\n  // 7. POPULATE THE DESIGNATION CHECKBOXES\n  //    Replace the placeholder checkboxes from Webflow with real ones\n  //    based on the designation types returned by the API.\n  //    If screening-only mode is on, remove the entire checkbox filter instead.\n  // --------------------------------------------------------------------------\n\n  if (showOnlyScreening) {\n    // In screening-only mode, remove the checkbox filter wrapper from the page\n    // entirely so the user can't toggle designation types.\n    var checkboxFilterWrapper = checkboxContainer.closest('.map_filters-right')\n    console.log('[COE] Screening-only mode — removing checkbox wrapper:', !!checkboxFilterWrapper)\n    if (checkboxFilterWrapper) {\n      checkboxFilterWrapper.remove()\n    }\n  } else {\n    // Normal mode — populate the checkboxes from the API\n\n    // Clear the placeholder checkboxes that were in the Webflow template\n    checkboxContainer.innerHTML = ''\n\n    for (var i = 0; i < designationTypes.length; i++) {\n      var type = designationTypes[i] // e.g. \"cancer_care\"\n      var label = getDesignationLabel(type) // e.g. \"Cancer Care\"\n\n      // Build the checkbox wrapper (same HTML structure as the Webflow template)\n      var wrapper = document.createElement('div')\n      wrapper.className = 'multi-step_checkbox-wrapper'\n\n      var checkbox = document.createElement('input')\n      checkbox.type = 'checkbox'\n      checkbox.name = 'designations'\n      checkbox.id = 'designation-' + type // e.g. \"designation-screening\"\n      checkbox.value = type // e.g. \"screening\"\n      checkbox.className = 'multi-step_checkbox_icon'\n\n      var labelEl = document.createElement('label')\n      labelEl.htmlFor = checkbox.id\n      labelEl.className = 'form_field-label'\n      labelEl.textContent = label\n\n      wrapper.appendChild(checkbox)\n      wrapper.appendChild(labelEl)\n      checkboxContainer.appendChild(wrapper)\n\n      // Re-render the map and list whenever a checkbox is toggled\n      checkbox.addEventListener('change', applyAllFilters)\n    }\n    console.log('[COE] Checkboxes created for:', designationTypes)\n  }\n\n  // --------------------------------------------------------------------------\n  // 8. TRANSFORM THE RAW DATA INTO PIN RECORDS\n  // --------------------------------------------------------------------------\n\n  var allPins = turnFacilitiesIntoPins(allFacilities)\n  console.log('[COE] Pins created from facilities:', allPins.length, 'pins')\n\n  // If screening-only mode is on, keep only pins that have a \"screening\" designation\n  if (showOnlyScreening) {\n    var screeningOnly = []\n    for (var i = 0; i < allPins.length; i++) {\n      if (allPins[i].designationTypes.indexOf('screening') !== -1) {\n        screeningOnly.push(allPins[i])\n      }\n    }\n    allPins = screeningOnly\n    console.log('[COE] Screening-only filter applied:', allPins.length, 'pins remaining')\n  }\n\n  // --------------------------------------------------------------------------\n  // 9. STATE — these variables are updated every time we re-render\n  // --------------------------------------------------------------------------\n\n  var currentMarkers = [] // Google Maps marker objects currently on the map\n  var currentClusterer = null // the clustering engine that groups nearby markers\n\n  // --------------------------------------------------------------------------\n  // 10. RENDER FUNCTION — draws pins on the map and items in the list\n  //     Called on first load and every time the user changes a filter.\n  // --------------------------------------------------------------------------\n\n  function renderCenters(pinsToShow) {\n    console.log('[COE] Rendering', pinsToShow.length, 'centers')\n\n    // Clear the old list\n    centersList.innerHTML = ''\n\n    // Remove old clusters and markers from the map\n    if (currentClusterer) {\n      currentClusterer.clearMarkers()\n      currentClusterer = null\n    }\n    for (var i = 0; i < currentMarkers.length; i++) {\n      currentMarkers[i].setMap(null)\n    }\n    currentMarkers = []\n\n    // If there's nothing to show, display a message and stop\n    if (pinsToShow.length === 0) {\n      centersList.innerHTML = '<p style=\"padding:1rem;color:#666;\">No centers match your search.</p>'\n      return\n    }\n\n    // We'll use \"bounds\" to auto-zoom the map to fit all visible pins\n    var bounds = new google.maps.LatLngBounds()\n\n    for (var i = 0; i < pinsToShow.length; i++) {\n      var pin = pinsToShow[i]\n\n      // ── Create the list item ────────────────────────────────────────\n      var listItem = listItemTemplate.cloneNode(true)\n      listItem.dataset.id = pin.fid\n\n      // Set the list item icon to match the map pin image\n      var iconElement = listItem.querySelector('[data-center=\"icon\"]')\n      if (iconElement) {\n        iconElement.src = defaultIcon.url\n        iconElement.alt = 'Map pin'\n      }\n\n      var nameElement = listItem.querySelector('[data-custom=\"center-name\"]')\n      if (nameElement) nameElement.textContent = pin.name\n\n      var cityElement = listItem.querySelector('[data-custom=\"center-city\"]')\n      if (cityElement) cityElement.textContent = pin.city\n\n      var zipElement = listItem.querySelector('[data-custom=\"center-zip-code\"]')\n      if (zipElement) zipElement.textContent = pin.zip\n\n      var websiteLink = listItem.querySelector('[data-centers=\"where\"]')\n      if (websiteLink) {\n        if (pin.website) {\n          websiteLink.href = pin.website\n          // Show only the domain + TLD (e.g. \"example.com\" from \"https://www.example.com/path\")\n          try {\n            var hostname = new URL(pin.website).hostname // e.g. \"www.example.com\"\n            // Remove \"www.\" prefix if present\n            if (hostname.indexOf('www.') === 0) {\n              hostname = hostname.slice(4)\n            }\n            websiteLink.textContent = hostname\n          } catch (e) {\n            websiteLink.textContent = pin.website\n          }\n        } else {\n          // Remove the website link if this center doesn't have one\n          if (websiteLink.parentElement) {\n            websiteLink.parentElement.remove()\n          }\n        }\n      }\n\n      // Show the designation types in the \"Accreditations\" field\n      // e.g. \"Screening, Cancer Care\"\n      var accreditationsElement = listItem.querySelector('[data-custom=\"center-accreditations\"]')\n      if (accreditationsElement) {\n        var labels = []\n        for (var d = 0; d < pin.designationTypes.length; d++) {\n          labels.push(getDesignationLabel(pin.designationTypes[d]))\n        }\n        accreditationsElement.textContent = labels.join(', ')\n      }\n\n      // When a list item is clicked, zoom the map to that center and open its popup\n      listItem.addEventListener('click', createListItemClickHandler(pin))\n\n      centersList.appendChild(listItem)\n\n      // ── Create the map marker ───────────────────────────────────────\n      var position = { lat: pin.lat, lng: pin.lng }\n\n      var marker = new google.maps.Marker({\n        position: position,\n        icon: defaultIcon,\n        map: null, // the clusterer will add it to the map\n      })\n\n      // When a pin on the map is clicked, open its popup\n      marker.addListener('click', createMarkerClickHandler(marker, pin))\n\n      currentMarkers.push(marker)\n      bounds.extend(position)\n    }\n\n    // ── Set up clustering ───────────────────────────────────────────────\n    // This groups nearby pins into numbered bubbles when zoomed out\n    currentClusterer = new MarkerClusterer({\n      map: map,\n      markers: currentMarkers,\n      renderer: { render: renderCluster },\n      algorithm: new SuperClusterAlgorithm({ radius: CLUSTER_RADIUS }),\n    })\n\n    // ── Adjust the map view to show all pins ────────────────────────────\n    if (currentMarkers.length > 1) {\n      map.fitBounds(bounds)\n    } else if (currentMarkers.length === 1) {\n      map.setCenter(currentMarkers[0].getPosition())\n      map.setZoom(CLICK_ZOOM)\n    }\n  }\n\n  // --------------------------------------------------------------------------\n  // 11. CLICK HANDLERS\n  //     These are separate functions because creating functions inside a loop\n  //     can cause bugs where all items share the same variable values.\n  // --------------------------------------------------------------------------\n\n  function createListItemClickHandler(pin) {\n    return function () {\n      map.setCenter({ lat: pin.lat, lng: pin.lng })\n      map.setZoom(CLICK_ZOOM)\n\n      // Find the matching marker on the map and open its popup\n      for (var i = 0; i < currentMarkers.length; i++) {\n        var markerPosition = currentMarkers[i].getPosition()\n        if (markerPosition.lat() === pin.lat && markerPosition.lng() === pin.lng) {\n          infoWindow.setContent(buildInfoWindowHTML(pin))\n          infoWindow.open(map, currentMarkers[i])\n          break\n        }\n      }\n    }\n  }\n\n  function createMarkerClickHandler(marker, pin) {\n    return function () {\n      infoWindow.setContent(buildInfoWindowHTML(pin))\n      infoWindow.open(map, marker)\n    }\n  }\n\n  // --------------------------------------------------------------------------\n  // 12. CLUSTER RENDERER\n  //     This function is called by MarkerClusterer to draw each cluster bubble.\n  // --------------------------------------------------------------------------\n\n  function renderCluster(clusterData) {\n    var count = clusterData.count\n    var position = clusterData.position\n    var icon = createClusterIcon(count)\n    return new google.maps.Marker({\n      position: position,\n      icon: icon,\n      zIndex: 1000 + count,\n    })\n  }\n\n  // --------------------------------------------------------------------------\n  // 13. FILTER LOGIC\n  //     This single function handles BOTH the zip code filter AND the\n  //     designation checkbox filter. It runs whenever either one changes.\n  //     When no checkboxes are checked, all designation types are shown.\n  // --------------------------------------------------------------------------\n\n  function applyAllFilters() {\n    var filteredPins = allPins\n    console.log('[COE] Applying filters... (starting with', allPins.length, 'total pins)')\n\n    // ── Step 1: Filter by zip code ──────────────────────────────────────\n    var typedZip = zipInput.value.trim()\n\n    if (typedZip !== '') {\n      var zipMatches = []\n      for (var i = 0; i < filteredPins.length; i++) {\n        if (String(filteredPins[i].zip).startsWith(typedZip)) {\n          zipMatches.push(filteredPins[i])\n        }\n      }\n      filteredPins = zipMatches\n      console.log('[COE] Zip filter \"' + typedZip + '\":', filteredPins.length, 'matches')\n    }\n\n    // ── Step 2: Filter by designation checkboxes ────────────────────────\n    // In screening-only mode the checkboxes were removed, so skip this step.\n    if (showOnlyScreening) {\n      console.log('[COE] Designation filter skipped (screening-only mode)')\n    }\n\n    // Find which checkboxes are currently checked\n    var selectedTypes = []\n    if (!showOnlyScreening) {\n      var checkedBoxes = checkboxContainer.querySelectorAll('input[name=\"designations\"]:checked')\n      for (var i = 0; i < checkedBoxes.length; i++) {\n        selectedTypes.push(checkedBoxes[i].value)\n      }\n      console.log(\n        '[COE] Designation filter — checked types:',\n        selectedTypes.length > 0 ? selectedTypes : '(none — showing all)'\n      )\n    }\n\n    // Only filter if at least one checkbox is checked.\n    // If none are checked, we show everything (no designation filter).\n    if (selectedTypes.length > 0) {\n      var designationMatches = []\n      for (var i = 0; i < filteredPins.length; i++) {\n        var pin = filteredPins[i]\n\n        // Check if this pin has ANY of the selected designation types\n        var pinMatchesFilter = false\n        for (var j = 0; j < selectedTypes.length; j++) {\n          if (pin.designationTypes.indexOf(selectedTypes[j]) !== -1) {\n            pinMatchesFilter = true\n            break\n          }\n        }\n\n        if (pinMatchesFilter) {\n          designationMatches.push(pin)\n        }\n      }\n      filteredPins = designationMatches\n      console.log('[COE] Designation filter result:', filteredPins.length, 'matches')\n    }\n\n    // ── Step 3: Render the filtered results ─────────────────────────────\n    console.log('[COE] Final filtered count:', filteredPins.length, 'pins to render')\n    renderCenters(filteredPins)\n  }\n\n  // --------------------------------------------------------------------------\n  // 14. START EVERYTHING\n  // --------------------------------------------------------------------------\n\n  // Draw all centers on first load\n  console.log('[COE] Initial render with', allPins.length, 'total pins')\n  renderCenters(allPins)\n\n  // Re-render whenever the user types in the zip field\n  zipInput.addEventListener('input', applyAllFilters)\n\n  // (Checkbox listeners were already added in step 7 when we created them)\n\n  // Clean up: remove the template element from the page so it doesn't show\n  var templateElement = document.querySelector('[data-centers=\"list-item\"]')\n  if (templateElement) {\n    templateElement.remove()\n  }\n\n  console.log('[COE] Component ready!')\n}\n"],"names":[],"mappings":"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"}