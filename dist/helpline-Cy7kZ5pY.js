import{s as t}from"./functions-CHZiqRQA.js";function e(e){const i=e.dataset.webhook||"https://hook.us2.make.com/x3fm8t3nor5poc4ij7purslvicjo9sxr",s=e.querySelectorAll('[data-form="step"]'),a=e.querySelector('[data-helpline-form="ticket-id-field"]'),r=e.querySelector('[data-form="next-btn"]'),n=r.firstChild.textContent,o=e.querySelector('[data-form="submit-btn"]'),d=o.firstChild.textContent,l=e.querySelector(".w-form-done"),u=e.querySelector(".w-form-fail"),c=e.querySelector("form");a&&(a.disabled=!0,a.type="hidden"),r.addEventListener("click",e=>{if(!e.isTrusted)return;if(e.currentTarget.classList.contains("disabled"))return e.preventDefault(),void e.stopImmediatePropagation();e.preventDefault(),e.stopImmediatePropagation();const o=t(s[0]);r.disabled=!0,r.classList.add("disabled"),r.firstChild.textContent="Please wait...",fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(t=>{if(!t.ok)throw new Error("Submission failed");return t.json()}).then(t=>{a&&(a.value=t||"");const e=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});r.dispatchEvent(e),u.style.display="none",u.setAttribute("aria-hidden","true")}).catch(t=>{u&&(u.style.display="block",u.setAttribute("aria-hidden","false"),u.setAttribute("tabindex","-1"),setTimeout(()=>u.focus(),50))}).finally(()=>{r.disabled=!1,r.classList.remove("disabled"),r.firstChild.textContent=n})},!0),o.addEventListener("click",e=>{if(e.preventDefault(),e.stopImmediatePropagation(),a?.value){const e=t(s[1]);e["ticket-id"]=a.value,o.disabled=!0,o.classList.add("disabled"),o.firstChild.textContent="Please wait...",fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>{if(!t.ok)throw new Error("Submission failed");return t.json()}).then(t=>{c&&(c.style.display="none",c.setAttribute("aria-hidden","true")),u&&(u.style.display="none",u.setAttribute("aria-hidden","true")),l&&(l.style.display="block",l.setAttribute("aria-hidden","false"),l.setAttribute("tabindex","-1"),setTimeout(()=>l.focus(),50))}).catch(t=>{c&&c.setAttribute("aria-hidden","true"),l&&(l.style.display="none",l.setAttribute("aria-hidden","true")),u&&(u.style.display="block",u.setAttribute("aria-hidden","false"),u.setAttribute("tabindex","-1"),setTimeout(()=>u.focus(),50))}).finally(()=>{o.disabled=!1,o.classList.remove("disabled"),o.firstChild.textContent=d})}else alert("There was an error updating your information...")},!0)}export{e as default};
//# sourceMappingURL=helpline-Cy7kZ5pY.js.map
