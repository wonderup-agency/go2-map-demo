{"version":3,"file":"events-C4EHPYHp.js","sources":["../src/components/events.js"],"sourcesContent":["/**\n *\n * @param {HTMLElement} component\n */\nexport default async function (component) {\n  const eventsSource = component.querySelector('[data-events=\"source\"]')\n  const events = Array.from(eventsSource.querySelectorAll('[data-events=\"event-element\"]'))\n  const eventsList = component.querySelector('[data-events=\"list\"]')\n  const eventTemplate = component.querySelector('[data-events=\"event-template\"]')\n  const citiesArr = []\n  const select = component.querySelector('[data-events=\"select-cities\"]')\n  const search = component.querySelector('[data-events=\"search\"] input')\n  const nextBtn = component.querySelector('[data-events=\"next\"]')\n  const prevBtn = component.querySelector('[data-events=\"prev\"]')\n  const emptyState = component.querySelector('[data-events=\"empty\"]')\n  const form = component.querySelector('form')\n  if (form) {\n    form.addEventListener('submit', (e) => {\n      e.preventDefault()\n      e.stopPropagation()\n    })\n  }\n\n  events.forEach((event) => {\n    const dayElement = event.querySelector('[data-events=\"DD\"]')\n    const monthYearElement = event.querySelector('[data-events=\"MMM-YYYY\"]')\n    const timeElement = event.querySelector('[data-custom=\"start-end-date\"]')\n\n    const { startDate: startDateStr, endDate: endDateStr, timezone: timezoneId } = event.dataset\n    if (!startDateStr || !endDateStr || !timezoneId) return event.parentElement.remove()\n\n    const startDate = new Date(startDateStr)\n    const endDate = new Date(endDateStr)\n    const currentDate = new Date()\n\n    const getUTCDateStamp = (d) => Date.UTC(d.getUTCFullYear(), d.getUTCMonth(), d.getUTCDate())\n\n    if (getUTCDateStamp(endDate) + 86400000 <= getUTCDateStamp(currentDate)) return event.parentElement.remove()\n\n    const dateFormatter = new Intl.DateTimeFormat('en-US', {\n      timeZone: timezoneId,\n      day: '2-digit',\n      month: 'short',\n      year: 'numeric',\n    })\n\n    const dateParts = Object.fromEntries(dateFormatter.formatToParts(startDate).map((part) => [part.type, part.value]))\n\n    dayElement.textContent = dateParts.day\n    monthYearElement.textContent = `${dateParts.month} ${dateParts.year}`\n\n    const timeFormatter = new Intl.DateTimeFormat('en-US', {\n      timeZone: timezoneId,\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: true,\n    })\n\n    const extractTime = (d) => Object.fromEntries(timeFormatter.formatToParts(d).map((part) => [part.type, part.value]))\n\n    const startTime = extractTime(startDate)\n    const endTime = extractTime(endDate)\n\n    timeElement.textContent =\n      `${startTime.hour}:${startTime.minute}${startTime.dayPeriod} - ` +\n      `${endTime.hour}:${endTime.minute}${endTime.dayPeriod}`\n\n    const city = event.dataset.city || ''\n    if (city != '') citiesArr.push(city)\n    eventsList.appendChild(event)\n  })\n\n  eventTemplate.remove()\n  eventsSource.remove()\n  const uniqueCities = [...new Set(citiesArr)].sort()\n  populateSelectCities(select, uniqueCities)\n\n  let currentPage = 1\n\n  function updateDisplay() {\n    const selectedCity = (select.value || '').trim()\n    const searchText = (search.value || '').trim().toLowerCase()\n    const itemsPerPage = 3\n    const allEvents = Array.from(eventsList.querySelectorAll('[data-events=\"event-element\"]'))\n    const visibleEvents = []\n\n    allEvents.forEach((event) => {\n      const eventCity = (event.dataset.city || '').trim().toLowerCase()\n      const eventName = (event.dataset.name || '').trim().toLowerCase()\n      const eventVenue = (event.dataset.venue || '').trim().toLowerCase()\n      const cityMatch = selectedCity === '' || event.dataset.city.trim() === selectedCity\n      const textMatch =\n        searchText === '' ||\n        eventName.includes(searchText) ||\n        eventCity.includes(searchText) ||\n        eventVenue.includes(searchText)\n      if (cityMatch && textMatch) {\n        visibleEvents.push(event)\n      } else {\n        event.classList.add('hide-event')\n        event.classList.remove('show-event')\n      }\n    })\n\n    const totalVisible = visibleEvents.length\n    const totalPages = Math.ceil(totalVisible / itemsPerPage)\n\n    if (totalVisible === 0) {\n      nextBtn.style.display = 'none'\n      prevBtn.style.display = 'none'\n      emptyState.style.display = 'block'\n    } else {\n      emptyState.style.display = 'none'\n      nextBtn.style.display = 'block'\n      prevBtn.style.display = 'block'\n\n      prevBtn.disabled = currentPage === 1\n      nextBtn.disabled = currentPage >= totalPages\n\n      visibleEvents.forEach((event, index) => {\n        if (index >= (currentPage - 1) * itemsPerPage && index < currentPage * itemsPerPage) {\n          event.classList.add('show-event')\n          event.classList.remove('hide-event')\n        } else {\n          event.classList.add('hide-event')\n          event.classList.remove('show-event')\n        }\n      })\n    }\n  }\n\n  select.addEventListener('change', () => {\n    currentPage = 1\n    updateDisplay()\n  })\n\n  search.addEventListener('input', () => {\n    currentPage = 1\n    updateDisplay()\n  })\n\n  nextBtn.addEventListener('click', () => {\n    currentPage++\n    updateDisplay()\n  })\n\n  prevBtn.addEventListener('click', () => {\n    currentPage--\n    updateDisplay()\n  })\n\n  // Initial display setup\n  updateDisplay()\n}\n\nfunction populateSelectCities(select, uniqueCities) {\n  if (select) {\n    uniqueCities.forEach((city) => {\n      const option = document.createElement('option')\n      option.value = city\n      option.textContent = city\n      select.appendChild(option)\n    })\n  }\n}\n"],"names":[],"mappings":"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"}