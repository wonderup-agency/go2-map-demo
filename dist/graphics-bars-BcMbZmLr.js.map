{"version":3,"file":"graphics-bars-BcMbZmLr.js","sources":["../src/components/graphics/graphics-bars.js"],"sourcesContent":["import * as am5 from '@amcharts/amcharts5'\r\nimport * as am5xy from '@amcharts/amcharts5/xy'\r\nimport am5themes_Animated from '@amcharts/amcharts5/themes/Animated'\r\n/**\r\n *\r\n * @param {HTMLElement} component\r\n */\r\nexport default async function (component) {\r\n  am5.ready(function () {\r\n    document.querySelectorAll('[data-graphic-type=\"bars\"]').forEach((el) => {\r\n      const root = am5.Root.new(el)\r\n      root.setThemes([am5themes_Animated.new(root)])\r\n\r\n      // Colors\r\n      const BACKGROUND = am5.color(el.dataset.graphicBackgroundColor || '#1B2155')\r\n      const BAR_COLOR = am5.color(el.dataset.graphicBarColor || '#B9DDE6')\r\n      const TEXT_COLOR = am5.color(el.dataset.graphicTextColor || '#FFFFFF')\r\n      const BADGE_BG = am5.color(el.dataset.graphicBadgeBg || '#2C3495')\r\n\r\n      // Data\r\n      const data = []\r\n      for (let i = 1; i <= 4; i++) {\r\n        const label = el.dataset[`graphicItem${i}Label`]\r\n        const value = parseFloat(el.dataset[`graphicItem${i}Value`])\r\n        if (label && !isNaN(value)) data.push({ category: label, value })\r\n      }\r\n\r\n      // Chart base\r\n      const chart = root.container.children.push(\r\n        am5xy.XYChart.new(root, {\r\n          layout: root.verticalLayout,\r\n          panX: false,\r\n          panY: false,\r\n          wheelX: 'none',\r\n          wheelY: 'none',\r\n          paddingTop: 60,\r\n          paddingBottom: 32,\r\n          paddingLeft: 0,\r\n          paddingRight: 0,\r\n        })\r\n      )\r\n\r\n      chart.set('background', am5.Rectangle.new(root, { fill: BACKGROUND }))\r\n\r\n      // X Axis\r\n      const xRenderer = am5xy.AxisRendererX.new(root, {\r\n        minGridDistance: 40,\r\n        cellStartLocation: 0.1,\r\n        cellEndLocation: 0.9,\r\n      })\r\n\r\n      const xAxis = chart.xAxes.push(\r\n        am5xy.CategoryAxis.new(root, {\r\n          categoryField: 'category',\r\n          renderer: xRenderer,\r\n        })\r\n      )\r\n      xAxis.data.setAll(data)\r\n\r\n      xAxis.get('renderer').labels.template.setAll({\r\n        fill: TEXT_COLOR,\r\n        fontSize: 12,\r\n        fontWeight: '400',\r\n        centerY: am5.p100,\r\n        paddingTop: 10,\r\n        dy: 50,\r\n        maxWidth: 120,\r\n        oversizedBehavior: 'wrap',\r\n        textAlign: 'center',\r\n      })\r\n\r\n      // Y Axis\r\n      const yRenderer = am5xy.AxisRendererY.new(root, { opposite: false })\r\n      const yAxis = chart.yAxes.push(\r\n        am5xy.ValueAxis.new(root, {\r\n          renderer: yRenderer,\r\n        })\r\n      )\r\n\r\n      yAxis.get('renderer').labels.template.setAll({\r\n        fill: TEXT_COLOR,\r\n        fontSize: 12,\r\n        fontWeight: '400',\r\n      })\r\n      yAxis.get('renderer').grid.template.setAll({\r\n        stroke: am5.color('#FFFFFF'),\r\n        strokeOpacity: 0.1,\r\n      })\r\n\r\n      // Bars\r\n      const series = chart.series.push(\r\n        am5xy.ColumnSeries.new(root, {\r\n          xAxis,\r\n          yAxis,\r\n          valueYField: 'value',\r\n          categoryXField: 'category',\r\n        })\r\n      )\r\n\r\n      series.columns.template.setAll({\r\n        fill: BAR_COLOR,\r\n        stroke: BAR_COLOR,\r\n        width: am5.percent(75),\r\n        cornerRadiusTL: 0,\r\n        cornerRadiusTR: 0,\r\n        tooltipText: '{category}: {valueY}%',\r\n      })\r\n\r\n      // Create badges after render\r\n      series.events.on('datavalidated', () => {\r\n        series.dataItems.forEach((dataItem) => {\r\n          const column = dataItem.get('graphics')\r\n          if (!column) return\r\n\r\n          const bounds = column.globalBounds()\r\n          const centerX = bounds.left + bounds.width / 2\r\n          const topY = bounds.top\r\n\r\n          root.container.children.push(\r\n            am5.Container.new(root, {\r\n              x: centerX,\r\n              y: topY - 20,\r\n              centerX: am5.p50,\r\n              centerY: am5.p50,\r\n              children: [\r\n                am5.RoundedRectangle.new(root, {\r\n                  width: 70,\r\n                  height: 32,\r\n                  fill: BADGE_BG,\r\n                  cornerRadiusTL: 8,\r\n                  cornerRadiusTR: 8,\r\n                  cornerRadiusBL: 8,\r\n                  cornerRadiusBR: 8,\r\n                  shadowColor: am5.color(0x000000),\r\n                  shadowBlur: 3,\r\n                  shadowOpacity: 0.2,\r\n                }),\r\n                am5.Label.new(root, {\r\n                  text: `${dataItem.dataContext.value}%`,\r\n                  fill: TEXT_COLOR,\r\n                  fontSize: 12,\r\n                  fontWeight: '700',\r\n                  centerX: am5.p50,\r\n                  centerY: am5.p50,\r\n                }),\r\n              ],\r\n            })\r\n          )\r\n        })\r\n      })\r\n\r\n      series.data.setAll(data)\r\n      xAxis.data.setAll(data)\r\n\r\n      series.appear(1000)\r\n      chart.appear(1000, 100)\r\n    })\r\n  })\r\n}\r\n"],"names":[],"mappings":"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"}