async function e(e){const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches,o=t?1:800,n=t?0:200,a=t?1:260,i="cubic-bezier(.22,1,.36,1)",r=e=>e?.dataset?.display||"flex",s="bf_support_hidden",l=(e,t,o)=>{const n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3),document.cookie=`${e}=${encodeURIComponent(t)};expires=${n.toUTCString()};path=/;SameSite=Lax`},c=e=>{const t=document.cookie||"";if(!t)return null;const o=t.split("; ");for(const t of o){const[o,...n]=t.split("=");if(o===e)return decodeURIComponent(n.join("="))}return null},d=()=>"1"===c(s),u=e.querySelector(".button_fixed"),p=Array.from(e.querySelectorAll('[data-button-fixed="item"]')),y="[data-close-support-now]",f=p.find(e=>e.hasAttribute("data-button-support"))||null,m=p.find(e=>e.hasAttribute("data-button-phone"))||null,h=p.find(e=>e.hasAttribute("data-button-mail"))||null;let b=[m,h].filter(Boolean);const v=e.querySelector('[data-button-fixed="icon-headset"]'),g=e.querySelector('[data-button-fixed="icon-empathy"]'),L=e.querySelector('[data-button-fixed="icon-close"]'),E=[v,g,L].filter(Boolean),x=e=>{e&&(e.classList.remove("is-active"),e.style.display="none",e.setAttribute("aria-hidden","true"))},S=e=>{e&&(e.classList.add("is-active"),e.style.display="",e.setAttribute("aria-hidden","false"))},k=e=>(E.forEach(x),S("close"===e?L:"empathy"===e?g:v)),w=()=>{k("empathy"),u?.setAttribute("aria-expanded","false")},q=()=>{k("close"),u?.setAttribute("aria-expanded","true")};e.querySelectorAll('a[href="#"]').forEach(e=>e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation()})),b.forEach(e=>{e.style.display="none",e.style.opacity=0}),f&&(d()?(f.style.display="none",f.style.opacity=0):(f.style.display=r(f),f.style.opacity=1)),w();let A=!1,C=!1;const I=f?.querySelector(".item-link"),_=()=>{if(!f||!C)return;C=!1;const e=f.querySelector(".g-paragraph");e&&(e.innerHTML="Get support now<br>");const t=f.querySelector(y);t&&(t.style.display=""),f.classList.add("is-last"),b=[m,h].filter(Boolean),d()||(f.getAnimations().forEach(e=>e.cancel()),f.style.display=r(f),f.style.opacity=1)},D=e=>e&&"none"!==getComputedStyle(e).display,M=()=>{if(A)return;A=!0,q();[...b].reverse().forEach((e,t)=>{e.style.display=r(e),e.animate([{opacity:0},{opacity:1}],{duration:o,delay:t*n,easing:i,fill:"forwards"})})},T=(e,t)=>{if(e&&D(e)){e.style.willChange="transform,opacity";return void(e.animate([{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(8px)"}],{duration:a,easing:i,fill:"forwards"}).onfinish=()=>{e.style.display="none",e.style.opacity="",e.style.transform="",e.style.willChange="",t?.()})}},B=()=>{if(!b.some(D))return A=!1,w(),void _();A=!1;let e=b.filter(D).length;b.forEach(t=>{D(t)&&T(t,()=>{e--,e<=0&&(w(),_())})})};u?.addEventListener("click",e=>{e.target.closest('[data-button-fixed="item"]')||(A?B():f&&D(f)&&!d()||M())},!0),e.addEventListener("click",e=>{if(e.target.closest(y))return e.preventDefault(),l(s,"1",7),void T(f)}),I&&I.addEventListener("click",e=>{C||(e.preventDefault(),e.stopImmediatePropagation(),(()=>{if(!f||C)return;C=!0;const e=f.querySelector(".g-paragraph");e&&(e.innerHTML="HelpLine<br>");const t=f.querySelector(y);t&&(t.style.display="none"),f.classList.remove("is-last")})(),A||M(),b=[m,h,f].filter(Boolean))},!0);const H=e=>{e.target.closest('[data-component="button-fixed"]')||B()};document.addEventListener("click",H);const O=e=>{"Escape"===e.key&&B()};document.addEventListener("keydown",O),e.addEventListener("DOMNodeRemoved",t=>{t.target===e&&(document.removeEventListener("click",H),document.removeEventListener("keydown",O))}),e.__buttonFixedDebug={openMenu:M,closeMenu:B,collapseItem:T,_icon:{showOnlyIcon:k,setClosedIcon:w,setOpenIcon:q},_cookie:{get:c,set:l,key:s}}}export{e as default};
