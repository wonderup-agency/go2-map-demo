async function e(e){const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches,o=t?1:800,n=t?0:200,a=t?1:260,i="cubic-bezier(.22,1,.36,1)",s=e=>e?.dataset?.display||"flex",r="bf_support_hidden",l=(e,t,o)=>{const n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3),document.cookie=`${e}=${encodeURIComponent(t)};expires=${n.toUTCString()};path=/;SameSite=Lax`},d=e=>{const t=document.cookie||"";if(!t)return null;const o=t.split("; ");for(const t of o){const[o,...n]=t.split("=");if(o===e)return decodeURIComponent(n.join("="))}return null},c=e.querySelector(".button_fixed"),u=Array.from(e.querySelectorAll('[data-button-fixed="item"]')),y=u.find(e=>e.hasAttribute("data-button-support"))||null,p=[u.find(e=>e.hasAttribute("data-button-phone"))||null,u.find(e=>e.hasAttribute("data-button-mail"))||null].filter(Boolean),f=e.querySelector('[data-button-fixed="icon-headset"]'),m=e.querySelector('[data-button-fixed="icon-empathy"]'),h=e.querySelector('[data-button-fixed="icon-close"]'),b=[f,m,h].filter(Boolean),v=e=>{e&&(e.classList.remove("is-active"),e.style.display="none",e.setAttribute("aria-hidden","true"))},g=e=>{e&&(e.classList.add("is-active"),e.style.display="",e.setAttribute("aria-hidden","false"))},x=e=>(b.forEach(v),g("close"===e?h:"empathy"===e?m:f)),E=()=>{x("empathy"),c?.setAttribute("aria-expanded","false")},k=()=>{x("close"),c?.setAttribute("aria-expanded","true")};e.querySelectorAll('a[href="#"]').forEach(e=>e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation()})),p.forEach(e=>{e.style.display="none",e.style.opacity=0}),y&&("1"===d(r)?(y.style.display="none",y.style.opacity=0):(y.style.display=s(y),y.style.opacity=1)),E();let w=!1;const L=e=>e&&"none"!==getComputedStyle(e).display,A=()=>{if(w)return;w=!0,k();[...p].reverse().forEach((e,t)=>{e.style.display=s(e),e.animate([{opacity:0},{opacity:1}],{duration:o,delay:t*n,easing:i,fill:"forwards"})})},S=(e,t)=>{if(e&&L(e)){e.style.willChange="transform,opacity";return void(e.animate([{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(8px)"}],{duration:a,easing:i,fill:"forwards"}).onfinish=()=>{e.style.display="none",e.style.opacity="",e.style.transform="",e.style.willChange="",t?.()})}},C=()=>{if(!p.some(L))return w=!1,void E();w=!1;let e=p.filter(L).length;p.forEach(t=>{L(t)&&S(t,()=>{e--,e<=0&&E()})})};c?.addEventListener("click",e=>{e.target.closest('[data-button-fixed="item"]')||(w?C():A())},!0),e.addEventListener("click",e=>{if(e.target.closest("[data-close-support-now]"))return e.preventDefault(),l(r,"1",7),void S(y)});const _=e=>{e.target.closest('[data-component="button-fixed"]')||C()};document.addEventListener("click",_);const q=e=>{"Escape"===e.key&&C()};document.addEventListener("keydown",q),e.addEventListener("DOMNodeRemoved",t=>{t.target===e&&(document.removeEventListener("click",_),document.removeEventListener("keydown",q))}),e.__buttonFixedDebug={openMenu:A,closeMenu:C,collapseItem:S,_icon:{showOnlyIcon:x,setClosedIcon:E,setOpenIcon:k},_cookie:{get:d,set:l,key:r}}}export{e as default};
