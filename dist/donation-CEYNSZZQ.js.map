{"version":3,"file":"donation-CEYNSZZQ.js","sources":["../node_modules/postcss/lib/list.js","../src/components/forms/donation.js"],"sourcesContent":["'use strict'\n\nlet list = {\n  comma(string) {\n    return list.split(string, [','], true)\n  },\n\n  space(string) {\n    let spaces = [' ', '\\n', '\\t']\n    return list.split(string, spaces)\n  },\n\n  split(string, separators, last) {\n    let array = []\n    let current = ''\n    let split = false\n\n    let func = 0\n    let inQuote = false\n    let prevQuote = ''\n    let escape = false\n\n    for (let letter of string) {\n      if (escape) {\n        escape = false\n      } else if (letter === '\\\\') {\n        escape = true\n      } else if (inQuote) {\n        if (letter === prevQuote) {\n          inQuote = false\n        }\n      } else if (letter === '\"' || letter === \"'\") {\n        inQuote = true\n        prevQuote = letter\n      } else if (letter === '(') {\n        func += 1\n      } else if (letter === ')') {\n        if (func > 0) func -= 1\n      } else if (func === 0) {\n        if (separators.includes(letter)) split = true\n      }\n\n      if (split) {\n        if (current !== '') array.push(current.trim())\n        current = ''\n        split = false\n      } else {\n        current += letter\n      }\n    }\n\n    if (last || current !== '') array.push(current.trim())\n    return array\n  }\n}\n\nmodule.exports = list\nlist.default = list\n","import { comma } from 'postcss/lib/list'\r\n\r\nconst FU_DEBUG = true\r\nfunction dlog(...args) {\r\n  if (!FU_DEBUG) return\r\n  console.log('[FU Donation]', ...args)\r\n}\r\n\r\nfunction parseAmount(value) {\r\n  if (value == null) return null\r\n  const str = String(value)\r\n  const num = Number(str.replace(/[^\\d]/g, ''))\r\n  return Number.isFinite(num) && num > 0 ? num : null\r\n}\r\n\r\nfunction isCollection(x) {\r\n  return x instanceof NodeList || x instanceof HTMLCollection || Array.isArray(x)\r\n}\r\n\r\nfunction resolveToElements(input) {\r\n  if (!input) return []\r\n\r\n  if (input?.el || input?.element) {\r\n    const el = input.el ?? input.element\r\n    return resolveToElements(el)\r\n  }\r\n\r\n  if (isCollection(input)) return Array.from(input)\r\n\r\n  return [input]\r\n}\r\n\r\nfunction initOne(form) {\r\n  if (!(form instanceof HTMLElement)) {\r\n    dlog('SKIP: not an HTMLElement', form)\r\n    return\r\n  }\r\n\r\n  const alreadyBound = form.dataset?.fuBound === 'true' || form.getAttribute('data-fu-bound') === 'true'\r\n  if (alreadyBound) {\r\n    dlog('SKIP: already bound', form)\r\n    return\r\n  }\r\n\r\n  if (form.dataset) form.dataset.fuBound = 'true'\r\n  else form.setAttribute('data-fu-bound', 'true')\r\n\r\n  const campaignId = form.dataset?.campaignId ?? form.getAttribute('data-campaign-id') ?? 'FUNFTWMRGBN'\r\n\r\n  dlog('INIT form', { form, campaignId })\r\n\r\n  const amountRadios = form.querySelectorAll('input[name=\"donation-amount\"][type=\"radio\"]')\r\n  if (amountRadios.length > 0 && !Array.from(amountRadios).some((r) => r.checked)) {\r\n    amountRadios[0].checked = true\r\n    dlog('auto-checked first amount radio', amountRadios[0].value)\r\n  }\r\n\r\n  const otherButton = form.querySelector(\"[data-donation-form='other']\")\r\n  dlog('otherButton', otherButton ? 'FOUND' : 'MISSING')\r\n\r\n  form.addEventListener('submit', (e) => {\r\n    dlog('SUBMIT fired', form)\r\n    e.preventDefault()\r\n\r\n    const formData = new FormData(form)\r\n    const recurring = formData.get('recurring') ?? 'once'\r\n\r\n    const rawAmount = formData.get('donation-amount') ?? formData.get('amount') ?? formData.get('donation_amount')\r\n\r\n    const parsed = parseAmount(rawAmount)\r\n    const amount = parsed ?? 25\r\n\r\n    dlog('submit payload', { campaignId, recurring, rawAmount, parsed, amount })\r\n\r\n    if (typeof FundraiseUp?.openCheckout !== 'function') {\r\n      dlog('ABORT: FundraiseUp.openCheckout not available', { FundraiseUp })\r\n      return\r\n    }\r\n\r\n    FundraiseUp.openCheckout(campaignId, {\r\n      donation: { recurring, amount },\r\n    })\r\n  })\r\n\r\n  if (otherButton) {\r\n    otherButton.addEventListener('click', (e) => {\r\n      dlog('OTHER click fired', form)\r\n      e.preventDefault()\r\n\r\n      const formData = new FormData(form)\r\n      const recurring = formData.get('recurring') ?? 'once'\r\n\r\n      dlog('other payload', { campaignId, recurring })\r\n\r\n      if (typeof FundraiseUp?.openCheckout !== 'function') {\r\n        dlog('ABORT: FundraiseUp.openCheckout not available', { FundraiseUp })\r\n        return\r\n      }\r\n\r\n      FundraiseUp.openCheckout(campaignId, {\r\n        donation: { recurring },\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * @param {HTMLElement|NodeList|HTMLCollection|Array|{el?:HTMLElement|NodeList, element?:HTMLElement|NodeList}} input\r\n */\r\nexport default function (input) {\r\n  dlog('init called with:', input)\r\n\r\n  const elements = resolveToElements(input)\r\n  dlog('resolved elements count:', elements.length, elements)\r\n\r\n  elements.forEach(initOne)\r\n}\r\n"],"names":[],"mappings":"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","x_google_ignoreList":[0]}