async function e(e){const t=e.querySelector('[data-events="source"]'),n=Array.from(t.querySelectorAll('[data-events="event-element"]')),a=e.querySelector('[data-events="list"]'),r=e.querySelector('[data-events="event-template"]'),o=[],s=e.querySelector('[data-events="select-cities"]'),l=e.querySelector('[data-events="search"] input'),i=e.querySelector('[data-events="next"]'),c=e.querySelector('[data-events="prev"]'),d=e.querySelector('[data-events="empty"]'),u=e.querySelector("form");u&&u.addEventListener("submit",e=>{e.preventDefault(),e.stopPropagation()}),n.forEach(e=>{const t=e.querySelector('[data-events="DD"]'),n=e.querySelector('[data-events="MMM-YYYY"]'),r=e.querySelector('[data-custom="start-end-date"]'),{startDate:s,endDate:l,timezone:i}=e.dataset;if(!s||!l||!i)return e.parentElement.remove();const c=new Date(s),d=new Date(l),u=new Date,m=e=>Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());if(m(d)+864e5<=m(u))return e.parentElement.remove();const v=new Intl.DateTimeFormat("en-US",{timeZone:i,day:"2-digit",month:"short",year:"numeric"}),y=Object.fromEntries(v.formatToParts(c).map(e=>[e.type,e.value]));t.textContent=y.day,n.textContent=`${y.month} ${y.year}`;const h=new Intl.DateTimeFormat("en-US",{timeZone:i,hour:"2-digit",minute:"2-digit",hour12:!0}),p=e=>Object.fromEntries(h.formatToParts(e).map(e=>[e.type,e.value])),f=p(c),w=p(d);r.textContent=`${f.hour}:${f.minute}${f.dayPeriod} - ${w.hour}:${w.minute}${w.dayPeriod}`;const S=e.dataset.city||"";""!==S&&o.push(S),a.appendChild(e)}),r.remove(),t.remove();const m=[...new Set(o)].sort();!function(e,t){e&&t.forEach(t=>{const n=document.createElement("option");n.value=t,n.textContent=t,e.appendChild(n)})}(s,m);let v=1;function y(){const e=(s.value||"").trim(),t=(l.value||"").trim().toLowerCase(),n=Array.from(a.querySelectorAll('[data-events="event-element"]')),r=[],o=t?t.split("/").map(e=>e.trim()).filter(Boolean):[];n.forEach(t=>{const n=(t.dataset.city||"").trim().toLowerCase(),a=(t.dataset.name||"").trim().toLowerCase(),s=(t.dataset.venue||"").trim().toLowerCase(),l=""===e||(t.dataset.city||"").trim()===e,i=0===o.length||o.some(e=>a.includes(e)||n.includes(e)||s.includes(e));l&&i?r.push(t):(t.classList.add("hide-event"),t.classList.remove("show-event"))});const u=r.length,m=Math.ceil(u/3);0===u?(i.style.display="none",c.style.display="none",d.style.display="block"):(d.style.display="none",i.style.display="block",c.style.display="block",c.disabled=1===v,i.disabled=v>=m,r.forEach((e,t)=>{t>=3*(v-1)&&t<3*v?(e.classList.add("show-event"),e.classList.remove("hide-event")):(e.classList.add("hide-event"),e.classList.remove("show-event"))}))}s.addEventListener("change",()=>{v=1,y()}),l.addEventListener("input",()=>{v=1,y()}),i.addEventListener("click",()=>{v++,y()}),c.addEventListener("click",()=>{v--,y()}),window.__walkRunButtonBound||(window.__walkRunButtonBound=!0,document.addEventListener("click",e=>{const t=e.target.closest(".button");if(!t)return;const n=t.querySelector('a.item-link[href^="#"]');if(!n)return;const a=n.getAttribute("href")||"";if("#events"!==a)return;e.preventDefault();const r=document.querySelector(a);r?.scrollIntoView({behavior:"smooth",block:"start"}),l.value="walk/run",v=1,y()})),y()}export{e as default};
