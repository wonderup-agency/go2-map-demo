async function e(e){const t=window.matchMedia("(prefers-reduced-motion: reduce)").matches,a=t?1:800,s=t?0:200,i=t?1:260,o="cubic-bezier(.22,1,.36,1)",r=e.querySelector(".button_fixed"),n=Array.from(e.querySelectorAll('[data-button-fixed="item"]')),d=Array.from(e.querySelectorAll(".button_switch")),[l,c]=[d[0],d[1]||d[0]];e.querySelectorAll('a[href="#"]').forEach(e=>e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation()})),n.forEach(e=>{e.style.display="none",e.style.opacity=0}),d.forEach(e=>e.classList.remove("is-active")),l?.classList.add("is-active"),r?.setAttribute("aria-expanded","false");let u=!1;const f=e=>"none"!==getComputedStyle(e).display,p=()=>n.some(f),y=e=>{e?(l?.classList.remove("is-active"),c?.classList.add("is-active"),r?.setAttribute("aria-expanded","true")):(c?.classList.remove("is-active"),l?.classList.add("is-active"),r?.setAttribute("aria-expanded","false"))},v=()=>{if(u)return;u=!0,y(!0);[...n].reverse().forEach((e,t)=>{e.style.display=(e=>e?.dataset?.display||"flex")(e),e.animate([{opacity:0},{opacity:1}],{duration:a,delay:t*s,easing:o,fill:"forwards"})})},m=e=>{if(e&&f(e)){e.style.willChange="transform,opacity";return void(e.animate([{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(8px)"}],{duration:i,easing:o,fill:"forwards"}).onfinish=()=>{e.style.display="none",e.style.opacity="",e.style.transform="",e.style.willChange="",p()||(u=!1,y(!1))})}},b=()=>{if(!p())return u=!1,void y(!1);u=!1,y(!1),n.forEach(e=>f(e)&&m(e))};r?.addEventListener("click",e=>{e.target.closest('[data-button-fixed="item"]')||(u?b():v())},!0),e.addEventListener("click",e=>{const t=e.target;return t.closest("[data-close-mail]")?(e.preventDefault(),void m(n.find(e=>e.hasAttribute("data-button-mail")))):t.closest("[data-close-phone]")?(e.preventDefault(),void m(n.find(e=>e.hasAttribute("data-button-phone")))):t.closest("[data-close-support-now]")?(e.preventDefault(),void m(n.find(e=>e.hasAttribute("data-button-support")))):void 0});const h=e=>{e.target.closest('[data-component="button-fixed"]')||b()};document.addEventListener("click",h);const E=e=>{"Escape"===e.key&&b()};document.addEventListener("keydown",E),e.addEventListener("DOMNodeRemoved",t=>{t.target===e&&(document.removeEventListener("click",h),document.removeEventListener("keydown",E))}),e.__buttonFixedDebug={openAll:v,closeAll:b,collapseItem:m}}export{e as default};
