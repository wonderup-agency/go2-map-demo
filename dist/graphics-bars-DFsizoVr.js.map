{"version":3,"file":"graphics-bars-DFsizoVr.js","sources":["../src/components/graphics/graphics-bars.js"],"sourcesContent":["import * as am5 from '@amcharts/amcharts5'\nimport * as am5xy from '@amcharts/amcharts5/xy'\nimport am5themes_Animated from '@amcharts/amcharts5/themes/Animated'\n/**\n *\n * @param {HTMLElement} component\n */\nexport default async function (component) {\n  am5.ready(function () {\n    document.querySelectorAll('[data-graphic-type=\"bars\"]').forEach((el) => {\n      const root = am5.Root.new(el)\n      root.setThemes([am5themes_Animated.new(root)])\n\n      // Colors\n      const BACKGROUND = am5.color(el.dataset.graphicBackgroundColor || '#1B2155')\n      const BAR_COLOR = am5.color(el.dataset.graphicBarColor || '#B9DDE6')\n      const TEXT_COLOR = am5.color(el.dataset.graphicTextColor || '#FFFFFF')\n      const BADGE_BG = am5.color(el.dataset.graphicBadgeBg || '#2C3495')\n\n      // Data\n      const data = []\n      for (let i = 1; i <= 4; i++) {\n        const label = el.dataset[`graphicItem${i}Label`]\n        const value = parseFloat(el.dataset[`graphicItem${i}Value`])\n        if (label && !isNaN(value)) data.push({ category: label, value })\n      }\n\n      // Chart base\n      const chart = root.container.children.push(\n        am5xy.XYChart.new(root, {\n          layout: root.verticalLayout,\n          panX: false,\n          panY: false,\n          wheelX: 'none',\n          wheelY: 'none',\n          paddingTop: 60,\n          paddingBottom: 32,\n          paddingLeft: 0,\n          paddingRight: 0,\n        })\n      )\n\n      chart.set('background', am5.Rectangle.new(root, { fill: BACKGROUND }))\n\n      // X Axis\n      const xRenderer = am5xy.AxisRendererX.new(root, {\n        minGridDistance: 40,\n        cellStartLocation: 0.1,\n        cellEndLocation: 0.9,\n      })\n\n      const xAxis = chart.xAxes.push(\n        am5xy.CategoryAxis.new(root, {\n          categoryField: 'category',\n          renderer: xRenderer,\n        })\n      )\n      xAxis.data.setAll(data)\n\n      xAxis.get('renderer').labels.template.setAll({\n        fill: TEXT_COLOR,\n        fontSize: 12,\n        fontWeight: '400',\n        centerY: am5.p100,\n        paddingTop: 10,\n        dy: 50,\n        maxWidth: 120,\n        oversizedBehavior: 'wrap',\n        textAlign: 'center',\n      })\n\n      // Y Axis\n      const yRenderer = am5xy.AxisRendererY.new(root, { opposite: false })\n      const yAxis = chart.yAxes.push(\n        am5xy.ValueAxis.new(root, {\n          renderer: yRenderer,\n        })\n      )\n\n      yAxis.get('renderer').labels.template.setAll({\n        fill: TEXT_COLOR,\n        fontSize: 12,\n        fontWeight: '400',\n      })\n      yAxis.get('renderer').grid.template.setAll({\n        stroke: am5.color('#FFFFFF'),\n        strokeOpacity: 0.1,\n      })\n\n      // Bars\n      const series = chart.series.push(\n        am5xy.ColumnSeries.new(root, {\n          xAxis,\n          yAxis,\n          valueYField: 'value',\n          categoryXField: 'category',\n        })\n      )\n\n      series.columns.template.setAll({\n        fill: BAR_COLOR,\n        stroke: BAR_COLOR,\n        width: am5.percent(75),\n        cornerRadiusTL: 0,\n        cornerRadiusTR: 0,\n        tooltipText: '{category}: {valueY}%',\n      })\n\n      // Create badges after render\n      series.events.on('datavalidated', () => {\n        series.dataItems.forEach((dataItem) => {\n          const column = dataItem.get('graphics')\n          if (!column) return\n\n          const bounds = column.globalBounds()\n          const centerX = bounds.left + bounds.width / 2\n          const topY = bounds.top\n\n          root.container.children.push(\n            am5.Container.new(root, {\n              x: centerX,\n              y: topY - 20,\n              centerX: am5.p50,\n              centerY: am5.p50,\n              children: [\n                am5.RoundedRectangle.new(root, {\n                  width: 70,\n                  height: 32,\n                  fill: BADGE_BG,\n                  cornerRadiusTL: 8,\n                  cornerRadiusTR: 8,\n                  cornerRadiusBL: 8,\n                  cornerRadiusBR: 8,\n                  shadowColor: am5.color(0x000000),\n                  shadowBlur: 3,\n                  shadowOpacity: 0.2,\n                }),\n                am5.Label.new(root, {\n                  text: `${dataItem.dataContext.value}%`,\n                  fill: TEXT_COLOR,\n                  fontSize: 12,\n                  fontWeight: '700',\n                  centerX: am5.p50,\n                  centerY: am5.p50,\n                }),\n              ],\n            })\n          )\n        })\n      })\n\n      series.data.setAll(data)\n      xAxis.data.setAll(data)\n\n      series.appear(1000)\n      chart.appear(1000, 100)\n    })\n  })\n}\n"],"names":["async","graphicsBars","component","am5","ready","document","querySelectorAll","forEach","el","root","Root","new","setThemes","am5themes_Animated","BACKGROUND","color","dataset","graphicBackgroundColor","BAR_COLOR","graphicBarColor","TEXT_COLOR","graphicTextColor","BADGE_BG","graphicBadgeBg","data","i","label","value","parseFloat","isNaN","push","category","chart","container","children","am5xy","XYChart","layout","verticalLayout","panX","panY","wheelX","wheelY","paddingTop","paddingBottom","paddingLeft","paddingRight","set","Rectangle","fill","xRenderer","AxisRendererX","minGridDistance","cellStartLocation","cellEndLocation","xAxis","xAxes","CategoryAxis","categoryField","renderer","setAll","get","labels","template","fontSize","fontWeight","centerY","p100","dy","maxWidth","oversizedBehavior","textAlign","yRenderer","AxisRendererY","opposite","yAxis","yAxes","ValueAxis","grid","stroke","strokeOpacity","series","ColumnSeries","valueYField","categoryXField","columns","width","percent","cornerRadiusTL","cornerRadiusTR","tooltipText","events","on","dataItems","dataItem","column","bounds","globalBounds","centerX","left","topY","top","Container","x","y","p50","RoundedRectangle","height","cornerRadiusBL","cornerRadiusBR","shadowColor","shadowBlur","shadowOpacity","Label","text","dataContext","appear"],"mappings":"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"}