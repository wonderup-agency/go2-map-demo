import{g as e,h as o,s as t,v as a,c as r,a as n,b as i,d as l,e as c,f as m,r as s}from"./index-BlDrUVWv.js";import"./main-DpnAQaT8.js";function p(p){(p.forEach?p:[p]).forEach(p=>{const d=p.dataset.webhook||"https://hook.us2.make.com/ax5pllsfmf5zl2lwfprq5og2locrkmyi",u=p.querySelector(".w-form-done"),h=p.querySelector(".w-form-fail"),f=p.querySelector("form");e({context:p,selectId:"connection-to-lung-cancer",otherValue:"other-connection",fieldName:"other-connection-to-cancer",labelName:"Specify other connection",placeholder:"Specify your connection to lung cancer"}),e({context:p,selectId:"hear-about-mom",otherValue:"other-way",fieldName:"hear-about-mom-other",labelName:"How did you hear about GO2",placeholder:"Specify how did you hear about GO2"}),p.addEventListener("click",async e=>{const p=e.target,y=p.closest('[data-form="submit-btn"]'),b=p.closest(".button_text");if(y||b&&y){e.preventDefault(),e.stopImmediatePropagation(),o(h);const p=await t(f),b=[];a.isEmpty(p["full-name"]||"")&&b.push({fieldName:"full-name",error:"Enter your full name.",appendAt:".multi-form14_field-wrapper"}),a.isEmail(p.email||"")||b.push({fieldName:"email",error:"Enter a valid email address (example: name@email.com)",appendAt:".multi-form14_field-wrapper"});const w=p.phone||"";if(a.isMobilePhone(w,"any")||b.push({fieldName:"phone",error:"Enter a valid phone number (digits only, include area code)",appendAt:".multi-form14_field-wrapper"}),a.isPostalCode(String(p?.["zip-code"]||""),"any")||b.push({fieldName:"zip-code",error:"Enter a valid ZIP or postal code",appendAt:".multi-form14_field-wrapper"}),"other-connection-to-cancer"in p&&a.isEmpty(p["other-connection-to-cancer"]||"")&&b.push({fieldName:"other-connection-to-cancer",error:"Tell us your connection to lung cancer",appendAt:".multi-form14_field-wrapper"}),"hear-about-mom-other"in p&&a.isEmpty(p["hear-about-mom-other"]||"")&&b.push({fieldName:"hear-about-mom-other",error:"Tell us how you heard about GO2",appendAt:".multi-form14_field-wrapper"}),r(),b.length>0)return void n(b);const E=y.querySelector(".button_text")||y.firstChild,S=E?.textContent||"Submit";i(y),fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).then(e=>{if(!e.ok)throw new Error("Submission failed");return e.json()}).then(e=>{l(f),c(u)}).catch(e=>{m(h)}).finally(()=>{s(y,S)})}})})}export{p as default};
