import{g as e,i as t,h as r,s as o,v as n,c as a,a as i,b as l,d as s,r as u,e as d,f as h}from"./index-8boum2j8.js";import"./main-DpBCZjI7.js";function c(c){(c.forEach?c:[c]).forEach(c=>{const y=c.dataset.webhook||"https://hook.us2.make.com/vpc32gcapub110y6fye9o46a8nnlw7fq",f=Array.from(c.querySelectorAll('[data-form="step"]')),m=c.querySelector('[data-volunteer-phone-buddy-form="ticket-id-field"]');c.querySelector('[data-form="next-btn"]').firstChild.textContent;c.querySelector('[data-form="submit-btn"]').firstChild.textContent;const p=c.querySelector(".w-form-done"),b=c.querySelector(".w-form-fail"),O=c.querySelector("form");m&&(m.disabled=!0,m.type="hidden"),e({context:c,selectId:"Volunteer-Cancer-type",otherValue:557,fieldName:"Other-cancer-type",labelName:"Specify other type of lung cancer",placeholder:"Specify here"}),e({context:c,selectId:"Volunteer-How-did-you-heard-about-us",otherValue:98,fieldName:"Volunteer-Other-way-of-hearing-about-GO2",labelName:"Describe other way of hearing about GO2",placeholder:"Specify here"}),t({context:c,checkboxGroup:"Volunteer-Phone-Buddy-Treatment",otherValue:8,fieldName:"Volunteer-Other-treatment",labelName:"Specify treatment",placeholder:"Specify here"}),f.forEach((e,t)=>{0!==t&&e.classList.add("hide")}),c.addEventListener("click",e=>{const t=e.target,c=t.closest('[data-form="next-btn"]'),g=t.closest('[data-form="submit-btn"]'),S=t.closest(".button_text");if(c||S&&c){r(b);const e=c.closest('[data-form="step"]');if(!e)return;const t=Array.from(O?.children||[]).indexOf(e);if(-1===t)return;const d=o(e),h=[];if(0===t)n.isEmpty(d["Volunteer-Phone-Buddy-Name"]||"")&&h.push("Enter your full name."),n.isEmail(d["Volunteer-Phone-Buddy-Email"]||"")||h.push("Enter a valid email address (example: name@email.com)"),n.isMobilePhone(d["Volunteer-Phone-Buddy-Phone"]||"")||h.push("Enter a valid phone number (digits only, include area code)");if(a(e),h.length>0)return void i(e,h);const p=c.querySelector(".button_text")||c.firstChild,g=p?.textContent||"Next";l(c),fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(r=>{m&&(m.value=r?.ticket||r||""),e.classList.add("hide");const o=t+1;o<f.length&&f[o].classList.remove("hide")}).catch(e=>{s(b)}).finally(()=>{u(c,g)})}if(g||S&&g){e.preventDefault(),e.stopImmediatePropagation(),r(b);const t=g.closest('[data-form="step"]');if(!t)return;if(-1===Array.from(O?.children||[]).indexOf(t))return;const c=o(t),f=[];if(n.isPostalCode(String(c?.["Volunteer-Phone-Buddy-Zip-Code"]||""),"any")||f.push("Enter a valid ZIP or postal code."),"Other-cancer-type"in c&&n.isEmpty(c["Other-cancer-type"]||"")&&f.push("Tell us what type of cancer you have."),"Volunteer-Other-treatment"in c&&n.isEmpty(c["Volunteer-Other-treatment"]||"")&&f.push("Specify the treatment you received."),"Volunteer-Other-way-of-hearing-about-GO2"in c&&n.isEmpty(c["Volunteer-Other-way-of-hearing-about-GO2"]||"")&&f.push("Describe how you heard about GO2."),a(t),f.length>0)return void i(t,f);const S=g.querySelector(".button_text")||g.firstChild,w=S?.textContent||"Submit";l(g),c["ticket-id"]=m.value;let V=c["Interest-in-becoming-a-Phone-Buddy"]||"";let x="";[{key:"Volunteer-Phone-Buddy-Treatment",label:"Treatment"},{key:"Volunteer-Other-treatment",label:"Other treatment"},{key:"Volunteer-How-did-you-heard-about-us",label:"How did you hear about GO2?"},{key:"Volunteer-Other-way-of-hearing-about-GO2",label:"Other way of hearing about GO2"}].forEach(e=>{if(c.hasOwnProperty(e.key)){const t=c[e.key];let r="";Array.isArray(t)&&t.length>0?r=t.join(", "):"string"==typeof t&&""!==t.trim()?r=t:null!=t&&""!==t.toString().trim()&&(r=t.toString()),r&&(x+=`<br><strong>${e.label}:</strong> ${r}`)}}),x&&(V=V.trim()?`${V.trim()}.<br>${x.trim()}`:x.trim()),c["Interest-in-becoming-a-Phone-Buddy"]=V,fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then(e=>{if(!e.ok)throw new Error("Submission failed");return e.json()}).then(e=>{d(O),h(p)}).catch(e=>{s(b)}).finally(()=>{u(g,w)})}})})}export{c as default};
//# sourceMappingURL=volunteer-phone-buddy-BCFiUJHU.js.map
