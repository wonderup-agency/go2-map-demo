{"version":3,"file":"graphics-pies-pCU-LncE.js","sources":["../src/components/graphics/graphics-pies.js"],"sourcesContent":["import * as am5 from '@amcharts/amcharts5'\nimport * as am5percent from '@amcharts/amcharts5/percent'\nimport am5themes_Animated from '@amcharts/amcharts5/themes/Animated'\n\n/**\n *\n * @param {HTMLElement} component\n */\nexport default async function (component) {\n  document.querySelectorAll('[data-graphic]').forEach((el) => {\n    const chartType = el.getAttribute('data-graphic-type') || 'pie'\n\n    // Colors\n    const labelColor = el.getAttribute('data-graphic-label-color') || '#2C3495'\n    const sliceBorderColor = el.getAttribute('data-graphic-slice-border-color') || '#F8F9FB'\n    const sliceFillColor1 = el.getAttribute('data-graphic-slice-fill-color1') || '#6F4B86'\n    const sliceFillColor2 = el.getAttribute('data-graphic-slice-fill-color2') || '#B9DDE6'\n\n    // Items\n    const item1 = {\n      label: el.getAttribute('data-graphic-item1-label') || 'Item 1',\n      percentage: parseFloat(el.getAttribute('data-graphic-item1-percentage') || 15),\n      url: el.getAttribute('data-graphic-item1-url') || '/lung-cancer/types-of-lung-cancer/small-cell-lung-cancer',\n    }\n    console.log(document.querySelector('[data-graphic-item1-url]'))\n    const item2 = {\n      label: el.getAttribute('data-graphic-item2-label') || 'Item 2',\n      percentage: parseFloat(el.getAttribute('data-graphic-item2-percentage') || 85),\n      url: el.getAttribute('data-graphic-item2-url') || '/lung-cancer/types-of-lung-cancer/non-small-cell-lung-cancer',\n    }\n\n    const data = [\n      { type: item1.label, value: item1.percentage, url: item1.url },\n      { type: item2.label, value: item2.percentage, url: item2.url },\n    ]\n\n    if (chartType === 'pie') {\n      createDynamicPieChart({\n        element: el,\n        labelColor,\n        sliceBorderColor,\n        sliceFillColors: [sliceFillColor1, sliceFillColor2],\n        data,\n      })\n    }\n  })\n\n  function createDynamicPieChart({ element, labelColor, sliceBorderColor, sliceFillColors, data }) {\n    am5.ready(function () {\n      const root = am5.Root.new(element)\n      root.setThemes([am5themes_Animated.new(root)])\n\n      // Colors\n      const COLOR_LABEL = am5.color(am5.Color.fromString(labelColor))\n      const COLOR_BORDER = am5.color(am5.Color.fromString(sliceBorderColor))\n      const COLOR_SLICE_1 = am5.color(am5.Color.fromString(sliceFillColors[0]))\n      const COLOR_SLICE_2 = am5.color(am5.Color.fromString(sliceFillColors[1]))\n\n      const REM = parseFloat(getComputedStyle(document.documentElement).fontSize) || 16\n      const OFFSET = Math.round(2.5 * REM)\n\n      // Chart container\n\n      const chart = root.container.children.push(\n        am5percent.PieChart.new(root, {\n          layout: root.horizontalLayout,\n          startAngle: 250,\n          endAngle: 610,\n        })\n      )\n\n      // Series\n      const series = chart.series.push(\n        am5percent.PieSeries.new(root, {\n          valueField: 'value',\n          categoryField: 'type',\n          alignLabels: false,\n          radius: am5.percent(80),\n        })\n      )\n\n      series.get('colors').set('colors', [COLOR_SLICE_1, COLOR_SLICE_2])\n\n      // Slice borders\n      series.slices.template.setAll({\n        stroke: COLOR_BORDER,\n        strokeWidth: 10,\n        strokeOpacity: 1,\n        interactive: false,\n        tooltipText: '',\n      })\n      series.slices.template.set('toggleKey', undefined)\n      series.slices.template.events.on('pointerdown', (ev) => ev.event?.stopPropagation?.())\n\n      // Labels\n      series.labelsContainer.setAll({ layer: 100 })\n      series.ticksContainer.setAll({ layer: 90 })\n\n      series.labels.template.setAll({\n        text: '{type} â†—',\n        populateText: true,\n        inside: false,\n        radius: OFFSET,\n        fontSize: 20,\n        fontWeight: '600',\n        fill: COLOR_LABEL,\n        paddingLeft: Math.round(1 * REM),\n        paddingRight: Math.round(1 * REM),\n        paddingTop: Math.round(0.5 * REM),\n        paddingBottom: Math.round(0.5 * REM),\n        interactive: true,\n        cursorOverStyle: 'pointer',\n      })\n\n      // Hover animation (300ms ease)\n      series.events.on('datavalidated', () => {\n        series.dataItems.forEach((di) => {\n          const label = di.get('label')\n          if (!label) return\n\n          const bg = am5.RoundedRectangle.new(root, {\n            fill: am5.color(0xffffff),\n            fillOpacity: 1,\n            stroke: COLOR_LABEL,\n            strokeWidth: 1,\n            strokeOpacity: 1,\n            cornerRadiusTL: 4,\n            cornerRadiusTR: 4,\n            cornerRadiusBR: 4,\n            cornerRadiusBL: 4,\n          })\n          label.set('background', bg)\n\n          // Hover in\n          label.events.on('pointerover', () => {\n            bg.animate({\n              key: 'fill',\n              to: COLOR_LABEL,\n              duration: 300,\n              easing: am5.ease.out(am5.ease.cubic),\n            })\n            label.animate({\n              key: 'fill',\n              to: am5.color(0xffffff),\n              duration: 300,\n              easing: am5.ease.out(am5.ease.cubic),\n            })\n          })\n\n          // Hover out\n          label.events.on('pointerout', () => {\n            bg.animate({\n              key: 'fill',\n              to: am5.color(0xffffff),\n              duration: 300,\n              easing: am5.ease.out(am5.ease.cubic),\n            })\n            label.animate({\n              key: 'fill',\n              to: COLOR_LABEL,\n              duration: 300,\n              easing: am5.ease.out(am5.ease.cubic),\n            })\n          })\n        })\n      })\n\n      // Clickable labels\n      series.labels.template.events.on('pointerdown', (ev) => {\n        const url = ev.target.dataItem?.dataContext?.url\n        if (url) window.open(url, 'noopener,noreferrer')\n      })\n\n      // Data\n      series.data.setAll(data)\n\n      // % inside slices\n      series.bullets.push(function (root, series, dataItem) {\n        const index = series.dataItems.indexOf(dataItem)\n        const fillColor = index === 0 ? am5.color(0xffffff) : COLOR_LABEL\n\n        return am5.Bullet.new(root, {\n          sprite: am5.Label.new(root, {\n            text: \"{valuePercentTotal.formatNumber('0.')}%\",\n            populateText: true,\n            centerX: am5.p50,\n            centerY: am5.p50,\n            fontSize: 20,\n            fontWeight: '800',\n            fill: fillColor,\n          }),\n        })\n      })\n\n      // Initial animation\n      series.appear(700)\n      chart.appear(700, 50)\n    })\n  }\n}\n"],"names":["async","graphicsPies","component","document","querySelectorAll","forEach","el","chartType","getAttribute","labelColor","sliceBorderColor","sliceFillColor1","sliceFillColor2","item1","label","percentage","parseFloat","url","item2","element","sliceFillColors","data","am5","ready","root","Root","new","setThemes","am5themes_Animated","COLOR_LABEL","color","Color","fromString","COLOR_BORDER","COLOR_SLICE_1","COLOR_SLICE_2","REM","getComputedStyle","documentElement","fontSize","OFFSET","Math","round","chart","container","children","push","am5percent","PieChart","layout","horizontalLayout","startAngle","endAngle","series","PieSeries","valueField","categoryField","alignLabels","radius","percent","get","set","slices","template","setAll","stroke","strokeWidth","strokeOpacity","interactive","tooltipText","undefined","events","on","ev","event","stopPropagation","labelsContainer","layer","ticksContainer","labels","text","populateText","inside","fontWeight","fill","paddingLeft","paddingRight","paddingTop","paddingBottom","cursorOverStyle","dataItems","di","bg","RoundedRectangle","fillOpacity","cornerRadiusTL","cornerRadiusTR","cornerRadiusBR","cornerRadiusBL","animate","key","to","duration","easing","ease","out","cubic","target","dataItem","dataContext","window","open","bullets","fillColor","indexOf","Bullet","sprite","Label","centerX","p50","centerY","appear","createDynamicPieChart","type","value"],"mappings":"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"}