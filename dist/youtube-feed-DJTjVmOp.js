const e="https://go2-centers-worker.nahuel-eba.workers.dev/videos",t=12;async function n(n){const o=n.querySelector('[fs-youtubefeed-element="list"]'),r=n.querySelector('[fs-youtubefeed-element="item"]'),l=n.querySelector('[fs-youtubefeed-element="load-more"]');let i=n.querySelector('select[fs-youtube-categories="list"]')||n.querySelector('[fs-youtube-categories="list"]');if(!o||!r)return;const s=r.cloneNode(!0);let u=[],a="all";const c={},f={};let y=t;function d(e){e?n.classList.add("is-loading"):n.classList.remove("is-loading")}function m(){return"all"===a?u:c[a]||[]}function b(e=!1){const t=m(),n=t.slice(0,y);!function(){performance.now();for(;o.firstChild;)o.removeChild(o.firstChild);performance.now()}(),function(e,t){if(!Array.isArray(e))return;performance.now();e.forEach((e,n)=>{const r=s.cloneNode(!0);if(function(e,t){const n=e.querySelector('[fs-youtubefeed-element="thumbnail"]'),o=e.querySelector('[fs-youtubefeed-element="thumbnail-wrapper"]'),r=e.querySelector('[fs-youtubefeed-element="title"]'),l=e.querySelector('[fs-youtubefeed-element="published-date"]'),i=e.querySelector('[fs-youtubefeed-element="view-count"]'),s=e.querySelector('[fs-youtubefeed-element="like-count"]'),u=e.querySelector('[fs-youtubefeed-element="comment-count"]'),a=e.querySelector('[fs-youtubefeed-element="favourite-count"]'),c=e.querySelector('[fs-youtubefeed-element="categories"]');n&&t.thumbnail&&(n.src=t.thumbnail,n.alt=t.title||"");o&&t.url&&(o.style.cursor="pointer",o.onclick=()=>{window.open(t.url,"_blank","noopener")});r&&(r.textContent=t.title||"");l&&(l.textContent=function(e){if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleDateString()}(t.publishedAt));i&&(i.textContent=C(t.viewCount||"0"));s&&(s.textContent=C(t.likeCount||"0"));u&&(u.textContent=C(t.commentCount||"0"));a&&(a.textContent=C(t.likeCount||"0"));if(c&&(c.textContent="",Array.isArray(t.categories)&&t.categories.length>0)){const e=t.categories.map(e=>f[e]?.title).filter(Boolean);e.length>0&&(c.textContent=e.join(" â€¢ "))}}(r,e),r.style.opacity="0",r.style.transform="translateY(6px)",o.appendChild(r),t){setTimeout(()=>{requestAnimationFrame(()=>{r.style.transition="opacity 0.35s ease, transform 0.35s ease",r.style.opacity="1",r.style.transform="translateY(0)"})},20*n)}else requestAnimationFrame(()=>{r.style.transition="opacity 0.3s ease, transform 0.3s ease",r.style.opacity="1",r.style.transform="translateY(0)"})});performance.now()}(n,e),p(t)}async function h(n){const o=n||"all";if(o!==a)if(a=o,y=t,"all"!==a){if(c[a]){const e=c[a];return y=Math.min(t,e.length),void b(!1)}try{d(!0);const n=e.includes("?")?"&":"?",o=e+`${n}playlistId=${encodeURIComponent(a)}&maxVideos=30`,r=await fetch(o);if(!r.ok)return;const l=await r.json(),i=Array.isArray(l.videos)?l.videos:[];c[a]=i,y=Math.min(t,i.length),b(!1)}catch(e){}finally{d(!1)}}else b(!1)}function p(e){if(!l)return;const t=e||m();!Array.isArray(t)||t.length<=y?l.style.display="none":l.style.display="block"}function C(e){const t=Number(e);return Number.isNaN(t)?e:t.toLocaleString()}await async function(){try{d(!0);const o=e.includes("?")?"&":"?",r=e+`${o}maxVideos=30`,l=await fetch(r);if(!l.ok)return;const s=await l.json();s.channel&&function(e){const t=n.querySelector('[fs-youtubefeed-element="profile-image"]'),o=n.querySelector('[fs-youtubefeed-element="profile-name"]'),r=n.querySelector('[fs-youtubefeed-element="profile-handle"]'),l=n.querySelector('[fs-youtubefeed-element="video-count"]'),i=n.querySelector('[fs-youtubefeed-element="view-count"]'),s=n.querySelector('[fs-youtubefeed-element="subscriber-count"]'),u=n.querySelector('[fs-youtubefeed-element="subscribe-button"]');t&&e.profileImage&&(t.src=e.profileImage);t&&e.title&&(t.alt=e.title);o&&e.title&&(o.textContent=e.title);r&&e.handle&&(r.textContent=e.handle);l&&e.videoCount&&(l.textContent=C(e.videoCount));i&&e.viewCount&&(i.textContent=C(e.viewCount));s&&e.subscriberCount&&(s.textContent=C(e.subscriberCount));u&&e.url&&(u.href=e.url)}(s.channel),u=Array.isArray(s.videos)?s.videos:[];const a=Array.isArray(s.categories)?s.categories:[];a.forEach(e=>{e&&e.id&&(f[e.id]=e)}),a.length>0&&function(e){if(!i)return;if("SELECT"!==i.tagName){const e=n.querySelector('select[fs-youtube-categories="list"]');e&&(i=e)}if(!i||"SELECT"!==i.tagName)return;i.multiple=!1,i.innerHTML="";const t=document.createElement("option");t.value="all",t.textContent="All videos",i.appendChild(t),e.forEach(e=>{if(!e||!e.id||!e.title)return;const t=document.createElement("option");t.value=e.id,t.textContent=e.title,i.appendChild(t)}),i.value="all",i.addEventListener("change",e=>{h(e.target.value||"all")}),function(e){let t=e.value||"all";setInterval(()=>{const n=e.value||"all";n!==t&&(t=n,h(n))},300)}(i)}(a),y=Math.min(t,u.length),b(!1),n.style.opacity="1"}catch(e){}finally{d(!1)}}(),l&&l.addEventListener("click",()=>{const e=m();if(!e||0===e.length)return;if(y>=e.length)return void p(e);y=Math.min(y+t,e.length),b(!0)})}export{n as default};
