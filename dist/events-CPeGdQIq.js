async function e(e){const t=e.querySelector('[data-events="source"]'),a=Array.from(t.querySelectorAll('[data-events="event-element"]')),n=e.querySelector('[data-events="list"]'),r=e.querySelector('[data-events="event-template"]'),o=[],s=e.querySelector('[data-events="select-cities"]'),l=e.querySelector('[data-events="search"] input'),i=e.querySelector('[data-events="next"]'),d=e.querySelector('[data-events="prev"]'),c=e.querySelector('[data-events="empty"]'),m=e.querySelector("form");m&&m.addEventListener("submit",e=>{e.preventDefault(),e.stopPropagation()}),a.forEach(e=>{const t=e.querySelector('[data-events="DD"]'),a=e.querySelector('[data-events="MMM-YYYY"]'),r=e.querySelector('[data-custom="start-end-date"]'),{startDate:s,endDate:l,timezone:i}=e.dataset;if(!s||!l||!i)return e.parentElement.remove();const d=new Date(s),c=new Date(l),m=new Date,u=e=>Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());if(u(c)+864e5<=u(m))return e.parentElement.remove();const v=new Intl.DateTimeFormat("en-US",{timeZone:i,day:"2-digit",month:"short",year:"numeric"}),y=Object.fromEntries(v.formatToParts(d).map(e=>[e.type,e.value]));t.textContent=y.day,a.textContent=`${y.month} ${y.year}`;const p=new Intl.DateTimeFormat("en-US",{timeZone:i,hour:"2-digit",minute:"2-digit",hour12:!0}),h=e=>Object.fromEntries(p.formatToParts(e).map(e=>[e.type,e.value])),f=h(d),S=h(c);r.textContent=`${f.hour}:${f.minute}${f.dayPeriod} - ${S.hour}:${S.minute}${S.dayPeriod}`;const q=e.dataset.city||"";""!=q&&o.push(q),n.appendChild(e)}),r.remove(),t.remove();const u=[...new Set(o)].sort();!function(e,t){e&&t.forEach(t=>{const a=document.createElement("option");a.value=t,a.textContent=t,e.appendChild(a)})}(s,u);let v=1;function y(){const e=(s.value||"").trim(),t=(l.value||"").trim().toLowerCase(),a=Array.from(n.querySelectorAll('[data-events="event-element"]')),r=[];a.forEach(a=>{const n=(a.dataset.city||"").trim(),o=(a.dataset.name||"").trim().toLowerCase(),s=""===e||n===e,l=""===t||o.includes(t);s&&l?r.push(a):(a.classList.add("hide-event"),a.classList.remove("show-event"))});const o=r.length,m=Math.ceil(o/3);0===o?(i.style.display="none",d.style.display="none",c.style.display="block"):(c.style.display="none",i.style.display="block",d.style.display="block",d.disabled=1===v,i.disabled=v>=m,r.forEach((e,t)=>{t>=3*(v-1)&&t<3*v?(e.classList.add("show-event"),e.classList.remove("hide-event")):(e.classList.add("hide-event"),e.classList.remove("show-event"))}))}s.addEventListener("change",()=>{v=1,y()}),l.addEventListener("input",()=>{v=1,y()}),i.addEventListener("click",()=>{v++,y()}),d.addEventListener("click",()=>{v--,y()}),y()}export{e as default};
