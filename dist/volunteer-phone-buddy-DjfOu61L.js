import{a as e,b as t,s as a}from"./functions-CHZiqRQA.js";function r(r){const i=r.dataset.webhook||"https://hook.us2.make.com/vpc32gcapub110y6fye9o46a8nnlw7fq",n=r.querySelectorAll('[data-form="step"]'),o=r.querySelector('[data-volunteer-phone-buddy-form="ticket-id-field"]'),l=r.querySelector('[data-form="next-btn"]'),s=l.firstChild.textContent,d=r.querySelector('[data-form="submit-btn"]'),u=d.firstChild.textContent,c=r.querySelector(".w-form-done"),h=r.querySelector(".w-form-fail"),y=r.querySelector("form");e({selectId:"Volunteer-Cancer-type",otherValue:557,fieldName:"Other-cancer-type",labelName:"Specify other type of lung cancer",placeholder:"Specify here"}),e({selectId:"Volunteer-How-did-you-heard-about-us",otherValue:98,fieldName:"Volunteer-Other-way-of-hearing-about-GO2",labelName:"Describe other way of hearing about GO2",placeholder:"Specify here"}),t({checkboxGroup:"Volunteer-Phone-Buddy-Treatment",otherValue:8,fieldName:"Volunteer-Other-treatment",labelName:"Specify treatment",placeholder:"Specify here"}),l.addEventListener("click",e=>{if(!e.isTrusted)return;if(e.currentTarget.classList.contains("disabled"))return e.preventDefault(),void e.stopImmediatePropagation();e.preventDefault(),e.stopImmediatePropagation();const t=a(n[0]);l.disabled=!0,l.classList.add("disabled"),l.firstChild.textContent="Please wait...",fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>{if(!e.ok)throw new Error("Submission failed");return e.json()}).then(e=>{o&&(o.value=e||"");const t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});l.dispatchEvent(t),h.style.display="none",h.setAttribute("aria-hidden","true")}).catch(e=>{h&&(h.style.display="block",h.setAttribute("aria-hidden","false"),h.setAttribute("tabindex","-1"),setTimeout(()=>h.focus(),50))}).finally(()=>{l.disabled=!1,l.classList.remove("disabled"),l.firstChild.textContent=s})},!0),d.addEventListener("click",e=>{if(e.preventDefault(),e.stopImmediatePropagation(),o?.value){const e=a(n[1]);e["ticket-id"]=o.value;let t=e["Interest-in-becoming-a-Phone-Buddy"]||"";let r="";[{key:"Volunteer-Phone-Buddy-Treatment",label:"Treatment"},{key:"Volunteer-Other-treatment",label:"Other treatment"},{key:"Volunteer-How-did-you-heard-about-us",label:"How did you hear about GO2?"},{key:"Volunteer-Other-way-of-hearing-about-GO2",label:"Other way of hearing about GO2"}].forEach(t=>{if(e.hasOwnProperty(t.key)){const a=e[t.key];Array.isArray(a)&&a.length>0?r+=`\n${t.label}: ${a.join(", ")}`:("string"==typeof a&&""!==a.trim()||null!=a&&""!==a.toString().trim())&&(r+=`\n${t.label}: ${a}`)}}),r&&(t=t.trim()?`${t.trim()}.\n${r.trim()}`:r.trim()),e["Interest-in-becoming-a-Phone-Buddy"]=t,d.disabled=!0,d.classList.add("disabled"),d.firstChild.textContent="Please wait...",fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>{if(!e.ok)throw new Error("Submission failed");return e.json()}).then(e=>{y&&(y.style.display="none",y.setAttribute("aria-hidden","true")),h&&(h.style.display="none",h.setAttribute("aria-hidden","true")),c&&(c.style.display="block",c.setAttribute("aria-hidden","false"),c.setAttribute("tabindex","-1"),setTimeout(()=>c.focus(),50))}).catch(e=>{y&&y.setAttribute("aria-hidden","true"),c&&(c.style.display="none",c.setAttribute("aria-hidden","true")),h&&(h.style.display="block",h.setAttribute("aria-hidden","false"),h.setAttribute("tabindex","-1"),setTimeout(()=>h.focus(),50))}).finally(()=>{d.disabled=!1,d.classList.remove("disabled"),d.firstChild.textContent=u})}else alert("There was an error updating your information...")},!0)}export{r as default};
//# sourceMappingURL=volunteer-phone-buddy-DjfOu61L.js.map
