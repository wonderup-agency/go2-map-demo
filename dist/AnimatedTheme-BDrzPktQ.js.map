{"version":3,"file":"AnimatedTheme-BDrzPktQ.js","sources":["../node_modules/tslib/tslib.es6.mjs","../node_modules/@amcharts/amcharts5/.internal/core/util/Percent.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Type.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Array.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Object.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Disposer.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Utils.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Color.js","../node_modules/@amcharts/amcharts5/.internal/core/util/EventDispatcher.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Animation.js","../node_modules/@amcharts/amcharts5/.internal/core/util/List.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Children.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Math.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Ease.js","../node_modules/@amcharts/amcharts5/.internal/core/util/States.js","../node_modules/@amcharts/amcharts5/.internal/core/Registry.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Order.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Entity.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Template.js","../node_modules/@amcharts/amcharts5/.internal/core/render/Sprite.js","../node_modules/@amcharts/amcharts5/.internal/core/render/patterns/Pattern.js","../node_modules/@amcharts/amcharts5/.internal/core/render/patterns/PicturePattern.js","../node_modules/@amcharts/amcharts5/.internal/core/render/backend/Renderer.js","../node_modules/@amcharts/amcharts5/.internal/core/render/Graphics.js","../node_modules/@amcharts/amcharts5/.internal/core/render/Rectangle.js","../node_modules/@amcharts/amcharts5/.internal/core/render/Layout.js","../node_modules/@amcharts/amcharts5/.internal/core/render/HorizontalLayout.js","../node_modules/@amcharts/amcharts5/.internal/core/render/VerticalLayout.js","../node_modules/@amcharts/amcharts5/.internal/core/render/GridLayout.js","../node_modules/@amcharts/amcharts5/.internal/core/util/TextFormatter.js","../node_modules/@amcharts/amcharts5/.internal/core/util/PopulateString.js","../node_modules/@amcharts/amcharts5/.internal/core/render/Container.js","../node_modules/@amcharts/amcharts5/.internal/core/render/Text.js","../node_modules/@amcharts/amcharts5/.internal/core/util/ResizeSensor.js","../node_modules/@amcharts/amcharts5/.internal/core/util/InterfaceColors.js","../node_modules/@amcharts/amcharts5/.internal/core/render/Label.js","../node_modules/@amcharts/amcharts5/.internal/core/render/PointedRectangle.js","../node_modules/@amcharts/amcharts5/.internal/core/render/Tooltip.js","../node_modules/@amcharts/amcharts5/.internal/core/util/NumberFormatter.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Timezone.js","../node_modules/@amcharts/amcharts5/.internal/core/util/DateFormatter.js","../node_modules/@amcharts/amcharts5/.internal/core/util/DurationFormatter.js","../node_modules/@amcharts/amcharts5/locales/en.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Language.js","../node_modules/@amcharts/amcharts5/.internal/core/Theme.js","../node_modules/@amcharts/amcharts5/.internal/themes/DefaultTheme.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Matrix.js","../node_modules/svg-arc-to-cubic-bezier/modules/index.js","../node_modules/@amcharts/amcharts5/.internal/core/render/backend/CanvasRenderer.js","../node_modules/@amcharts/amcharts5/.internal/core/Root.js","../node_modules/@amcharts/amcharts5/.internal/core/render/RoundedRectangle.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Data.js","../node_modules/@amcharts/amcharts5/.internal/core/render/Component.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Time.js","../node_modules/@amcharts/amcharts5/.internal/core/render/Series.js","../node_modules/@amcharts/amcharts5/.internal/core/util/Draw.js","../node_modules/@amcharts/amcharts5/.internal/core/render/Line.js","../node_modules/@amcharts/amcharts5/.internal/core/render/Chart.js","../node_modules/@amcharts/amcharts5/.internal/core/render/SerialChart.js","../node_modules/@amcharts/amcharts5/.internal/core/render/Tick.js","../node_modules/@amcharts/amcharts5/.internal/core/util/ColorSet.js","../node_modules/@amcharts/amcharts5/.internal/themes/AnimatedTheme.js"],"sourcesContent":["/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Represents a relative value (percent).\r\n *\r\n * The Percent object, can be instantiated using two ways:\r\n *\r\n * * Via `new Percent(X)`.\r\n * * Via `am5.percent(X)`.\r\n *\r\n * You can also use shortcut functions for `0%`, `50%`, and `100%`:\r\n * * `am5.p0`\r\n * * `am5.p50`\r\n * * `am5.p100`\r\n */\r\nexport class Percent {\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param percent  Percent value\r\n     */\r\n    constructor(percent) {\r\n        /**\r\n         * Value in percent.\r\n         */\r\n        Object.defineProperty(this, \"_value\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._value = percent;\r\n    }\r\n    /**\r\n     * Relative value.\r\n     *\r\n     * E.g. 100% is 1, 50% is 0.5, etc.\r\n     *\r\n     * This is useful to apply transformations to other values. E.g.:\r\n     *\r\n     * ```TypeScript\r\n     * let value = 256;\r\n     * let percent = new am5.p50;\r\n     * console.log(value * percent.value); // outputs 128\r\n     * ```\r\n     * ```JavaScript\r\n     * var value = 256;\r\n     * var percent = new am5.p50;\r\n     * console.log(value * percent.value); // outputs 128\r\n     * ```\r\n     *\r\n     * Alternatively, you can use `am5.percent()` helper function:\r\n     *\r\n     * ```TypeScript\r\n     * let value = 256;\r\n     * let percent = am5.p50;\r\n     * console.log(value * percent.value); // outputs 128\r\n     * ```\r\n     * ```JavaScript\r\n     * var value = 256;\r\n     * var percent = am5.p50;\r\n     * console.log(value * percent.value); // outputs 128\r\n     * ```\r\n     *\r\n     * @readonly\r\n     * @return Relative value\r\n     */\r\n    get value() {\r\n        return this._value / 100;\r\n    }\r\n    /**\r\n     * Value in percent.\r\n     *\r\n     * @readonly\r\n     * @return Percent\r\n     */\r\n    get percent() {\r\n        return this._value;\r\n    }\r\n    toString() {\r\n        return \"\" + this._value + \"%\";\r\n    }\r\n    interpolate(min, max) {\r\n        return min + (this.value * (max - min));\r\n    }\r\n    static normalize(percent, min, max) {\r\n        if (percent instanceof Percent) {\r\n            return percent;\r\n        }\r\n        else {\r\n            if (min === max) {\r\n                return new Percent(0);\r\n            }\r\n            else {\r\n                return new Percent(Math.min(Math.max((percent - min) * (1 / (max - min)), 0), 1) * 100);\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * Converts numeric percent value to a proper [[Percent]] object.\r\n *\r\n * ```TypeScript\r\n * pieSeries.set(\"radius\", am5.percent(80));\r\n * ```\r\n * ```JavaScript\r\n * pieSeries.set(\"radius\", am5.percent(80));\r\n * ```\r\n *\r\n * @param value  Percent\r\n * @return Percent object\r\n */\r\nexport function percent(value) {\r\n    return new Percent(value);\r\n}\r\n/**\r\n * A shortcut function to `am5.percent(0)`.\r\n */\r\nexport const p0 = percent(0);\r\n/**\r\n * A shortcut function to `am5.percent(100)`.\r\n */\r\nexport const p100 = percent(100);\r\n/**\r\n * A shortcut function to `am5.percent(50)`.\r\n */\r\nexport const p50 = percent(50);\r\n/**\r\n * Checks if value is a [[Percent]] object.\r\n *\r\n * @ignore Exclude from docs\r\n * @param value  Input value\r\n * @return Is percent?\r\n */\r\nexport function isPercent(value) {\r\n    return value instanceof Percent;\r\n}\r\n//# sourceMappingURL=Percent.js.map","/**\r\n * A collection of utility functions for various type checks and conversion\r\n * @hidden\r\n */\r\n/**\r\n * ============================================================================\r\n * TYPE CHECK\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Returns `true` if value is not a number (NaN).\r\n *\r\n * @param value Input value\r\n * @return Is NaN?\r\n */\r\nexport function isNaN(value) {\r\n    return Number(value) !== value;\r\n}\r\n/**\r\n * Returns a type of the value.\r\n *\r\n * @param value  Input value\r\n * @return Type of the value\r\n * @ignore\r\n */\r\nexport function getType(value) {\r\n    return ({}).toString.call(value);\r\n}\r\n/**\r\n * Asserts that the condition is true.\r\n *\r\n * @param condition  Condition to check\r\n * @param message    Message to display in the error\r\n * @ignore\r\n */\r\nexport function assert(condition, message = \"Assertion failed\") {\r\n    if (!condition) {\r\n        throw new Error(message);\r\n    }\r\n}\r\n/**\r\n * ============================================================================\r\n * QUICK CONVERSION\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Converts any value into a `number`.\r\n *\r\n * @param value  Source value\r\n * @return Number representation of value\r\n */\r\nexport function toNumber(value) {\r\n    if (value != null && !isNumber(value)) {\r\n        let converted = Number(value);\r\n        if (isNaN(converted) && isString(value) && value != \"\" && value.match(/[0-9]+/)) {\r\n            const newValue = value.replace(/[^0-9.\\-]+/g, '');\r\n            return value === newValue ? converted : toNumber(newValue);\r\n        }\r\n        return converted;\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * Converts anything to Date object.\r\n *\r\n * @param value  A value of any type\r\n * @return Date object representing a value\r\n */\r\nexport function toDate(value) {\r\n    if (isDate(value)) {\r\n        // TODO maybe don't create a new Date ?\r\n        return new Date(value);\r\n    }\r\n    else if (isNumber(value)) {\r\n        return new Date(value);\r\n    }\r\n    else {\r\n        // Try converting to number (assuming timestamp)\r\n        let num = Number(value);\r\n        if (!isNumber(num)) {\r\n            return new Date(value);\r\n        }\r\n        else {\r\n            return new Date(num);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Converts numeric value into string. Deals with large or small numbers that\r\n * would otherwise use exponents.\r\n *\r\n * @param value  Numeric value\r\n * @return Numeric value as string\r\n */\r\nexport function numberToString(value) {\r\n    // TODO handle Infinity and -Infinity\r\n    if (isNaN(value)) {\r\n        return \"NaN\";\r\n    }\r\n    if (value === Infinity) {\r\n        return \"Infinity\";\r\n    }\r\n    if (value === -Infinity) {\r\n        return \"-Infinity\";\r\n    }\r\n    // Negative 0\r\n    if ((value === 0) && (1 / value === -Infinity)) {\r\n        return \"-0\";\r\n    }\r\n    // Preserve negative and deal with absoute values\r\n    let negative = value < 0;\r\n    value = Math.abs(value);\r\n    // TODO test this\r\n    let parsed = /^([0-9]+)(?:\\.([0-9]+))?(?:e[\\+\\-]([0-9]+))?$/.exec(\"\" + value);\r\n    let digits = parsed[1];\r\n    let decimals = parsed[2] || \"\";\r\n    let res;\r\n    // Leave the nummber as it is if it does not use exponents\r\n    if (parsed[3] === undefined) {\r\n        res = (decimals === \"\" ? digits : digits + \".\" + decimals);\r\n    }\r\n    else {\r\n        let exponent = +parsed[3];\r\n        // Deal with decimals\r\n        if (value < 1) {\r\n            let zeros = exponent - 1;\r\n            res = \"0.\" + repeat(\"0\", zeros) + digits + decimals;\r\n            // Deal with integers\r\n        }\r\n        else {\r\n            let zeros = exponent - decimals.length;\r\n            if (zeros === 0) {\r\n                res = digits + decimals;\r\n            }\r\n            else if (zeros < 0) {\r\n                res = digits + decimals.slice(0, zeros) + \".\" + decimals.slice(zeros);\r\n            }\r\n            else {\r\n                res = digits + decimals + repeat(\"0\", zeros);\r\n            }\r\n        }\r\n    }\r\n    return negative ? \"-\" + res : res;\r\n}\r\n/**\r\n * Repeats a `string` number of times as set in `amount`.\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Make this faster\r\n * @param string  Source string\r\n * @param amount  Number of times to repeat string\r\n * @return New string\r\n */\r\nexport function repeat(string, amount) {\r\n    return new Array(amount + 1).join(string);\r\n}\r\n/**\r\n * ============================================================================\r\n * TYPE CHECK\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Checks if parameter is `Date`.\r\n *\r\n * @param value  Input value\r\n * @return Is Date?\r\n */\r\nexport function isDate(value) {\r\n    return getType(value) === \"[object Date]\";\r\n}\r\n/**\r\n * Checks if parameter is `string`.\r\n *\r\n * @param value  Input value\r\n * @return Is string?\r\n */\r\nexport function isString(value) {\r\n    return typeof value === \"string\";\r\n}\r\n/**\r\n * Checks if parameter is `number`.\r\n *\r\n * @param value  Input value\r\n * @return Is number?\r\n */\r\nexport function isNumber(value) {\r\n    return typeof value === \"number\" && Number(value) == value;\r\n}\r\n/**\r\n * Checks if parameter is `object`.\r\n *\r\n * @param value  Input value\r\n * @return Is object?\r\n */\r\nexport function isObject(value) {\r\n    return typeof value === \"object\" && value !== null;\r\n}\r\n/**\r\n * Checks if parameter is `Array`.\r\n *\r\n * @param value  Input value\r\n * @return Is Array?\r\n */\r\nexport function isArray(value) {\r\n    return Array.isArray(value);\r\n}\r\n/**\r\n * ============================================================================\r\n * STATIC CONSTANTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * @ignore Exclude from docs\r\n */\r\nexport const PLACEHOLDER = \"__§§§__\";\r\n/**\r\n * @ignore Exclude from docs\r\n */\r\nexport const PLACEHOLDER2 = \"__§§§§__\";\r\n//# sourceMappingURL=Type.js.map","import * as $type from \"./Type\";\r\n/**\r\n * ============================================================================\r\n * UTILITY FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Searches `array` for `value`.\r\n *\r\n * Returns -1 if not found.\r\n *\r\n * @param array  Source array\r\n * @param value  Value to search\r\n * @returns Index\r\n */\r\nexport function indexOf(array, value) {\r\n    const length = array.length;\r\n    for (let i = 0; i < length; ++i) {\r\n        // TODO handle NaN\r\n        if (array[i] === value) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * Calls `test` for each element in `array`.\r\n *\r\n * If `test` returns `true` then it immediately returns `true`.\r\n *\r\n * If `test` returns `false` for all of the elements in `array` then it returns `false`.\r\n *\r\n * @param array  Source array\r\n * @param test   Function which is called on each element\r\n * @returns Whether `test` returned true or not\r\n */\r\nexport function any(array, test) {\r\n    const length = array.length;\r\n    for (let i = 0; i < length; ++i) {\r\n        if (test(array[i])) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Calls `fn` function for every member of array and returns a new array out\r\n * of all outputs.\r\n *\r\n * @param array  Source array\r\n * @param fn     Callback function\r\n * @returns New array\r\n */\r\nexport function map(array, fn) {\r\n    const length = array.length;\r\n    const output = new Array(length);\r\n    for (let i = 0; i < length; ++i) {\r\n        output[i] = fn(array[i], i);\r\n    }\r\n    return output;\r\n}\r\n/**\r\n * Iterates through all items in array and calls `fn` function for each of\r\n * them.\r\n *\r\n * @param array  Source array\r\n * @param fn     Callback function\r\n */\r\nexport function each(array, fn) {\r\n    const length = array.length;\r\n    for (let i = 0; i < length; ++i) {\r\n        fn(array[i], i);\r\n    }\r\n}\r\n/**\r\n * Iterates through all items in array in reverse order and calls `fn` function for each of\r\n * them.\r\n *\r\n * @param array  Source array\r\n * @param fn     Callback function\r\n */\r\nexport function eachReverse(array, fn) {\r\n    let i = array.length;\r\n    while (i > 0) {\r\n        --i;\r\n        fn(array[i], i);\r\n    }\r\n}\r\n/**\r\n * Iterates through all items in array and calls `fn` function for each of\r\n * them.\r\n *\r\n * If `fn` call evaluates to `false`, further iteration is cancelled.\r\n *\r\n * @param array  Source array\r\n * @param fn     Callback function\r\n */\r\nexport function eachContinue(array, fn) {\r\n    const length = array.length;\r\n    for (let i = 0; i < length; ++i) {\r\n        if (!fn(array[i], i)) {\r\n            break;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Shifts an item at `index` towards beginning of the array.\r\n *\r\n * @param array  Source array\r\n * @param index  Target element index\r\n */\r\nexport function shiftLeft(array, index) {\r\n    const length = array.length;\r\n    for (let i = index; i < length; ++i) {\r\n        array[i - index] = array[i];\r\n    }\r\n    array.length = length - index;\r\n}\r\n/**\r\n * Returns the last item of the array.\r\n *\r\n * @param array  Source array\r\n * @returns Last item\r\n */\r\nexport function last(array) {\r\n    const length = array.length;\r\n    return length ? array[length - 1] : undefined;\r\n}\r\n/**\r\n * Returns the first item of the array.\r\n *\r\n * @param array  Source array\r\n * @returns Last item\r\n */\r\nexport function first(array) {\r\n    return array[0];\r\n}\r\n/**\r\n * Inserts `element` into `array` at `index`.\r\n *\r\n * Caps `index` to be between `0` and `array.length`\r\n *\r\n * @param array    Source array\r\n * @param element  Item to insert\r\n * @param array    Index to insert item at\r\n */\r\nexport function insert(array, element, index) {\r\n    //if (array) {\r\n    index = Math.max(0, Math.min(index, array.length));\r\n    array.splice(index, 0, element);\r\n    //}\r\n}\r\n/**\r\n * Removes all copies of `element` from `array` (if they exist) and then\r\n * inserts `element` at `index`.\r\n *\r\n * @param array    Source array\r\n * @param element  Item\r\n * @param array    Index to move item to\r\n */\r\nexport function setIndex(array, element, index) {\r\n    remove(array, element);\r\n    insert(array, element, index);\r\n}\r\n/**\r\n * Pushes all of the elements from `input` into `array`.\r\n *\r\n * @param array  Output array\r\n * @param input  Input array\r\n */\r\nexport function pushAll(array, input) {\r\n    const length = input.length;\r\n    for (let i = 0; i < length; ++i) {\r\n        array.push(input[i]);\r\n    }\r\n}\r\n/**\r\n * Removes `element` from `array`.\r\n *\r\n * If there are multiple copies of `element`, they are all removed.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to remove\r\n */\r\nexport function remove(array, element) {\r\n    let found = false;\r\n    let index = 0;\r\n    for (;;) {\r\n        index = array.indexOf(element, index);\r\n        if (index === -1) {\r\n            return found;\r\n        }\r\n        else {\r\n            found = true;\r\n            array.splice(index, 1);\r\n        }\r\n    }\r\n}\r\nexport function removeFirst(array, element) {\r\n    let index = array.indexOf(element);\r\n    if (index !== -1) {\r\n        array.splice(index, 1);\r\n        return true;\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Adds an `element` to `array`.\r\n *\r\n * If array already contains and item like this, it is removed before adding\r\n * it again.\r\n *\r\n * Optionally `toIndex` can be specified to add element at specific index.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to add\r\n * @param array    Index to move item to\r\n */\r\nexport function move(array, element, toIndex) {\r\n    // @todo this implementation must be the same as the List.moveValue method\r\n    // @todo don't do anything if the desired index is the same as the current index\r\n    let index = indexOf(array, element);\r\n    // @todo remove all old values rather than only the first ?\r\n    if (index !== -1) {\r\n        removeIndex(array, index);\r\n    }\r\n    if (toIndex == null) {\r\n        array.push(element);\r\n    }\r\n    else {\r\n        insertIndex(array, toIndex, element);\r\n    }\r\n}\r\n/**\r\n * Inserts `element` into `array` at `index`.\r\n *\r\n * If `index` is not provided, it will insert `element` at the end of `array`.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to add\r\n * @param array    Index to add item at\r\n */\r\nexport function add(array, element, index) {\r\n    // Append to the end if index is not set\r\n    if (!$type.isNumber(index)) {\r\n        array.push(element);\r\n    }\r\n    // Add to the beginning of array if index is 0\r\n    else if (index === 0) {\r\n        array.unshift(element);\r\n    }\r\n    // Add to indicated place if index is set\r\n    else {\r\n        array.splice(index, 0, element);\r\n    }\r\n}\r\n/**\r\n * Pushes `element` into `array` if it doesn't already exist.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to add\r\n */\r\nexport function pushOne(array, element) {\r\n    if (array.indexOf(element) === -1) {\r\n        array.push(element);\r\n    }\r\n}\r\n/**\r\n * Removes `element` from `array` (if it exists) and then inserts `element` at\r\n * `index`.\r\n *\r\n * If `index` is not provided, it will insert `element` at the end of `array`.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to remove\r\n * @param array    Index to move item to\r\n */\r\nexport function replace(array, element, index) {\r\n    // check if exists\r\n    let ind = array.indexOf(element);\r\n    // remove if exists\r\n    if (ind !== -1) {\r\n        array.splice(ind, 1);\r\n    }\r\n    // add to end if index is not set\r\n    if (!$type.isNumber(index)) {\r\n        array.push(element);\r\n    }\r\n    // add to indicated place if index is set\r\n    else {\r\n        array.splice(index, 0, element);\r\n    }\r\n}\r\n/**\r\n * Wraps `input` in an array, if it isn't already an array.\r\n *\r\n * @param input  Source value\r\n * @return An array\r\n */\r\nexport function toArray(input) {\r\n    if (Array.isArray(input)) {\r\n        return input;\r\n    }\r\n    else {\r\n        return [input];\r\n    }\r\n}\r\n/**\r\n * Returns `true` if `element` exists in `array`.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to search for\r\n * @returns Item in array?\r\n */\r\nexport function has(array, element) {\r\n    return indexOf(array, element) !== -1;\r\n}\r\n/**\r\n * Returns a shallow copy of `array`.\r\n *\r\n * @param array  Source array\r\n * @returns Copy of the array\r\n */\r\nexport function copy(array) {\r\n    const length = array.length;\r\n    // It's faster to create the array with a pre-defined length\r\n    const output = new Array(length);\r\n    for (let i = 0; i < length; ++i) {\r\n        // Because the array has a pre-defined length, we have to assign rather than push\r\n        // This is also faster than pushing\r\n        output[i] = array[i];\r\n    }\r\n    return output;\r\n}\r\n/**\r\n * Returns a copy of `array` which contains all the elements between `start`\r\n * and `end`. (including `start` and excluding `end`)\r\n *\r\n * If `end` is not provided, it defaults to `array.length`.\r\n *\r\n * @param array  Source array\r\n * @param start  Start index\r\n * @param end    End index\r\n * @returns Part of the array\r\n */\r\nexport function slice(array, start, end = array.length) {\r\n    const output = new Array(end - start);\r\n    for (let i = start; i < end; ++i) {\r\n        output[i - start] = array[i];\r\n    }\r\n    return output;\r\n}\r\n/**\r\n * Inserts a value into array at specific index.\r\n *\r\n * @param array  Source array\r\n * @param index  Index\r\n * @param value  Value to insert\r\n */\r\nexport function insertIndex(array, index, value) {\r\n    array.splice(index, 0, value);\r\n}\r\n/**\r\n * Removes a value from array at specific index.\r\n *\r\n * @param array  Source array\r\n * @param index  Index\r\n */\r\nexport function removeIndex(array, index) {\r\n    array.splice(index, 1);\r\n}\r\n/**\r\n * Searches the array using custom function and returns index of the item if\r\n * found.\r\n *\r\n * Will call `matches` function on all items of the array. If return value\r\n * evaluates to `true`, index is returned.\r\n *\r\n * Otherwise returns -1.\r\n *\r\n * @param array    Source array\r\n * @param matches  Search function\r\n * @returns Index of the item if found\r\n */\r\nexport function findIndex(array, matches) {\r\n    const length = array.length;\r\n    for (let i = 0; i < length; ++i) {\r\n        if (matches(array[i], i)) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * This is the same as `findIndex` except it searches from right to left.\r\n *\r\n * @param array    Source array\r\n * @param matches  Search function\r\n * @returns Index of the item if found\r\n */\r\nexport function findIndexReverse(array, matches) {\r\n    let i = array.length;\r\n    while (i > 0) {\r\n        --i;\r\n        if (matches(array[i], i)) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * Searches the array using custom function and returns item if found.\r\n *\r\n * Will call `matches` function on all items of the array. If return value\r\n * evaluates to `true`, index is returned.\r\n *\r\n * Otherwise returns `undefined`.\r\n *\r\n * @param array    Source array\r\n * @param matches  Search function\r\n * @returns Item if found\r\n */\r\nexport function find(array, matches) {\r\n    const index = findIndex(array, matches);\r\n    if (index !== -1) {\r\n        return array[index];\r\n    }\r\n}\r\n/**\r\n * This is the same as `find` except it searches from right to left.\r\n *\r\n * @param array    Source array\r\n * @param matches  Search function\r\n * @returns Item if found\r\n */\r\nexport function findReverse(array, matches) {\r\n    const index = findIndexReverse(array, matches);\r\n    if (index !== -1) {\r\n        return array[index];\r\n    }\r\n}\r\n/**\r\n * Searches the array using custom function and returns item if found.\r\n *\r\n * Will call `matches` function on all items of the array. If value\r\n * is not `undefined`, it returns it.\r\n *\r\n * Otherwise returns `undefined`.\r\n *\r\n * @param array    Source array\r\n * @param matches  Search function\r\n * @returns Item if found\r\n */\r\nexport function findMap(array, matches) {\r\n    const length = array.length;\r\n    for (let i = 0; i < length; ++i) {\r\n        const value = matches(array[i], i);\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Iterates through all items in array and calls `fn` function for each of\r\n * them.\r\n *\r\n * @param array  Source array\r\n * @param fn     Callback function\r\n */\r\nexport function shuffle(array) {\r\n    // https://stackoverflow.com/a/2450976/449477\r\n    let currentIndex = array.length, temporaryValue, randomIndex;\r\n    // While there remain elements to shuffle...\r\n    while (0 !== currentIndex) {\r\n        // Pick a remaining element...\r\n        randomIndex = Math.floor(Math.random() * currentIndex);\r\n        currentIndex -= 1;\r\n        // And swap it with the current element.\r\n        temporaryValue = array[currentIndex];\r\n        array[currentIndex] = array[randomIndex];\r\n        array[randomIndex] = temporaryValue;\r\n    }\r\n}\r\n/**\r\n * Orders an array using specific `ordering` function and returns right-most index of\r\n * the `value`.\r\n *\r\n * @ignore Exclude from docs\r\n * @param array     Source array\r\n * @param ordering  An ordering function\r\n * @returns Result of the search\r\n */\r\nexport function getSortedIndex(array, ordering) {\r\n    let start = 0;\r\n    let end = array.length;\r\n    let found = false;\r\n    while (start < end) {\r\n        // TODO is this faster/slower than using Math.floor ?\r\n        const pivot = (start + end) >> 1;\r\n        const order = ordering(array[pivot]);\r\n        // less\r\n        if (order < 0) {\r\n            start = pivot + 1;\r\n            // equal\r\n        }\r\n        else if (order === 0) {\r\n            found = true;\r\n            start = pivot + 1;\r\n            // more\r\n        }\r\n        else {\r\n            end = pivot;\r\n        }\r\n    }\r\n    return {\r\n        found: found,\r\n        index: (found ? start - 1 : start)\r\n    };\r\n}\r\n/**\r\n * Orders an array using specific `ordering` function and returns left-most index of\r\n * the `value`.\r\n *\r\n * @ignore Exclude from docs\r\n * @param array     Source array\r\n * @param ordering  An ordering function\r\n * @returns Result of the search\r\n */\r\nexport function getFirstSortedIndex(array, ordering) {\r\n    let start = 0;\r\n    let end = array.length;\r\n    let found = false;\r\n    while (start < end) {\r\n        // TODO is this faster/slower than using Math.floor ?\r\n        const pivot = (start + end) >> 1;\r\n        const order = ordering(array[pivot]);\r\n        // less\r\n        if (order < 0) {\r\n            start = pivot + 1;\r\n            // equal\r\n        }\r\n        else if (order === 0) {\r\n            found = true;\r\n            end = pivot;\r\n            // more\r\n        }\r\n        else {\r\n            end = pivot;\r\n        }\r\n    }\r\n    return {\r\n        found: found,\r\n        index: start\r\n    };\r\n}\r\nexport function keepIf(array, keep) {\r\n    let i = array.length;\r\n    while (i > 0) {\r\n        --i;\r\n        if (!keep(array[i])) {\r\n            array.splice(i, 1);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=Array.js.map","import * as $array from \"./Array\";\r\nexport function keys(object) {\r\n    return Object.keys(object);\r\n}\r\n/**\r\n * Returns an array of object's property names ordered using specific ordering\r\n * function.\r\n *\r\n * @param object  Source object\r\n * @param order   Ordering function\r\n * @returns Object property names\r\n */\r\nexport function keysOrdered(object, order) {\r\n    return keys(object).sort(order);\r\n}\r\nexport function copy(object) {\r\n    return Object.assign({}, object);\r\n}\r\nexport function each(object, f) {\r\n    keys(object).forEach((key) => {\r\n        f(key, object[key]);\r\n    });\r\n}\r\n/**\r\n * Iterates through all properties of the object calling `fn` for each of them.\r\n *\r\n * If return value of the function evaluates to `false` further iteration is\r\n * cancelled.\r\n *\r\n * @param object  Source object\r\n * @param fn      Callback function\r\n */\r\nexport function eachContinue(object, fn) {\r\n    for (let key in object) {\r\n        if (hasKey(object, key)) {\r\n            if (!fn(key, object[key])) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * Orders object properties using custom `ord` function and iterates through\r\n * them calling `fn` for each of them.\r\n *\r\n * @param object  Source object\r\n * @param fn      Callback function\r\n * @param order   Ordering function\r\n */\r\nexport function eachOrdered(object, fn, ord) {\r\n    $array.each(keysOrdered(object, ord), (key) => {\r\n        fn(key, object[key]);\r\n    });\r\n}\r\n/**\r\n * Checks if `object` has a specific `key`.\r\n *\r\n * @param object  Source object\r\n * @param key     Property name\r\n * @returns Has key?\r\n */\r\nexport function hasKey(object, key) {\r\n    return {}.hasOwnProperty.call(object, key);\r\n}\r\n/**\r\n * Copies all properties of one object to the other, omitting undefined, but only if property in target object doesn't have a value set.\r\n *\r\n * @param fromObject  Source object\r\n * @param toObject    Target object\r\n * @return Updated target object\r\n * @todo Maybe consolidate with utils.copy?\r\n */\r\nexport function softCopyProperties(source, target) {\r\n    each(source, (key, value) => {\r\n        // only if value is set\r\n        //if ($type.hasValue(value) && !($type.hasValue((<any>target)[key]))) {\r\n        if (value != null && target[key] == null) {\r\n            target[key] = value;\r\n        }\r\n    });\r\n    return target;\r\n}\r\n//# sourceMappingURL=Object.js.map","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $array from \"./Array\";\r\n/**\r\n * A base class for disposable objects.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport class DisposerClass {\r\n    /**\r\n     * Constructor.\r\n     */\r\n    constructor() {\r\n        /**\r\n         * Is object disposed?\r\n         */\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._disposed = false;\r\n    }\r\n    /**\r\n     * Checks if object is disposed.\r\n     *\r\n     * @return Disposed?\r\n     */\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    /**\r\n     * Disposes the object.\r\n     */\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            this._dispose();\r\n        }\r\n    }\r\n}\r\n/**\r\n * A class for creating an IDisposer.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport class Disposer {\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param dispose  Function that disposes object\r\n     */\r\n    constructor(dispose) {\r\n        /**\r\n         * Is object disposed?\r\n         */\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Method that disposes the object.\r\n         */\r\n        Object.defineProperty(this, \"_dispose\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._disposed = false;\r\n        this._dispose = dispose;\r\n    }\r\n    /**\r\n     * Checks if object is disposed.\r\n     *\r\n     * @return Disposed?\r\n     */\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    /**\r\n     * Disposes the object.\r\n     */\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            this._dispose();\r\n        }\r\n    }\r\n}\r\n/**\r\n * This can be extended by other classes to add a `_disposers` property.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport class ArrayDisposer extends DisposerClass {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_disposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n    _dispose() {\r\n        $array.each(this._disposers, (x) => {\r\n            x.dispose();\r\n        });\r\n    }\r\n}\r\n/**\r\n * A collection of related disposers that can be disposed in one go.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport class MultiDisposer extends DisposerClass {\r\n    constructor(disposers) {\r\n        super();\r\n        Object.defineProperty(this, \"_disposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._disposers = disposers;\r\n    }\r\n    _dispose() {\r\n        $array.each(this._disposers, (x) => {\r\n            x.dispose();\r\n        });\r\n    }\r\n    get disposers() {\r\n        return this._disposers;\r\n    }\r\n}\r\n/**\r\n * A special kind of Disposer that has attached value set.\r\n *\r\n * If a new value is set using `set()` method, the old disposer value is\r\n * disposed.\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nexport class MutableValueDisposer extends DisposerClass {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * Current disposer.\r\n         */\r\n        Object.defineProperty(this, \"_disposer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Current value.\r\n         */\r\n        Object.defineProperty(this, \"_value\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _dispose() {\r\n        if (this._disposer != null) {\r\n            this._disposer.dispose();\r\n            this._disposer = undefined;\r\n        }\r\n    }\r\n    /**\r\n     * Returns current value.\r\n     *\r\n     * @return Value\r\n     */\r\n    get() {\r\n        return this._value;\r\n    }\r\n    /**\r\n     * Sets value and disposes previous disposer if it was set.\r\n     *\r\n     * @param value     New value\r\n     * @param disposer  Disposer\r\n     */\r\n    set(value, disposer) {\r\n        if (this._disposer != null) {\r\n            this._disposer.dispose();\r\n        }\r\n        this._disposer = disposer;\r\n        this._value = value;\r\n    }\r\n    /**\r\n     * Resets the disposer value.\r\n     */\r\n    reset() {\r\n        this.set(undefined, undefined);\r\n    }\r\n}\r\n/**\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nexport class CounterDisposer extends Disposer {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * [_counter description]\r\n         *\r\n         * @todo Description\r\n         */\r\n        Object.defineProperty(this, \"_counter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n    }\r\n    /**\r\n     * [increment description]\r\n     *\r\n     * @todo Description\r\n     */\r\n    increment() {\r\n        // TODO throw an error if it is disposed\r\n        ++this._counter;\r\n        // TODO make this more efficient\r\n        return new Disposer(() => {\r\n            --this._counter;\r\n            if (this._counter === 0) {\r\n                this.dispose();\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=Disposer.js.map","import * as $type from \"./Type\";\r\nimport * as $array from \"./Array\";\r\nimport * as $object from \"./Object\";\r\nimport { Disposer, DisposerClass } from \"./Disposer\";\r\n/**\r\n * ============================================================================\r\n * DOM FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Execute a function when DOM is ready.\r\n *\r\n * @since 5.0.2\r\n * @param  f  Callback\r\n */\r\nexport function ready(f) {\r\n    if (document.readyState !== \"loading\") {\r\n        f();\r\n    }\r\n    else {\r\n        const listener = () => {\r\n            if (document.readyState !== \"loading\") {\r\n                document.removeEventListener(\"readystatechange\", listener);\r\n                f();\r\n            }\r\n        };\r\n        document.addEventListener(\"readystatechange\", listener);\r\n    }\r\n}\r\n/**\r\n * Removes a DOM element.\r\n * @param  el  Target element\r\n */\r\nexport function removeElement(el) {\r\n    if (el.parentNode) {\r\n        el.parentNode.removeChild(el);\r\n    }\r\n}\r\n/**\r\n * Function that adds a disposable event listener directly to a DOM element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param dom       A DOM element to add event to\r\n * @param type      Event type\r\n * @param listener  Event listener\r\n * @returns Disposable event\r\n */\r\nexport function addEventListener(dom, type, listener, options) {\r\n    //@todo proper type check for options: EventListenerOptions | boolean (TS for some reason gives error on passive parameter)\r\n    dom.addEventListener(type, listener, options || false);\r\n    return new Disposer(() => {\r\n        dom.removeEventListener(type, listener, options || false);\r\n    });\r\n}\r\n/**\r\n * Function that adds an event listener which is triggered when the browser's zoom changes.\r\n *\r\n * @param listener  Event listener\r\n * @returns Disposable event\r\n */\r\nexport function onZoom(listener) {\r\n    // TODO use matchMedia instead ?\r\n    return addEventListener(window, \"resize\", (_ev) => {\r\n        listener();\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function supports(cap) {\r\n    switch (cap) {\r\n        case \"touchevents\":\r\n            //return \"ontouchstart\" in document.documentElement;\r\n            return window.hasOwnProperty(\"TouchEvent\");\r\n        case \"pointerevents\":\r\n            return window.hasOwnProperty(\"PointerEvent\");\r\n        case \"mouseevents\":\r\n            return window.hasOwnProperty(\"MouseEvent\");\r\n        case \"wheelevents\":\r\n            return window.hasOwnProperty(\"WheelEvent\");\r\n        case \"keyboardevents\":\r\n            return window.hasOwnProperty(\"KeyboardEvent\");\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getPointerId(event) {\r\n    let id = event.pointerId || 0;\r\n    return id;\r\n}\r\n/**\r\n * Removes focus from any element by shifting focus to body.\r\n *\r\n * @ignore\r\n */\r\nexport function blur() {\r\n    if (document.activeElement && document.activeElement != document.body) {\r\n        if (document.activeElement.blur) {\r\n            document.activeElement.blur();\r\n        }\r\n        else {\r\n            let input = document.createElement(\"button\");\r\n            input.style.position = \"fixed\";\r\n            input.style.top = \"0px\";\r\n            input.style.left = \"-10000px\";\r\n            document.body.appendChild(input);\r\n            input.focus();\r\n            input.blur();\r\n            document.body.removeChild(input);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Focuses element.\r\n *\r\n * @ignore\r\n */\r\nexport function focus(el) {\r\n    if (el) {\r\n        el.focus();\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getRendererEvent(key) {\r\n    if (supports(\"pointerevents\")) {\r\n        return key;\r\n    }\r\n    else if (supports(\"touchevents\")) {\r\n        switch (key) {\r\n            case \"pointerover\": return \"touchstart\";\r\n            case \"pointerout\": return \"touchend\";\r\n            case \"pointerleave\": return \"touchend\";\r\n            case \"pointerdown\": return \"touchstart\";\r\n            case \"pointermove\": return \"touchmove\";\r\n            case \"pointerup\": return \"touchend\";\r\n            case \"click\": return \"click\";\r\n            case \"dblclick\": return \"dblclick\";\r\n        }\r\n    }\r\n    else if (supports(\"mouseevents\")) {\r\n        switch (key) {\r\n            case \"pointerover\": return \"mouseover\";\r\n            case \"pointerout\": return \"mouseout\";\r\n            case \"pointerleave\": return \"mouseleave\";\r\n            case \"pointerdown\": return \"mousedown\";\r\n            case \"pointermove\": return \"mousemove\";\r\n            case \"pointerup\": return \"mouseup\";\r\n            case \"click\": return \"click\";\r\n            case \"dblclick\": return \"dblclick\";\r\n        }\r\n    }\r\n    return key;\r\n}\r\n/**\r\n * Determines if pointer event originated from a touch pointer or mouse.\r\n *\r\n * @param ev  Original event\r\n * @return Touch pointer?\r\n */\r\nexport function isTouchEvent(ev) {\r\n    if (typeof Touch !== \"undefined\" && ev instanceof Touch) {\r\n        return true;\r\n    }\r\n    else if (typeof PointerEvent !== \"undefined\" && ev instanceof PointerEvent && ev.pointerType != null) {\r\n        switch (ev.pointerType) {\r\n            case \"touch\":\r\n            case \"pen\":\r\n            case 2:\r\n                return true;\r\n            case \"mouse\":\r\n            case 4:\r\n                return false;\r\n            default:\r\n                return !(ev instanceof MouseEvent);\r\n        }\r\n    }\r\n    else if (ev.type != null) {\r\n        if (ev.type.match(/^mouse/)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Sets style property on DOM element.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport function setStyle(dom, property, value) {\r\n    dom.style[property] = value;\r\n}\r\nexport function getStyle(dom, property) {\r\n    return dom.style[property];\r\n}\r\n/**\r\n * Gets the target of the event, works for shadow DOM too.\r\n */\r\nexport function getEventTarget(event) {\r\n    if (event.composedPath) {\r\n        const path = event.composedPath();\r\n        if (path.length === 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return path[0];\r\n        }\r\n    }\r\n    else {\r\n        return event.target;\r\n    }\r\n}\r\n/**\r\n * Checks of element `a` contains element `b`.\r\n *\r\n * @param a  Aleged ascendant\r\n * @param b  Aleged descendant\r\n * @return Contains?\r\n */\r\nexport function contains(a, b) {\r\n    let cursor = b;\r\n    while (true) {\r\n        if (a === cursor) {\r\n            return true;\r\n        }\r\n        else if (cursor.parentNode === null) {\r\n            // TODO better ShadowRoot detection\r\n            if (cursor.host == null) {\r\n                return false;\r\n            }\r\n            else {\r\n                cursor = cursor.host;\r\n            }\r\n        }\r\n        else {\r\n            cursor = cursor.parentNode;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Returns `true` if pointer event originated on an element within Root.\r\n *\r\n * @since 5.2.8\r\n * @param  event   Event\r\n * @param  target  Target element\r\n */\r\nexport function isLocalEvent(event, target) {\r\n    return event.target && contains(target.root.dom, event.target);\r\n}\r\n/**\r\n * Disables or enables interactivity of a DOM element.\r\n *\r\n * @param  target       Target element\r\n * @param  interactive  Interactive?\r\n */\r\nexport function setInteractive(target, interactive) {\r\n    if (interactive) {\r\n        target.style.pointerEvents = \"auto\";\r\n    }\r\n    else {\r\n        target.style.pointerEvents = \"none\";\r\n    }\r\n}\r\nexport function getEventKey(event) {\r\n    if (event.key !== undefined) {\r\n        return event.key;\r\n    }\r\n    switch (event.keyCode) {\r\n        case 9: return \"Tab\";\r\n        case 13: return \"Enter\";\r\n        case 16: return \"Shift\";\r\n        case 17: return \"Control\";\r\n        case 27: return \"Escape\";\r\n        case 32: return \" \";\r\n        case 37: return \"ArrowLeft\";\r\n        case 38: return \"ArrowUp\";\r\n        case 39: return \"ArrowRight\";\r\n        case 40: return \"ArrowDown\";\r\n        case 46: return \"Delete\";\r\n    }\r\n    return \"\" + event.keyCode;\r\n}\r\n/**\r\n * Returns the shadow root of the element or null\r\n *\r\n * @param a  Node\r\n * @return Root\r\n */\r\nexport function getShadowRoot(a) {\r\n    let cursor = a;\r\n    while (true) {\r\n        if (cursor.parentNode === null) {\r\n            // TODO better ShadowRoot detection\r\n            if (cursor.host != null) {\r\n                return cursor;\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n        else {\r\n            cursor = cursor.parentNode;\r\n        }\r\n    }\r\n}\r\n/**\r\n * [rootStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nlet rootStylesheet;\r\n/**\r\n * @ignore Exclude from docs\r\n */\r\nfunction createStylesheet(element, text, nonce = \"\") {\r\n    // TODO use createElementNS ?\r\n    const e = document.createElement(\"style\");\r\n    e.type = \"text/css\";\r\n    if (nonce != \"\") {\r\n        e.setAttribute(\"nonce\", nonce);\r\n    }\r\n    e.textContent = text;\r\n    if (element === null) {\r\n        document.head.appendChild(e);\r\n    }\r\n    else {\r\n        element.appendChild(e);\r\n    }\r\n    return e;\r\n}\r\n/**\r\n * [getStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @return [description]\r\n */\r\nfunction getStylesheet(element, nonce = \"\") {\r\n    if (element === null) {\r\n        if (rootStylesheet == null) {\r\n            // TODO use createElementNS ?\r\n            const e = document.createElement(\"style\");\r\n            e.type = \"text/css\";\r\n            if (nonce != \"\") {\r\n                e.setAttribute(\"nonce\", nonce);\r\n            }\r\n            document.head.appendChild(e);\r\n            rootStylesheet = e.sheet;\r\n        }\r\n        return rootStylesheet;\r\n    }\r\n    else {\r\n        // TODO use createElementNS ?\r\n        const e = document.createElement(\"style\");\r\n        e.type = \"text/css\";\r\n        if (nonce != \"\") {\r\n            e.setAttribute(\"nonce\", nonce);\r\n        }\r\n        element.appendChild(e);\r\n        return e.sheet;\r\n    }\r\n}\r\n/**\r\n * [makeStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param selector  [description]\r\n * @return [description]\r\n */\r\nfunction appendStylesheet(root, selector) {\r\n    const index = root.cssRules.length;\r\n    root.insertRule(selector + \"{}\", index);\r\n    return root.cssRules[index];\r\n}\r\n/**\r\n * Defines a class for a CSS rule.\r\n *\r\n * Can be used to dynamically add CSS to the document.\r\n */\r\nexport class StyleRule extends DisposerClass {\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param selector  CSS selector\r\n     * @param styles    An object of style attribute - value pairs\r\n     */\r\n    constructor(element, selector, styles, nonce = \"\") {\r\n        super();\r\n        Object.defineProperty(this, \"_root\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * CSS rule.\r\n         */\r\n        Object.defineProperty(this, \"_rule\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._root = getStylesheet(element, nonce);\r\n        try {\r\n            this._rule = appendStylesheet(this._root, selector);\r\n        }\r\n        catch (err) {\r\n            // Create an empty rule on failed selectors\r\n            this._rule = appendStylesheet(this._root, \":not(*)\");\r\n        }\r\n        $object.each(styles, (key, value) => {\r\n            this.setStyle(key, value);\r\n        });\r\n    }\r\n    /**\r\n     * A CSS selector text.\r\n     *\r\n     * E.g.: `.myClass p`\r\n     *\r\n     * @param selector  CSS selector\r\n     */\r\n    set selector(selector) {\r\n        this._rule.selectorText = selector;\r\n    }\r\n    /**\r\n     * @return CSS selector\r\n     */\r\n    get selector() {\r\n        return this._rule.selectorText;\r\n    }\r\n    // TODO test this\r\n    _dispose() {\r\n        // TODO a bit hacky\r\n        const index = $array.indexOf(this._root.cssRules, this._rule);\r\n        if (index === -1) {\r\n            throw new Error(\"Could not dispose StyleRule\");\r\n        }\r\n        else {\r\n            // TODO if it's empty remove it from the DOM ?\r\n            this._root.deleteRule(index);\r\n        }\r\n    }\r\n    /**\r\n     * Sets the same style properties with browser-specific prefixes.\r\n     *\r\n     * @param name   Attribute name\r\n     * @param value  Attribute value\r\n     */\r\n    _setVendorPrefixName(name, value) {\r\n        const style = this._rule.style;\r\n        style.setProperty(\"-webkit-\" + name, value, \"\");\r\n        style.setProperty(\"-moz-\" + name, value, \"\");\r\n        style.setProperty(\"-ms-\" + name, value, \"\");\r\n        style.setProperty(\"-o-\" + name, value, \"\");\r\n        style.setProperty(name, value, \"\");\r\n    }\r\n    /**\r\n     * Sets a value for specific style attribute.\r\n     *\r\n     * @param name   Attribute\r\n     * @param value  Value\r\n     */\r\n    setStyle(name, value) {\r\n        if (name === \"transition\") {\r\n            this._setVendorPrefixName(name, value);\r\n        }\r\n        else {\r\n            this._rule.style.setProperty(name, value, \"\");\r\n        }\r\n    }\r\n}\r\n/**\r\n * Defines a class for an entire CSS style sheet.\r\n *\r\n * Can be used to dynamically add CSS to the document.\r\n */\r\nexport class StyleSheet extends DisposerClass {\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param text  CSS stylesheet\r\n     */\r\n    constructor(element, text, nonce = \"\") {\r\n        super();\r\n        Object.defineProperty(this, \"_element\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._element = createStylesheet(element, text, nonce);\r\n    }\r\n    _dispose() {\r\n        if (this._element.parentNode) {\r\n            this._element.parentNode.removeChild(this._element);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Adds a class name to an HTML or SVG element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param element    Element\r\n * @param className  Class name to add\r\n */\r\nexport function addClass(element, className) {\r\n    if (!element) {\r\n        return;\r\n    }\r\n    if (element.classList) {\r\n        const classes = className.split(\" \");\r\n        $array.each(classes, (name) => {\r\n            element.classList.add(name);\r\n        });\r\n    }\r\n    else {\r\n        let currentClassName = element.getAttribute(\"class\");\r\n        if (currentClassName) {\r\n            element.setAttribute(\"class\", currentClassName.split(\" \").filter((item) => {\r\n                return item !== className;\r\n            }).join(\" \") + \" \" + className);\r\n        }\r\n        else {\r\n            element.setAttribute(\"class\", className);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Removes a class name from an HTML or SVG element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param element    Element\r\n * @param className  Class name to add\r\n */\r\nexport function removeClass(element, className) {\r\n    if (!element) {\r\n        return;\r\n    }\r\n    if (element.classList) {\r\n        element.classList.remove(className);\r\n    }\r\n    else {\r\n        let currentClassName = element.getAttribute(\"class\");\r\n        if (currentClassName) {\r\n            element.setAttribute(\"class\", currentClassName.split(\" \").filter((item) => {\r\n                return item !== className;\r\n            }).join(\" \"));\r\n        }\r\n    }\r\n}\r\n// /**\r\n//  * Applies a set of styles to an element. Stores the original styles so they\r\n//  * can be restored later.\r\n//  *\r\n//  * @ignore\r\n//  * @param io      Element\r\n//   */\r\n// export function prepElementForDrag(dom: HTMLElement): void {\r\n// \t// @todo: save current values\r\n// \t// Define possible props\r\n// \tlet props = [\r\n// \t\t\"touchAction\", \"webkitTouchAction\", \"MozTouchAction\", \"MSTouchAction\", \"msTouchAction\", \"oTouchAction\",\r\n// \t\t\"userSelect\", \"webkitUserSelect\", \"MozUserSelect\", \"MSUserSelect\", \"msUserSelect\", \"oUserSelect\",\r\n// \t\t\"touchSelect\", \"webkitTouchSelect\", \"MozTouchSelect\", \"MSTouchSelect\", \"msTouchSelect\", \"oTouchSelect\",\r\n// \t\t\"touchCallout\", \"webkitTouchCallout\", \"MozTouchCallout\", \"MSTouchCallout\", \"msTouchCallout\", \"oTouchCallout\",\r\n// \t\t\"contentZooming\", \"webkitContentZooming\", \"MozContentZooming\", \"MSContentZooming\", \"msContentZooming\", \"oContentZooming\",\r\n// \t\t\"userDrag\", \"webkitUserDrag\", \"MozUserDrag\", \"MSUserDrag\", \"msUserDrag\", \"oUserDrag\"\r\n// \t];\r\n// \tfor (let i = 0; i < props.length; i++) {\r\n// \t\tif (props[i] in dom.style) {\r\n// \t\t\tsetStyle(dom, props[i], \"none\");\r\n// \t\t}\r\n// \t}\r\n// \t// Remove iOS-specific selection;\r\n// \tsetStyle(dom, \"tapHighlightColor\", \"rgba(0, 0, 0, 0)\");\r\n// }\r\n// /**\r\n//  * Restores replaced styles\r\n//  *\r\n//  * @ignore\r\n//  * @param  io  Element\r\n//  */\r\n// export function unprepElementForDrag(dom: HTMLElement): void {\r\n// \t// Define possible props\r\n// \tlet props = [\r\n// \t\t\"touchAction\", \"webkitTouchAction\", \"MozTouchAction\", \"MSTouchAction\", \"msTouchAction\", \"oTouchAction\",\r\n// \t\t\"userSelect\", \"webkitUserSelect\", \"MozUserSelect\", \"MSUserSelect\", \"msUserSelect\", \"oUserSelect\",\r\n// \t\t\"touchSelect\", \"webkitTouchSelect\", \"MozTouchSelect\", \"MSTouchSelect\", \"msTouchSelect\", \"oTouchSelect\",\r\n// \t\t\"touchCallout\", \"webkitTouchCallout\", \"MozTouchCallout\", \"MSTouchCallout\", \"msTouchCallout\", \"oTouchCallout\",\r\n// \t\t\"contentZooming\", \"webkitContentZooming\", \"MozContentZooming\", \"MSContentZooming\", \"msContentZooming\", \"oContentZooming\",\r\n// \t\t\"userDrag\", \"webkitUserDrag\", \"MozUserDrag\", \"MSUserDrag\", \"msUserDrag\", \"oUserDrag\"\r\n// \t];\r\n// \tfor (let i = 0; i < props.length; i++) {\r\n// \t\tif (props[i] in dom.style) {\r\n// \t\t\tsetStyle(dom, props[i], \"\");\r\n// \t\t}\r\n// \t}\r\n// \t// Remove iOS-specific selection;\r\n// \tsetStyle(dom, \"tapHighlightColor\", \"\");\r\n// }\r\nexport function iOS() {\r\n    return /apple/i.test(navigator.vendor) && \"ontouchend\" in document;\r\n}\r\nexport function getSafeResolution() {\r\n    return iOS() ? 1 : undefined;\r\n}\r\nexport function relativeToValue(percent, full) {\r\n    if ($type.isNumber(percent)) {\r\n        return percent;\r\n    }\r\n    else if (percent != null && $type.isNumber(percent.value) && $type.isNumber(full)) {\r\n        return full * percent.value;\r\n    }\r\n    else {\r\n        return 0;\r\n    }\r\n}\r\n/**\r\n * Returns number of decimals\r\n *\r\n * @ignore Exclude from docs\r\n * @param number  Input number\r\n * @return Number of decimals\r\n */\r\nexport function decimalPlaces(number) {\r\n    let match = ('' + number).match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\r\n    if (!match) {\r\n        return 0;\r\n    }\r\n    return Math.max(0, (match[1] ? match[1].length : 0) - (match[2] ? +match[2] : 0));\r\n}\r\n/**\r\n * ============================================================================\r\n * STRING FORMATTING FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Pads a string with additional characters to certain length.\r\n *\r\n * @param value  A numeric value\r\n * @param len    Result string length in characters\r\n * @param char   A character to use for padding\r\n * @return Padded value as string\r\n */\r\nexport function padString(value, len = 0, char = \"0\") {\r\n    if (typeof value !== \"string\") {\r\n        value = value.toString();\r\n    }\r\n    return len > value.length ? Array(len - value.length + 1).join(char) + value : value;\r\n}\r\nexport function trimLeft(text) {\r\n    return text.replace(/^[\\s]*/, \"\");\r\n}\r\nexport function trimRight(text) {\r\n    return text.replace(/[\\s]*$/, \"\");\r\n}\r\nexport function trim(text) {\r\n    return trimLeft(trimRight(text));\r\n}\r\nexport function truncateTextWithEllipsis(text, maxLength, breakWords = false, ellipsis = \"...\") {\r\n    if (text.length > maxLength) {\r\n        // Find the last non-alphanumeric character before maxLength\r\n        let lastNonAlphanumericIndex = maxLength - 1;\r\n        while (lastNonAlphanumericIndex >= 0 && text.charAt(lastNonAlphanumericIndex).match(/\\w/)) {\r\n            lastNonAlphanumericIndex--;\r\n        }\r\n        if (lastNonAlphanumericIndex >= 0 && breakWords == false) {\r\n            return text.substring(0, lastNonAlphanumericIndex + 1) + '...';\r\n        }\r\n        else {\r\n            // If no non-alphanumeric character found, truncate without breaking words\r\n            return text.substring(0, maxLength) + ellipsis;\r\n        }\r\n    }\r\n    else {\r\n        return text;\r\n    }\r\n}\r\n/**\r\n * Tries to determine format type.\r\n *\r\n * @ignore Exclude from docs\r\n * @param format  Format string\r\n * @return Format type (\"string\" | \"number\" | \"date\" | \"duration\")\r\n */\r\nexport function getFormat(format) {\r\n    // Undefined?\r\n    if (typeof format === \"undefined\") {\r\n        return \"string\";\r\n    }\r\n    // Cleanup and lowercase format\r\n    format = format.toLowerCase().replace(/^\\[[^\\]]*\\]/, \"\");\r\n    // Remove style tags\r\n    format = format.replace(/\\[[^\\]]+\\]/, \"\");\r\n    // Trim\r\n    format = format.trim();\r\n    // Check for any explicit format hints (i.e. /Date)\r\n    let hints = format.match(/\\/(date|number|duration)$/);\r\n    if (hints) {\r\n        return hints[1];\r\n    }\r\n    // Check for explicit hints\r\n    if (format === \"number\") {\r\n        return \"number\";\r\n    }\r\n    if (format === \"date\") {\r\n        return \"date\";\r\n    }\r\n    if (format === \"duration\") {\r\n        return \"duration\";\r\n    }\r\n    // Detect number formatting symbols\r\n    if (format.match(/[#0]/)) {\r\n        return \"number\";\r\n    }\r\n    // Detect date formatting symbols\r\n    if (format.match(/[ymwdhnsqaxkzgtei]/)) {\r\n        return \"date\";\r\n    }\r\n    // Nothing? Let's display as string\r\n    return \"string\";\r\n}\r\n/**\r\n * Cleans up format:\r\n * * Strips out formatter hints\r\n *\r\n * @ignore Exclude from docs\r\n * @param format  Format\r\n * @return Cleaned format\r\n */\r\nexport function cleanFormat(format) {\r\n    return format.replace(/\\/(date|number|duration)$/i, \"\");\r\n}\r\n/**\r\n * Strips all tags from the string.\r\n *\r\n * @param text  Source string\r\n * @return String without tags\r\n */\r\nexport function stripTags(text) {\r\n    return text ? text.replace(/<[^>]*>/g, \"\") : text;\r\n}\r\n/**\r\n * Removes new lines and tags from a string.\r\n *\r\n * @param text  String to conver\r\n * @return Converted string\r\n */\r\nexport function plainText(text) {\r\n    return text ? stripTags((\"\" + text).replace(/[\\n\\r]+/g, \". \")) : text;\r\n}\r\n/**\r\n * Escapes string so it can safely be used in a Regex.\r\n *\r\n * @param value  Unsescaped string\r\n * @return Escaped string\r\n */\r\nexport function escapeForRgex(value) {\r\n    return value.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\r\n}\r\n/**\r\n * Adds space before each uppercase letter.\r\n *\r\n * @param   str Input string\r\n * @return      Output string\r\n */\r\nexport function addSpacing(str) {\r\n    let result = \"\";\r\n    for (let i = 0; i < str.length; i++) {\r\n        const char = str.charAt(i);\r\n        if (char.toUpperCase() == char && i != 0) {\r\n            result += \" \";\r\n        }\r\n        result += char;\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Splits the string into separate characters. Keeps RTL words non-split.\r\n *\r\n * @param   source  Input\r\n * @return          Split text\r\n */\r\nexport function splitString(source) {\r\n    // Regular expression to identify RTL characters\r\n    const rtlChar = /[\\u0590-\\u05FF\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDFF\\uFE70-\\uFEFF]/;\r\n    // Regular expression to capture segments ending with specific Arabic characters\r\n    const splitPattern = /([^اأدذرزو]*[اأدذرزو])/gi;\r\n    // Split input string into array of words or characters, including whitespace\r\n    let segments = source.split(/(\\s+)/); // Split by whitespace, capturing it\r\n    let result = [];\r\n    segments.forEach(segment => {\r\n        if (segment.match(/^\\s+$/)) {\r\n            // If the segment is purely whitespace\r\n            if (segment = \" \") {\r\n                segment = \"  \";\r\n            }\r\n            result.push(segment);\r\n        }\r\n        else if (rtlChar.test(segment)) {\r\n            // If the segment contains RTL characters, handle special splits\r\n            let parts = segment.split(splitPattern).filter(part => part !== '');\r\n            // Concatenate parts processed by the split pattern directly to result\r\n            result = result.concat(parts);\r\n        }\r\n        else {\r\n            // Treat this segment as LTR: split into characters\r\n            result = result.concat([...segment]);\r\n        }\r\n    });\r\n    return result;\r\n}\r\n/**\r\n * ============================================================================\r\n * DATE-RELATED FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Returns a year day.\r\n *\r\n * @param date  Date\r\n * @param utc   Assume UTC dates?\r\n * @return Year day\r\n * @todo Account for UTC\r\n */\r\nexport function getYearDay(date, utc = false) {\r\n    // TODO: utc needed?\r\n    utc;\r\n    const start = new Date(date.getFullYear(), 0, 0);\r\n    const diff = (date.getTime() - start.getTime()) + ((start.getTimezoneOffset() - date.getTimezoneOffset()) * 60 * 1000);\r\n    const oneDay = 1000 * 60 * 60 * 24;\r\n    return Math.floor(diff / oneDay);\r\n}\r\n/**\r\n * Returns week number for a given date.\r\n *\r\n * @param date  Date\r\n * @param utc   Assume UTC dates?\r\n * @return Week number\r\n * @todo Account for UTC\r\n */\r\nexport function getWeek(date, _utc = false) {\r\n    const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\r\n    const day = d.getUTCDay() || 7;\r\n    d.setUTCDate(d.getUTCDate() + 4 - day);\r\n    const firstDay = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\r\n    return Math.ceil((((d.getTime() - firstDay.getTime()) / 86400000) + 1) / 7);\r\n}\r\n/**\r\n * Returns a \"week year\" of the given date.\r\n *\r\n * @param date  Date\r\n * @param utc   Assume UTC dates?\r\n * @return Year of week\r\n * @since 5.3.0\r\n * @todo Account for UTC\r\n */\r\nexport function getWeekYear(date, _utc = false) {\r\n    const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\r\n    const day = d.getUTCDay() || 7;\r\n    d.setUTCDate(d.getUTCDate() + 4 - day);\r\n    const firstDay = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\r\n    return firstDay.getFullYear();\r\n}\r\n/**\r\n * Returns a week number in the month.\r\n *\r\n * @param date  Source Date\r\n * @param utc   Assume UTC dates?\r\n * @return Week number in month\r\n */\r\nexport function getMonthWeek(date, utc = false) {\r\n    const firstWeek = getWeek(new Date(date.getFullYear(), date.getMonth(), 1), utc);\r\n    let currentWeek = getWeek(date, utc);\r\n    if (currentWeek == 1) {\r\n        currentWeek = 53;\r\n    }\r\n    return currentWeek - firstWeek + 1;\r\n}\r\n/**\r\n * Returns a year day out of the given week number.\r\n *\r\n * @param week     Week\r\n * @param year     Year\r\n * @param weekday  Weekday\r\n * @param utc      Assume UTC dates\r\n * @return Day in a year\r\n */\r\nexport function getDayFromWeek(week, year, weekday = 1, utc = false) {\r\n    let date = new Date(year, 0, 4, 0, 0, 0, 0);\r\n    if (utc) {\r\n        date.setUTCFullYear(year);\r\n    }\r\n    let day = week * 7 + weekday - ((date.getDay() || 7) + 3);\r\n    return day;\r\n}\r\n/**\r\n * Returns 12-hour representation out of the 24-hour hours.\r\n *\r\n * @param hours  24-hour number\r\n * @return 12-hour number\r\n */\r\nexport function get12Hours(hours, base) {\r\n    if (hours > 12) {\r\n        hours -= 12;\r\n    }\r\n    else if (hours === 0) {\r\n        hours = 12;\r\n    }\r\n    return base != null ? hours + (base - 1) : hours;\r\n}\r\n/**\r\n * Returns a string name of the time zone.\r\n *\r\n * @param date     Date object\r\n * @param long     Should return long (\"Pacific Standard Time\") or short abbreviation (\"PST\")\r\n * @param savings  Include information if it's in daylight savings mode\r\n * @param utc      Assume UTC dates\r\n * @return Time zone name\r\n */\r\nexport function getTimeZone(date, long = false, savings = false, utc = false, timezone) {\r\n    if (utc) {\r\n        return long ? \"Coordinated Universal Time\" : \"UTC\";\r\n    }\r\n    else if (timezone) {\r\n        const d1 = date.toLocaleString(\"en-US\", { timeZone: timezone });\r\n        const d2 = date.toLocaleString(\"en-US\", { timeZone: timezone, timeZoneName: long ? \"long\" : \"short\" });\r\n        return trim(d2.substr(d1.length));\r\n    }\r\n    let wotz = date.toLocaleString(\"UTC\");\r\n    let wtz = date.toLocaleString(\"UTC\", { timeZoneName: long ? \"long\" : \"short\" }).substr(wotz.length);\r\n    //wtz = wtz.replace(/[+-]+[0-9]+$/, \"\");\r\n    if (savings === false) {\r\n        wtz = wtz.replace(/ (standard|daylight|summer|winter) /i, \" \");\r\n    }\r\n    return trim(wtz);\r\n}\r\nexport function getTimezoneOffset(timezone, targetDate) {\r\n    const date = targetDate || new Date(Date.UTC(2012, 0, 1, 0, 0, 0, 0));\r\n    const utcDate = new Date(date.toLocaleString(\"en-US\", { timeZone: \"UTC\" }));\r\n    const tzDate = new Date(date.toLocaleString(\"en-US\", { timeZone: timezone }));\r\n    return (tzDate.getTime() - utcDate.getTime()) / 6e4 * -1;\r\n}\r\nexport function capitalizeFirst(text) {\r\n    return text.charAt(0).toUpperCase() + text.slice(1);\r\n}\r\n/**\r\n * The functions below are taken and adapted from Garry Tan's blog post:\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n *\r\n * The further attributions go mjijackson.com, which now seems to be defunct.\r\n */\r\n/**\r\n * Converts an HSL color value to RGB. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n * Assumes h, s, and l are contained in the set [0, 1] and\r\n * returns r, g, and b in the set [0, 255].\r\n *\r\n * Function adapted from:\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n *\r\n * @param h       The hue\r\n * @param s       The saturation\r\n * @param l       The lightness\r\n * @return The RGB representation\r\n */\r\nexport function hslToRgb(color) {\r\n    let r, g, b;\r\n    let h = color.h;\r\n    let s = color.s;\r\n    let l = color.l;\r\n    if (s == 0) {\r\n        r = g = b = l; // achromatic\r\n    }\r\n    else {\r\n        let hue2rgb = function hue2rgb(p, q, t) {\r\n            if (t < 0) {\r\n                t += 1;\r\n            }\r\n            if (t > 1) {\r\n                t -= 1;\r\n            }\r\n            if (t < 1 / 6) {\r\n                return p + (q - p) * 6 * t;\r\n            }\r\n            if (t < 1 / 2) {\r\n                return q;\r\n            }\r\n            if (t < 2 / 3) {\r\n                return p + (q - p) * (2 / 3 - t) * 6;\r\n            }\r\n            return p;\r\n        };\r\n        let q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n        let p = 2 * l - q;\r\n        r = hue2rgb(p, q, h + 1 / 3);\r\n        g = hue2rgb(p, q, h);\r\n        b = hue2rgb(p, q, h - 1 / 3);\r\n    }\r\n    return {\r\n        r: Math.round(r * 255),\r\n        g: Math.round(g * 255),\r\n        b: Math.round(b * 255)\r\n    };\r\n}\r\n/**\r\n * Converts an RGB color value to HSL. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n * Assumes r, g, and b are contained in the set [0, 255] and\r\n * returns h, s, and l in the set [0, 1].\r\n *\r\n * Function adapted from:\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n *\r\n * @param r       The red color value\r\n * @param g       The green color value\r\n * @param b       The blue color value\r\n * @return The HSL representation\r\n */\r\nexport function rgbToHsl(color) {\r\n    let r = color.r / 255;\r\n    let g = color.g / 255;\r\n    let b = color.b / 255;\r\n    let max = Math.max(r, g, b);\r\n    let min = Math.min(r, g, b);\r\n    let h = 0;\r\n    let s = 0;\r\n    let l = (max + min) / 2;\r\n    if (max === min) {\r\n        h = s = 0; // achromatic\r\n    }\r\n    else {\r\n        let d = max - min;\r\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n        switch (max) {\r\n            case r:\r\n                h = (g - b) / d + (g < b ? 6 : 0);\r\n                break;\r\n            case g:\r\n                h = (b - r) / d + 2;\r\n                break;\r\n            case b:\r\n                h = (r - g) / d + 4;\r\n                break;\r\n        }\r\n        h /= 6;\r\n    }\r\n    return {\r\n        h: h,\r\n        s: s,\r\n        l: l,\r\n    };\r\n}\r\n/**\r\n * Converts HSV to HSL.\r\n *\r\n * https://en.wikipedia.org/wiki/HSL_and_HSV#HSV_to_HSL\r\n */\r\nexport function hsvToHsl(hsv) {\r\n    const l = hsv.v * (1 - (hsv.s / 2));\r\n    const s = (l === 0 || l === 1\r\n        ? 0\r\n        : (hsv.v - l) / Math.min(l, 1 - l));\r\n    return {\r\n        h: hsv.h,\r\n        s,\r\n        l,\r\n        a: hsv.a,\r\n    };\r\n}\r\n/**\r\n * Converts HSL to HSV.\r\n *\r\n * https://en.wikipedia.org/wiki/HSL_and_HSV#HSL_to_HSV\r\n */\r\nexport function hslToHsv(hsl) {\r\n    const v = hsl.l + (hsl.s * Math.min(hsl.l, 1 - hsl.l));\r\n    const s = (v === 0\r\n        ? 0\r\n        : 2 * (1 - (hsl.l / v)));\r\n    return {\r\n        h: hsl.h,\r\n        s,\r\n        v,\r\n        a: hsl.a,\r\n    };\r\n}\r\n/**\r\n * Returns a color that is `percent` brighter than the reference color.\r\n *\r\n * @param color    Reference color\r\n * @param percent  Brightness percent\r\n * @return Hex code of the new color\r\n */\r\nexport function lighten(rgb, percent) {\r\n    if (rgb) {\r\n        return {\r\n            r: Math.max(0, Math.min(255, rgb.r + getLightnessStep(rgb.r, percent))),\r\n            g: Math.max(0, Math.min(255, rgb.g + getLightnessStep(rgb.g, percent))),\r\n            b: Math.max(0, Math.min(255, rgb.b + getLightnessStep(rgb.b, percent))),\r\n            a: rgb.a\r\n        };\r\n    }\r\n    else {\r\n        // TODO is this correct ?\r\n        return rgb;\r\n    }\r\n}\r\n;\r\n/**\r\n * Gets lightness step.\r\n *\r\n * @param value    Value\r\n * @param percent  Percent\r\n * @return Step\r\n */\r\nexport function getLightnessStep(value, percent) {\r\n    let base = percent > 0 ? 255 - value : value;\r\n    return Math.round(base * percent);\r\n}\r\n/**\r\n * Returns a color that is `percent` brighter than the source `color`.\r\n *\r\n * @param color    Source color\r\n * @param percent  Brightness percent\r\n * @return New color\r\n */\r\nexport function brighten(rgb, percent) {\r\n    if (rgb) {\r\n        let base = Math.min(Math.max(rgb.r, rgb.g, rgb.b), 230);\r\n        //let base = Math.max(rgb.r, rgb.g, rgb.b);\r\n        let step = getLightnessStep(base, percent);\r\n        return {\r\n            r: Math.max(0, Math.min(255, Math.round(rgb.r + step))),\r\n            g: Math.max(0, Math.min(255, Math.round(rgb.g + step))),\r\n            b: Math.max(0, Math.min(255, Math.round(rgb.b + step))),\r\n            a: rgb.a\r\n        };\r\n    }\r\n    else {\r\n        // TODO is this correct ?\r\n        return rgb;\r\n    }\r\n}\r\n;\r\n/**\r\n * Returns brightness step.\r\n *\r\n * @ignore Exclude from docs\r\n * @param value    Value\r\n * @param percent  Percent\r\n * @return Step\r\n */\r\nexport function getBrightnessStep(_value, percent) {\r\n    let base = 255; //percent > 0 ? 255 - value : value;\r\n    return Math.round(base * percent);\r\n}\r\n/**\r\n * Returns `true` if color is \"light\". Useful indetermining which contrasting\r\n * color to use for elements over this color. E.g.: you would want to use\r\n * black text over light background, and vice versa.\r\n *\r\n * @param color  Source color\r\n * @return Light?\r\n */\r\nexport function isLight(color) {\r\n    return ((color.r * 299) + (color.g * 587) + (color.b * 114)) / 1000 >= 128;\r\n}\r\n/**\r\n * Returns a new [[iRGB]] object based on `rgb` parameter with specific\r\n * saturation applied.\r\n *\r\n * `saturation` can be in the range of 0 (fully desaturated) to 1 (fully\r\n * saturated).\r\n *\r\n * @param color       Base color\r\n * @param saturation  Saturation (0-1)\r\n * @return New color\r\n */\r\nexport function saturate(rgb, saturation) {\r\n    if (rgb === undefined || saturation == 1) {\r\n        return rgb;\r\n    }\r\n    let hsl = rgbToHsl(rgb);\r\n    hsl.s = saturation;\r\n    return hslToRgb(hsl);\r\n}\r\n/**\r\n * Returns a color which contrasts more with the source `color`.\r\n *\r\n * @param  color             Base color\r\n * @param  lightAlternative  Light option\r\n * @param  darkAlternative   Dark option\r\n * @return New color\r\n */\r\nexport function alternativeColor(color, lightAlternative = { r: 255, g: 255, b: 255 }, darkAlternative = { r: 255, g: 255, b: 255 }) {\r\n    let light = lightAlternative;\r\n    let dark = darkAlternative;\r\n    if (isLight(darkAlternative)) {\r\n        light = darkAlternative;\r\n        dark = lightAlternative;\r\n    }\r\n    return isLight(color) ? dark : light;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function mergeTags(tags1, tags2) {\r\n    if (!tags1) {\r\n        tags1 = [];\r\n    }\r\n    return [...tags1, ...tags2].filter((value, index, self) => {\r\n        return self.indexOf(value) === index;\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function sameBounds(a, b) {\r\n    if (!b) {\r\n        return false;\r\n    }\r\n    if (a.left != b.left) {\r\n        return false;\r\n    }\r\n    if (a.right != b.right) {\r\n        return false;\r\n    }\r\n    if (a.top != b.top) {\r\n        return false;\r\n    }\r\n    if (a.bottom != b.bottom) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n//# sourceMappingURL=Utils.js.map","import { range } from \"./Animation\";\r\nimport * as $utils from \"./Utils\";\r\nimport * as $type from \"./Type\";\r\n/**\r\n * @ignore\r\n */\r\nfunction string2hex(string) {\r\n    //string = cssColorNames[string.toLowerCase()] || string;\r\n    if (string[0] === \"#\") {\r\n        string = string.substr(1);\r\n    }\r\n    if (string.length == 3) {\r\n        string = string[0].repeat(2) + string[1].repeat(2) + string[2].repeat(2);\r\n    }\r\n    return parseInt(string, 16);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function rgba2hex(color) {\r\n    color = color.replace(/[ ]/g, \"\");\r\n    // Init\r\n    let matches = color.match(/^rgb\\(([0-9]*),([0-9]*),([0-9]*)\\)/i);\r\n    // Try rgb() format\r\n    if (matches) {\r\n        matches.push(\"1\");\r\n    }\r\n    else {\r\n        matches = color.match(/^rgba\\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\\)/i);\r\n        if (!matches) {\r\n            return 0x000000;\r\n        }\r\n    }\r\n    let hex = \"\";\r\n    for (let i = 1; i <= 3; i++) {\r\n        let val = parseInt(matches[i]).toString(16);\r\n        if (val.length == 1) {\r\n            val = \"0\" + val;\r\n        }\r\n        hex += val;\r\n    }\r\n    return string2hex(hex);\r\n}\r\n/**\r\n * Returns a new [[Color]] object base on input.\r\n *\r\n * Accepts parameters in CSS hex or rgb/rtba strings, or hex numbers.\r\n *\r\n * * `\"#f00\"`\r\n * * `\"#ff0000\"`\r\n * * `\"rgb(255, 0, 0)\"`\r\n * * `\"rgba(255, 0, 0, 1)\"`\r\n * * `0xff0000`\r\n *\r\n * @param   input  Input color\r\n * @return         Color\r\n */\r\nexport function color(input) {\r\n    return Color.fromAny(input);\r\n}\r\n/**\r\n * Wherever color needs to be specified in amCharts 5, `Color` object needs to\r\n * be used.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/} for more info\r\n * @important\r\n */\r\nexport class Color {\r\n    constructor(hex) {\r\n        Object.defineProperty(this, \"_hex\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._hex = hex | 0;\r\n    }\r\n    /**\r\n     * Color numeric value.\r\n     */\r\n    get hex() {\r\n        return this._hex;\r\n    }\r\n    /**\r\n     * Value of color's R channel.\r\n     * @return R value\r\n     */\r\n    get r() {\r\n        return this._hex >>> 16;\r\n    }\r\n    /**\r\n     * Value of color's G channel.\r\n     * @return G value\r\n     */\r\n    get g() {\r\n        return (this._hex >> 8) & 0xFF;\r\n    }\r\n    /**\r\n     * Value of color's B channel.\r\n     * @return B value\r\n     */\r\n    get b() {\r\n        return this._hex & 0xFF;\r\n    }\r\n    /**\r\n     * Returns color CSS representation in form of `rgba(r, g, b, a)` string.\r\n     *\r\n     * @param   alpha  Opacity\r\n     * @return         CSS string\r\n     */\r\n    toCSS(alpha = 1) {\r\n        return \"rgba(\" + this.r + \", \" + this.g + \", \" + this.b + \", \" + alpha + \")\";\r\n    }\r\n    /**\r\n     * Returns color CSS representation in form of `#rgb` string.\r\n     *\r\n     * @return         CSS string\r\n     */\r\n    toCSSHex() {\r\n        return \"#\" + $utils.padString(this.r.toString(16), 2) + $utils.padString(this.g.toString(16), 2) + $utils.padString(this.b.toString(16), 2);\r\n    }\r\n    /**\r\n     * Returns color's HSL info.\r\n     * @param   alpha Opacity\r\n     * @return        HSL info\r\n     */\r\n    toHSL(alpha = 1) {\r\n        return $utils.rgbToHsl({\r\n            r: this.r,\r\n            g: this.g,\r\n            b: this.b,\r\n            a: alpha\r\n        });\r\n    }\r\n    /**\r\n     * Converts HSL values into a new [[Color]] object.\r\n     *\r\n     * @param   h H value\r\n     * @param   s S value\r\n     * @param   l L value\r\n     * @return    Color object\r\n     */\r\n    static fromHSL(h, s, l) {\r\n        const rgb = $utils.hslToRgb({\r\n            h: h,\r\n            s: s,\r\n            l: l\r\n        });\r\n        return this.fromRGB(rgb.r, rgb.g, rgb.b);\r\n    }\r\n    toString() {\r\n        return this.toCSSHex();\r\n    }\r\n    /**\r\n     * Converts hex number into a new [[Color]] object.\r\n     *\r\n     * ```TypeScript\r\n     * Color.fromHex(0xff0000) // red\r\n     * ```\r\n     * ```JavaScript\r\n     * Color.fromHex(0xff0000) // red\r\n     * ```\r\n     *\r\n     * @param   hex  Hex color\r\n     * @return       Color\r\n     */\r\n    static fromHex(hex) {\r\n        return new Color(hex);\r\n    }\r\n    /**\r\n     * Converts RGB values to a new [[Color]] object.\r\n     *\r\n     * @param   r  R value\r\n     * @param   g  G value\r\n     * @param   b  B value\r\n     * @return     Color\r\n     */\r\n    static fromRGB(r, g, b) {\r\n        return new Color((b | 0) + (g << 8) + (r << 16));\r\n    }\r\n    /**\r\n     * Converts RGB string to a new [[Color]] object.\r\n     *\r\n     * ```TypeScript\r\n     * Color.fromString(\"#ff0000\") // red\r\n     * ```\r\n     * ```JavaScript\r\n     * Color.fromString(\"#ff0000\") // red\r\n     * ```\r\n     *\r\n     * @param   s  RGB string\r\n     * @return     Color\r\n     */\r\n    static fromString(s) {\r\n        return new Color(string2hex(s));\r\n    }\r\n    /**\r\n     * Converts CSS rgba() syntax to a new [[Color]] object.\r\n     *\r\n     * ```TypeScript\r\n     * Color.fromCSS(\"rgba(255, 0, 0, 1)\") // red\r\n     * ```\r\n     * ```JavaScript\r\n     * Color.fromCSS(\"rgba(255, 0, 0, 1)\") // red\r\n     * ```\r\n     *\r\n     * @param  {string} s [description]\r\n     * @return {Color}    [description]\r\n     */\r\n    static fromCSS(s) {\r\n        return new Color(rgba2hex(s));\r\n    }\r\n    /**\r\n     * Convert to color from virtually anything.\r\n     *\r\n     * Will throw an exception if unable to resolve the color.\r\n     *\r\n     * @param   s  Source\r\n     * @return     Color\r\n     */\r\n    static fromAny(s) {\r\n        if ($type.isString(s)) {\r\n            if (s[0] == \"#\") {\r\n                return Color.fromString(s);\r\n            }\r\n            else if (s.substr(0, 3) == \"rgb\") {\r\n                return Color.fromCSS(s);\r\n            }\r\n        }\r\n        else if ($type.isNumber(s)) {\r\n            return Color.fromHex(s);\r\n        }\r\n        else if (s instanceof Color) {\r\n            return Color.fromHex(s.hex);\r\n        }\r\n        throw new Error(\"Unknown color syntax: \" + s);\r\n    }\r\n    /**\r\n     * Returns a new [[Color]] object based on either `lightAlternative` or\r\n     * `darkAlternative` depending on which one is more contrasting with\r\n     * the `color`.\r\n     *\r\n     * @param   color             Reference color\r\n     * @param   lightAlternative  Light color\r\n     * @param   darkAlternative   Dark color\r\n     * @return                    Alternative color\r\n     */\r\n    static alternative(color, lightAlternative, darkAlternative) {\r\n        const rgb = $utils.alternativeColor({ r: color.r, g: color.g, b: color.b }, lightAlternative ? { r: lightAlternative.r, g: lightAlternative.g, b: lightAlternative.b } : undefined, darkAlternative ? { r: darkAlternative.r, g: darkAlternative.g, b: darkAlternative.b } : undefined);\r\n        return this.fromRGB(rgb.r, rgb.g, rgb.b);\r\n    }\r\n    /**\r\n     * Returns an intermediate Color between two reference colors depending on\r\n     * the progress (`diff`) between the two.\r\n     *\r\n     * @param   diff  Progress\r\n     * @param   from  Source color\r\n     * @param   to    Target color\r\n     * @param   mode  Interpolation mode\r\n     * @return        Color\r\n     */\r\n    static interpolate(diff, from, to, mode = \"rgb\") {\r\n        if (mode == \"hsl\") {\r\n            const fromHSL = from.toHSL();\r\n            const toHSL = to.toHSL();\r\n            return Color.fromHSL(range(diff, fromHSL.h, toHSL.h), range(diff, fromHSL.s, toHSL.s), range(diff, fromHSL.l, toHSL.l));\r\n        }\r\n        else {\r\n            return Color.fromRGB(range(diff, from.r, to.r), range(diff, from.g, to.g), range(diff, from.b, to.b));\r\n        }\r\n    }\r\n    /**\r\n     * Returns a new [[Color]] lightened by `percent` value.\r\n     *\r\n     * Use negative value to darken the color.\r\n     *\r\n     * @param   color    Source color\r\n     * @param   percent  Percent\r\n     * @return           New color\r\n     */\r\n    static lighten(color, percent) {\r\n        const rgb = $utils.lighten({ r: color.r, g: color.g, b: color.b }, percent);\r\n        return Color.fromRGB(rgb.r, rgb.g, rgb.b);\r\n    }\r\n    /**\r\n     * Returns a new [[Color]] brightened by `percent` value.\r\n     *\r\n     * Use negative value to dim the color.\r\n     *\r\n     * @param   color    Source color\r\n     * @param   percent  Percent\r\n     * @return           New color\r\n     */\r\n    static brighten(color, percent) {\r\n        const rgb = $utils.brighten({ r: color.r, g: color.g, b: color.b }, percent);\r\n        return Color.fromRGB(rgb.r, rgb.g, rgb.b);\r\n    }\r\n    /**\r\n     * Returns a new [[Color]] saturated by `percent` value.\r\n     *\r\n     * Value range is between `0` (fully desaturated), to `1` (full color).\r\n     *\r\n     * @param   color    Source color\r\n     * @param   percent  Percent\r\n     * @return           New color\r\n     */\r\n    static saturate(color, percent) {\r\n        const rgb = $utils.saturate({ r: color.r, g: color.g, b: color.b }, percent);\r\n        return Color.fromRGB(rgb.r, rgb.g, rgb.b);\r\n    }\r\n}\r\n//# sourceMappingURL=Color.js.map","/**\r\n * Event Dispatcher module is used for registering listeners and dispatching\r\n * events across amCharts system.\r\n */\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Disposer, MultiDisposer } from \"./Disposer\";\r\nimport * as $array from \"./Array\";\r\nimport * as $type from \"./Type\";\r\n/**\r\n * Universal Event Dispatcher.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\r\n */\r\nexport class EventDispatcher {\r\n    /**\r\n     * Constructor\r\n     */\r\n    constructor() {\r\n        Object.defineProperty(this, \"_listeners\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_killed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_disabled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_iterating\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_enabled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._listeners = [];\r\n        this._killed = [];\r\n        this._disabled = {};\r\n        this._iterating = 0;\r\n        this._enabled = true;\r\n        this._disposed = false;\r\n    }\r\n    /**\r\n     * Returns if this object has been already disposed.\r\n     *\r\n     * @return Disposed?\r\n     */\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    /**\r\n     * Dispose (destroy) this object.\r\n     */\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            const a = this._listeners;\r\n            this._iterating = 1;\r\n            this._listeners = null;\r\n            this._disabled = null;\r\n            try {\r\n                $array.each(a, (x) => {\r\n                    x.disposer.dispose();\r\n                });\r\n            }\r\n            finally {\r\n                this._killed = null;\r\n                this._iterating = null;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Checks if this particular event dispatcher has any listeners set.\r\n     *\r\n     * @return Has listeners?\r\n     */\r\n    hasListeners() {\r\n        return this._listeners.length !== 0;\r\n    }\r\n    /**\r\n     * Checks if this particular event dispatcher has any particular listeners set.\r\n     *\r\n     * @return Has particular event listeners?\r\n     */\r\n    hasListenersByType(type) {\r\n        return $array.any(this._listeners, (x) => (x.type === null || x.type === type) && !x.killed);\r\n    }\r\n    /**\r\n     * Enable dispatching of events if they were previously disabled by\r\n     * `disable()`.\r\n     */\r\n    enable() {\r\n        this._enabled = true;\r\n    }\r\n    /**\r\n     * Disable dispatching of events until re-enabled by `enable()`.\r\n     */\r\n    disable() {\r\n        this._enabled = false;\r\n    }\r\n    /**\r\n     * Enable dispatching particular event, if it was disabled before by\r\n     * `disableType()`.\r\n     *\r\n     * @param type Event type\r\n     */\r\n    enableType(type) {\r\n        delete this._disabled[type];\r\n    }\r\n    /**\r\n     * Disable dispatching of events for a certain event type.\r\n     *\r\n     * Optionally, can set how many dispatches to skip before automatically\r\n     * re-enabling the dispatching.\r\n     *\r\n     * @param type    Event type\r\n     * @param amount  Number of event dispatches to skip\r\n     */\r\n    disableType(type, amount = Infinity) {\r\n        this._disabled[type] = amount;\r\n    }\r\n    /**\r\n     * Removes listener from dispatcher.\r\n     *\r\n     * Will throw an exception if such listener does not exists.\r\n     *\r\n     * @param listener Listener to remove\r\n     */\r\n    _removeListener(listener) {\r\n        if (this._iterating === 0) {\r\n            const index = this._listeners.indexOf(listener);\r\n            if (index === -1) {\r\n                throw new Error(\"Invalid state: could not remove listener\");\r\n            }\r\n            this._listeners.splice(index, 1);\r\n        }\r\n        else {\r\n            this._killed.push(listener);\r\n        }\r\n    }\r\n    /**\r\n     * Removes existing listener by certain parameters.\r\n     *\r\n     * @param once         Listener's once setting\r\n     * @param type         Listener's type\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     */\r\n    _removeExistingListener(once, type, callback, context) {\r\n        if (this._disposed) {\r\n            throw new Error(\"EventDispatcher is disposed\");\r\n        }\r\n        this._eachListener((info) => {\r\n            if (info.once === once && // TODO is this correct ?\r\n                info.type === type &&\r\n                (callback === undefined || info.callback === callback) &&\r\n                info.context === context) {\r\n                info.disposer.dispose();\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Checks if dispatching for particular event type is enabled.\r\n     *\r\n     * @param type  Event type\r\n     * @return Enabled?\r\n     */\r\n    isEnabled(type) {\r\n        if (this._disposed) {\r\n            throw new Error(\"EventDispatcher is disposed\");\r\n        }\r\n        // TODO is this check correct ?\r\n        return this._enabled && this._listeners.length > 0 && this.hasListenersByType(type) && this._disabled[type] === undefined;\r\n    }\r\n    /**\r\n     * Removes all listeners of a particular event type\r\n     *\r\n     * @param type  Listener's type\r\n     */\r\n    removeType(type) {\r\n        if (this._disposed) {\r\n            throw new Error(\"EventDispatcher is disposed\");\r\n        }\r\n        this._eachListener((info) => {\r\n            if (info.type === type) {\r\n                info.disposer.dispose();\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Checks if there's already a listener with specific parameters.\r\n     *\r\n     * @param type      Listener's type\r\n     * @param callback  Callback function\r\n     * @param context   Callback context\r\n     * @return Has listener?\r\n     */\r\n    has(type, callback, context) {\r\n        const index = $array.findIndex(this._listeners, (info) => {\r\n            return info.once !== true && // Ignoring \"once\" listeners\r\n                info.type === type &&\r\n                (callback === undefined || info.callback === callback) &&\r\n                info.context === context;\r\n        });\r\n        return index !== -1;\r\n    }\r\n    /**\r\n     * Checks whether event of the particular type should be dispatched.\r\n     *\r\n     * @param type  Event type\r\n     * @return Dispatch?\r\n     */\r\n    _shouldDispatch(type) {\r\n        if (this._disposed) {\r\n            throw new Error(\"EventDispatcher is disposed\");\r\n        }\r\n        const count = this._disabled[type];\r\n        if (!$type.isNumber(count)) {\r\n            return this._enabled;\r\n        }\r\n        else {\r\n            if (count <= 1) {\r\n                delete this._disabled[type];\r\n            }\r\n            else {\r\n                --this._disabled[type];\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * [_eachListener description]\r\n     *\r\n     * All of this extra code is needed when a listener is removed while iterating\r\n     *\r\n     * @todo Description\r\n     * @param fn [description]\r\n     */\r\n    _eachListener(fn) {\r\n        ++this._iterating;\r\n        try {\r\n            $array.each(this._listeners, fn);\r\n        }\r\n        finally {\r\n            --this._iterating;\r\n            // TODO should this be inside or outside the finally ?\r\n            if (this._iterating === 0 && this._killed.length !== 0) {\r\n                // Remove killed listeners\r\n                $array.each(this._killed, (killed) => {\r\n                    this._removeListener(killed);\r\n                });\r\n                this._killed.length = 0;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Dispatches an event immediately without waiting for next cycle.\r\n     *\r\n     * @param type   Event type\r\n     * @param event  Event object\r\n     * @todo automatically add in type and target properties if they are missing\r\n     */\r\n    dispatch(type, event) {\r\n        if (this._shouldDispatch(type)) {\r\n            // TODO check if it's faster to use an object of listeners rather than a single big array\r\n            // TODO if the function throws, maybe it should keep going ?\r\n            this._eachListener((listener) => {\r\n                if (!listener.killed && (listener.type === null || listener.type === type)) {\r\n                    if (listener._debounceDelay) {\r\n                        if (listener._debounceTimeout) {\r\n                            window.clearTimeout(listener._debounceTimeout);\r\n                        }\r\n                        listener._debounceTimeout = window.setTimeout(() => {\r\n                            listener._debounceTimeout = undefined;\r\n                            if (!listener.killed) {\r\n                                listener.dispatch(type, event);\r\n                            }\r\n                        }, listener._debounceDelay);\r\n                    }\r\n                    else {\r\n                        listener.dispatch(type, event);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Shelves the event to be dispatched within next update cycle.\r\n     *\r\n     * @param type   Event type\r\n     * @param event  Event object\r\n     * @todo automatically add in type and target properties if they are missing\r\n     */\r\n    /*public dispatchLater<Key extends keyof T>(type: Key, event: T[Key]): void {\r\n        if (this._shouldDispatch(type)) {\r\n            this._eachListener((listener) => {\r\n                // TODO check if it's faster to use an object of listeners rather than a single big array\r\n                if (!listener.killed && (listener.type === null || listener.type === type)) {\r\n                    // TODO if the function throws, maybe it should keep going ?\r\n                    // TODO dispatch during the update cycle, rather than using whenIdle\r\n                    $async.whenIdle(() => {\r\n                        if (!listener.killed) {\r\n                            listener.dispatch(type, event);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }*/\r\n    /**\r\n     * Creates, catalogs and returns an [[EventListener]].\r\n     *\r\n     * Event listener can be disposed.\r\n     *\r\n     * @param once         Listener's once setting\r\n     * @param type         Listener's type\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     * @param shouldClone  Whether the listener should be copied when the EventDispatcher is copied\r\n     * @param dispatch\r\n     * @returns An event listener\r\n     */\r\n    _on(once, type, callback, context, shouldClone, dispatch, debounceDelay) {\r\n        if (this._disposed) {\r\n            throw new Error(\"EventDispatcher is disposed\");\r\n        }\r\n        this._removeExistingListener(once, type, callback, context);\r\n        const info = {\r\n            type: type,\r\n            callback: callback,\r\n            context: context,\r\n            shouldClone: shouldClone,\r\n            dispatch: dispatch,\r\n            killed: false,\r\n            once: once,\r\n            disposer: new Disposer(() => {\r\n                info.killed = true;\r\n                if (info._debounceTimeout) {\r\n                    window.clearTimeout(info._debounceTimeout);\r\n                }\r\n                this._removeListener(info);\r\n            }),\r\n            _debounceDelay: debounceDelay\r\n        };\r\n        this._listeners.push(info);\r\n        return info;\r\n    }\r\n    /**\r\n     * Creates an event listener to be invoked on **any** event.\r\n     *\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     * @param shouldClone  Whether the listener should be copied when the EventDispatcher is copied\r\n     * @returns A disposable event listener\r\n     */\r\n    onAll(callback, context, shouldClone = true) {\r\n        return this._on(false, null, callback, context, shouldClone, (_type, event) => callback.call(context, event)).disposer;\r\n    }\r\n    /**\r\n     * Creates an event listener to be invoked on a specific event type.\r\n     *\r\n     * ```TypeScript\r\n     * button.events.once(\"click\", (ev) => {\r\n     *   console.log(\"Button clicked\");\r\n     * }, this);\r\n     * ```\r\n     * ```JavaScript\r\n     * button.events.once(\"click\", function(ev) {\r\n     *   console.log(\"Button clicked\");\r\n     * }, this);\r\n     * ```\r\n     *\r\n     * The above will invoke our custom event handler whenever series we put\r\n     * event on is hidden.\r\n     *\r\n     * @param type         Listener's type\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     * @param shouldClone  Whether the listener should be copied when the EventDispatcher is copied\r\n     * @returns A disposable event listener\r\n     */\r\n    on(type, callback, context, shouldClone = true) {\r\n        return this._on(false, type, callback, context, shouldClone, (_type, event) => callback.call(context, event)).disposer;\r\n    }\r\n    /**\r\n     * Creates a debounced event listener to be invoked on a specific event type.\r\n     *\r\n     * ```TypeScript\r\n     * button.events.onDebounced(\"click\", (ev) => {\r\n     *   console.log(\"Button clicked\");\r\n     * }, 500, this);\r\n     * ```\r\n     * ```JavaScript\r\n     * button.events.onDebounced(\"click\", function(ev) {\r\n     *   console.log(\"Button clicked\");\r\n     * }, 500, this);\r\n     * ```\r\n     *\r\n     * The above will invoke our custom event handler whenever series we put\r\n     * event on is hidden.\r\n     *\r\n     * @param type           Listener's type\r\n     * @param callback       Callback function\r\n     * @param debounceDelay  Debounce delay in milliseconds\r\n     * @param context        Callback context\r\n     * @param shouldClone    Whether the listener should be copied when the EventDispatcher is copied\r\n     * @returns A disposable event listener\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/#Debounced_events} for more info\r\n     * @since 5.14.0\r\n     */\r\n    onDebounced(type, callback, debounceDelay, context, shouldClone = true) {\r\n        return this._on(false, type, callback, context, shouldClone, (_type, event) => callback.call(context, event), debounceDelay).disposer;\r\n    }\r\n    /**\r\n     * Creates an event listener to be invoked on a specific event type once.\r\n     *\r\n     * Once the event listener is invoked, it is automatically disposed.\r\n     *\r\n     * ```TypeScript\r\n     * button.events.once(\"click\", (ev) => {\r\n     *   console.log(\"Button clicked\");\r\n     * }, this);\r\n     * ```\r\n     * ```JavaScript\r\n     * button.events.once(\"click\", function(ev) {\r\n     *   console.log(\"Button clicked\");\r\n     * }, this);\r\n     * ```\r\n     *\r\n     * The above will invoke our custom event handler the first time series we\r\n     * put event on is hidden.\r\n     *\r\n     * @param type         Listener's type\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     * @param shouldClone  Whether the listener should be copied when the EventDispatcher is copied\r\n     * @returns A disposable event listener\r\n     */\r\n    once(type, callback, context, shouldClone = true) {\r\n        const x = this._on(true, type, callback, context, shouldClone, (_type, event) => {\r\n            x.disposer.dispose();\r\n            callback.call(context, event);\r\n        });\r\n        // TODO maybe this should return a different Disposer ?\r\n        return x.disposer;\r\n    }\r\n    /**\r\n     * Removes the event listener with specific parameters.\r\n     *\r\n     * @param type         Listener's type\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     */\r\n    off(type, callback, context) {\r\n        this._removeExistingListener(false, type, callback, context);\r\n    }\r\n    /**\r\n     * Copies all dispatcher parameters, including listeners, from another event\r\n     * dispatcher.\r\n     *\r\n     * @param source Source event dispatcher\r\n     * @ignore\r\n     */\r\n    copyFrom(source) {\r\n        if (this._disposed) {\r\n            throw new Error(\"EventDispatcher is disposed\");\r\n        }\r\n        if (source === this) {\r\n            throw new Error(\"Cannot copyFrom the same TargetedEventDispatcher\");\r\n        }\r\n        const disposers = [];\r\n        $array.each(source._listeners, (x) => {\r\n            // TODO is this correct ?\r\n            if (!x.killed && x.shouldClone) {\r\n                if (x.type === null) {\r\n                    disposers.push(this.onAll(x.callback, x.context));\r\n                }\r\n                else if (x.once) {\r\n                    disposers.push(this.once(x.type, x.callback, x.context));\r\n                }\r\n                else {\r\n                    disposers.push(this.on(x.type, x.callback, x.context));\r\n                }\r\n            }\r\n        });\r\n        return new MultiDisposer(disposers);\r\n    }\r\n}\r\n/**\r\n * A version of the [[EventDispatcher]] that dispatches events for a specific\r\n * target object.\r\n *\r\n * @ignore\r\n */\r\nexport class TargetedEventDispatcher extends EventDispatcher {\r\n    /**\r\n     * Constructor\r\n     *\r\n     * @param target Event dispatcher target\r\n     */\r\n    constructor(target) {\r\n        super();\r\n        /**\r\n         * A target object which is originating events using this dispatcher.\r\n         */\r\n        Object.defineProperty(this, \"target\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.target = target;\r\n    }\r\n    /**\r\n     * Copies all dispatcher parameters, including listeners, from another event\r\n     * dispatcher.\r\n     *\r\n     * @param source Source event dispatcher\r\n     * @ignore\r\n     */\r\n    copyFrom(source) {\r\n        if (this._disposed) {\r\n            throw new Error(\"EventDispatcher is disposed\");\r\n        }\r\n        if (source === this) {\r\n            throw new Error(\"Cannot copyFrom the same TargetedEventDispatcher\");\r\n        }\r\n        const disposers = [];\r\n        $array.each(source._listeners, (x) => {\r\n            // TODO very hacky\r\n            if (x.context === source.target) {\r\n                return;\r\n            }\r\n            // TODO is this correct ?\r\n            if (!x.killed && x.shouldClone) {\r\n                if (x.type === null) {\r\n                    disposers.push(this.onAll(x.callback, x.context));\r\n                }\r\n                else if (x.once) {\r\n                    disposers.push(this.once(x.type, x.callback, x.context));\r\n                }\r\n                else {\r\n                    disposers.push(this.on(x.type, x.callback, x.context));\r\n                }\r\n            }\r\n        });\r\n        return new MultiDisposer(disposers);\r\n    }\r\n}\r\n//# sourceMappingURL=EventDispatcher.js.map","import { __awaiter } from \"tslib\";\r\nimport { Percent } from \"./Percent\";\r\nimport { Color } from \"./Color\";\r\nimport { EventDispatcher } from \"./EventDispatcher\";\r\nimport * as $object from \"./Object\";\r\n/**\r\n * @ignore\r\n */\r\nexport function waitForAnimations(animations) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        if (animations !== undefined) {\r\n            const promises = [];\r\n            $object.each(animations, (_, animation) => {\r\n                promises.push(animation.waitForStop());\r\n            });\r\n            yield Promise.all(promises);\r\n        }\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function normalize(value, min, max) {\r\n    if (min === max) {\r\n        return 0;\r\n    }\r\n    else {\r\n        return Math.min(Math.max((value - min) * (1 / (max - min)), 0), 1);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function range(diff, from, to) {\r\n    return from + (diff * (to - from));\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function defaultInterpolate(diff, from, to) {\r\n    if (diff >= 1) {\r\n        return to;\r\n    }\r\n    else {\r\n        return from;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function percentInterpolate(diff, from, to) {\r\n    return new Percent(range(diff, from.percent, to.percent));\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function colorInterpolate(diff, from, to) {\r\n    return Color.interpolate(diff, from, to);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getInterpolate(from, to) {\r\n    if (typeof from === \"number\" && typeof to === \"number\") {\r\n        return range;\r\n    }\r\n    if (from instanceof Percent && to instanceof Percent) {\r\n        return percentInterpolate;\r\n    }\r\n    if (from instanceof Color && to instanceof Color) {\r\n        return colorInterpolate;\r\n    }\r\n    return defaultInterpolate;\r\n}\r\nexport var AnimationState;\r\n(function (AnimationState) {\r\n    AnimationState[AnimationState[\"Stopped\"] = 0] = \"Stopped\";\r\n    AnimationState[AnimationState[\"Playing\"] = 1] = \"Playing\";\r\n    AnimationState[AnimationState[\"Paused\"] = 2] = \"Paused\";\r\n})(AnimationState || (AnimationState = {}));\r\n/**\r\n * @ignore\r\n */\r\nexport class AnimationTime {\r\n    constructor(entity, duration) {\r\n        Object.defineProperty(this, \"_entity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_duration\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_playingDuration\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_startingTime\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_current\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_from\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_to\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        Object.defineProperty(this, \"easing\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._entity = entity;\r\n        this._duration = duration;\r\n    }\r\n    _stopEvent() {\r\n        const type = \"stopped\";\r\n        if (this.events.isEnabled(type)) {\r\n            this.events.dispatch(type, { type: type, target: this });\r\n        }\r\n    }\r\n    _runAnimation(currentTime) {\r\n        if (this._playingDuration !== null) {\r\n            if (this._startingTime === null) {\r\n                this._startingTime = currentTime;\r\n                return AnimationState.Playing;\r\n            }\r\n            else {\r\n                const diff = (currentTime - this._startingTime) / this._playingDuration;\r\n                if (diff >= 1) {\r\n                    this._playingDuration = null;\r\n                    this._startingTime = null;\r\n                    this._from = this._to;\r\n                    this._current = this._to;\r\n                    this._entity.markDirty();\r\n                    this._stopEvent();\r\n                    const type = \"ended\";\r\n                    if (this.events.isEnabled(type)) {\r\n                        this.events.dispatch(type, { type: type, target: this });\r\n                    }\r\n                    return AnimationState.Stopped;\r\n                }\r\n                else {\r\n                    this._current = range(diff, this._from, this._to);\r\n                    this._entity.markDirty();\r\n                    const type = \"progress\";\r\n                    if (this.events.isEnabled(type)) {\r\n                        this.events.dispatch(type, { type: type, target: this, progress: diff });\r\n                    }\r\n                    return AnimationState.Playing;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            return AnimationState.Stopped;\r\n        }\r\n    }\r\n    _play() {\r\n        this._from = this._current;\r\n        if (this._playingDuration === null) {\r\n            this._entity._root._addAnimation(this);\r\n            const type = \"started\";\r\n            if (this.events.isEnabled(type)) {\r\n                this.events.dispatch(type, { type: type, target: this });\r\n            }\r\n        }\r\n        else {\r\n            this._startingTime = null;\r\n        }\r\n        this._playingDuration = Math.abs(this._to - this._from) * this._duration;\r\n    }\r\n    get duration() {\r\n        return this._duration;\r\n    }\r\n    set duration(value) {\r\n        if (this._duration !== value) {\r\n            this._duration = value;\r\n            if (value === 0) {\r\n                this.jumpTo(this._to);\r\n            }\r\n            else if (this._current !== this._to) {\r\n                this._play();\r\n            }\r\n        }\r\n    }\r\n    get current() {\r\n        if (this.easing) {\r\n            return this.easing(this._current);\r\n        }\r\n        else {\r\n            return this._current;\r\n        }\r\n    }\r\n    stop() {\r\n        this.jumpTo(this._current);\r\n    }\r\n    jumpTo(value) {\r\n        if (this._current !== value) {\r\n            this._entity.markDirty();\r\n        }\r\n        if (this._playingDuration !== null) {\r\n            this._stopEvent();\r\n        }\r\n        this._playingDuration = null;\r\n        this._startingTime = null;\r\n        this._current = value;\r\n        this._from = value;\r\n        this._to = value;\r\n    }\r\n    tweenTo(value) {\r\n        if (this._current === value || this._duration === 0) {\r\n            this.jumpTo(value);\r\n        }\r\n        else {\r\n            if (this._to !== value) {\r\n                this._to = value;\r\n                this._play();\r\n            }\r\n        }\r\n    }\r\n}\r\n/*export class AnimationValue extends AnimationTime {\r\n    public _min: number;\r\n    public _max: number;\r\n\r\n    constructor(entity: Entity, duration: number, min: number, max: number) {\r\n        super(entity, duration);\r\n        this._min = min;\r\n        this._max = max;\r\n    }\r\n\r\n    public get min(): number {\r\n        return this._min;\r\n    }\r\n\r\n    public set min(value: number) {\r\n        if (this._min !== value) {\r\n            this._min = value;\r\n            this._entity.markDirty();\r\n        }\r\n    }\r\n\r\n    public get max(): number {\r\n        return this._max;\r\n    }\r\n\r\n    public set max(value: number) {\r\n        if (this._max !== value) {\r\n            this._max = value;\r\n            this._entity.markDirty();\r\n        }\r\n    }\r\n\r\n    public currentValue(): number {\r\n        return range(super.currentTime(), this._min, this._max);\r\n    }\r\n\r\n    public jumpToValue(value: number) {\r\n        super.jumpToTime(normalize(value, this._min, this._max));\r\n    }\r\n\r\n    public tweenToValue(value: number) {\r\n        super.tweenToTime(normalize(value, this._min, this._max));\r\n    }\r\n}\r\n*/\r\n//# sourceMappingURL=Animation.js.map","import { EventDispatcher } from \"./EventDispatcher\";\r\nimport * as $array from \"./Array\";\r\n/**\r\n * Checks if specific index fits into length.\r\n *\r\n * @param index  Index\r\n * @param len    Length\r\n * @ignore\r\n */\r\nfunction checkBounds(index, len) {\r\n    if (!(index >= 0 && index < len)) {\r\n        throw new Error(\"Index out of bounds: \" + index);\r\n    }\r\n}\r\n/**\r\n * A List class is used to hold a number of indexed items of the same type.\r\n */\r\nexport class List {\r\n    /**\r\n     * Constructor\r\n     *\r\n     * @param initial  Inital list of values to add to list\r\n     */\r\n    constructor(initial = []) {\r\n        /**\r\n         * List values.\r\n         */\r\n        Object.defineProperty(this, \"_values\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        this._values = initial;\r\n    }\r\n    /**\r\n     * An array of values in the list.\r\n     *\r\n     * Do not use this property to add values. Rather use dedicated methods, like\r\n     * `push()`, `removeIndex()`, etc.\r\n     *\r\n     * @readonly\r\n     * @return List values\r\n     */\r\n    get values() {\r\n        return this._values;\r\n    }\r\n    /**\r\n     * Checks if list contains specific item reference.\r\n     *\r\n     * @param item  Item to search for\r\n     * @return `true` if found, `false` if not found\r\n     */\r\n    contains(value) {\r\n        return this._values.indexOf(value) !== -1;\r\n    }\r\n    /**\r\n     * Removes specific item from the list.\r\n     *\r\n     * @param item An item to remove\r\n     */\r\n    removeValue(value) {\r\n        let i = 0;\r\n        let length = this._values.length;\r\n        while (i < length) {\r\n            // TODO handle NaN\r\n            if (this._values[i] === value) {\r\n                this.removeIndex(i);\r\n                --length;\r\n            }\r\n            else {\r\n                ++i;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Searches the list for specific item and returns its index.\r\n     *\r\n     * @param item  An item to search for\r\n     * @return Index or -1 if not found\r\n     */\r\n    indexOf(value) {\r\n        return $array.indexOf(this._values, value);\r\n    }\r\n    /**\r\n     * Number of items in list.\r\n     *\r\n     * @readonly\r\n     * @return Number of items\r\n     */\r\n    get length() {\r\n        return this._values.length;\r\n    }\r\n    /**\r\n     * Checks if there's a value at specific index.\r\n     *\r\n     * @param index  Index\r\n     * @return Value exists?\r\n     */\r\n    hasIndex(index) {\r\n        return index >= 0 && index < this._values.length;\r\n    }\r\n    /**\r\n     * Returns an item at specified index.\r\n     *\r\n     * @param index  Index\r\n     * @return List item\r\n     */\r\n    getIndex(index) {\r\n        return this._values[index];\r\n    }\r\n    _onPush(newValue) {\r\n        if (this.events.isEnabled(\"push\")) {\r\n            this.events.dispatch(\"push\", {\r\n                type: \"push\",\r\n                target: this,\r\n                newValue\r\n            });\r\n        }\r\n    }\r\n    _onInsertIndex(index, newValue) {\r\n        if (this.events.isEnabled(\"insertIndex\")) {\r\n            this.events.dispatch(\"insertIndex\", {\r\n                type: \"insertIndex\",\r\n                target: this,\r\n                index,\r\n                newValue\r\n            });\r\n        }\r\n    }\r\n    _onSetIndex(index, oldValue, newValue) {\r\n        if (this.events.isEnabled(\"setIndex\")) {\r\n            this.events.dispatch(\"setIndex\", {\r\n                type: \"setIndex\",\r\n                target: this,\r\n                index,\r\n                oldValue,\r\n                newValue\r\n            });\r\n        }\r\n    }\r\n    _onSwap(a, b) {\r\n        if (this.events.isEnabled(\"swap\")) {\r\n            this.events.dispatch(\"swap\", {\r\n                type: \"swap\",\r\n                target: this,\r\n                a,\r\n                b\r\n            });\r\n        }\r\n    }\r\n    _onRemoveIndex(index, oldValue) {\r\n        if (this.events.isEnabled(\"removeIndex\")) {\r\n            this.events.dispatch(\"removeIndex\", {\r\n                type: \"removeIndex\",\r\n                target: this,\r\n                index,\r\n                oldValue\r\n            });\r\n        }\r\n    }\r\n    _onMoveIndex(oldIndex, newIndex, value) {\r\n        if (this.events.isEnabled(\"moveIndex\")) {\r\n            this.events.dispatch(\"moveIndex\", {\r\n                type: \"moveIndex\",\r\n                target: this,\r\n                oldIndex,\r\n                newIndex,\r\n                value,\r\n            });\r\n        }\r\n    }\r\n    _onClear(oldValues) {\r\n        if (this.events.isEnabled(\"clear\")) {\r\n            this.events.dispatch(\"clear\", {\r\n                type: \"clear\",\r\n                target: this,\r\n                oldValues\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Sets value at specific index.\r\n     *\r\n     * If there's already a value at the index, it is overwritten.\r\n     *\r\n     * @param index  Index\r\n     * @param value  New value\r\n     * @return New value\r\n     */\r\n    setIndex(index, value) {\r\n        checkBounds(index, this._values.length);\r\n        const oldValue = this._values[index];\r\n        // Do nothing if the old value and the new value are the same\r\n        if (oldValue !== value) {\r\n            this._values[index] = value;\r\n            this._onSetIndex(index, oldValue, value);\r\n        }\r\n        return oldValue;\r\n    }\r\n    /**\r\n     * Adds an item to the list at a specific index, which pushes all the other\r\n     * items further down the list.\r\n     *\r\n     * @param index Index\r\n     * @param item  An item to add\r\n     */\r\n    insertIndex(index, value) {\r\n        checkBounds(index, this._values.length + 1);\r\n        $array.insertIndex(this._values, index, value);\r\n        this._onInsertIndex(index, value);\r\n        return value;\r\n    }\r\n    /**\r\n     * Swaps indexes of two items in the list.\r\n     *\r\n     * @param a  Item 1\r\n     * @param b  Item 2\r\n     */\r\n    swap(a, b) {\r\n        const len = this._values.length;\r\n        checkBounds(a, len);\r\n        checkBounds(b, len);\r\n        if (a !== b) {\r\n            const value_a = this._values[a];\r\n            const value_b = this._values[b];\r\n            this._values[a] = value_b;\r\n            this._values[b] = value_a;\r\n            this._onSwap(value_a, value_b);\r\n        }\r\n    }\r\n    /**\r\n     * Removes a value at specific index.\r\n     *\r\n     * @param index  Index of value to remove\r\n     * @return Removed value\r\n     */\r\n    removeIndex(index) {\r\n        checkBounds(index, this._values.length);\r\n        const oldValue = this._values[index];\r\n        $array.removeIndex(this._values, index);\r\n        this._onRemoveIndex(index, oldValue);\r\n        return oldValue;\r\n    }\r\n    /**\r\n     * Moves an item to a specific index within the list.\r\n     *\r\n     * If the index is not specified it will move the item to the end of the\r\n     * list.\r\n     *\r\n     * @param value  Item to move\r\n     * @param index  Index to place item at\r\n     */\r\n    moveValue(value, toIndex) {\r\n        // TODO don't do anything if the desired index is the same as the current index\r\n        let index = this.indexOf(value);\r\n        // TODO remove all old values rather than only the first ?\r\n        if (index !== -1) {\r\n            $array.removeIndex(this._values, index);\r\n            if (toIndex == null) {\r\n                const toIndex = this._values.length;\r\n                this._values.push(value);\r\n                this._onMoveIndex(index, toIndex, value);\r\n            }\r\n            else {\r\n                $array.insertIndex(this._values, toIndex, value);\r\n                this._onMoveIndex(index, toIndex, value);\r\n            }\r\n        }\r\n        else if (toIndex == null) {\r\n            this._values.push(value);\r\n            this._onPush(value);\r\n        }\r\n        else {\r\n            $array.insertIndex(this._values, toIndex, value);\r\n            this._onInsertIndex(toIndex, value);\r\n        }\r\n        return value;\r\n    }\r\n    /**\r\n     * Adds an item to the end of the list.\r\n     *\r\n     * @param item  An item to add\r\n     */\r\n    push(value) {\r\n        this._values.push(value);\r\n        this._onPush(value);\r\n        return value;\r\n    }\r\n    /**\r\n     * Adds an item as a first item in the list.\r\n     *\r\n     * @param item  An item to add\r\n     */\r\n    unshift(value) {\r\n        this.insertIndex(0, value);\r\n        return value;\r\n    }\r\n    /**\r\n     * Adds multiple items to the list.\r\n     *\r\n     * @param items  An Array of items to add\r\n     */\r\n    pushAll(values) {\r\n        $array.each(values, (value) => {\r\n            this.push(value);\r\n        });\r\n    }\r\n    /**\r\n     * Copies and adds items from abother list.\r\n     *\r\n     * @param source  A list top copy items from\r\n     */\r\n    copyFrom(source) {\r\n        this.pushAll(source._values);\r\n    }\r\n    /**\r\n     * Returns the last item from the list, and removes it.\r\n     *\r\n     * @return Item\r\n     */\r\n    pop() {\r\n        let index = this._values.length - 1;\r\n        return index < 0 ? undefined : this.removeIndex(this._values.length - 1);\r\n    }\r\n    /**\r\n     * Returns the first item from the list, and removes it.\r\n     *\r\n     * @return Item\r\n     */\r\n    shift() {\r\n        return this._values.length ? this.removeIndex(0) : undefined;\r\n    }\r\n    /**\r\n     * Sets multiple items to the list.\r\n     *\r\n     * All current items are removed.\r\n     *\r\n     * @param newArray  New items\r\n     */\r\n    setAll(newArray) {\r\n        const old = this._values;\r\n        this._values = [];\r\n        this._onClear(old);\r\n        $array.each(newArray, (value) => {\r\n            this._values.push(value);\r\n            this._onPush(value);\r\n        });\r\n    }\r\n    /**\r\n     * Removes all items from the list.\r\n     */\r\n    clear() {\r\n        this.setAll([]);\r\n    }\r\n    /**\r\n     * Returns an ES6 iterator for the list.\r\n     */\r\n    *[Symbol.iterator]() {\r\n        const length = this._values.length;\r\n        for (let i = 0; i < length; ++i) {\r\n            yield this._values[i];\r\n        }\r\n    }\r\n    /**\r\n     * Calls `f` for each element in the list.\r\n     *\r\n     * `f` should have at least one parameter defined which will get a current\r\n     * item, with optional second argument - index.\r\n     */\r\n    each(f) {\r\n        $array.each(this._values, f);\r\n    }\r\n    /**\r\n     * Calls `f` for each element in the list, from right to left.\r\n     *\r\n     * `f` should have at least one parameter defined which will get a current\r\n     * item, with optional second argument - index.\r\n     */\r\n    eachReverse(f) {\r\n        $array.eachReverse(this._values, f);\r\n    }\r\n}\r\n/**\r\n * A version of a [[List]] where the elements are disposed automatically when\r\n * removed from the list, unless `autoDispose` is set to `false`.\r\n */\r\nexport class ListAutoDispose extends List {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * Automatically disposes elements that are removed from the list.\r\n         *\r\n         * @default true\r\n         */\r\n        Object.defineProperty(this, \"autoDispose\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    /**\r\n     * Swaps indexes of two items in the list.\r\n     *\r\n     * @param a  Item 1\r\n     * @param b  Item 2\r\n     */\r\n    swap(a, b) {\r\n        const currentAutoDispose = this.autoDispose;\r\n        this.autoDispose = false;\r\n        super.swap(a, b);\r\n        this.autoDispose = currentAutoDispose;\r\n    }\r\n    _onSetIndex(index, oldValue, newValue) {\r\n        if (this.autoDispose) {\r\n            oldValue.dispose();\r\n        }\r\n        super._onSetIndex(index, oldValue, newValue);\r\n    }\r\n    _onRemoveIndex(index, oldValue) {\r\n        if (this.autoDispose) {\r\n            oldValue.dispose();\r\n        }\r\n        super._onRemoveIndex(index, oldValue);\r\n    }\r\n    _onClear(oldValues) {\r\n        if (this.autoDispose) {\r\n            $array.each(oldValues, (x) => {\r\n                x.dispose();\r\n            });\r\n        }\r\n        super._onClear(oldValues);\r\n    }\r\n    _dispose() {\r\n        if (this.autoDispose) {\r\n            $array.each(this._values, (x) => {\r\n                x.dispose();\r\n            });\r\n        }\r\n    }\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            this._dispose();\r\n        }\r\n    }\r\n}\r\n/**\r\n * A version of a [[List]] that is able to create new elements as well as\r\n * apply additional settings to newly created items.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/list-templates/} for more info\r\n */\r\nexport class ListTemplate extends ListAutoDispose {\r\n    constructor(template, make) {\r\n        super();\r\n        Object.defineProperty(this, \"template\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"make\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.template = template;\r\n        this.make = make;\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        if (this.autoDispose) {\r\n            this.template.dispose();\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=List.js.map","import { List } from \"./List\";\r\nimport * as $array from \"./Array\";\r\n/**\r\n * A version of [[List]] to hold children of the [[Container]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/} for more info\r\n */\r\nexport class Children extends List {\r\n    constructor(container) {\r\n        super();\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_container\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._container = container;\r\n        this._events = this.events.onAll((change) => {\r\n            if (change.type === \"clear\") {\r\n                $array.each(change.oldValues, (x) => {\r\n                    this._onRemoved(x);\r\n                });\r\n            }\r\n            else if (change.type === \"push\") {\r\n                this._onInserted(change.newValue);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                this._onRemoved(change.oldValue);\r\n                this._onInserted(change.newValue, change.index);\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                this._onInserted(change.newValue, change.index);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                this._onRemoved(change.oldValue);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                this._onRemoved(change.value);\r\n                this._onInserted(change.value, change.newIndex);\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IListEvent type\");\r\n            }\r\n        });\r\n    }\r\n    _onInserted(child, index) {\r\n        child._setParent(this._container, true);\r\n        const childrenDisplay = this._container._childrenDisplay;\r\n        if (index === undefined) {\r\n            childrenDisplay.addChild(child._display);\r\n        }\r\n        else {\r\n            childrenDisplay.addChildAt(child._display, index);\r\n        }\r\n    }\r\n    _onRemoved(child) {\r\n        this._container._childrenDisplay.removeChild(child._display);\r\n        this._container.markDirtyBounds();\r\n        this._container.markDirty();\r\n    }\r\n    /**\r\n     * Returns `true` if obejct is disposed.\r\n     */\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    /**\r\n     * Permanently dispose this object.\r\n     */\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            this._events.dispose();\r\n            $array.each(this.values, (child) => {\r\n                child.dispose();\r\n            });\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=Children.js.map","import { isNumber } from \"./Type\";\r\n/**\r\n * ============================================================================\r\n * CONSTANTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nexport const PI = Math.PI;\r\nexport const HALFPI = PI / 2;\r\nexport const RADIANS = PI / 180;\r\nexport const DEGREES = 180 / PI;\r\n/**\r\n * Rounds the numeric value to whole number or specific precision of set.\r\n *\r\n * @param value      Value\r\n * @param precision  Precision (number of decimal points)\r\n * @param floor  In case value ends with 0.5 and precision is 0, we might need to floor the value instead of ceiling it.\r\n * @return Rounded value\r\n */\r\nexport function round(value, precision, floor) {\r\n    if (!isNumber(precision) || precision <= 0) {\r\n        let rounded = Math.round(value);\r\n        if (floor) {\r\n            if (rounded - value == 0.5) {\r\n                rounded--;\r\n            }\r\n        }\r\n        return rounded;\r\n    }\r\n    else {\r\n        let d = Math.pow(10, precision);\r\n        return Math.round(value * d) / d;\r\n    }\r\n}\r\n/**\r\n * Ceils the numeric value to whole number or specific precision of set.\r\n *\r\n * @param value      Value\r\n * @param precision  Precision (number of decimal points)\r\n * @return Rounded value\r\n */\r\nexport function ceil(value, precision) {\r\n    if (!isNumber(precision) || precision <= 0) {\r\n        return Math.ceil(value);\r\n    }\r\n    else {\r\n        let d = Math.pow(10, precision);\r\n        return Math.ceil(value * d) / d;\r\n    }\r\n}\r\n/**\r\n * [getCubicControlPointA description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param p0        [description]\r\n * @param p1        [description]\r\n * @param p2        [description]\r\n * @param p3        [description]\r\n * @param tensionX  [description]\r\n * @param tensionY  [description]\r\n * @return [description]\r\n */\r\nexport function getCubicControlPointA(p0, p1, p2, tensionX, tensionY) {\r\n    return { x: ((-p0.x + p1.x / tensionX + p2.x) * tensionX), y: ((-p0.y + p1.y / tensionY + p2.y) * tensionY) };\r\n}\r\n/**\r\n * [getCubicControlPointB description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param p0        [description]\r\n * @param p1        [description]\r\n * @param p2        [description]\r\n * @param p3        [description]\r\n * @param tensionX  [description]\r\n * @param tensionY  [description]\r\n * @return [description]\r\n */\r\nexport function getCubicControlPointB(p1, p2, p3, tensionX, tensionY) {\r\n    return { x: ((p1.x + p2.x / tensionX - p3.x) * tensionX), y: ((p1.y + p2.y / tensionY - p3.y) * tensionY) };\r\n}\r\nexport function fitToRange(value, min, max) {\r\n    return Math.min(Math.max(value, min), max);\r\n}\r\n/**\r\n * Returns sine of an angle specified in degrees.\r\n *\r\n * @param value  Value\r\n * @return Sine\r\n */\r\nexport function sin(angle) {\r\n    return Math.sin(RADIANS * angle);\r\n}\r\n/**\r\n * Returns tan of an angle specified in degrees.\r\n *\r\n * @param value  Value\r\n * @return Sine\r\n */\r\nexport function tan(angle) {\r\n    return Math.tan(RADIANS * angle);\r\n}\r\n/**\r\n * Returns cosine of an angle specified in degrees.\r\n *\r\n * @param value  Value\r\n * @return Cosine\r\n */\r\nexport function cos(angle) {\r\n    return Math.cos(RADIANS * angle);\r\n}\r\n// 0 to 360\r\nexport function normalizeAngle(value) {\r\n    value = value % 360;\r\n    if (value < 0) {\r\n        value += 360;\r\n    }\r\n    return value;\r\n}\r\n// TODO this doesn't work properly for skewing, and it's probably broken for rotation too\r\nexport function getArcBounds(cx, cy, startAngle, endAngle, radius) {\r\n    let minX = Number.MAX_VALUE;\r\n    let minY = Number.MAX_VALUE;\r\n    let maxX = -Number.MAX_VALUE;\r\n    let maxY = -Number.MAX_VALUE;\r\n    let bpoints = [];\r\n    bpoints.push(getArcPoint(radius, startAngle));\r\n    bpoints.push(getArcPoint(radius, endAngle));\r\n    let fromAngle = Math.min(Math.floor(startAngle / 90) * 90, Math.floor(endAngle / 90) * 90);\r\n    let toAngle = Math.max(Math.ceil(startAngle / 90) * 90, Math.ceil(endAngle / 90) * 90);\r\n    for (let angle = fromAngle; angle <= toAngle; angle += 90) {\r\n        if (angle >= startAngle && angle <= endAngle) {\r\n            bpoints.push(getArcPoint(radius, angle));\r\n        }\r\n    }\r\n    for (let i = 0; i < bpoints.length; i++) {\r\n        let pt = bpoints[i];\r\n        if (pt.x < minX) {\r\n            minX = pt.x;\r\n        }\r\n        if (pt.y < minY) {\r\n            minY = pt.y;\r\n        }\r\n        if (pt.x > maxX) {\r\n            maxX = pt.x;\r\n        }\r\n        if (pt.y > maxY) {\r\n            maxY = pt.y;\r\n        }\r\n    }\r\n    return ({ left: cx + minX, top: cy + minY, right: cx + maxX, bottom: cy + maxY });\r\n}\r\n/**\r\n * Returns point on arc\r\n *\r\n * @param center point\r\n * @param radius\r\n * @param arc\r\n * @return {boolean}\r\n */\r\nexport function getArcPoint(radius, arc) {\r\n    return ({ x: radius * cos(arc), y: radius * sin(arc) });\r\n}\r\nexport function mergeBounds(bounds) {\r\n    const len = bounds.length;\r\n    if (len > 0) {\r\n        let bound = bounds[0];\r\n        let left = bound.left;\r\n        let top = bound.top;\r\n        let right = bound.right;\r\n        let bottom = bound.bottom;\r\n        if (len > 1) {\r\n            for (let i = 1; i < len; i++) {\r\n                bound = bounds[i];\r\n                left = Math.min(bound.left, left);\r\n                right = Math.max(bound.right, right);\r\n                top = Math.min(bound.top, top);\r\n                bottom = Math.max(bound.bottom, bottom);\r\n            }\r\n        }\r\n        return { left, right, top, bottom };\r\n    }\r\n    return { left: 0, right: 0, top: 0, bottom: 0 };\r\n}\r\nexport function fitAngleToRange(value, startAngle, endAngle) {\r\n    if (startAngle > endAngle) {\r\n        let temp = startAngle;\r\n        startAngle = endAngle;\r\n        endAngle = temp;\r\n    }\r\n    value = normalizeAngle(value);\r\n    let count = (startAngle - normalizeAngle(startAngle)) / 360;\r\n    if (value < startAngle) {\r\n        value += 360 * (count + 1);\r\n    }\r\n    let maxEnd = startAngle + (endAngle - startAngle) / 2 + 180;\r\n    let maxStart = startAngle + (endAngle - startAngle) / 2 - 180;\r\n    if (value > endAngle) {\r\n        if (value - 360 > startAngle) {\r\n            value -= 360;\r\n        }\r\n        else {\r\n            if (value < maxEnd) {\r\n                value = endAngle;\r\n            }\r\n            else {\r\n                value = startAngle;\r\n            }\r\n        }\r\n    }\r\n    if (value < startAngle) {\r\n        if (value > maxStart) {\r\n            value = startAngle;\r\n        }\r\n        else {\r\n            value = endAngle;\r\n        }\r\n    }\r\n    return value;\r\n}\r\nexport function inBounds(point, bounds) {\r\n    if (point.x >= bounds.left && point.y >= bounds.top && point.x <= bounds.right && point.y <= bounds.bottom) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function getAngle(point1, point2) {\r\n    if (!point2) {\r\n        point2 = { x: point1.x * 2, y: point1.y * 2 };\r\n    }\r\n    let diffX = point2.x - point1.x;\r\n    let diffY = point2.y - point1.y;\r\n    let angle = Math.atan2(diffY, diffX) * DEGREES;\r\n    if (angle < 0) {\r\n        angle += 360;\r\n    }\r\n    return normalizeAngle(angle);\r\n}\r\n/**\r\n * [getPointOnQuadraticCurve description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param pointA        [description]\r\n * @param pointB        [description]\r\n * @param controlPoint  [description]\r\n * @param position      [description]\r\n * @return [description]\r\n */\r\nexport function getPointOnQuadraticCurve(pointA, pointB, controlPoint, position) {\r\n    let x = (1 - position) * (1 - position) * pointA.x + 2 * (1 - position) * position * controlPoint.x + position * position * pointB.x;\r\n    let y = (1 - position) * (1 - position) * pointA.y + 2 * (1 - position) * position * controlPoint.y + position * position * pointB.y;\r\n    return { x: x, y: y };\r\n}\r\nexport function getPointOnLine(pointA, pointB, position) {\r\n    return { x: pointA.x + (pointB.x - pointA.x) * position, y: pointA.y + (pointB.y - pointA.y) * position };\r\n}\r\n/**\r\n * Returns the closest value from the array of values to the reference value.\r\n *\r\n * @param values  Array of values\r\n * @param value   Reference value\r\n * @return Closes value from the array\r\n */\r\nexport function closest(values, referenceValue) {\r\n    return values.reduce(function (prev, curr) {\r\n        return (Math.abs(curr - referenceValue) < Math.abs(prev - referenceValue) ? curr : prev);\r\n    });\r\n}\r\n/**\r\n * Returns true if bounds overlap\r\n * @param bounds1 IBounds\r\n * @param bounds2 IBounds\r\n * @returns boolean\r\n */\r\nexport function boundsOverlap(bounds1, bounds2) {\r\n    const horizontalOverlap = bounds1.left < bounds2.right && bounds1.right > bounds2.left;\r\n    const verticalOverlap = bounds1.top < bounds2.bottom && bounds1.bottom > bounds2.top;\r\n    return horizontalOverlap && verticalOverlap;\r\n}\r\n/**\r\n * Generates points of a spiral\r\n * @param cx\r\n * @param cy\r\n * @param radius\r\n * @param radiusY\r\n * @param innerRadius\r\n * @param step\r\n * @param radiusStep\r\n * @param startAngle\r\n * @param endAngle\r\n * @returns IPoint[]\r\n */\r\nexport function spiralPoints(cx, cy, radius, radiusY, innerRadius, step, radiusStep, startAngle, endAngle) {\r\n    let r = innerRadius + 0.01;\r\n    startAngle = normalizeAngle(startAngle);\r\n    endAngle = normalizeAngle(endAngle);\r\n    let angle = startAngle * RADIANS;\r\n    if (endAngle < startAngle) {\r\n        endAngle += 360;\r\n    }\r\n    let points = [];\r\n    while (r < radius + radiusStep) {\r\n        let stepSize = step;\r\n        if (stepSize / 2 > r) {\r\n            stepSize = 2 * r;\r\n        }\r\n        let c = Math.max(0.01, Math.min(1, r / 200));\r\n        stepSize = stepSize * c;\r\n        let degrees = angle * DEGREES;\r\n        let point = { x: cx + r * Math.cos(angle), y: cy + r * radiusY / radius * Math.sin(angle) };\r\n        points.push(point);\r\n        r = innerRadius + 0.01 + (degrees - startAngle) / 360 * radiusStep;\r\n        angle += 2 * Math.asin(stepSize / 2 / r);\r\n        if (angle * DEGREES > endAngle + 360 * Math.ceil((radius - innerRadius) / radiusStep)) {\r\n            break;\r\n        }\r\n    }\r\n    points.shift();\r\n    return points;\r\n}\r\n/**\r\n * Returns true if circles overlap\r\n * @param circle1\r\n * @param circle2\r\n * @returns boolean\r\n */\r\nexport function circlesOverlap(circle1, circle2) {\r\n    return Math.hypot(circle1.x - circle2.x, circle1.y - circle2.y) <= circle1.radius + circle2.radius;\r\n}\r\n//# sourceMappingURL=Math.js.map","/**\r\n * A collection of easing functions\r\n *\r\n * Parts of this collection are taken from D3.js library (https://d3js.org/)\r\n */\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $math from \"./Math\";\r\n/**\r\n * The functions below are from D3.js library (https://d3js.org/)\r\n *\r\n * ----------------------------------------------------------------------------\r\n * Copyright 2017 Mike Bostock\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *\tthis list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *\tthis list of conditions and the following disclaimer in the documentation\r\n *\tand/or other materials provided with the distribution.\r\n *\r\n * 3. Neither the name of the copyright holder nor the names of its\r\n *\tcontributors may be used to endorse or promote products derived from this\r\n *\tsoftware without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n * ----------------------------------------------------------------------------\r\n * @hidden\r\n */\r\n/**\r\n */\r\nexport function linear(t) {\r\n    return t;\r\n}\r\nexport function quad(t) {\r\n    return t * t;\r\n}\r\nexport function cubic(t) {\r\n    return t * t * t;\r\n}\r\nexport function pow(t, e) {\r\n    return Math.pow(t, e);\r\n}\r\nexport function exp(t) {\r\n    return Math.pow(2, 10 * t - 10);\r\n}\r\nexport function sine(t) {\r\n    return 1 - Math.cos(t * $math.HALFPI);\r\n}\r\nexport function circle(t) {\r\n    return 1 - Math.sqrt(1 - t * t);\r\n}\r\n/**\r\n * ============================================================================\r\n * TRANSFORMERS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n */\r\nexport function yoyo(ease) {\r\n    return function (t) {\r\n        if (t < 0.5) {\r\n            return ease(t * 2.0);\r\n        }\r\n        else {\r\n            return ease((1.0 - t) * 2.0);\r\n        }\r\n    };\r\n}\r\nexport function out(ease) {\r\n    return function (t) {\r\n        return 1.0 - ease(1.0 - t);\r\n    };\r\n}\r\nexport function inOut(ease) {\r\n    return function (t) {\r\n        if (t <= 0.5) {\r\n            return ease(t * 2.0) / 2.0;\r\n        }\r\n        else {\r\n            return 1.0 - (ease((1.0 - t) * 2.0) / 2.0);\r\n        }\r\n    };\r\n}\r\n/**\r\n * ============================================================================\r\n * BOUNCE\r\n * ============================================================================\r\n * @hidden\r\n */\r\nlet b1 = 4 / 11, b2 = 6 / 11, b3 = 8 / 11, b4 = 3 / 4, b5 = 9 / 11, b6 = 10 / 11, b7 = 15 / 16, b8 = 21 / 22, b9 = 63 / 64, b0 = 1 / b1 / b1;\r\nexport function bounce(t) {\r\n    return 1 - bounceOut(1 - t);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction bounceOut(t) {\r\n    t = t;\r\n    if (t < b1) {\r\n        return b0 * t * t;\r\n    }\r\n    else if (t < b3) {\r\n        return b0 * (t -= b2) * t + b4;\r\n    }\r\n    else if (t < b6) {\r\n        return b0 * (t -= b5) * t + b7;\r\n    }\r\n    else {\r\n        return b0 * (t -= b8) * t + b9;\r\n    }\r\n}\r\n/**\r\n * ============================================================================\r\n * ELASTIC\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * @ignore\r\n */\r\nlet tau = 2 * Math.PI;\r\n/**\r\n * @ignore\r\n */\r\nlet amplitude = 1;\r\n/**\r\n * @ignore\r\n */\r\nlet period = 0.3 / tau;\r\n/**\r\n * @ignore\r\n */\r\nlet s = Math.asin(1 / amplitude) * period;\r\nexport function elastic(t) {\r\n    let v = t;\r\n    return amplitude * Math.pow(2, 10 * --v) * Math.sin((s - v) / period);\r\n}\r\n//# sourceMappingURL=Ease.js.map","import * as $object from \"./Object\";\r\nimport * as $ease from \"./Ease\";\r\n/**\r\n * An object representing a collection of setting values to apply as required.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/states/} for more info\r\n */\r\nexport class State {\r\n    constructor(entity, settings) {\r\n        Object.defineProperty(this, \"_entity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_userSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        this._entity = entity;\r\n        this._settings = settings;\r\n        $object.each(settings, (key) => {\r\n            this._userSettings[key] = true;\r\n        });\r\n    }\r\n    get(key, fallback) {\r\n        const value = this._settings[key];\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setRaw(key, value) {\r\n        this._settings[key] = value;\r\n    }\r\n    /**\r\n     * Sets a setting `value` for the specified `key` to be set when the state\r\n     * is applied.\r\n     *\r\n     * @param   key       Setting key\r\n     * @param   value     Setting value\r\n     * @return            Setting value\r\n     */\r\n    set(key, value) {\r\n        this._userSettings[key] = true;\r\n        this.setRaw(key, value);\r\n    }\r\n    /**\r\n     * Removes a setting value for the specified `key`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     */\r\n    remove(key) {\r\n        delete this._userSettings[key];\r\n        delete this._settings[key];\r\n    }\r\n    /**\r\n     * Sets multiple settings at once.\r\n     *\r\n     * `settings` must be an object with key: value pairs.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param settings Settings\r\n     */\r\n    setAll(settings) {\r\n        $object.keys(settings).forEach((key) => {\r\n            this.set(key, settings[key]);\r\n        });\r\n    }\r\n    _eachSetting(f) {\r\n        $object.each(this._settings, f);\r\n    }\r\n    /**\r\n     * Applies the state to the target element.\r\n     *\r\n     * All setting values are set immediately.\r\n     */\r\n    apply() {\r\n        const seen = {};\r\n        seen[\"stateAnimationEasing\"] = true;\r\n        seen[\"stateAnimationDuration\"] = true;\r\n        const defaultState = this._entity.states.lookup(\"default\");\r\n        this._eachSetting((key, value) => {\r\n            if (!seen[key]) {\r\n                seen[key] = true;\r\n                // save values to default state\r\n                if (this !== defaultState) {\r\n                    if (!(key in defaultState._settings)) {\r\n                        defaultState._settings[key] = this._entity.get(key);\r\n                    }\r\n                }\r\n                this._entity.set(key, value);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Applies the state to the target element.\r\n     *\r\n     * Returns an object representing all [[Animation]] objects created for\r\n     * each setting key transition.\r\n     *\r\n     * @return           Animations\r\n     */\r\n    applyAnimate(duration) {\r\n        if (duration == null) {\r\n            duration = this._settings.stateAnimationDuration;\r\n        }\r\n        if (duration == null) {\r\n            duration = this.get(\"stateAnimationDuration\", this._entity.get(\"stateAnimationDuration\", 0));\r\n        }\r\n        let easing = this._settings.stateAnimationEasing;\r\n        if (easing == null) {\r\n            easing = this.get(\"stateAnimationEasing\", this._entity.get(\"stateAnimationEasing\", $ease.cubic));\r\n        }\r\n        const defaultState = this._entity.states.lookup(\"default\");\r\n        const seen = {};\r\n        seen[\"stateAnimationEasing\"] = true;\r\n        seen[\"stateAnimationDuration\"] = true;\r\n        const animations = {};\r\n        this._eachSetting((key, value) => {\r\n            if (!seen[key]) {\r\n                seen[key] = true;\r\n                // save values to default state\r\n                if (this != defaultState) {\r\n                    if (!(key in defaultState._settings)) {\r\n                        defaultState._settings[key] = this._entity.get(key);\r\n                    }\r\n                }\r\n                const animation = this._entity.animate({\r\n                    key: key,\r\n                    to: value,\r\n                    duration: duration,\r\n                    easing: easing\r\n                });\r\n                if (animation) {\r\n                    animations[key] = animation;\r\n                }\r\n            }\r\n        });\r\n        return animations;\r\n    }\r\n}\r\n/**\r\n * Collection of [[State]] objects for an element.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/states/} for more info\r\n */\r\nexport class States {\r\n    constructor(entity) {\r\n        Object.defineProperty(this, \"_states\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_entity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._entity = entity;\r\n    }\r\n    /**\r\n     * Checks if a state by `name` exists. Returns it there is one.\r\n     *\r\n     * @param  name  State name\r\n     * @return       State\r\n     */\r\n    lookup(name) {\r\n        return this._states[name];\r\n    }\r\n    /**\r\n     * Sets supplied `settings` on a state by the `name`.\r\n     *\r\n     * If such state does not yet exists, it is created.\r\n     *\r\n     * @param   name      State name\r\n     * @param   settings  Settings\r\n     * @return            New State\r\n     */\r\n    create(name, settings) {\r\n        const state = this._states[name];\r\n        if (state) {\r\n            state.setAll(settings);\r\n            return state;\r\n        }\r\n        else {\r\n            const state = new State(this._entity, settings);\r\n            this._states[name] = state;\r\n            return state;\r\n        }\r\n    }\r\n    /**\r\n     * Removes the state called `name`.\r\n     *\r\n     * @param   name      State name\r\n     */\r\n    remove(name) {\r\n        delete this._states[name];\r\n    }\r\n    /**\r\n     * Applies a named state to the target element.\r\n     *\r\n     * @param  newState  State name\r\n     */\r\n    apply(newState) {\r\n        const state = this._states[newState];\r\n        if (state) {\r\n            state.apply();\r\n        }\r\n        this._entity._applyState(newState);\r\n    }\r\n    /**\r\n     * Applies a named state to the element.\r\n     *\r\n     * Returns an object representing all [[Animation]] objects created for\r\n     * each setting key transition.\r\n     *\r\n     * @param   newState  State name\r\n     * @return            Animations\r\n     */\r\n    applyAnimate(newState, duration) {\r\n        let animations;\r\n        const state = this._states[newState];\r\n        if (state) {\r\n            animations = state.applyAnimate(duration);\r\n        }\r\n        this._entity._applyStateAnimated(newState, duration);\r\n        return animations;\r\n    }\r\n}\r\n//# sourceMappingURL=States.js.map","/**\r\n * @ignore\r\n */\r\nexport class Registry {\r\n    constructor() {\r\n        /**\r\n         * Currently running version of amCharts.\r\n         */\r\n        Object.defineProperty(this, \"version\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"5.14.3\"\r\n        });\r\n        /**\r\n         * List of applied licenses.\r\n         * @ignore\r\n         */\r\n        Object.defineProperty(this, \"licenses\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        /**\r\n         * Entities that have their `id` setting set.\r\n         */\r\n        Object.defineProperty(this, \"entitiesById\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        /**\r\n         * All created [[Root]] elements.\r\n         */\r\n        Object.defineProperty(this, \"rootElements\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n}\r\n/**\r\n    * @ignore\r\n */\r\nexport const registry = new Registry();\r\n/**\r\n * Adds a license, e.g.:\r\n *\r\n * ```TypeScript\r\n * am5.addLicense(\"xxxxxxxx\");\r\n * ```\r\n * ```JavaScript\r\n * am5.addLicense(\"xxxxxxxx\");\r\n * ```\r\n *\r\n * Multiple licenses can be added to cover for multiple products.\r\n *\r\n * @param  license  License key\r\n */\r\nexport function addLicense(license) {\r\n    registry.licenses.push(license);\r\n}\r\n/**\r\n * Disposes all [[Root]] elements.\r\n */\r\nexport function disposeAllRootElements() {\r\n    let root;\r\n    while (root = registry.rootElements.pop()) {\r\n        root.dispose();\r\n    }\r\n}\r\n/**\r\n * Finds and returns a `Root` element assigned to a container with `id`.\r\n *\r\n * @param   id  Container ID\r\n * @return      Root\r\n * @since 5.9.2\r\n */\r\nexport function getRootById(id) {\r\n    let found;\r\n    registry.rootElements.forEach((item) => {\r\n        if (item.dom.id == id) {\r\n            found = item;\r\n        }\r\n    });\r\n    return found;\r\n}\r\n//# sourceMappingURL=Registry.js.map","/**\r\n * @ignore\r\n */\r\nexport function compare(left, right) {\r\n    if (left === right) {\r\n        return 0;\r\n    }\r\n    else if (left < right) {\r\n        return -1;\r\n    }\r\n    else {\r\n        return 1;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function compareArray(left, right, f) {\r\n    const leftLength = left.length;\r\n    const rightLength = right.length;\r\n    const length = Math.min(leftLength, rightLength);\r\n    for (let i = 0; i < length; ++i) {\r\n        const order = f(left[i], right[i]);\r\n        if (order !== 0) {\r\n            return order;\r\n        }\r\n    }\r\n    return compare(leftLength, rightLength);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function reverse(order) {\r\n    if (order < 0) {\r\n        return 1;\r\n    }\r\n    else if (order > 0) {\r\n        return -1;\r\n    }\r\n    else {\r\n        return 0;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function compareNumber(a, b) {\r\n    if (a === b) {\r\n        return 0;\r\n    }\r\n    else if (a < b) {\r\n        return -1;\r\n    }\r\n    else {\r\n        return 1;\r\n    }\r\n}\r\n//# sourceMappingURL=Order.js.map","import { Disposer } from \"./Disposer\";\r\nimport { EventDispatcher } from \"./EventDispatcher\";\r\nimport { AnimationState, getInterpolate } from \"./Animation\";\r\nimport { States } from \"./States\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $object from \"./Object\";\r\nimport * as $ease from \"./Ease\";\r\nimport * as $array from \"./Array\";\r\nimport * as $order from \"./Order\";\r\n/**\r\n * Allows to dynamically modify setting value of its target element.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/adapters/} for more info\r\n */\r\nexport class Adapters {\r\n    constructor(entity) {\r\n        Object.defineProperty(this, \"_entity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_callbacks\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_disabled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        this._entity = entity;\r\n    }\r\n    /**\r\n     * Add a function (`callback`) that will modify value for setting `key`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/adapters/} for more info\r\n     */\r\n    add(key, callback) {\r\n        let callbacks = this._callbacks[key];\r\n        if (callbacks === undefined) {\r\n            callbacks = this._callbacks[key] = [];\r\n        }\r\n        callbacks.push(callback);\r\n        this._entity._markDirtyKey(key);\r\n        return new Disposer(() => {\r\n            if ($array.removeFirst(callbacks, callback)) {\r\n                this._entity._markDirtyKey(key);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Removes all adapters for the specific key.\r\n     *\r\n     * @since 5.1.0\r\n     */\r\n    remove(key) {\r\n        const callbacks = this._callbacks[key];\r\n        if (callbacks !== undefined) {\r\n            delete this._callbacks[key];\r\n            if (callbacks.length !== 0) {\r\n                this._entity._markDirtyKey(key);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Enables (previously disabled) adapters for specific key.\r\n     *\r\n     * @since 5.1.0\r\n     */\r\n    enable(key) {\r\n        if (this._disabled[key]) {\r\n            delete this._disabled[key];\r\n            this._entity._markDirtyKey(key);\r\n        }\r\n    }\r\n    /**\r\n     * Disables all adapters for specific key.\r\n     *\r\n     * @since 5.1.0\r\n     */\r\n    disable(key) {\r\n        if (!this._disabled[key]) {\r\n            this._disabled[key] = true;\r\n            this._entity._markDirtyKey(key);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    fold(key, value) {\r\n        if (!this._disabled[key]) {\r\n            const callbacks = this._callbacks[key];\r\n            if (callbacks !== undefined) {\r\n                for (let i = 0, len = callbacks.length; i < len; ++i) {\r\n                    value = callbacks[i](value, this._entity, key);\r\n                }\r\n            }\r\n        }\r\n        return value;\r\n    }\r\n}\r\n/**\r\n * Animation object.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/} for more info\r\n */\r\nexport class Animation {\r\n    constructor(animation, from, to, duration, easing, loops, startingTime) {\r\n        Object.defineProperty(this, \"_animation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_from\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_to\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_duration\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_easing\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_loops\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_interpolate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_oldTime\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_time\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_stopped\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_playing\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        this._animation = animation;\r\n        this._from = from;\r\n        this._to = to;\r\n        this._duration = duration;\r\n        this._easing = easing;\r\n        this._loops = loops;\r\n        this._interpolate = getInterpolate(from, to);\r\n        this._oldTime = startingTime;\r\n    }\r\n    get to() {\r\n        return this._to;\r\n    }\r\n    get from() {\r\n        return this._from;\r\n    }\r\n    get playing() {\r\n        return this._playing;\r\n    }\r\n    get stopped() {\r\n        return this._stopped;\r\n    }\r\n    stop() {\r\n        if (!this._stopped) {\r\n            this._stopped = true;\r\n            this._playing = false;\r\n            if (this.events.isEnabled(\"stopped\")) {\r\n                this.events.dispatch(\"stopped\", {\r\n                    type: \"stopped\",\r\n                    target: this,\r\n                });\r\n            }\r\n        }\r\n    }\r\n    pause() {\r\n        this._playing = false;\r\n        this._oldTime = null;\r\n    }\r\n    play() {\r\n        if (!this._stopped && !this._playing) {\r\n            this._playing = true;\r\n            this._animation._startAnimation();\r\n        }\r\n    }\r\n    get percentage() {\r\n        return this._time / this._duration;\r\n    }\r\n    waitForStop() {\r\n        return new Promise((resolve, _reject) => {\r\n            if (this._stopped) {\r\n                resolve();\r\n            }\r\n            else {\r\n                const listener = () => {\r\n                    stopped.dispose();\r\n                    resolve();\r\n                };\r\n                const stopped = this.events.on(\"stopped\", listener);\r\n            }\r\n        });\r\n    }\r\n    _checkEnded() {\r\n        if (this._loops > 1) {\r\n            --this._loops;\r\n            return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    _run(currentTime) {\r\n        if (this._oldTime !== null) {\r\n            this._time += currentTime - this._oldTime;\r\n            if (this._time > this._duration) {\r\n                this._time = this._duration;\r\n            }\r\n        }\r\n        this._oldTime = currentTime;\r\n    }\r\n    _reset(currentTime) {\r\n        this._oldTime = currentTime;\r\n        this._time = 0;\r\n    }\r\n    _value(diff) {\r\n        return this._interpolate(this._easing(diff), this._from, this._to);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nlet counter = 0;\r\n/**\r\n * Base class for [[Entity]] objects that support Settings.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n */\r\nexport class Settings {\r\n    constructor(settings) {\r\n        /**\r\n         * Unique ID.\r\n         */\r\n        Object.defineProperty(this, \"uid\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: ++counter\r\n        });\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_privateSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_settingEvents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_privateSettingEvents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_prevSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_prevPrivateSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_animatingSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_animatingPrivateSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        // TODO move this into Entity\r\n        Object.defineProperty(this, \"_userProperties\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        /**\r\n         * If this is set to `false` then disposing does nothing, it's a no-op.\r\n         */\r\n        Object.defineProperty(this, \"enableDispose\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        this._settings = settings;\r\n    }\r\n    _checkDirty() {\r\n        $object.keys(this._settings).forEach((key) => {\r\n            this._userProperties[key] = true;\r\n            this._markDirtyKey(key);\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    resetUserSettings() {\r\n        this._userProperties = {};\r\n    }\r\n    _runAnimation(currentTime) {\r\n        let state = AnimationState.Stopped;\r\n        if (!this.isDisposed()) {\r\n            let playing = false;\r\n            let paused = false;\r\n            $object.each(this._animatingSettings, (key, animation) => {\r\n                if (animation.stopped) {\r\n                    this._stopAnimation(key);\r\n                }\r\n                else if (animation.playing) {\r\n                    animation._run(currentTime);\r\n                    const diff = animation.percentage;\r\n                    if (diff >= 1) {\r\n                        if (animation._checkEnded()) {\r\n                            this.set(key, animation._value(1));\r\n                        }\r\n                        else {\r\n                            playing = true;\r\n                            animation._reset(currentTime);\r\n                            this._set(key, animation._value(1));\r\n                        }\r\n                    }\r\n                    else {\r\n                        playing = true;\r\n                        this._set(key, animation._value(diff));\r\n                    }\r\n                }\r\n                else {\r\n                    paused = true;\r\n                }\r\n            });\r\n            $object.each(this._animatingPrivateSettings, (key, animation) => {\r\n                if (animation.stopped) {\r\n                    this._stopAnimationPrivate(key);\r\n                }\r\n                else if (animation.playing) {\r\n                    animation._run(currentTime);\r\n                    const diff = animation.percentage;\r\n                    if (diff >= 1) {\r\n                        if (animation._checkEnded()) {\r\n                            this.setPrivate(key, animation._value(1));\r\n                        }\r\n                        else {\r\n                            playing = true;\r\n                            animation._reset(currentTime);\r\n                            this._setPrivate(key, animation._value(1));\r\n                        }\r\n                    }\r\n                    else {\r\n                        playing = true;\r\n                        this._setPrivate(key, animation._value(diff));\r\n                    }\r\n                }\r\n                else {\r\n                    paused = true;\r\n                }\r\n            });\r\n            if (playing) {\r\n                state = AnimationState.Playing;\r\n            }\r\n            else if (paused) {\r\n                state = AnimationState.Paused;\r\n            }\r\n        }\r\n        return state;\r\n    }\r\n    _markDirtyKey(_key) {\r\n        this.markDirty();\r\n    }\r\n    _markDirtyPrivateKey(_key) {\r\n        this.markDirty();\r\n    }\r\n    /**\r\n     * Sets a callback function to invoke when specific key of settings changes\r\n     * or is set.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/#Settings_value_change} for more info\r\n     * @param   key       Settings key\r\n     * @param   callback  Callback\r\n     * @return            Disposer for event\r\n     */\r\n    on(key, callback) {\r\n        let events = this._settingEvents[key];\r\n        if (events === undefined) {\r\n            events = this._settingEvents[key] = [];\r\n        }\r\n        events.push(callback);\r\n        return new Disposer(() => {\r\n            $array.removeFirst(events, callback);\r\n            if (events.length === 0) {\r\n                delete this._settingEvents[key];\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Removes a callback for when value of a setting changes.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/#Settings_value_change} for more info\r\n     * @param   key       Private settings key\r\n     * @param   callback  Callback\r\n     * @since 5.9.2\r\n     */\r\n    off(key, callback) {\r\n        let events = this._settingEvents[key];\r\n        if (events !== undefined && callback !== undefined) {\r\n            $array.removeFirst(events, callback);\r\n        }\r\n        else {\r\n            delete this._settingEvents[key];\r\n        }\r\n    }\r\n    /**\r\n     * Sets a callback function to invoke when specific key of private settings\r\n     * changes or is set.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/#Settings_value_change} for more info\r\n     * @param   key       Private settings key\r\n     * @param   callback  Callback\r\n     * @return            Disposer for event\r\n     */\r\n    onPrivate(key, callback) {\r\n        let events = this._privateSettingEvents[key];\r\n        if (events === undefined) {\r\n            events = this._privateSettingEvents[key] = [];\r\n        }\r\n        events.push(callback);\r\n        return new Disposer(() => {\r\n            $array.removeFirst(events, callback);\r\n            if (events.length === 0) {\r\n                delete this._privateSettingEvents[key];\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Removes a callback for when value of a private setting changes.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/#Settings_value_change} for more info\r\n     * @param   key       Private settings key\r\n     * @param   callback  Callback\r\n     * @since 5.9.2\r\n     */\r\n    offPrivate(key, callback) {\r\n        let events = this._privateSettingEvents[key];\r\n        if (events !== undefined && callback !== undefined) {\r\n            $array.removeFirst(events, callback);\r\n        }\r\n        else {\r\n            delete this._privateSettingEvents[key];\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getRaw(key, fallback) {\r\n        const value = this._settings[key];\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    /**\r\n     * Returns `true` if the setting exists.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key        Settings key\r\n     * @return  {boolean}  Key exists\r\n     */\r\n    has(key) {\r\n        return key in this._settings;\r\n    }\r\n    get(key, fallback) {\r\n        return this.getRaw(key, fallback);\r\n    }\r\n    _sendKeyEvent(key, value) {\r\n        const events = this._settingEvents[key];\r\n        if (events !== undefined) {\r\n            $array.each(events, (callback) => {\r\n                callback(value, this, key);\r\n            });\r\n        }\r\n    }\r\n    _sendPrivateKeyEvent(key, value) {\r\n        const events = this._privateSettingEvents[key];\r\n        if (events !== undefined) {\r\n            $array.each(events, (callback) => {\r\n                callback(value, this, key);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _setRaw(key, old, value) {\r\n        this._prevSettings[key] = old;\r\n        this._sendKeyEvent(key, value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setRaw(key, value) {\r\n        const old = this._settings[key];\r\n        this._settings[key] = value;\r\n        if (old !== value) {\r\n            this._setRaw(key, old, value);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _set(key, value) {\r\n        const old = this._settings[key];\r\n        this._settings[key] = value;\r\n        if (old !== value) {\r\n            this._setRaw(key, old, value);\r\n            this._markDirtyKey(key);\r\n        }\r\n    }\r\n    _stopAnimation(key) {\r\n        const animation = this._animatingSettings[key];\r\n        if (animation) {\r\n            delete this._animatingSettings[key];\r\n            animation.stop();\r\n        }\r\n    }\r\n    /**\r\n     * Sets a setting `value` for the specified `key`, and returns the same `value`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     * @param   value     Setting value\r\n     * @return            Setting value\r\n     */\r\n    set(key, value) {\r\n        this._set(key, value);\r\n        this._stopAnimation(key);\r\n        return value;\r\n    }\r\n    /**\r\n     * Removes a setting value for the specified `key`;\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     */\r\n    remove(key) {\r\n        if (key in this._settings) {\r\n            this._prevSettings[key] = this._settings[key];\r\n            delete this._settings[key];\r\n            this._sendKeyEvent(key, undefined);\r\n            this._markDirtyKey(key);\r\n        }\r\n        this._stopAnimation(key);\r\n    }\r\n    /**\r\n     * Removes all keys;\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     */\r\n    removeAll() {\r\n        $array.each($object.keys(this._settings), (key) => {\r\n            this.remove(key);\r\n        });\r\n    }\r\n    /**\r\n     * Returns a value of a private setting.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/#Private_settings} for more info\r\n     */\r\n    getPrivate(key, fallback) {\r\n        const value = this._privateSettings[key];\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _setPrivateRaw(key, old, value) {\r\n        this._prevPrivateSettings[key] = old;\r\n        this._sendPrivateKeyEvent(key, value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setPrivateRaw(key, value) {\r\n        const old = this._privateSettings[key];\r\n        this._privateSettings[key] = value;\r\n        if (old !== value) {\r\n            this._setPrivateRaw(key, old, value);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _setPrivate(key, value) {\r\n        const old = this._privateSettings[key];\r\n        this._privateSettings[key] = value;\r\n        if (old !== value) {\r\n            this._setPrivateRaw(key, old, value);\r\n            this._markDirtyPrivateKey(key);\r\n        }\r\n    }\r\n    _stopAnimationPrivate(key) {\r\n        const animation = this._animatingPrivateSettings[key];\r\n        if (animation) {\r\n            animation.stop();\r\n            delete this._animatingPrivateSettings[key];\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setPrivate(key, value) {\r\n        this._setPrivate(key, value);\r\n        this._stopAnimationPrivate(key);\r\n        return value;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    removePrivate(key) {\r\n        if (key in this._privateSettings) {\r\n            this._prevPrivateSettings[key] = this._privateSettings[key];\r\n            delete this._privateSettings[key];\r\n            this._markDirtyPrivateKey(key);\r\n        }\r\n        this._stopAnimationPrivate(key);\r\n    }\r\n    /**\r\n     * Sets multiple settings at once.\r\n     *\r\n     * `settings` must be an object with key: value pairs.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param settings Settings\r\n     */\r\n    setAll(settings) {\r\n        $object.each(settings, (key, value) => {\r\n            this.set(key, value);\r\n        });\r\n    }\r\n    /**\r\n     * Animates setting values from current/start values to new ones.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/#Animating_settings} for more info\r\n     * @param   options  Animation options\r\n     * @return           Animation object\r\n     */\r\n    animate(options) {\r\n        const key = options.key;\r\n        const to = options.to;\r\n        const duration = options.duration || 0;\r\n        const loops = options.loops || 1;\r\n        const from = (options.from === undefined ? this.get(key) : options.from);\r\n        const easing = (options.easing === undefined ? $ease.linear : options.easing);\r\n        if (duration === 0) {\r\n            this.set(key, to);\r\n        }\r\n        else {\r\n            if (from === undefined || from === to) {\r\n                this.set(key, to);\r\n            }\r\n            else {\r\n                this.set(key, from);\r\n                const animation = this._animatingSettings[key] = new Animation(this, from, to, duration, easing, loops, this._animationTime());\r\n                this._startAnimation();\r\n                return animation;\r\n            }\r\n        }\r\n        const animation = new Animation(this, from, to, duration, easing, loops, null);\r\n        animation.stop();\r\n        return animation;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    animatePrivate(options) {\r\n        const key = options.key;\r\n        const to = options.to;\r\n        const duration = options.duration || 0;\r\n        const loops = options.loops || 1;\r\n        const from = (options.from === undefined ? this.getPrivate(key) : options.from);\r\n        const easing = (options.easing === undefined ? $ease.linear : options.easing);\r\n        if (duration === 0) {\r\n            this.setPrivate(key, to);\r\n        }\r\n        else {\r\n            if (from === undefined || from === to) {\r\n                this.setPrivate(key, to);\r\n            }\r\n            else {\r\n                this.setPrivate(key, from);\r\n                const animation = this._animatingPrivateSettings[key] = new Animation(this, from, to, duration, easing, loops, this._animationTime());\r\n                this._startAnimation();\r\n                return animation;\r\n            }\r\n        }\r\n        const animation = new Animation(this, from, to, duration, easing, loops, null);\r\n        animation.stop();\r\n        return animation;\r\n    }\r\n    _dispose() { }\r\n    /**\r\n     * Returns `true` if this element is disposed.\r\n     *\r\n     * @return Disposed\r\n     */\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    /**\r\n     * Disposes this object.\r\n     */\r\n    dispose() {\r\n        if (this.enableDispose && !this._disposed) {\r\n            this._disposed = true;\r\n            this._dispose();\r\n        }\r\n    }\r\n}\r\n/**\r\n * Base class.\r\n *\r\n * @important\r\n */\r\nexport class Entity extends Settings {\r\n    /**\r\n     * IMPORTANT! Do not instantiate this class via `new Class()` syntax.\r\n     *\r\n     * Use static method `Class.new()` instead.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @ignore\r\n     */\r\n    constructor(root, settings, isReal, templates = []) {\r\n        super(settings);\r\n        Object.defineProperty(this, \"_root\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_user_id\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        }); // for testing purposes\r\n        Object.defineProperty(this, \"states\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new States(this)\r\n        });\r\n        Object.defineProperty(this, \"adapters\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Adapters(this)\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._createEvents()\r\n        });\r\n        Object.defineProperty(this, \"_userPrivateProperties\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirtyPrivate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_template\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // Templates for the themes\r\n        Object.defineProperty(this, \"_templates\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        // Internal templates which can be overridden by the user's templates\r\n        Object.defineProperty(this, \"_internalTemplates\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // Default themes which can be overridden by the user's themes\r\n        Object.defineProperty(this, \"_defaultThemes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        // Disposers for all of the templates\r\n        Object.defineProperty(this, \"_templateDisposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_disposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        // Whether the template setup function should be run\r\n        Object.defineProperty(this, \"_runSetup\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_disposerProperties\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n        this._root = root;\r\n        this._internalTemplates = templates;\r\n        if (settings.id) {\r\n            this._registerId(settings.id);\r\n        }\r\n    }\r\n    /**\r\n     * Use this method to create an instance of this class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @param   root      Root element\r\n     * @param   settings  Settings\r\n     * @param   template  Template\r\n     * @return            Instantiated object\r\n     */\r\n    static new(root, settings, template) {\r\n        const x = (new this(root, settings, true));\r\n        x._template = template;\r\n        x._afterNew();\r\n        return x;\r\n    }\r\n    static _new(root, settings, templates = []) {\r\n        const x = (new this(root, settings, true, templates));\r\n        x._afterNew();\r\n        return x;\r\n    }\r\n    _afterNew() {\r\n        this._checkDirty();\r\n        let shouldApply = false;\r\n        const template = this._template;\r\n        if (template) {\r\n            shouldApply = true;\r\n            template._setObjectTemplate(this);\r\n        }\r\n        $array.each(this._internalTemplates, (template) => {\r\n            shouldApply = true;\r\n            template._setObjectTemplate(this);\r\n        });\r\n        if (shouldApply) {\r\n            this._applyTemplates(false);\r\n        }\r\n        this.states.create(\"default\", {});\r\n        this._setDefaults();\r\n    }\r\n    // This is the same as _afterNew, except it also applies the themes.\r\n    // This should only be used for classes which don't have a parent (because they extend from Entity and not Sprite).\r\n    _afterNewApplyThemes() {\r\n        this._checkDirty();\r\n        const template = this._template;\r\n        if (template) {\r\n            template._setObjectTemplate(this);\r\n        }\r\n        $array.each(this._internalTemplates, (template) => {\r\n            template._setObjectTemplate(this);\r\n        });\r\n        this.states.create(\"default\", {});\r\n        this._setDefaults();\r\n        this._applyThemes();\r\n    }\r\n    _createEvents() {\r\n        return new EventDispatcher();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    get classNames() {\r\n        return this.constructor.classNames;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    get className() {\r\n        return this.constructor.className;\r\n    }\r\n    _setDefaults() {\r\n    }\r\n    _setDefaultFn(key, f) {\r\n        const value = this.get(key);\r\n        if (value) {\r\n            return value;\r\n        }\r\n        else {\r\n            const value = f();\r\n            this.set(key, value);\r\n            return value;\r\n        }\r\n    }\r\n    _setDefault(key, value) {\r\n        if (!this.has(key)) {\r\n            super.set(key, value);\r\n        }\r\n    }\r\n    _setRawDefault(key, value) {\r\n        if (!this.has(key)) {\r\n            super.setRaw(key, value);\r\n        }\r\n    }\r\n    _clearDirty() {\r\n        $object.keys(this._dirty).forEach((key) => {\r\n            this._dirty[key] = false;\r\n        });\r\n        $object.keys(this._dirtyPrivate).forEach((key) => {\r\n            this._dirtyPrivate[key] = false;\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    isDirty(key) {\r\n        return !!this._dirty[key];\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    isPrivateDirty(key) {\r\n        return !!this._dirtyPrivate[key];\r\n    }\r\n    _markDirtyKey(key) {\r\n        this._dirty[key] = true;\r\n        super._markDirtyKey(key);\r\n    }\r\n    _markDirtyPrivateKey(key) {\r\n        this._dirtyPrivate[key] = true;\r\n        super._markDirtyKey(key);\r\n    }\r\n    /**\r\n     * Checks if element is of certain class (or inherits one).\r\n     *\r\n     * @param   type  Class name to check\r\n     * @return {boolean} Is of class?\r\n     */\r\n    isType(type) {\r\n        return this.classNames.indexOf(type) !== -1;\r\n    }\r\n    _pushPropertyDisposer(key, disposer) {\r\n        let disposers = this._disposerProperties[key];\r\n        if (disposers === undefined) {\r\n            disposers = this._disposerProperties[key] = [];\r\n        }\r\n        disposers.push(disposer);\r\n        return disposer;\r\n    }\r\n    _disposeProperty(key) {\r\n        const disposers = this._disposerProperties[key];\r\n        if (disposers !== undefined) {\r\n            $array.each(disposers, (disposer) => {\r\n                disposer.dispose();\r\n            });\r\n            delete this._disposerProperties[key];\r\n        }\r\n    }\r\n    /**\r\n     * @todo needs description\r\n     * @param  value  Template\r\n     */\r\n    set template(value) {\r\n        const template = this._template;\r\n        if (template !== value) {\r\n            this._template = value;\r\n            if (template) {\r\n                template._removeObjectTemplate(this);\r\n            }\r\n            if (value) {\r\n                value._setObjectTemplate(this);\r\n            }\r\n            this._applyTemplates();\r\n        }\r\n    }\r\n    get template() {\r\n        return this._template;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirty() {\r\n        this._root._addDirtyEntity(this);\r\n    }\r\n    _startAnimation() {\r\n        this._root._addAnimation(this);\r\n    }\r\n    _animationTime() {\r\n        return this._root.animationTime;\r\n    }\r\n    _applyState(_name) { }\r\n    _applyStateAnimated(_name, _duration) { }\r\n    get(key, fallback) {\r\n        const value = this.adapters.fold(key, this._settings[key]);\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    isUserSetting(key) {\r\n        return this._userProperties[key] || false;\r\n    }\r\n    /**\r\n     * Sets a setting `value` for the specified `key`, and returns the same `value`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     * @param   value     Setting value\r\n     * @return            Setting value\r\n     */\r\n    set(key, value) {\r\n        this._userProperties[key] = true;\r\n        return super.set(key, value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setRaw(key, value) {\r\n        this._userProperties[key] = true;\r\n        super.setRaw(key, value);\r\n    }\r\n    /**\r\n     * Sets a setting `value` for the specified `key` only if the value for this key was not set previously using set method, and returns the same `value`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     * @param   value     Setting value\r\n     * @return            Setting value\r\n     */\r\n    _setSoft(key, value) {\r\n        if (!this._userProperties[key]) {\r\n            return super.set(key, value);\r\n        }\r\n        return value;\r\n    }\r\n    /**\r\n     * Removes a setting value for the specified `key`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     */\r\n    remove(key) {\r\n        delete this._userProperties[key];\r\n        this._removeTemplateProperty(key);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setPrivate(key, value) {\r\n        this._userPrivateProperties[key] = true;\r\n        return super.setPrivate(key, value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setPrivateRaw(key, value) {\r\n        this._userPrivateProperties[key] = true;\r\n        super.setPrivateRaw(key, value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    removePrivate(key) {\r\n        delete this._userPrivateProperties[key];\r\n        this._removeTemplatePrivateProperty(key);\r\n    }\r\n    _setTemplateProperty(template, key, value) {\r\n        if (!this._userProperties[key]) {\r\n            const match = this._findTemplateByKey(key);\r\n            if (template === match) {\r\n                super.set(key, value);\r\n            }\r\n        }\r\n    }\r\n    _setTemplatePrivateProperty(template, key, value) {\r\n        if (!this._userPrivateProperties[key]) {\r\n            const match = this._findTemplateByPrivateKey(key);\r\n            if (template === match) {\r\n                super.setPrivate(key, value);\r\n            }\r\n        }\r\n    }\r\n    _removeTemplateProperty(key) {\r\n        if (!this._userProperties[key]) {\r\n            const match = this._findTemplateByKey(key);\r\n            if (match) {\r\n                // TODO don't stop the animation if the property didn't change\r\n                super.set(key, match._settings[key]);\r\n            }\r\n            else {\r\n                super.remove(key);\r\n            }\r\n        }\r\n    }\r\n    _removeTemplatePrivateProperty(key) {\r\n        if (!this._userPrivateProperties[key]) {\r\n            const match = this._findTemplateByPrivateKey(key);\r\n            if (match) {\r\n                // TODO don't stop the animation if the property didn't change\r\n                super.setPrivate(key, match._privateSettings[key]);\r\n            }\r\n            else {\r\n                super.removePrivate(key);\r\n            }\r\n        }\r\n    }\r\n    _walkParents(f) {\r\n        f(this._root._rootContainer);\r\n        f(this);\r\n    }\r\n    // TODO faster version of this method which is specialized to just 1 key\r\n    _applyStateByKey(name) {\r\n        const other = this.states.create(name, {});\r\n        const seen = {};\r\n        this._eachTemplate((template) => {\r\n            const state = template.states.lookup(name);\r\n            if (state) {\r\n                state._apply(other, seen);\r\n            }\r\n        });\r\n        $object.each(other._settings, (key) => {\r\n            if (!seen[key] && !other._userSettings[key]) {\r\n                other.remove(key);\r\n            }\r\n        });\r\n    }\r\n    _applyTemplate(template, state) {\r\n        this._templateDisposers.push(template._apply(this, state));\r\n        $object.each(template._settings, (key, value) => {\r\n            if (!state.settings[key] && !this._userProperties[key]) {\r\n                state.settings[key] = true;\r\n                super.set(key, value);\r\n            }\r\n        });\r\n        $object.each(template._privateSettings, (key, value) => {\r\n            if (!state.privateSettings[key] && !this._userPrivateProperties[key]) {\r\n                state.privateSettings[key] = true;\r\n                super.setPrivate(key, value);\r\n            }\r\n        });\r\n        if (this._runSetup && template.setup) {\r\n            this._runSetup = false;\r\n            template.setup(this);\r\n        }\r\n    }\r\n    /**\r\n     * Calls the closure with each template and returns the first template which is true\r\n     */\r\n    _findStaticTemplate(f) {\r\n        if (this._template) {\r\n            if (f(this._template)) {\r\n                return this._template;\r\n            }\r\n        }\r\n    }\r\n    _eachTemplate(f) {\r\n        this._findStaticTemplate((template) => {\r\n            f(template);\r\n            return false;\r\n        });\r\n        // _internalTemplates is sorted with most specific to the right\r\n        $array.eachReverse(this._internalTemplates, f);\r\n        // _templates is sorted with most specific to the left\r\n        $array.each(this._templates, f);\r\n    }\r\n    _applyTemplates(remove = true) {\r\n        if (remove) {\r\n            this._disposeTemplates();\r\n        }\r\n        const state = {\r\n            settings: {},\r\n            privateSettings: {},\r\n            states: {},\r\n        };\r\n        this._eachTemplate((template) => {\r\n            this._applyTemplate(template, state);\r\n        });\r\n        if (remove) {\r\n            $object.each(this._settings, (key) => {\r\n                if (!this._userProperties[key] && !state.settings[key]) {\r\n                    super.remove(key);\r\n                }\r\n            });\r\n            $object.each(this._privateSettings, (key) => {\r\n                if (!this._userPrivateProperties[key] && !state.privateSettings[key]) {\r\n                    super.removePrivate(key);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _findTemplate(f) {\r\n        const value = this._findStaticTemplate(f);\r\n        if (value === undefined) {\r\n            // _internalTemplates is sorted with most specific to the right\r\n            const value = $array.findReverse(this._internalTemplates, f);\r\n            if (value === undefined) {\r\n                // _templates is sorted with most specific to the left\r\n                return $array.find(this._templates, f);\r\n            }\r\n            else {\r\n                return value;\r\n            }\r\n        }\r\n        else {\r\n            return value;\r\n        }\r\n    }\r\n    _findTemplateByKey(key) {\r\n        return this._findTemplate((template) => {\r\n            return key in template._settings;\r\n        });\r\n    }\r\n    _findTemplateByPrivateKey(key) {\r\n        return this._findTemplate((template) => {\r\n            return key in template._privateSettings;\r\n        });\r\n    }\r\n    _disposeTemplates() {\r\n        $array.each(this._templateDisposers, (disposer) => {\r\n            disposer.dispose();\r\n        });\r\n        this._templateDisposers.length = 0;\r\n    }\r\n    _removeTemplates() {\r\n        $array.each(this._templates, (template) => {\r\n            template._removeObjectTemplate(this);\r\n        });\r\n        this._templates.length = 0;\r\n    }\r\n    _applyThemes(force = false) {\r\n        let isConnected = false;\r\n        const defaults = [];\r\n        let themes = [];\r\n        const themeTags = new Set();\r\n        const tags = this.get(\"themeTagsSelf\");\r\n        if (tags) {\r\n            $array.each(tags, (tag) => {\r\n                themeTags.add(tag);\r\n            });\r\n        }\r\n        this._walkParents((entity) => {\r\n            if (entity === this._root._rootContainer) {\r\n                isConnected = true;\r\n            }\r\n            if (entity._defaultThemes.length > 0) {\r\n                defaults.push(entity._defaultThemes);\r\n            }\r\n            const theme = entity.get(\"themes\");\r\n            if (theme) {\r\n                themes.push(theme);\r\n            }\r\n            const tags = entity.get(\"themeTags\");\r\n            if (tags) {\r\n                $array.each(tags, (tag) => {\r\n                    themeTags.add(tag);\r\n                });\r\n            }\r\n        });\r\n        themes = defaults.concat(themes);\r\n        this._removeTemplates();\r\n        if (isConnected || force) {\r\n            $array.eachReverse(this.classNames, (name) => {\r\n                const allRules = [];\r\n                $array.each(themes, (themes) => {\r\n                    $array.each(themes, (theme) => {\r\n                        const rules = theme._lookupRules(name);\r\n                        if (rules) {\r\n                            $array.eachReverse(rules, (rule) => {\r\n                                const matches = rule.tags.every((tag) => {\r\n                                    return themeTags.has(tag);\r\n                                });\r\n                                if (matches) {\r\n                                    const result = $array.getFirstSortedIndex(allRules, (x) => {\r\n                                        const order = $order.compare(rule.tags.length, x.tags.length);\r\n                                        if (order === 0) {\r\n                                            return $order.compareArray(rule.tags, x.tags, $order.compare);\r\n                                        }\r\n                                        else {\r\n                                            return order;\r\n                                        }\r\n                                    });\r\n                                    allRules.splice(result.index, 0, rule);\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n                $array.each(allRules, (rule) => {\r\n                    this._templates.push(rule.template);\r\n                    rule.template._setObjectTemplate(this);\r\n                });\r\n            });\r\n        }\r\n        this._applyTemplates();\r\n        if (isConnected || force) {\r\n            // This causes it to only run the setup function the first time that the themes are applied\r\n            this._runSetup = false;\r\n        }\r\n        return isConnected || force;\r\n    }\r\n    _changed() { }\r\n    _beforeChanged() {\r\n        if (this.isDirty(\"id\")) {\r\n            const id = this.get(\"id\");\r\n            if (id) {\r\n                this._registerId(id);\r\n            }\r\n            const prevId = this._prevSettings.id;\r\n            if (prevId) {\r\n                delete this._root.entitiesById[prevId];\r\n                delete registry.entitiesById[prevId];\r\n            }\r\n        }\r\n    }\r\n    _registerId(id) {\r\n        if (this._root.entitiesById[id] && this._root.entitiesById[id] !== this) {\r\n            throw new Error(\"An entity with id \\\"\" + id + \"\\\" already exists.\");\r\n        }\r\n        this._root.entitiesById[id] = this;\r\n        registry.entitiesById[id] = this;\r\n    }\r\n    _afterChanged() { }\r\n    /**\r\n     * @ignore\r\n     */\r\n    addDisposer(disposer) {\r\n        this._disposers.push(disposer);\r\n        return disposer;\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        const template = this._template;\r\n        if (template) {\r\n            template._removeObjectTemplate(this);\r\n        }\r\n        $array.each(this._internalTemplates, (template) => {\r\n            template._removeObjectTemplate(this);\r\n        });\r\n        this._removeTemplates();\r\n        this._disposeTemplates();\r\n        this.events.dispose();\r\n        this._disposers.forEach((x) => {\r\n            x.dispose();\r\n        });\r\n        $object.each(this._disposerProperties, (_, disposers) => {\r\n            $array.each(disposers, (disposer) => {\r\n                disposer.dispose();\r\n            });\r\n        });\r\n        const id = this.get(\"id\");\r\n        if (id) {\r\n            delete this._root.entitiesById[id];\r\n            delete registry.entitiesById[id];\r\n        }\r\n    }\r\n    /**\r\n     * Creates and returns a \"disposable\" timeout.\r\n     *\r\n     * @param   fn     Callback\r\n     * @param   delay  Delay in milliseconds\r\n     * @return         Timeout disposer\r\n     */\r\n    setTimeout(fn, delay) {\r\n        const id = setTimeout(() => {\r\n            this.removeDispose(disposer);\r\n            fn();\r\n        }, delay);\r\n        const disposer = new Disposer(() => {\r\n            clearTimeout(id);\r\n        });\r\n        this._disposers.push(disposer);\r\n        return disposer;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    removeDispose(target) {\r\n        if (!this.isDisposed()) {\r\n            let index = $array.indexOf(this._disposers, target);\r\n            if (index > -1) {\r\n                this._disposers.splice(index, 1);\r\n            }\r\n        }\r\n        target.dispose();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    hasTag(tag) {\r\n        return $array.indexOf(this.get(\"themeTags\", []), tag) !== -1;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    addTag(tag) {\r\n        if (!this.hasTag(tag)) {\r\n            const tags = this.get(\"themeTags\", []);\r\n            tags.push(tag);\r\n            this.set(\"themeTags\", tags);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    removeTag(tag) {\r\n        if (this.hasTag(tag)) {\r\n            const tags = this.get(\"themeTags\", []);\r\n            $array.remove(tags, tag);\r\n            this.set(\"themeTags\", tags);\r\n        }\r\n    }\r\n    _t(text, locale, ...rest) {\r\n        return this._root.language.translate(text, locale, ...rest);\r\n    }\r\n    /**\r\n     * An instance of [[Root]] object.\r\n     *\r\n     * @readonly\r\n     * @since 5.0.6\r\n     * @return Root object\r\n     */\r\n    get root() {\r\n        return this._root;\r\n    }\r\n}\r\nObject.defineProperty(Entity, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Entity\"\r\n});\r\nObject.defineProperty(Entity, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: [\"Entity\"]\r\n});\r\n//# sourceMappingURL=Entity.js.map","import { EventDispatcher } from \"./EventDispatcher\";\r\nimport { Disposer, MultiDisposer } from \"./Disposer\";\r\nimport * as $array from \"./Array\";\r\nimport * as $object from \"./Object\";\r\nimport * as $type from \"./Type\";\r\nfunction disposeSettings(settings) {\r\n    $object.each(settings, (_key, value) => {\r\n        if ($type.isObject(value) && typeof value.dispose === \"function\") {\r\n            value.enableDispose = true;\r\n            value.dispose();\r\n        }\r\n    });\r\n}\r\nexport class TemplateState {\r\n    constructor(name, template, settings) {\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_name\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_template\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._name = name;\r\n        this._template = template;\r\n        this._settings = settings;\r\n    }\r\n    _dispose() {\r\n        disposeSettings(this._settings);\r\n    }\r\n    get(key, fallback) {\r\n        const value = this._settings[key];\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    set(key, value) {\r\n        this._settings[key] = value;\r\n        // TODO maybe only do this if the value changed ?\r\n        this._template._stateChanged(this._name);\r\n    }\r\n    remove(key) {\r\n        delete this._settings[key];\r\n        // TODO maybe only do this if the value changed ?\r\n        this._template._stateChanged(this._name);\r\n    }\r\n    setAll(settings) {\r\n        $object.keys(settings).forEach((key) => {\r\n            this._settings[key] = settings[key];\r\n        });\r\n        this._template._stateChanged(this._name);\r\n    }\r\n    _apply(other, seen) {\r\n        $object.each(this._settings, (key, value) => {\r\n            if (!seen[key] && !other._userSettings[key]) {\r\n                seen[key] = true;\r\n                other.setRaw(key, value);\r\n            }\r\n        });\r\n    }\r\n}\r\nexport class TemplateStates {\r\n    constructor(template) {\r\n        Object.defineProperty(this, \"_template\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_states\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        this._template = template;\r\n    }\r\n    _dispose() {\r\n        $object.each(this._states, (_key, state) => {\r\n            state._dispose();\r\n        });\r\n    }\r\n    lookup(name) {\r\n        return this._states[name];\r\n    }\r\n    create(name, settings) {\r\n        const state = this._states[name];\r\n        if (state) {\r\n            state.setAll(settings);\r\n            return state;\r\n        }\r\n        else {\r\n            const state = new TemplateState(name, this._template, settings);\r\n            this._states[name] = state;\r\n            this._template._stateChanged(name);\r\n            return state;\r\n        }\r\n    }\r\n    remove(name) {\r\n        delete this._states[name];\r\n        this._template._stateChanged(name);\r\n    }\r\n    _apply(entity, state) {\r\n        $object.each(this._states, (key, value) => {\r\n            let seen = state.states[key];\r\n            if (seen == null) {\r\n                seen = state.states[key] = {};\r\n            }\r\n            const other = entity.states.create(key, {});\r\n            value._apply(other, seen);\r\n        });\r\n    }\r\n}\r\nexport class TemplateAdapters {\r\n    constructor() {\r\n        Object.defineProperty(this, \"_callbacks\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n    }\r\n    add(key, callback) {\r\n        let callbacks = this._callbacks[key];\r\n        if (callbacks === undefined) {\r\n            callbacks = this._callbacks[key] = [];\r\n        }\r\n        callbacks.push(callback);\r\n        return new Disposer(() => {\r\n            $array.removeFirst(callbacks, callback);\r\n            if (callbacks.length === 0) {\r\n                delete this._callbacks[key];\r\n            }\r\n        });\r\n    }\r\n    remove(key) {\r\n        const callbacks = this._callbacks[key];\r\n        if (callbacks !== undefined) {\r\n            delete this._callbacks[key];\r\n        }\r\n    }\r\n    _apply(entity) {\r\n        const disposers = [];\r\n        $object.each(this._callbacks, (key, callbacks) => {\r\n            $array.each(callbacks, (callback) => {\r\n                disposers.push(entity.adapters.add(key, callback));\r\n            });\r\n        });\r\n        return new MultiDisposer(disposers);\r\n    }\r\n}\r\n// TODO maybe extend from Properties ?\r\nexport class Template {\r\n    constructor(settings, isReal) {\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_privateSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        // TODO code duplication with Properties\r\n        Object.defineProperty(this, \"_settingEvents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_privateSettingEvents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_entities\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"states\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new TemplateStates(this)\r\n        });\r\n        Object.defineProperty(this, \"adapters\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new TemplateAdapters()\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        Object.defineProperty(this, \"setup\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n        this._settings = settings;\r\n    }\r\n    /**\r\n     * Use this method to create an instance of this class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @param   root      Root element\r\n     * @param   settings  Settings\r\n     * @param   template  Template\r\n     * @return            Instantiated object\r\n     */\r\n    static new(settings) {\r\n        return new Template(settings, true);\r\n    }\r\n    _dispose() {\r\n        disposeSettings(this._settings);\r\n        disposeSettings(this._privateSettings);\r\n    }\r\n    /**\r\n     * Returns `true` if this element is disposed.\r\n     *\r\n     * @return Disposed\r\n     */\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    /**\r\n     * Disposes this object.\r\n     */\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            this._dispose();\r\n        }\r\n    }\r\n    _checkDisposed() {\r\n        if (this._disposed) {\r\n            throw new Error(\"Template is disposed\");\r\n        }\r\n    }\r\n    /**\r\n     * Array of all entities using this template.\r\n     */\r\n    get entities() {\r\n        return this._entities;\r\n    }\r\n    get(key, fallback) {\r\n        this._checkDisposed();\r\n        const value = this._settings[key];\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    setRaw(key, value) {\r\n        this._checkDisposed();\r\n        this._settings[key] = value;\r\n    }\r\n    set(key, value) {\r\n        this._checkDisposed();\r\n        if (this._settings[key] !== value) {\r\n            this.setRaw(key, value);\r\n            this._entities.forEach((entity) => {\r\n                entity._setTemplateProperty(this, key, value);\r\n            });\r\n        }\r\n    }\r\n    remove(key) {\r\n        this._checkDisposed();\r\n        if (key in this._settings) {\r\n            delete this._settings[key];\r\n            this._entities.forEach((entity) => {\r\n                entity._removeTemplateProperty(key);\r\n            });\r\n        }\r\n    }\r\n    removeAll() {\r\n        this._checkDisposed();\r\n        $object.each(this._settings, (key, _value) => {\r\n            this.remove(key);\r\n        });\r\n    }\r\n    getPrivate(key, fallback) {\r\n        this._checkDisposed();\r\n        const value = this._privateSettings[key];\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n        else {\r\n            return fallback;\r\n        }\r\n    }\r\n    setPrivateRaw(key, value) {\r\n        this._checkDisposed();\r\n        this._privateSettings[key] = value;\r\n        return value;\r\n    }\r\n    setPrivate(key, value) {\r\n        this._checkDisposed();\r\n        if (this._privateSettings[key] !== value) {\r\n            this.setPrivateRaw(key, value);\r\n            this._entities.forEach((entity) => {\r\n                entity._setTemplatePrivateProperty(this, key, value);\r\n            });\r\n        }\r\n        return value;\r\n    }\r\n    removePrivate(key) {\r\n        this._checkDisposed();\r\n        if (key in this._privateSettings) {\r\n            delete this._privateSettings[key];\r\n            this._entities.forEach((entity) => {\r\n                entity._removeTemplatePrivateProperty(key);\r\n            });\r\n        }\r\n    }\r\n    setAll(value) {\r\n        this._checkDisposed();\r\n        $object.each(value, (key, value) => {\r\n            this.set(key, value);\r\n        });\r\n    }\r\n    // TODO code duplication with Properties\r\n    on(key, callback) {\r\n        this._checkDisposed();\r\n        let events = this._settingEvents[key];\r\n        if (events === undefined) {\r\n            events = this._settingEvents[key] = [];\r\n        }\r\n        events.push(callback);\r\n        return new Disposer(() => {\r\n            $array.removeFirst(events, callback);\r\n            if (events.length === 0) {\r\n                delete this._settingEvents[key];\r\n            }\r\n        });\r\n    }\r\n    // TODO code duplication with Properties\r\n    onPrivate(key, callback) {\r\n        this._checkDisposed();\r\n        let events = this._privateSettingEvents[key];\r\n        if (events === undefined) {\r\n            events = this._privateSettingEvents[key] = [];\r\n        }\r\n        events.push(callback);\r\n        return new Disposer(() => {\r\n            $array.removeFirst(events, callback);\r\n            if (events.length === 0) {\r\n                delete this._privateSettingEvents[key];\r\n            }\r\n        });\r\n    }\r\n    _apply(entity, state) {\r\n        this._checkDisposed();\r\n        const disposers = [];\r\n        $object.each(this._settingEvents, (key, events) => {\r\n            $array.each(events, (event) => {\r\n                disposers.push(entity.on(key, event));\r\n            });\r\n        });\r\n        $object.each(this._privateSettingEvents, (key, events) => {\r\n            $array.each(events, (event) => {\r\n                disposers.push(entity.onPrivate(key, event));\r\n            });\r\n        });\r\n        this.states._apply(entity, state);\r\n        disposers.push(this.adapters._apply(entity));\r\n        disposers.push(entity.events.copyFrom(this.events));\r\n        return new MultiDisposer(disposers);\r\n    }\r\n    _setObjectTemplate(entity) {\r\n        this._checkDisposed();\r\n        this._entities.push(entity);\r\n    }\r\n    _removeObjectTemplate(entity) {\r\n        //this._checkDisposed();\r\n        $array.remove(this._entities, entity);\r\n    }\r\n    _stateChanged(name) {\r\n        this._checkDisposed();\r\n        this._entities.forEach((entity) => {\r\n            entity._applyStateByKey(name);\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=Template.js.map","import { __awaiter } from \"tslib\";\r\nimport { Entity } from \"../util/Entity\";\r\nimport { Template } from \"../util/Template\";\r\nimport { Percent } from \"../util/Percent\";\r\nimport { EventDispatcher } from \"../util/EventDispatcher\";\r\nimport { MultiDisposer, CounterDisposer } from \"../util/Disposer\";\r\nimport { waitForAnimations } from \"../util/Animation\";\r\nimport * as $utils from \"../util/Utils\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $type from \"../util/Type\";\r\nimport * as $object from \"../util/Object\";\r\nimport * as $math from \"../util/Math\";\r\n//import { populateString } from \"../util/PopulateString\";\r\n/**\r\n * An [[EventDispatcher]] for [[Sprite]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\r\n */\r\nclass SpriteEventDispatcher extends EventDispatcher {\r\n    constructor(sprite) {\r\n        super();\r\n        Object.defineProperty(this, \"_sprite\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_rendererDisposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dispatchParents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        this._sprite = sprite;\r\n    }\r\n    _makePointerEvent(key, event) {\r\n        return {\r\n            type: key,\r\n            originalEvent: event.event,\r\n            point: event.point,\r\n            simulated: event.simulated,\r\n            native: event.native,\r\n            target: this._sprite\r\n        };\r\n    }\r\n    _onRenderer(key, dispatch) {\r\n        // TODO: is this OK? it'd be good not to require to set this on each individual element\r\n        this._sprite.set(\"interactive\", true);\r\n        this._sprite._display.interactive = true;\r\n        let events = this._rendererDisposers[key];\r\n        if (events === undefined) {\r\n            const disposer = this._sprite._display.on(key, (e) => {\r\n                dispatch.call(this, e);\r\n            });\r\n            events = this._rendererDisposers[key] = new CounterDisposer(() => {\r\n                delete this._rendererDisposers[key];\r\n                disposer.dispose();\r\n            });\r\n        }\r\n        return events.increment();\r\n    }\r\n    _on(once, type, callback, context, shouldClone, dispatch, debounceDelay) {\r\n        const info = super._on(once, type, callback, context, shouldClone, dispatch, debounceDelay);\r\n        const rendererEvent = SpriteEventDispatcher.RENDERER_EVENTS[type];\r\n        if (rendererEvent !== undefined) {\r\n            info.disposer = new MultiDisposer([\r\n                info.disposer,\r\n                this._onRenderer(type, rendererEvent),\r\n            ]);\r\n        }\r\n        return info;\r\n    }\r\n    /**\r\n     * Will stop any bubbling up of the event to element's parents.\r\n     *\r\n     * Should be called in an event handler, e.g.:\r\n     *\r\n     * ```TypeScript\r\n     * element.events.on(\"pointerdown\", function(ev) {\r\n     *   // Do something here and prevent from \"pointerdown\" bubbling up\r\n     *   // ...\r\n     *   ev.target.events.stopParentDispatch();\r\n     * });\r\n     * ```\r\n     * ```JavaScript\r\n     * element.events.on(\"pointerdown\", function(ev) {\r\n     *   // Do something here and prevent from \"pointerdown\" bubbling up\r\n     *   // ...\r\n     *   ev.target.events.stopParentDispatch();\r\n     * });\r\n     * ```\r\n     */\r\n    stopParentDispatch() {\r\n        this._dispatchParents = false;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    dispatchParents(type, event) {\r\n        const old = this._dispatchParents;\r\n        this._dispatchParents = true;\r\n        try {\r\n            this.dispatch(type, event);\r\n            if (this._dispatchParents && this._sprite.parent) {\r\n                this._sprite.parent.events.dispatchParents(type, event);\r\n            }\r\n        }\r\n        finally {\r\n            this._dispatchParents = old;\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(SpriteEventDispatcher, \"RENDERER_EVENTS\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: {\r\n        \"click\": function (event) {\r\n            if (this.isEnabled(\"click\") && !this._sprite.isDragging() && this._sprite._hasDown() && !this._sprite._hasMoved(this._makePointerEvent(\"click\", event))) {\r\n                this.dispatch(\"click\", this._makePointerEvent(\"click\", event));\r\n            }\r\n        },\r\n        \"rightclick\": function (event) {\r\n            if (this.isEnabled(\"rightclick\")) {\r\n                this.dispatch(\"rightclick\", this._makePointerEvent(\"rightclick\", event));\r\n            }\r\n        },\r\n        \"middleclick\": function (event) {\r\n            if (this.isEnabled(\"middleclick\")) {\r\n                this.dispatch(\"middleclick\", this._makePointerEvent(\"middleclick\", event));\r\n            }\r\n        },\r\n        \"dblclick\": function (event) {\r\n            this.dispatchParents(\"dblclick\", this._makePointerEvent(\"dblclick\", event));\r\n        },\r\n        \"pointerover\": function (event) {\r\n            const sprite = this._sprite;\r\n            let dispatch = true;\r\n            if (sprite.getPrivate(\"trustBounds\")) {\r\n                sprite._getBounds();\r\n                const bounds = sprite.globalBounds();\r\n                if (sprite.isType(\"Graphics\")) {\r\n                    const strokeWidth = sprite.get(\"strokeWidth\", 1) / 2;\r\n                    if (strokeWidth >= 1) {\r\n                        bounds.left -= strokeWidth;\r\n                        bounds.right += strokeWidth;\r\n                        bounds.top -= strokeWidth;\r\n                        bounds.bottom += strokeWidth;\r\n                    }\r\n                }\r\n                if (!$math.inBounds(event.point, bounds)) {\r\n                    dispatch = false;\r\n                    sprite._root._renderer.removeHovering(sprite._display);\r\n                }\r\n            }\r\n            if (dispatch && this.isEnabled(\"pointerover\")) {\r\n                this.dispatch(\"pointerover\", this._makePointerEvent(\"pointerover\", event));\r\n            }\r\n        },\r\n        \"pointerout\": function (event) {\r\n            if (this.isEnabled(\"pointerout\")) {\r\n                this.dispatch(\"pointerout\", this._makePointerEvent(\"pointerout\", event));\r\n            }\r\n        },\r\n        \"pointerdown\": function (event) {\r\n            this.dispatchParents(\"pointerdown\", this._makePointerEvent(\"pointerdown\", event));\r\n        },\r\n        \"pointerup\": function (event) {\r\n            if (this.isEnabled(\"pointerup\")) {\r\n                this.dispatch(\"pointerup\", this._makePointerEvent(\"pointerup\", event));\r\n            }\r\n        },\r\n        \"globalpointerup\": function (event) {\r\n            if (this.isEnabled(\"globalpointerup\")) {\r\n                this.dispatch(\"globalpointerup\", this._makePointerEvent(\"globalpointerup\", event));\r\n            }\r\n        },\r\n        \"globalpointermove\": function (event) {\r\n            if (this.isEnabled(\"globalpointermove\")) {\r\n                this.dispatch(\"globalpointermove\", this._makePointerEvent(\"globalpointermove\", event));\r\n            }\r\n        },\r\n        \"wheel\": function (event) {\r\n            this.dispatchParents(\"wheel\", {\r\n                type: \"wheel\",\r\n                target: this._sprite,\r\n                originalEvent: event.event,\r\n                point: event.point,\r\n            });\r\n        },\r\n    }\r\n});\r\n/**\r\n * A base class for all visual elements.\r\n *\r\n * @important\r\n */\r\nexport class Sprite extends Entity {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_adjustedLocalBounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: { left: 0, right: 0, top: 0, bottom: 0 }\r\n        });\r\n        Object.defineProperty(this, \"_localBounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: { left: 0, right: 0, top: 0, bottom: 0 }\r\n        });\r\n        Object.defineProperty(this, \"_parent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_dataItem\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_templateField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_sizeDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        // Will be true only when dragging\r\n        Object.defineProperty(this, \"_isDragging\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        // The event when the dragging starts\r\n        Object.defineProperty(this, \"_dragEvent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // The position when dragging starts\r\n        Object.defineProperty(this, \"_dragPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_isHidden\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_isShowing\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_isHiding\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_isDown\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_downPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downPoints\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_toggleDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_dragDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_hoverDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_focusDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipMoveDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipPointerDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        //protected _statesHandled: boolean = false;\r\n        Object.defineProperty(this, \"_virtualParent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this.setPrivateRaw(\"visible\", true);\r\n        super._afterNew();\r\n    }\r\n    /**\r\n     * Marks some setting as dirty. Could be used to trigger adapter.\r\n     * @param key\r\n     */\r\n    markDirtyKey(key) {\r\n        this._markDirtyKey(key);\r\n    }\r\n    _markDirtyKey(key) {\r\n        super._markDirtyKey(key);\r\n        if (key == \"x\" || key == \"y\" || key == \"dx\" || key == \"dy\") {\r\n            this.markDirtyBounds();\r\n            this._addPercentagePositionChildren();\r\n            this.markDirtyPosition();\r\n        }\r\n    }\r\n    _markDirtyPrivateKey(key) {\r\n        super._markDirtyPrivateKey(key);\r\n        if (key == \"x\" || key == \"y\") {\r\n            this.markDirtyPosition();\r\n        }\r\n    }\r\n    _removeTemplateField() {\r\n        if (this._templateField) {\r\n            this._templateField._removeObjectTemplate(this);\r\n        }\r\n    }\r\n    _createEvents() {\r\n        return new SpriteEventDispatcher(this);\r\n    }\r\n    _processTemplateField() {\r\n        let template;\r\n        const field = this.get(\"templateField\");\r\n        if (field) {\r\n            const dataItem = this.dataItem;\r\n            if (dataItem) {\r\n                const context = dataItem.dataContext;\r\n                if (context) {\r\n                    template = context[field];\r\n                    if (!(template instanceof Template) && template) {\r\n                        template = Template.new(template);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this._templateField !== template) {\r\n            this._removeTemplateField();\r\n            this._templateField = template;\r\n            if (template) {\r\n                template._setObjectTemplate(this);\r\n            }\r\n            this._applyTemplates();\r\n        }\r\n    }\r\n    // TODO change this to run before the element is added to the parent, so that way\r\n    //      it doesn't need to apply the themes twice\r\n    _setDataItem(dataItem) {\r\n        const oldDataItem = this._dataItem;\r\n        this._dataItem = dataItem;\r\n        this._processTemplateField();\r\n        const eventType = \"dataitemchanged\";\r\n        if (dataItem != oldDataItem) {\r\n            if (this.events.isEnabled(eventType)) {\r\n                this.events.dispatch(eventType, {\r\n                    type: eventType,\r\n                    target: this,\r\n                    oldDataItem: oldDataItem,\r\n                    newDataItem: dataItem\r\n                });\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * A [[DataItem]] used for this element.\r\n     *\r\n     * NOTE: data item is being assigned automatically in most cases where it\r\n     * matters. Use this accessor to set data item only if you know what you're\r\n     * doing.\r\n     *\r\n     * @param  value  Data item\r\n     */\r\n    set dataItem(value) {\r\n        this._setDataItem(value);\r\n    }\r\n    /**\r\n     * @return DataItem\r\n     */\r\n    get dataItem() {\r\n        if (this._dataItem) {\r\n            return this._dataItem;\r\n        }\r\n        else {\r\n            let parent = this._parent;\r\n            while (parent) {\r\n                if (parent._dataItem) {\r\n                    return parent._dataItem;\r\n                }\r\n                else {\r\n                    parent = parent._parent;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _addPercentageSizeChildren() {\r\n        let parent = this.parent;\r\n        if (parent) {\r\n            if (this.get(\"width\") instanceof Percent || this.get(\"height\") instanceof Percent) {\r\n                $array.pushOne(parent._percentageSizeChildren, this);\r\n            }\r\n            else {\r\n                $array.removeFirst(parent._percentageSizeChildren, this);\r\n            }\r\n        }\r\n    }\r\n    _addPercentagePositionChildren() {\r\n        let parent = this.parent;\r\n        if (parent) {\r\n            if (this.get(\"x\") instanceof Percent || this.get(\"y\") instanceof Percent) {\r\n                $array.pushOne(parent._percentagePositionChildren, this);\r\n            }\r\n            else {\r\n                $array.removeFirst(parent._percentagePositionChildren, this);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyPosition() {\r\n        this._root._addDirtyPosition(this);\r\n    }\r\n    updatePivotPoint() {\r\n        const bounds = this._localBounds;\r\n        if (bounds) {\r\n            const centerX = this.get(\"centerX\");\r\n            if (centerX != null) {\r\n                this._display.pivot.x = bounds.left + $utils.relativeToValue(centerX, bounds.right - bounds.left);\r\n            }\r\n            const centerY = this.get(\"centerY\");\r\n            if (centerY != null) {\r\n                this._display.pivot.y = bounds.top + $utils.relativeToValue(centerY, bounds.bottom - bounds.top);\r\n            }\r\n        }\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        // handling states in beforeChanged, otherwise states is not applied without animated theme\r\n        this._handleStates();\r\n        if (this.isDirty(\"tooltip\")) {\r\n            const previous = this._prevSettings.tooltip;\r\n            if (previous) {\r\n                previous.dispose();\r\n            }\r\n        }\r\n        if (this.isDirty(\"layer\") || this.isDirty(\"layerMargin\")) {\r\n            this._display.setLayer(this.get(\"layer\"), this.get(\"layerMargin\"));\r\n            this.markDirtyLayer();\r\n        }\r\n        if (this.isDirty(\"tooltipPosition\")) {\r\n            const tooltipMoveDp = this._tooltipMoveDp;\r\n            if (tooltipMoveDp) {\r\n                tooltipMoveDp.dispose();\r\n                this._tooltipMoveDp = undefined;\r\n            }\r\n            const tooltipPointerDp = this._tooltipPointerDp;\r\n            if (tooltipPointerDp) {\r\n                tooltipPointerDp.dispose();\r\n                this._tooltipPointerDp = undefined;\r\n            }\r\n            if (this.get(\"tooltipPosition\") == \"pointer\") {\r\n                if (this.isHover()) {\r\n                    this._tooltipMoveDp = this.events.on(\"globalpointermove\", (e) => {\r\n                        this.showTooltip(e.point);\r\n                    });\r\n                }\r\n                this._tooltipPointerDp = new MultiDisposer([\r\n                    this.events.on(\"pointerover\", () => {\r\n                        this._tooltipMoveDp = this.events.on(\"globalpointermove\", (e) => {\r\n                            this.showTooltip(e.point);\r\n                        });\r\n                    }),\r\n                    this.events.on(\"pointerout\", () => {\r\n                        const tooltipMoveDp = this._tooltipMoveDp;\r\n                        if (tooltipMoveDp) {\r\n                            tooltipMoveDp.dispose();\r\n                            this._tooltipMoveDp = undefined;\r\n                        }\r\n                    })\r\n                ]);\r\n            }\r\n        }\r\n    }\r\n    _handleStates() {\r\n        //if (!this._statesHandled) {\r\n        if (this.isDirty(\"active\")) {\r\n            if (this.get(\"active\")) {\r\n                this.states.applyAnimate(\"active\");\r\n                this.set(\"ariaChecked\", true);\r\n            }\r\n            else {\r\n                if (!this.isHidden()) {\r\n                    this.states.applyAnimate(\"default\");\r\n                }\r\n                this.set(\"ariaChecked\", false);\r\n            }\r\n            this.markDirtyAccessibility();\r\n        }\r\n        if (this.isDirty(\"disabled\")) {\r\n            if (this.get(\"disabled\")) {\r\n                this.states.applyAnimate(\"disabled\");\r\n                this.set(\"ariaChecked\", false);\r\n            }\r\n            else {\r\n                if (!this.isHidden()) {\r\n                    this.states.applyAnimate(\"default\");\r\n                }\r\n                this.set(\"ariaChecked\", true);\r\n            }\r\n            this.markDirtyAccessibility();\r\n        }\r\n        //\tthis._statesHandled = true;\r\n        //}\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        const display = this._display;\r\n        const events = this.events;\r\n        if (this.isDirty(\"draggable\")) {\r\n            const draggable = this.get(\"draggable\");\r\n            if (draggable) {\r\n                this.set(\"interactive\", true);\r\n                this._dragDp = new MultiDisposer([\r\n                    events.on(\"pointerdown\", (ev) => {\r\n                        this.dragStart(ev);\r\n                    }),\r\n                    events.on(\"globalpointermove\", (ev) => {\r\n                        this.dragMove(ev);\r\n                    }),\r\n                    events.on(\"globalpointerup\", (ev) => {\r\n                        this.dragStop(ev);\r\n                    })\r\n                ]);\r\n            }\r\n            else {\r\n                if (this._dragDp) {\r\n                    this._dragDp.dispose();\r\n                    this._dragDp = undefined;\r\n                }\r\n            }\r\n            display.cancelTouch = draggable ? true : false;\r\n        }\r\n        if (this.isDirty(\"tooltipText\") || this.isDirty(\"tooltipHTML\") || this.isDirty(\"showTooltipOn\")) {\r\n            const tooltipText = this.get(\"tooltipText\");\r\n            const tooltipHTML = this.get(\"tooltipHTML\");\r\n            const showTooltipOn = this.get(\"showTooltipOn\", \"hover\");\r\n            if (this._tooltipDp) {\r\n                this._tooltipDp.dispose();\r\n                this._tooltipDp = undefined;\r\n            }\r\n            if (tooltipText || tooltipHTML) {\r\n                if (showTooltipOn == \"click\") {\r\n                    this._tooltipDp = new MultiDisposer([\r\n                        events.on(\"click\", () => {\r\n                            this.setTimeout(() => {\r\n                                const tooltip = this.getTooltip();\r\n                                if (tooltip && !tooltip.isHidden() && tooltip.get(\"tooltipTarget\") === this) {\r\n                                    this.hideTooltip();\r\n                                }\r\n                                else {\r\n                                    this.showTooltip();\r\n                                }\r\n                            }, 10);\r\n                        }),\r\n                        $utils.addEventListener(document, \"click\", (_ev) => {\r\n                            this.hideTooltip();\r\n                        })\r\n                    ]);\r\n                    this._disposers.push(this._tooltipDp);\r\n                }\r\n                else if (showTooltipOn == \"always\") {\r\n                    // nothing\r\n                }\r\n                else {\r\n                    this._tooltipDp = new MultiDisposer([\r\n                        events.on(\"pointerover\", () => {\r\n                            this.showTooltip();\r\n                        }),\r\n                        events.on(\"pointerout\", () => {\r\n                            this.hideTooltip();\r\n                        })\r\n                    ]);\r\n                    this._disposers.push(this._tooltipDp);\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"toggleKey\")) {\r\n            let toggleKey = this.get(\"toggleKey\");\r\n            if (toggleKey && toggleKey != \"none\") {\r\n                this._toggleDp = events.on(\"click\", () => {\r\n                    if (!this._isDragging) {\r\n                        this.set(toggleKey, !this.get(toggleKey));\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (this._toggleDp) {\r\n                    this._toggleDp.dispose();\r\n                    this._toggleDp = undefined;\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"opacity\")) {\r\n            display.alpha = Math.max(0, this.get(\"opacity\", 1));\r\n            if (this.get(\"focusable\")) {\r\n                this.markDirtyAccessibility();\r\n            }\r\n        }\r\n        if (this.isDirty(\"rotation\")) {\r\n            this.markDirtyBounds();\r\n            display.angle = this.get(\"rotation\", 0);\r\n        }\r\n        if (this.isDirty(\"scale\")) {\r\n            this.markDirtyBounds();\r\n            display.scale = this.get(\"scale\", 0);\r\n        }\r\n        if (this.isDirty(\"centerX\") || this.isDirty(\"centerY\")) {\r\n            this.markDirtyBounds();\r\n            this.updatePivotPoint();\r\n        }\r\n        if (this.isDirty(\"visible\") || this.isPrivateDirty(\"visible\") || this.isDirty(\"forceHidden\")) {\r\n            if (!this.get(\"visible\") || !this.getPrivate(\"visible\") || this.get(\"forceHidden\")) {\r\n                display.visible = false;\r\n                this.hideTooltip();\r\n            }\r\n            else {\r\n                display.visible = true;\r\n            }\r\n            this.markDirtyBounds();\r\n            if (this.get(\"focusable\")) {\r\n                this.markDirtyAccessibility();\r\n            }\r\n        }\r\n        if (this.isDirty(\"width\") || this.isDirty(\"height\")) {\r\n            this.markDirtyBounds();\r\n            this._addPercentageSizeChildren();\r\n            const parent = this.parent;\r\n            if (parent) {\r\n                if ((this.isDirty(\"width\") && this.get(\"width\") instanceof Percent) || (this.isDirty(\"height\") && this.get(\"height\") instanceof Percent)) {\r\n                    parent.markDirty();\r\n                    parent._prevWidth = 0;\r\n                }\r\n            }\r\n            this._sizeDirty = true;\r\n        }\r\n        if (this.isDirty(\"maxWidth\") || this.isDirty(\"maxHeight\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\") || this.isDirty(\"minWidth\") || this.isDirty(\"minHeight\") || this.isPrivateDirty(\"maxWidth\") || this.isPrivateDirty(\"maxHeight\") || this.isPrivateDirty(\"minWidth\") || this.isPrivateDirty(\"minHeight\") || this.isDirty(\"marginLeft\") || this.isDirty(\"marginTop\") || this.isDirty(\"marginRight\") || this.isDirty(\"marginBottom\")) {\r\n            this.markDirtyBounds();\r\n            this._sizeDirty = true;\r\n        }\r\n        if (this._sizeDirty) {\r\n            this._updateSize();\r\n        }\r\n        if (this.isDirty(\"wheelable\")) {\r\n            const wheelable = this.get(\"wheelable\");\r\n            if (wheelable) {\r\n                this.set(\"interactive\", true);\r\n            }\r\n            display.wheelable = wheelable ? true : false;\r\n        }\r\n        // Accessibility\r\n        if (this.isDirty(\"tabindexOrder\") || this.isDirty(\"focusableGroup\")) {\r\n            if (this.get(\"focusable\")) {\r\n                this._root._registerTabindexOrder(this);\r\n            }\r\n            else {\r\n                this._root._unregisterTabindexOrder(this);\r\n            }\r\n        }\r\n        if (this.isDirty(\"filter\")) {\r\n            //this.markDirtyBounds();\r\n            display.filter = this.get(\"filter\");\r\n        }\r\n        let filter = this.get(\"filter\", \"\");\r\n        if (this.isDirty(\"blur\")) {\r\n            const blur = this.get(\"blur\", 0);\r\n            if (blur != 0) {\r\n                filter += \" blur(\" + blur + \"px)\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"saturate\")) {\r\n            const saturate = this.get(\"saturate\", 1);\r\n            if (saturate != 1) {\r\n                filter += \" saturate(\" + saturate + \")\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"brightness\")) {\r\n            const brightness = this.get(\"brightness\", 1);\r\n            if (brightness != 1) {\r\n                filter += \" brightness(\" + brightness + \")\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"contrast\")) {\r\n            const contrast = this.get(\"contrast\", 1);\r\n            if (contrast != 1) {\r\n                filter += \" contrast(\" + contrast + \")\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"sepia\")) {\r\n            const sepia = this.get(\"sepia\", 0);\r\n            if (sepia != 0) {\r\n                filter += \" sepia(\" + sepia + \")\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"hue\")) {\r\n            const hue = this.get(\"hue\", 0);\r\n            if (hue != 0) {\r\n                filter += \" hue-rotate(\" + hue + \"deg)\";\r\n            }\r\n        }\r\n        if (this.isDirty(\"invert\")) {\r\n            const invert = this.get(\"invert\", 0);\r\n            if (invert != 0) {\r\n                filter += \" invert(\" + invert + \")\";\r\n            }\r\n        }\r\n        if (filter) {\r\n            display.filter = filter;\r\n        }\r\n        if (this.isDirty(\"cursorOverStyle\")) {\r\n            display.cursorOverStyle = this.get(\"cursorOverStyle\");\r\n        }\r\n        if (this.isDirty(\"hoverOnFocus\")) {\r\n            if (this.get(\"hoverOnFocus\")) {\r\n                this._focusDp = new MultiDisposer([\r\n                    events.on(\"focus\", () => {\r\n                        // TODO: proper hover, not just tooltip\r\n                        this.showTooltip();\r\n                    }),\r\n                    events.on(\"blur\", () => {\r\n                        // TODO: proper hover, not just tooltip\r\n                        this.hideTooltip();\r\n                    })\r\n                ]);\r\n            }\r\n            else {\r\n                if (this._focusDp) {\r\n                    this._focusDp.dispose();\r\n                    this._focusDp = undefined;\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"focusable\")) {\r\n            if (this.get(\"focusable\")) {\r\n                this._root._registerTabindexOrder(this);\r\n            }\r\n            else {\r\n                this._root._unregisterTabindexOrder(this);\r\n            }\r\n            this.markDirtyAccessibility();\r\n            this._disposers.push(events.on(\"blur\", () => {\r\n                this.setPrivateRaw(\"touchHovering\", false);\r\n            }));\r\n            this._disposers.push(events.once(\"boundschanged\", () => {\r\n                // We might need to do this to re-evaluate accessibility attributes\r\n                // once the element gains size (bounds)\r\n                this.markDirtyAccessibility();\r\n            }));\r\n        }\r\n        if (this.isPrivateDirty(\"focusable\")) {\r\n            this.markDirtyAccessibility();\r\n        }\r\n        if (this.isDirty(\"role\") || this.isDirty(\"ariaLive\") || this.isDirty(\"ariaChecked\") || this.isDirty(\"ariaHidden\") || this.isDirty(\"ariaOrientation\") || this.isDirty(\"ariaValueNow\") || this.isDirty(\"ariaValueMin\") || this.isDirty(\"ariaValueMax\") || this.isDirty(\"ariaValueText\") || this.isDirty(\"ariaLabel\") || this.isDirty(\"ariaControls\")) {\r\n            // display.accessibility.ariaLabel = populateString(this, this.get(\"ariaLabel\", \"\"));\r\n            // @todo make sure ariaLabel gets populated in Root\r\n            this.markDirtyAccessibility();\r\n        }\r\n        if (this.isDirty(\"exportable\")) {\r\n            display.exportable = this.get(\"exportable\");\r\n        }\r\n        if (this.isDirty(\"interactive\")) {\r\n            const events = this.events;\r\n            if (this.get(\"interactive\") && !events.isDisposed()) {\r\n                this._hoverDp = new MultiDisposer([\r\n                    events.on(\"click\", (ev) => {\r\n                        if ($utils.isTouchEvent(ev.originalEvent)) {\r\n                            if (!this.getPrivate(\"touchHovering\")) {\r\n                                this.setTimeout(() => {\r\n                                    this._handleOver();\r\n                                    if (this.get(\"tooltipText\") || this.get(\"tooltipHTML\")) {\r\n                                        this.showTooltip();\r\n                                    }\r\n                                    this.setPrivateRaw(\"touchHovering\", true);\r\n                                    this.events.dispatch(\"pointerover\", {\r\n                                        type: \"pointerover\",\r\n                                        target: ev.target,\r\n                                        originalEvent: ev.originalEvent,\r\n                                        point: ev.point,\r\n                                        simulated: ev.simulated\r\n                                    });\r\n                                }, 10);\r\n                            }\r\n                        }\r\n                    }),\r\n                    events.on(\"globalpointerup\", (ev) => {\r\n                        if ($utils.isTouchEvent(ev.originalEvent)) {\r\n                            if (this.getPrivate(\"touchHovering\")) {\r\n                                this._handleOut();\r\n                                if (this.get(\"tooltipText\") || this.get(\"tooltipHTML\")) {\r\n                                    this.hideTooltip();\r\n                                }\r\n                                this.setPrivateRaw(\"touchHovering\", false);\r\n                                this.events.dispatch(\"pointerout\", {\r\n                                    type: \"pointerout\",\r\n                                    target: ev.target,\r\n                                    originalEvent: ev.originalEvent,\r\n                                    point: ev.point,\r\n                                    simulated: ev.simulated\r\n                                });\r\n                            }\r\n                        }\r\n                        if (this._isDown) {\r\n                            this._handleUp(ev);\r\n                        }\r\n                        //this._isDown = false;\r\n                    }),\r\n                    events.on(\"pointerover\", () => {\r\n                        this._handleOver();\r\n                    }),\r\n                    events.on(\"pointerout\", () => {\r\n                        this._handleOut();\r\n                    }),\r\n                    events.on(\"pointerdown\", (e) => {\r\n                        this._handleDown(e);\r\n                    })\r\n                ]);\r\n            }\r\n            else {\r\n                this._display.interactive = false;\r\n                if (this._hoverDp) {\r\n                    this._hoverDp.dispose();\r\n                    this._hoverDp = undefined;\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"forceInactive\")) {\r\n            this._display.inactive = this.get(\"forceInactive\", null);\r\n        }\r\n        if (this.get(\"showTooltipOn\") == \"always\" && this._display.visible) {\r\n            this.showTooltip();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * @todo should this be user-accessible?\r\n     */\r\n    dragStart(e) {\r\n        this._dragEvent = e;\r\n        this.events.stopParentDispatch();\r\n    }\r\n    /**\r\n     * @ignore\r\n     * @todo should this be user-accessible?\r\n     */\r\n    dragStop(e) {\r\n        this._dragEvent = undefined;\r\n        this._dragPoint = undefined;\r\n        this.events.stopParentDispatch();\r\n        if (this._isDragging) {\r\n            this._isDragging = false;\r\n            const type = \"dragstop\";\r\n            if (this.events.isEnabled(type)) {\r\n                this.events.dispatch(type, {\r\n                    type: type,\r\n                    target: this,\r\n                    originalEvent: e.originalEvent,\r\n                    point: e.point,\r\n                    simulated: e.simulated,\r\n                });\r\n            }\r\n        }\r\n    }\r\n    _handleOver() {\r\n        if (!this.isHidden()) {\r\n            if (this.get(\"active\") && this.states.lookup(\"hoverActive\")) {\r\n                this.states.applyAnimate(\"hoverActive\");\r\n            }\r\n            else if (this.get(\"disabled\") && this.states.lookup(\"hoverDisabled\")) {\r\n                this.states.applyAnimate(\"hoverDisabled\");\r\n            }\r\n            else {\r\n                this.states.applyAnimate(\"hover\");\r\n            }\r\n            if (this.get(\"draggable\") && this._isDown && this.states.lookup(\"down\")) {\r\n                this.states.applyAnimate(\"down\");\r\n            }\r\n        }\r\n    }\r\n    _handleOut() {\r\n        if (!this.isHidden()) {\r\n            if (this.get(\"active\") && this.states.lookup(\"active\")) {\r\n                this.states.applyAnimate(\"active\");\r\n            }\r\n            else if (this.get(\"disabled\") && this.states.lookup(\"disabled\")) {\r\n                this.states.applyAnimate(\"disabled\");\r\n            }\r\n            else {\r\n                if (this.states.lookup(\"hover\") || this.states.lookup(\"hoverActive\")) {\r\n                    this.states.applyAnimate(\"default\");\r\n                }\r\n            }\r\n            if (this.get(\"draggable\") && this._isDown && this.states.lookup(\"down\")) {\r\n                this.states.applyAnimate(\"down\");\r\n            }\r\n        }\r\n    }\r\n    _handleUp(e) {\r\n        if (!this.isHidden()) {\r\n            if (this.get(\"active\") && this.states.lookup(\"active\")) {\r\n                this.states.applyAnimate(\"active\");\r\n            }\r\n            else if (this.get(\"disabled\") && this.states.lookup(\"disabled\")) {\r\n                this.states.applyAnimate(\"disabled\");\r\n            }\r\n            else if (this.states.lookup(\"down\")) {\r\n                if (this.isHover()) {\r\n                    this.states.applyAnimate(\"hover\");\r\n                }\r\n                else {\r\n                    this.states.applyAnimate(\"default\");\r\n                }\r\n            }\r\n            // @todo remove this once migrated to _downPoints\r\n            this._downPoint = undefined;\r\n            const pointerId = $utils.getPointerId(e.originalEvent);\r\n            delete this._downPoints[pointerId];\r\n            if ($object.keys(this._downPoints).length == 0) {\r\n                this._isDown = false;\r\n            }\r\n        }\r\n    }\r\n    _hasMoved(e) {\r\n        // @todo remove this once migrated to _downPoints\r\n        // if (this._downPoint) {\r\n        // \tconst x = Math.abs(this._downPoint.x - e.point.x);\r\n        // \tconst y = Math.abs(this._downPoint.y - e.point.y);\r\n        // \treturn (x > 5) || (y > 5);\r\n        // }\r\n        const pointerId = $utils.getPointerId(e.originalEvent);\r\n        const downPoint = this._downPoints[pointerId];\r\n        if (downPoint) {\r\n            const x = Math.abs(downPoint.x - e.point.x);\r\n            const y = Math.abs(downPoint.y - e.point.y);\r\n            return (x > 5) || (y > 5);\r\n        }\r\n        return false;\r\n    }\r\n    _hasDown() {\r\n        return $object.keys(this._downPoints).length > 0;\r\n    }\r\n    _handleDown(e) {\r\n        const parent = this.parent;\r\n        if (parent && !this.get(\"draggable\")) {\r\n            parent._handleDown(e);\r\n        }\r\n        if (this.get(\"interactive\") && !this.isHidden()) {\r\n            if (this.states.lookup(\"down\")) {\r\n                this.states.applyAnimate(\"down\");\r\n            }\r\n            this._downPoint = {\r\n                x: e.point.x,\r\n                y: e.point.y\r\n            };\r\n            // @todo remove this once migrated to _downPoints\r\n            this._isDown = true;\r\n            const pointerId = $utils.getPointerId(e.originalEvent);\r\n            this._downPoints[pointerId] = {\r\n                x: e.point.x,\r\n                y: e.point.y\r\n            };\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     * @todo should this be user-accessible?\r\n     */\r\n    dragMove(e) {\r\n        let dragEvent = this._dragEvent;\r\n        if (dragEvent) {\r\n            if (dragEvent.simulated && !e.simulated) {\r\n                return true;\r\n            }\r\n            let angle = 0;\r\n            let parent = this.parent;\r\n            let scale = 1;\r\n            while (parent != null) {\r\n                angle += parent.get(\"rotation\", 0);\r\n                parent = parent.parent;\r\n                if (parent) {\r\n                    scale *= parent.get(\"scale\", 1);\r\n                }\r\n            }\r\n            let x = (e.point.x - dragEvent.point.x) / scale;\r\n            let y = (e.point.y - dragEvent.point.y) / scale;\r\n            const events = this.events;\r\n            if (dragEvent.simulated && !this._isDragging) {\r\n                this._isDragging = true;\r\n                this._dragEvent = e;\r\n                this._dragPoint = {\r\n                    x: this.x(),\r\n                    y: this.y()\r\n                };\r\n                const type = \"dragstart\";\r\n                if (events.isEnabled(type)) {\r\n                    events.dispatch(type, {\r\n                        type: type,\r\n                        target: this,\r\n                        originalEvent: e.originalEvent,\r\n                        point: e.point,\r\n                        simulated: e.simulated,\r\n                    });\r\n                }\r\n            }\r\n            if (this._isDragging) {\r\n                let dragPoint = this._dragPoint;\r\n                this.set(\"x\", dragPoint.x + x * $math.cos(angle) + y * $math.sin(angle));\r\n                this.set(\"y\", dragPoint.y + y * $math.cos(angle) - x * $math.sin(angle));\r\n                const type = \"dragged\";\r\n                if (events.isEnabled(type)) {\r\n                    events.dispatch(type, {\r\n                        type: type,\r\n                        target: this,\r\n                        originalEvent: e.originalEvent,\r\n                        point: e.point,\r\n                        simulated: e.simulated,\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                if (Math.hypot(x, y) > 5) {\r\n                    this._isDragging = true;\r\n                    this._dragEvent = e;\r\n                    this._dragPoint = {\r\n                        x: this.x(),\r\n                        y: this.y()\r\n                    };\r\n                    const type = \"dragstart\";\r\n                    if (events.isEnabled(type)) {\r\n                        events.dispatch(type, {\r\n                            type: type,\r\n                            target: this,\r\n                            originalEvent: e.originalEvent,\r\n                            point: e.point,\r\n                            simulated: e.simulated\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _updateSize() {\r\n    }\r\n    _getBounds() {\r\n        this._localBounds = this._display.getLocalBounds();\r\n    }\r\n    /**\r\n     * Returns depth (how deep in the hierachy of the content tree) of this\r\n     * element.\r\n     *\r\n     * @return Depth\r\n     */\r\n    depth() {\r\n        let self = this.parent;\r\n        let depth = 0;\r\n        while (true) {\r\n            if (self) {\r\n                ++depth;\r\n                self = self.parent;\r\n            }\r\n            else {\r\n                return depth;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtySize() {\r\n        this._sizeDirty = true;\r\n        this.markDirty();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyBounds() {\r\n        const display = this._display;\r\n        if (this.get(\"isMeasured\")) {\r\n            this._root._addDirtyBounds(this);\r\n            display.isMeasured = true;\r\n            display.invalidateBounds();\r\n            const parent = this.parent;\r\n            if (parent && this.get(\"position\") != \"absolute\") {\r\n                if (parent.get(\"width\") == null || parent.get(\"height\") == null || parent.get(\"layout\")) {\r\n                    parent.markDirtyBounds();\r\n                }\r\n            }\r\n            if (this.get(\"focusable\")) {\r\n                this.markDirtyAccessibility();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyAccessibility() {\r\n        //if (this._root.focused(this)) {\r\n        this._root._invalidateAccessibility(this);\r\n        //}\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyLayer() {\r\n        //this._display.markDirtyLayer(this.isDirty(\"opacity\") || this.isDirty(\"visible\")); https://codepen.io/team/amcharts/pen/gOWZPmP <- problems\r\n        this._display.markDirtyLayer(true);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirty() {\r\n        super.markDirty();\r\n        this.markDirtyLayer();\r\n    }\r\n    _updateBounds() {\r\n        const oldBounds = this._adjustedLocalBounds;\r\n        let newBounds;\r\n        // if display.visible == false, it still returns bounds\r\n        if (!this.get(\"visible\") || !this.getPrivate(\"visible\") || this.get(\"forceHidden\")) {\r\n            newBounds = {\r\n                left: 0,\r\n                right: 0,\r\n                top: 0,\r\n                bottom: 0\r\n            };\r\n            this._localBounds = newBounds;\r\n            this._adjustedLocalBounds = newBounds;\r\n        }\r\n        else {\r\n            this._getBounds();\r\n            this._fixMinBounds(this._localBounds);\r\n            this.updatePivotPoint();\r\n            this._adjustedLocalBounds = this._display.getAdjustedBounds(this._localBounds);\r\n            newBounds = this._adjustedLocalBounds;\r\n        }\r\n        if (!oldBounds || (oldBounds.left !== newBounds.left || oldBounds.top !== newBounds.top || oldBounds.right !== newBounds.right || oldBounds.bottom !== newBounds.bottom)) {\r\n            const eventType = \"boundschanged\";\r\n            if (this.events.isEnabled(eventType)) {\r\n                this.events.dispatch(eventType, { type: eventType, target: this });\r\n            }\r\n            if (this.parent) {\r\n                this.parent.markDirty();\r\n                this.parent.markDirtyBounds();\r\n            }\r\n            // Update tooltip position together with the Sprite\r\n            if (this.getPrivate(\"showingTooltip\")) {\r\n                this.showTooltip();\r\n            }\r\n        }\r\n    }\r\n    _fixMinBounds(bounds) {\r\n        let minWidth = this.get(\"minWidth\", this.getPrivate(\"minWidth\"));\r\n        let minHeight = this.get(\"minHeight\", this.getPrivate(\"minHeight\"));\r\n        if ($type.isNumber(minWidth)) {\r\n            if (bounds.right - bounds.left < minWidth) {\r\n                bounds.right = bounds.left + minWidth;\r\n            }\r\n        }\r\n        if ($type.isNumber(minHeight)) {\r\n            if (bounds.bottom - bounds.top < minHeight) {\r\n                bounds.bottom = bounds.top + minHeight;\r\n            }\r\n        }\r\n        let privateWidth = this.getPrivate(\"width\");\r\n        let privateHeight = this.getPrivate(\"height\");\r\n        if ($type.isNumber(privateWidth)) {\r\n            if (privateWidth > 0) {\r\n                bounds.right = bounds.left + privateWidth;\r\n            }\r\n            else {\r\n                bounds.left = bounds.right + privateWidth;\r\n            }\r\n        }\r\n        if ($type.isNumber(privateHeight)) {\r\n            if (privateHeight > 0) {\r\n                bounds.bottom = bounds.top + privateHeight;\r\n            }\r\n            else {\r\n                bounds.top = bounds.bottom + privateHeight;\r\n            }\r\n        }\r\n    }\r\n    _removeParent(parent) {\r\n        if (parent) {\r\n            parent.children.removeValue(this);\r\n            $array.removeFirst(parent._percentageSizeChildren, this);\r\n            $array.removeFirst(parent._percentagePositionChildren, this);\r\n        }\r\n    }\r\n    _clearDirty() {\r\n        super._clearDirty();\r\n        this._sizeDirty = false;\r\n        //this._statesHandled = false;\r\n    }\r\n    /**\r\n     * Simulate hover over element.\r\n     */\r\n    hover() {\r\n        if (!this.isDisposed()) {\r\n            this.showTooltip();\r\n            this._handleOver();\r\n        }\r\n    }\r\n    /**\r\n     * Simulate unhover over element.\r\n     */\r\n    unhover() {\r\n        if (!this.isDisposed()) {\r\n            this.hideTooltip();\r\n            this._handleOut();\r\n        }\r\n    }\r\n    /**\r\n     * Shows element's [[Tooltip]].\r\n     */\r\n    showTooltip(point) {\r\n        if (!this.isDisposed()) {\r\n            const tooltip = this.getTooltip();\r\n            const tooltipText = this.get(\"tooltipText\");\r\n            const tooltipHTML = this.get(\"tooltipHTML\");\r\n            if ((tooltipText || tooltipHTML) && tooltip) {\r\n                const tooltipPosition = this.get(\"tooltipPosition\");\r\n                const tooltipTarget = this.getPrivate(\"tooltipTarget\", this);\r\n                if (tooltipPosition == \"fixed\" || !point) {\r\n                    this._display._setMatrix();\r\n                    point = this.toGlobal(tooltipTarget._getTooltipPoint());\r\n                }\r\n                if (tooltipPosition == \"pointer\") {\r\n                    const lastTooltipCoords = this.getPrivate(\"lastTooltipCoords\");\r\n                    if (lastTooltipCoords && lastTooltipCoords.x == point.x && lastTooltipCoords.y == point.y) {\r\n                        return;\r\n                    }\r\n                    else {\r\n                        this.setPrivate(\"lastTooltipCoords\", point);\r\n                    }\r\n                }\r\n                tooltip.set(\"pointTo\", point);\r\n                tooltip.set(\"tooltipTarget\", tooltipTarget);\r\n                if (!tooltip.get(\"x\")) {\r\n                    tooltip.set(\"x\", point.x);\r\n                }\r\n                if (!tooltip.get(\"y\")) {\r\n                    tooltip.set(\"y\", point.y);\r\n                }\r\n                if (tooltipText) {\r\n                    tooltip.label.set(\"text\", tooltipText);\r\n                }\r\n                if (tooltipHTML) {\r\n                    tooltip.label.set(\"html\", tooltipHTML);\r\n                }\r\n                const dataItem = this.dataItem;\r\n                if (dataItem) {\r\n                    tooltip.label._setDataItem(dataItem);\r\n                }\r\n                if (this.get(\"showTooltipOn\") == \"always\" && (point.x < 0 || point.x > this._root.width() || point.y < 0 || point.y > this._root.height())) {\r\n                    this.hideTooltip();\r\n                    return;\r\n                }\r\n                tooltip.label.text.markDirtyText();\r\n                const promise = tooltip.show();\r\n                this.setPrivateRaw(\"showingTooltip\", true);\r\n                return promise;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Hides element's [[Tooltip]].\r\n     */\r\n    hideTooltip() {\r\n        const tooltip = this.getTooltip();\r\n        if (tooltip) {\r\n            this.removePrivate(\"lastTooltipCoords\");\r\n            if (tooltip.get(\"tooltipTarget\") == this.getPrivate(\"tooltipTarget\", this) || this.get(\"tooltip\") == tooltip) {\r\n                let timeout = tooltip.get(\"keepTargetHover\") && tooltip.get(\"stateAnimationDuration\", 0) == 0 ? 400 : undefined;\r\n                const promise = tooltip.hide(timeout);\r\n                this.setPrivateRaw(\"showingTooltip\", false);\r\n                return promise;\r\n            }\r\n        }\r\n    }\r\n    _getTooltipPoint() {\r\n        const bounds = this._localBounds;\r\n        if (bounds) {\r\n            let x = 0;\r\n            let y = 0;\r\n            if (!this.get(\"isMeasured\")) {\r\n                x = $utils.relativeToValue(this.get(\"tooltipX\", 0), this.width());\r\n                y = $utils.relativeToValue(this.get(\"tooltipY\", 0), this.height());\r\n            }\r\n            else {\r\n                x = bounds.left + $utils.relativeToValue(this.get(\"tooltipX\", 0), bounds.right - bounds.left);\r\n                y = bounds.top + $utils.relativeToValue(this.get(\"tooltipY\", 0), bounds.bottom - bounds.top);\r\n            }\r\n            return { x, y };\r\n        }\r\n        return { x: 0, y: 0 };\r\n    }\r\n    /**\r\n     * Returns [[Tooltip]] used for this element.\r\n     *\r\n     * @return Tooltip\r\n     */\r\n    getTooltip() {\r\n        let tooltip = this.get(\"tooltip\");\r\n        if (!tooltip) {\r\n            let parent = this.parent;\r\n            if (parent) {\r\n                return parent.getTooltip();\r\n            }\r\n        }\r\n        else {\r\n            return tooltip;\r\n        }\r\n    }\r\n    _updatePosition() {\r\n        const parent = this.parent;\r\n        let dx = this.get(\"dx\", 0);\r\n        let dy = this.get(\"dy\", 0);\r\n        let x = this.get(\"x\");\r\n        let _x = this.getPrivate(\"x\");\r\n        let xx = 0;\r\n        let yy = 0;\r\n        const position = this.get(\"position\");\r\n        if (x instanceof Percent) {\r\n            if (parent) {\r\n                x = parent.innerWidth() * x.value + parent.get(\"paddingLeft\", 0);\r\n            }\r\n            else {\r\n                x = 0;\r\n            }\r\n        }\r\n        if ($type.isNumber(x)) {\r\n            xx = x + dx;\r\n        }\r\n        else {\r\n            if (_x != null) {\r\n                xx = _x;\r\n            }\r\n            else if (parent) {\r\n                if (position == \"relative\") {\r\n                    xx = parent.get(\"paddingLeft\", 0) + dx;\r\n                }\r\n            }\r\n        }\r\n        let y = this.get(\"y\");\r\n        let _y = this.getPrivate(\"y\");\r\n        if (y instanceof Percent) {\r\n            if (parent) {\r\n                y = parent.innerHeight() * y.value + parent.get(\"paddingTop\", 0);\r\n            }\r\n            else {\r\n                y = 0;\r\n            }\r\n        }\r\n        if ($type.isNumber(y)) {\r\n            yy = y + dy;\r\n        }\r\n        else {\r\n            if (_y != null) {\r\n                yy = _y;\r\n            }\r\n            else if (parent) {\r\n                if (position == \"relative\") {\r\n                    yy = parent.get(\"paddingTop\", 0) + dy;\r\n                }\r\n            }\r\n        }\r\n        const display = this._display;\r\n        if (display.x != xx || display.y != yy) {\r\n            display.invalidateBounds();\r\n            display.x = xx;\r\n            display.y = yy;\r\n            const eventType = \"positionchanged\";\r\n            if (this.events.isEnabled(eventType)) {\r\n                this.events.dispatch(eventType, { type: eventType, target: this });\r\n            }\r\n        }\r\n        // Update tooltip position together with the Sprite\r\n        if (this.getPrivate(\"showingTooltip\")) {\r\n            this.showTooltip();\r\n        }\r\n    }\r\n    /**\r\n     * Returns element's actual X position in pixels.\r\n     *\r\n     * @return X (px)\r\n     */\r\n    x() {\r\n        let x = this.get(\"x\");\r\n        let _x = this.getPrivate(\"x\");\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            if (x instanceof Percent) {\r\n                return $utils.relativeToValue(x, parent.innerWidth()) + parent.get(\"paddingLeft\", 0);\r\n            }\r\n            else {\r\n                if (!$type.isNumber(x)) {\r\n                    if (_x != null) {\r\n                        return _x;\r\n                    }\r\n                    else {\r\n                        return parent.get(\"paddingLeft\", this._display.x);\r\n                    }\r\n                }\r\n                else {\r\n                    return x;\r\n                }\r\n            }\r\n        }\r\n        return this._display.x;\r\n    }\r\n    /**\r\n     * Returns element's actual Y position in pixels.\r\n     *\r\n     * @return Y (px)\r\n     */\r\n    y() {\r\n        let _y = this.getPrivate(\"y\");\r\n        if (_y != null) {\r\n            return _y;\r\n        }\r\n        let y = this.get(\"y\");\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            if (y instanceof Percent) {\r\n                return $utils.relativeToValue(y, parent.innerHeight()) + parent.get(\"paddingTop\", 0);\r\n            }\r\n            else {\r\n                if (!$type.isNumber(y)) {\r\n                    if (_y != null) {\r\n                        return _y;\r\n                    }\r\n                    else {\r\n                        return parent.get(\"paddingTop\", this._display.y);\r\n                    }\r\n                }\r\n                else {\r\n                    return y;\r\n                }\r\n            }\r\n        }\r\n        return this._display.y;\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        this._display.dispose();\r\n        this._removeTemplateField();\r\n        this._removeParent(this.parent);\r\n        this._root._removeFocusElement(this);\r\n        const tooltip = this.get(\"tooltip\");\r\n        if (tooltip) {\r\n            tooltip.dispose();\r\n        }\r\n        this.markDirty();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    adjustedLocalBounds() {\r\n        this._fixMinBounds(this._adjustedLocalBounds);\r\n        return this._adjustedLocalBounds;\r\n    }\r\n    /**\r\n     * Returns local coordinates of the element's bounds.\r\n     *\r\n     * @ignore\r\n     * @return Global bounds\r\n     */\r\n    localBounds() {\r\n        return this._localBounds;\r\n    }\r\n    /**\r\n     * Returns adjusted local coordinates of the element's bounds.\r\n     *\r\n     * @ignore\r\n     * @return Global bounds\r\n     */\r\n    bounds() {\r\n        const bounds = this._adjustedLocalBounds;\r\n        const x = this.x();\r\n        const y = this.y();\r\n        return { left: bounds.left + x, right: bounds.right + x, top: bounds.top + y, bottom: bounds.bottom + y };\r\n    }\r\n    /**\r\n     * Returns global coordinates of the element's bounds.\r\n     *\r\n     * @ignore\r\n     * @return Global bounds\r\n     */\r\n    globalBounds() {\r\n        const bounds = this.localBounds();\r\n        const p0 = this.toGlobal({ x: bounds.left, y: bounds.top });\r\n        const p1 = this.toGlobal({ x: bounds.right, y: bounds.top });\r\n        const p2 = this.toGlobal({ x: bounds.right, y: bounds.bottom });\r\n        const p3 = this.toGlobal({ x: bounds.left, y: bounds.bottom });\r\n        return {\r\n            left: Math.min(p0.x, p1.x, p2.x, p3.x),\r\n            top: Math.min(p0.y, p1.y, p2.y, p3.y),\r\n            right: Math.max(p0.x, p1.x, p2.x, p3.x),\r\n            bottom: Math.max(p0.y, p1.y, p2.y, p3.y)\r\n        };\r\n    }\r\n    _onShow(_duration) {\r\n    }\r\n    _onHide(_duration) {\r\n    }\r\n    /**\r\n     * Plays initial reveal animation regardless if element is currently hidden\r\n     * or visible.\r\n     *\r\n     * @param   duration  Duration of the animation in milliseconds\r\n     * @param   delay     Delay showing of the element by X milliseconds\r\n     * @return            Promise\r\n     */\r\n    appear(duration, delay) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.hide(0);\r\n            if (delay) {\r\n                return new Promise((success, _error) => {\r\n                    this.setTimeout(() => {\r\n                        success(this.show(duration));\r\n                    }, delay);\r\n                });\r\n            }\r\n            else {\r\n                return this.show(duration);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Shows currently hidden element and returns a `Promise` which completes\r\n     * when all showing animations are finished.\r\n     *\r\n     * ```TypeScript\r\n     * series.show().then(function(ev) {\r\n     *   console.log(\"Series is now fully visible\");\r\n     * })\r\n     * ```\r\n     * ```JavaScript\r\n     * series.show().then(function(ev) {\r\n     *   console.log(\"Series is now fully visible\");\r\n     * })\r\n     * ```\r\n     *\r\n     * @return Promise\r\n     */\r\n    show(duration) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._isShowing) {\r\n                this._isHidden = false;\r\n                this._isShowing = true;\r\n                this._isHiding = false;\r\n                if (this.states.lookup(\"default\").get(\"visible\")) {\r\n                    this.set(\"visible\", true);\r\n                }\r\n                this._onShow(duration);\r\n                const animations = this.states.applyAnimate(\"default\", duration);\r\n                yield waitForAnimations(animations);\r\n                this._isShowing = false;\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Hides the element and returns a `Promise` which completes when all hiding\r\n     * animations are finished.\r\n     *\r\n     * ```TypeScript\r\n     * series.hide().then(function(ev) {\r\n     *   console.log(\"Series finished hiding\");\r\n     * })\r\n     * ```\r\n     * ```JavaScript\r\n     * series.hide().then(function(ev) {\r\n     *   console.log(\"Series finished hiding\");\r\n     * })\r\n     * ```\r\n     *\r\n     * @return Promise\r\n     */\r\n    hide(duration) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._isHiding && !this._isHidden) {\r\n                this._isHiding = true;\r\n                this._isShowing = false;\r\n                let state = this.states.lookup(\"hidden\");\r\n                if (!state) {\r\n                    state = this.states.create(\"hidden\", {\r\n                        \"opacity\": 0,\r\n                        \"visible\": false\r\n                    });\r\n                }\r\n                this._isHidden = true;\r\n                this._onHide(duration);\r\n                const animations = this.states.applyAnimate(\"hidden\", duration);\r\n                yield waitForAnimations(animations);\r\n                this._isHiding = false;\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Returns `true` if this element is currently hidden.\r\n     *\r\n     * @return Is hidden?\r\n     */\r\n    isHidden() {\r\n        return this._isHidden;\r\n    }\r\n    /**\r\n     * Returns `true` if this element is currently animating to a default state.\r\n     *\r\n     * @return Is showing?\r\n     */\r\n    isShowing() {\r\n        return this._isShowing;\r\n    }\r\n    /**\r\n     * Returns `true` if this element is currently animating to a hidden state.\r\n     *\r\n     * @return Is hiding?\r\n     */\r\n    isHiding() {\r\n        return this._isHiding;\r\n    }\r\n    /**\r\n     * Returns `true` if this element is currently hovered by a pointer.\r\n     *\r\n     * @return Is hovered?\r\n     */\r\n    isHover() {\r\n        return this._display.hovering();\r\n    }\r\n    /**\r\n     * Returns `true` if this element does currently have focus.\r\n     *\r\n     * @return Is focused?\r\n     */\r\n    isFocus() {\r\n        return this._root.focused(this);\r\n    }\r\n    /**\r\n     * Returns `true` if this element is currently being dragged.\r\n     *\r\n     * @return Is dragged?\r\n     */\r\n    isDragging() {\r\n        return this._isDragging;\r\n    }\r\n    /**\r\n     * Returns `false` if if either public or private setting `visible` is set\r\n     * to `false`, or `forceHidden` is set to `true`.\r\n     *\r\n     * @return Visible?\r\n     */\r\n    isVisible() {\r\n        if (this.get(\"visible\") && this.getPrivate(\"visible\") && !this.get(\"forceHidden\")) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Same as `isVisible()`, except it checks all ascendants, too.\r\n     *\r\n     * @since 5.2.7\r\n     * @return Visible?\r\n     */\r\n    isVisibleDeep() {\r\n        return this._parent ? (this._parent.isVisibleDeep() && this.isVisible()) : this.isVisible();\r\n    }\r\n    /**\r\n     * Returns an actual opacity of the element, taking into account all parents.\r\n     *\r\n     * @return Opacity\r\n     * @since 5.2.11\r\n     */\r\n    compositeOpacity() {\r\n        const opacity = this.get(\"opacity\", 1);\r\n        return this._parent ? (this._parent.compositeOpacity() * opacity) : opacity;\r\n    }\r\n    /**\r\n     * Returns an actual scale of the element, taking into account all parents.\r\n     *\r\n     * @return Opacity\r\n     * @since 5.9.2\r\n     */\r\n    compositeScale() {\r\n        const scale = this.get(\"scale\", 1);\r\n        return this._parent ? (this._parent.compositeScale() * scale) : scale;\r\n    }\r\n    /**\r\n     * Returns an actual roation of the element, taking into account all parents.\r\n     *\r\n     * @return Opacity\r\n     * @since 5.9.2\r\n     */\r\n    compositeRotation() {\r\n        const rotation = this.get(\"rotation\", 0);\r\n        return this._parent ? (this._parent.compositeRotation() + rotation) : rotation;\r\n    }\r\n    /**\r\n     * Returns width of this element in pixels.\r\n     *\r\n     * @return Width (px)\r\n     */\r\n    width() {\r\n        let width = this.get(\"width\");\r\n        let maxWidth = this.get(\"maxWidth\", this.getPrivate(\"maxWidth\"));\r\n        let minWidth = this.get(\"minWidth\", this.getPrivate(\"minWidth\"));\r\n        let privateWidth = this.getPrivate(\"width\");\r\n        let w = 0;\r\n        if ($type.isNumber(privateWidth)) {\r\n            w = privateWidth;\r\n        }\r\n        else {\r\n            if (width == null) {\r\n                if (this._adjustedLocalBounds) {\r\n                    w = this._adjustedLocalBounds.right - this._adjustedLocalBounds.left;\r\n                }\r\n            }\r\n            else {\r\n                if (width instanceof Percent) {\r\n                    const parent = this.parent;\r\n                    if (parent) {\r\n                        w = parent.innerWidth() * width.value;\r\n                    }\r\n                    else {\r\n                        w = this._root.width() * width.value;\r\n                    }\r\n                }\r\n                else if ($type.isNumber(width)) {\r\n                    w = width;\r\n                }\r\n            }\r\n        }\r\n        if ($type.isNumber(minWidth)) {\r\n            w = Math.max(minWidth, w);\r\n        }\r\n        if ($type.isNumber(maxWidth)) {\r\n            w = Math.min(maxWidth, w);\r\n        }\r\n        return w;\r\n    }\r\n    /**\r\n     * Returns maximum allowed width of this element in pixels.\r\n     *\r\n     * @return Maximum width (px)\r\n     */\r\n    maxWidth() {\r\n        let maxWidth = this.get(\"maxWidth\", this.getPrivate(\"maxWidth\"));\r\n        if ($type.isNumber(maxWidth)) {\r\n            return maxWidth;\r\n        }\r\n        else {\r\n            let width = this.get(\"width\");\r\n            if ($type.isNumber(width)) {\r\n                return width;\r\n            }\r\n        }\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            return parent.innerWidth();\r\n        }\r\n        return this._root.width();\r\n    }\r\n    /**\r\n     * Returns maximum allowed height of this element in pixels.\r\n     *\r\n     * @return Maximum height (px)\r\n     */\r\n    maxHeight() {\r\n        let maxHeight = this.get(\"maxHeight\", this.getPrivate(\"maxHeight\"));\r\n        if ($type.isNumber(maxHeight)) {\r\n            return maxHeight;\r\n        }\r\n        else {\r\n            let height = this.get(\"height\");\r\n            if ($type.isNumber(height)) {\r\n                return height;\r\n            }\r\n        }\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            return parent.innerHeight();\r\n        }\r\n        return this._root.height();\r\n    }\r\n    /**\r\n     * Returns height of this element in pixels.\r\n     *\r\n     * @return Height (px)\r\n     */\r\n    height() {\r\n        let height = this.get(\"height\");\r\n        let maxHeight = this.get(\"maxHeight\", this.getPrivate(\"maxHeight\"));\r\n        let minHeight = this.get(\"minHeight\", this.getPrivate(\"minHeight\"));\r\n        let privateHeight = this.getPrivate(\"height\");\r\n        let h = 0;\r\n        if ($type.isNumber(privateHeight)) {\r\n            h = privateHeight;\r\n        }\r\n        else {\r\n            if (height == null) {\r\n                if (this._adjustedLocalBounds) {\r\n                    h = this._adjustedLocalBounds.bottom - this._adjustedLocalBounds.top;\r\n                }\r\n            }\r\n            else {\r\n                if (height instanceof Percent) {\r\n                    const parent = this.parent;\r\n                    if (parent) {\r\n                        h = parent.innerHeight() * height.value;\r\n                    }\r\n                    else {\r\n                        h = this._root.height() * height.value;\r\n                    }\r\n                }\r\n                else if ($type.isNumber(height)) {\r\n                    h = height;\r\n                }\r\n            }\r\n        }\r\n        if ($type.isNumber(minHeight)) {\r\n            h = Math.max(minHeight, h);\r\n        }\r\n        if ($type.isNumber(maxHeight)) {\r\n            h = Math.min(maxHeight, h);\r\n        }\r\n        return h;\r\n    }\r\n    _findStaticTemplate(f) {\r\n        // templateField overrides template\r\n        if (this._templateField && f(this._templateField)) {\r\n            return this._templateField;\r\n        }\r\n        return super._findStaticTemplate(f);\r\n    }\r\n    _walkParents(f) {\r\n        if (this._parent || this._virtualParent) {\r\n            this._walkParent(f);\r\n        }\r\n    }\r\n    _walkParent(f) {\r\n        if (this._parent) {\r\n            this._parent._walkParent(f);\r\n        }\r\n        else {\r\n            if (this._virtualParent) {\r\n                this._virtualParent._walkParent(f);\r\n            }\r\n        }\r\n        f(this);\r\n    }\r\n    set virtualParent(parent) {\r\n        this._virtualParent = parent;\r\n        this._applyThemes();\r\n    }\r\n    /**\r\n     * Parent [[Container]] of this element.\r\n     *\r\n     * @return Parent container\r\n     */\r\n    get parent() {\r\n        return this._parent;\r\n    }\r\n    _setParent(parent, updateChildren = false) {\r\n        const prevParent = this._parent;\r\n        if (parent !== prevParent) {\r\n            this.markDirtyBounds();\r\n            parent.markDirty();\r\n            this._parent = parent;\r\n            if (updateChildren) {\r\n                this._removeParent(prevParent);\r\n                if (parent) {\r\n                    this._addPercentageSizeChildren();\r\n                    this._addPercentagePositionChildren();\r\n                }\r\n            }\r\n            this.markDirtyPosition();\r\n            this._applyThemes();\r\n        }\r\n    }\r\n    /**\r\n     * Returns an instance of [[NumberFormatter]] used in this element.\r\n     *\r\n     * If this element does not have it set, global one form [[Root]] is used.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/using-formatters/} for more info\r\n     * @return NumberFormatter instace\r\n     */\r\n    getNumberFormatter() {\r\n        return this.get(\"numberFormatter\", this._root.numberFormatter);\r\n    }\r\n    /**\r\n     * Returns an instance of [[DateFormatter]] used in this element.\r\n     *\r\n     * If this element does not have it set, global one form [[Root]] is used.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/using-formatters/} for more info\r\n     * @return DateFormatter instace\r\n     */\r\n    getDateFormatter() {\r\n        return this.get(\"dateFormatter\", this._root.dateFormatter);\r\n    }\r\n    /**\r\n     * Returns an instance of [[DurationFormatter]] used in this element.\r\n     *\r\n     * If this element does not have it set, global one form [[Root]] is used.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/using-formatters/} for more info\r\n     * @return DurationFormatter instace\r\n     */\r\n    getDurationFormatter() {\r\n        return this.get(\"durationFormatter\", this._root.durationFormatter);\r\n    }\r\n    /**\r\n     * Converts X/Y coordinate within this element to a global coordinate.\r\n     *\r\n     * @param  point  Local coordinate\r\n     * @return        Global coordinate\r\n     */\r\n    toGlobal(point) {\r\n        return this._display.toGlobal(point);\r\n    }\r\n    /**\r\n     * Converts global X/Y coordinate to a coordinate within this element.\r\n     *\r\n     * @param  point  Global coordinate\r\n     * @return        Local coordinate\r\n     */\r\n    toLocal(point) {\r\n        return this._display.toLocal(point);\r\n    }\r\n    _getDownPoint() {\r\n        const id = this._getDownPointId();\r\n        if (id) {\r\n            return this._downPoints[id];\r\n        }\r\n    }\r\n    _getDownPointId() {\r\n        if (this._downPoints) {\r\n            return $object.keysOrdered(this._downPoints, (a, b) => {\r\n                if (a > b) {\r\n                    return 1;\r\n                }\r\n                if (a < b) {\r\n                    return -1;\r\n                }\r\n                return 0;\r\n            })[0];\r\n        }\r\n    }\r\n    /**\r\n     * Moves sprite to the end of the parent's children array.\r\n     *\r\n     * Depending on `layout` setting of the parten container, it may effect the\r\n     * positioning or overlapping order of the elements.\r\n     */\r\n    toFront() {\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            parent.children.moveValue(this, parent.children.length - 1);\r\n        }\r\n    }\r\n    /**\r\n     * Moves sprite to the beginning of the parent's children array.\r\n     *\r\n     * Depending on `layout` setting of the parten container, it may effect the\r\n     * positioning or overlapping order of the elements.\r\n     */\r\n    toBack() {\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            parent.children.moveValue(this, 0);\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Sprite, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Sprite\"\r\n});\r\nObject.defineProperty(Sprite, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Entity.classNames.concat([Sprite.className])\r\n});\r\n//# sourceMappingURL=Sprite.js.map","import { Entity } from \"../../util/Entity\";\r\n/**\r\n * Base class for patterns.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/} for more info\r\n */\r\nexport class Pattern extends Entity {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeGraphics()\r\n        });\r\n        Object.defineProperty(this, \"_backgroundDisplay\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeGraphics()\r\n        });\r\n        Object.defineProperty(this, \"_clear\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_pattern\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _afterNew() {\r\n        // Applying themes because pattern will not have parent\r\n        super._afterNewApplyThemes();\r\n    }\r\n    get pattern() {\r\n        return this._pattern;\r\n    }\r\n    _draw() { }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"repetition\") || this.isDirty(\"width\") || this.isDirty(\"height\") || this.isDirty(\"rotation\") || this.isDirty(\"strokeWidth\") || this.isDirty(\"strokeDasharray\") || this.isDirty(\"strokeDashoffset\") || this.isDirty(\"colorOpacity\") || this.isDirty(\"fillOpacity\")) {\r\n            this._clear = true;\r\n        }\r\n        this._checkDirtyFill();\r\n    }\r\n    _checkDirtyFill() {\r\n        if (this.isDirty(\"color\") || this.isDirty(\"fill\")) {\r\n            this._clear = true;\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this._clear) {\r\n            const repetition = this.get(\"repetition\", \"\");\r\n            const width = this.get(\"width\", 100);\r\n            const height = this.get(\"height\", 100);\r\n            const fill = this.get(\"fill\");\r\n            const fillOpacity = this.get(\"fillOpacity\", 1);\r\n            const backgroundDisplay = this._backgroundDisplay;\r\n            const display = this._display;\r\n            display.clear();\r\n            backgroundDisplay.clear();\r\n            if (fill && (fillOpacity > 0)) {\r\n                backgroundDisplay.beginFill(fill, fillOpacity);\r\n                backgroundDisplay.drawRect(0, 0, width, height);\r\n                backgroundDisplay.endFill();\r\n            }\r\n            display.angle = this.get(\"rotation\", 0);\r\n            //display.pivot = { x: width / 2, y: height / 2 };\r\n            this._draw();\r\n            this._pattern = this._root._renderer.createPattern(display, backgroundDisplay, repetition, width, height);\r\n        }\r\n        this._clear = false;\r\n    }\r\n}\r\nObject.defineProperty(Pattern, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Pattern\"\r\n});\r\nObject.defineProperty(Pattern, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Entity.classNames.concat([Pattern.className])\r\n});\r\n//# sourceMappingURL=Pattern.js.map","import { Pattern } from \"./Pattern\";\r\n/**\r\n * Picture pattern.\r\n *\r\n * @since 5.2.15\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/} for more info\r\n */\r\nexport class PicturePattern extends Pattern {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_image\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        this._clear = true;\r\n        if (this.isDirty(\"src\")) {\r\n            this._load();\r\n        }\r\n        const canvas = this.get(\"canvas\");\r\n        if (canvas) {\r\n            this.set(\"width\", canvas.width);\r\n            this.set(\"height\", canvas.height);\r\n        }\r\n    }\r\n    _draw() {\r\n        super._draw();\r\n        const colorOpacity = this.get(\"colorOpacity\");\r\n        if (colorOpacity !== undefined) {\r\n            this._display.alpha = Math.max(0, colorOpacity);\r\n        }\r\n        const image = this._image;\r\n        if (image) {\r\n            const patternWidth = this.get(\"width\", 100);\r\n            const patternHeight = this.get(\"height\", 100);\r\n            // Fit\r\n            const fit = this.get(\"fit\", \"image\");\r\n            let width = 0;\r\n            let height = 0;\r\n            if (fit == \"pattern\") {\r\n                width = patternWidth;\r\n                height = patternHeight;\r\n                this.markDirty();\r\n            }\r\n            else {\r\n                width = image.width;\r\n                height = image.height;\r\n                if (fit == \"image\") {\r\n                    this.set(\"width\", width);\r\n                    this.set(\"height\", height);\r\n                }\r\n            }\r\n            // Position\r\n            const centered = this.get(\"centered\", true);\r\n            let x = 0;\r\n            let y = 0;\r\n            if (centered) {\r\n                x = patternWidth / 2 - width / 2;\r\n                y = patternHeight / 2 - height / 2;\r\n            }\r\n            this._display.image(image, width, height, x, y);\r\n        }\r\n        const canvas = this.get(\"canvas\");\r\n        if (canvas) {\r\n            this._display.image(canvas, canvas.width, canvas.height, 0, 0);\r\n        }\r\n    }\r\n    _load() {\r\n        const src = this.get(\"src\");\r\n        if (src) {\r\n            const image = new Image();\r\n            //image.crossOrigin = \"Anonymous\";\r\n            image.src = src;\r\n            image.decode().then(() => {\r\n                this._image = image;\r\n                this._draw();\r\n                if (this.events.isEnabled(\"loaded\")) {\r\n                    this.events.dispatch(\"loaded\", { type: \"loaded\", target: this });\r\n                }\r\n            }).catch((_error) => {\r\n                // TODO: maybe raise error?\r\n            });\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(PicturePattern, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"PicturePattern\"\r\n});\r\nObject.defineProperty(PicturePattern, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Pattern.classNames.concat([PicturePattern.className])\r\n});\r\n//# sourceMappingURL=PicturePattern.js.map","/**\r\n * From https://github.com/pixijs/pixi.js/blob/3dd0ff9a935f0bc13a09aefff9eb2872f02c51b9/packages/canvas/canvas-renderer/src/utils/mapCanvasBlendModesToPixi.ts#L13\r\n */\r\nexport var BlendMode;\r\n(function (BlendMode) {\r\n    BlendMode[\"ADD\"] = \"lighter\";\r\n    BlendMode[\"COLOR\"] = \"color\";\r\n    BlendMode[\"COLOR_BURN\"] = \"color-burn\";\r\n    BlendMode[\"COLOR_DODGE\"] = \"color-dodge\";\r\n    BlendMode[\"DARKEN\"] = \"darken\";\r\n    BlendMode[\"DIFFERENCE\"] = \"difference\";\r\n    BlendMode[\"DST_OVER\"] = \"destination-over\";\r\n    BlendMode[\"EXCLUSION\"] = \"exclusion\";\r\n    BlendMode[\"HARD_LIGHT\"] = \"hard-light\";\r\n    BlendMode[\"HUE\"] = \"hue\";\r\n    BlendMode[\"LIGHTEN\"] = \"lighten\";\r\n    BlendMode[\"LUMINOSITY\"] = \"luminosity\";\r\n    BlendMode[\"MULTIPLY\"] = \"multiply\";\r\n    BlendMode[\"NORMAL\"] = \"source-over\";\r\n    BlendMode[\"OVERLAY\"] = \"overlay\";\r\n    BlendMode[\"SATURATION\"] = \"saturation\";\r\n    BlendMode[\"SCREEN\"] = \"screen\";\r\n    BlendMode[\"SOFT_LIGHT\"] = \"soft-light\";\r\n    BlendMode[\"SRC_ATOP\"] = \"source-atop\";\r\n    BlendMode[\"XOR\"] = \"xor\";\r\n})(BlendMode || (BlendMode = {}));\r\n//# sourceMappingURL=Renderer.js.map","import { PicturePattern } from \"../render/patterns/PicturePattern\";\r\nimport { Sprite } from \"./Sprite\";\r\nimport { BlendMode } from \"./backend/Renderer\";\r\nimport * as $type from \"../util/Type\";\r\nimport * as $array from \"../util/Array\";\r\nexport const visualSettings = [\"fill\", \"fillOpacity\", \"stroke\", \"strokeWidth\", \"strokeOpacity\", \"fillPattern\", \"strokePattern\", \"fillGradient\", \"strokeGradient\", \"strokeDasharray\", \"strokeDashoffset\", \"shadowBlur\", \"shadowColor\", \"shadowOpacity\", \"shadowOffsetX\", \"shadowOffsetY\", \"blur\", \"sepia\", \"invert\", \"brightness\", \"hue\", \"contrast\", \"saturate\"];\r\n/**\r\n * Base class used for drawing shapes.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class Graphics extends Sprite {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeGraphics()\r\n        });\r\n        Object.defineProperty(this, \"_clear\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"draw\") || this.isDirty(\"svgPath\")) {\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"fill\") || this.isDirty(\"stroke\") || this.isDirty(\"visible\") || this.isDirty(\"forceHidden\") || this.isDirty(\"scale\") || this.isDirty(\"fillGradient\") || this.isDirty(\"strokeGradient\") || this.isDirty(\"fillPattern\") || this.isDirty(\"strokePattern\") || this.isDirty(\"fillOpacity\") || this.isDirty(\"strokeOpacity\") || this.isDirty(\"strokeWidth\") || this.isDirty(\"draw\") || this.isDirty(\"blendMode\") || this.isDirty(\"strokeDasharray\") || this.isDirty(\"strokeDashoffset\") || this.isDirty(\"svgPath\") || this.isDirty(\"lineJoin\") || this.isDirty(\"lineCap\") || this.isDirty(\"shadowColor\") || this.isDirty(\"shadowBlur\") || this.isDirty(\"shadowOffsetX\") || this.isDirty(\"shadowOffsetY\")) {\r\n            this._clear = true;\r\n        }\r\n        this._display.crisp = this.get(\"crisp\", false);\r\n        if (this.isDirty(\"fillGradient\")) {\r\n            const gradient = this.get(\"fillGradient\");\r\n            if (gradient) {\r\n                this._display.isMeasured = true;\r\n                const gradientTarget = gradient.get(\"target\");\r\n                if (gradientTarget) {\r\n                    this._disposers.push(gradientTarget.events.on(\"boundschanged\", () => {\r\n                        this._markDirtyKey(\"fill\");\r\n                    }));\r\n                    this._disposers.push(gradientTarget.events.on(\"positionchanged\", () => {\r\n                        this._markDirtyKey(\"fill\");\r\n                    }));\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"strokeGradient\")) {\r\n            const gradient = this.get(\"strokeGradient\");\r\n            if (gradient) {\r\n                this._display.isMeasured = true;\r\n                const gradientTarget = gradient.get(\"target\");\r\n                if (gradientTarget) {\r\n                    this._disposers.push(gradientTarget.events.on(\"boundschanged\", () => {\r\n                        this._markDirtyKey(\"stroke\");\r\n                    }));\r\n                    this._disposers.push(gradientTarget.events.on(\"positionchanged\", () => {\r\n                        this._markDirtyKey(\"stroke\");\r\n                    }));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this._clear) {\r\n            this.markDirtyBounds();\r\n            this.markDirtyLayer();\r\n            this._display.clear();\r\n            let strokeDasharray = this.get(\"strokeDasharray\");\r\n            if ($type.isNumber(strokeDasharray)) {\r\n                if (strokeDasharray < 0.5) {\r\n                    strokeDasharray = [0];\r\n                }\r\n                else {\r\n                    strokeDasharray = [strokeDasharray];\r\n                }\r\n            }\r\n            this._display.setLineDash(strokeDasharray);\r\n            const strokeDashoffset = this.get(\"strokeDashoffset\");\r\n            if (strokeDashoffset) {\r\n                this._display.setLineDashOffset(strokeDashoffset);\r\n            }\r\n            const blendMode = this.get(\"blendMode\", BlendMode.NORMAL);\r\n            this._display.blendMode = blendMode;\r\n            const draw = this.get(\"draw\");\r\n            if (draw && typeof draw === \"function\") {\r\n                draw(this._display, this);\r\n            }\r\n            const svgPath = this.get(\"svgPath\");\r\n            if (svgPath != null) {\r\n                this._display.svgPath(svgPath);\r\n            }\r\n        }\r\n    }\r\n    _afterChanged() {\r\n        super._afterChanged();\r\n        if (this._clear) {\r\n            const fill = this.get(\"fill\");\r\n            const fillGradient = this.get(\"fillGradient\");\r\n            const fillPattern = this.get(\"fillPattern\");\r\n            const fillOpacity = this.get(\"fillOpacity\");\r\n            const stroke = this.get(\"stroke\");\r\n            const strokeGradient = this.get(\"strokeGradient\");\r\n            const strokePattern = this.get(\"strokePattern\");\r\n            const shadowColor = this.get(\"shadowColor\");\r\n            const shadowBlur = this.get(\"shadowBlur\");\r\n            const shadowOffsetX = this.get(\"shadowOffsetX\");\r\n            const shadowOffsetY = this.get(\"shadowOffsetY\");\r\n            const shadowOpacity = this.get(\"shadowOpacity\");\r\n            if (shadowColor && (shadowBlur || shadowOffsetX || shadowOffsetY)) {\r\n                this._display.shadow(shadowColor, shadowBlur, shadowOffsetX, shadowOffsetY, shadowOpacity);\r\n            }\r\n            if (fill && !fillGradient) {\r\n                this._display.beginFill(fill, fillOpacity);\r\n                this._display.endFill();\r\n            }\r\n            if (fillGradient) {\r\n                if (fill) {\r\n                    const stops = fillGradient.get(\"stops\", []);\r\n                    if (stops.length) {\r\n                        $array.each(stops, (stop) => {\r\n                            if ((!stop.color || stop.colorInherited) && fill) {\r\n                                stop.color = fill;\r\n                                stop.colorInherited = true;\r\n                            }\r\n                            if (stop.opacity == null || stop.opacityInherited) {\r\n                                stop.opacity = fillOpacity;\r\n                                stop.opacityInherited = true;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                const gradient = fillGradient.getFill(this);\r\n                if (gradient) {\r\n                    this._display.beginFill(gradient, fillOpacity);\r\n                    this._display.endFill();\r\n                }\r\n            }\r\n            if (fillPattern) {\r\n                const pattern = fillPattern.pattern;\r\n                if (pattern) {\r\n                    this._display.beginFill(pattern, fillOpacity);\r\n                    this._display.endFill();\r\n                    if (fillPattern instanceof PicturePattern) {\r\n                        fillPattern.events.once(\"loaded\", () => {\r\n                            this._clear = true;\r\n                            this.markDirty();\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            if (stroke || strokeGradient || strokePattern) {\r\n                const strokeOpacity = this.get(\"strokeOpacity\");\r\n                let strokeWidth = this.get(\"strokeWidth\", 1);\r\n                if (this.get(\"nonScalingStroke\")) {\r\n                    strokeWidth = strokeWidth / this.get(\"scale\", 1);\r\n                }\r\n                if (this.get(\"crisp\")) {\r\n                    strokeWidth /= this._root._renderer.resolution;\r\n                }\r\n                const lineJoin = this.get(\"lineJoin\");\r\n                const lineCap = this.get(\"lineCap\");\r\n                if (stroke && !strokeGradient) {\r\n                    this._display.lineStyle(strokeWidth, stroke, strokeOpacity, lineJoin, lineCap);\r\n                    this._display.endStroke();\r\n                }\r\n                if (strokeGradient) {\r\n                    const stops = strokeGradient.get(\"stops\", []);\r\n                    if (stops.length) {\r\n                        $array.each(stops, (stop) => {\r\n                            if ((!stop.color || stop.colorInherited) && stroke) {\r\n                                stop.color = stroke;\r\n                                stop.colorInherited = true;\r\n                            }\r\n                            if (stop.opacity == null || stop.opacityInherited) {\r\n                                stop.opacity = strokeOpacity;\r\n                                stop.opacityInherited = true;\r\n                            }\r\n                        });\r\n                    }\r\n                    const gradient = strokeGradient.getFill(this);\r\n                    if (gradient) {\r\n                        this._display.lineStyle(strokeWidth, gradient, strokeOpacity, lineJoin, lineCap);\r\n                        this._display.endStroke();\r\n                    }\r\n                }\r\n                if (strokePattern) {\r\n                    /*\r\n                    let changed = false;\r\n                    \r\n                    if (stroke && (!strokePattern.get(\"color\") || strokePattern.get(\"colorInherited\"))) {\r\n                        strokePattern.set(\"color\", stroke);\r\n                        strokePattern.set(\"colorInherited\", true);\r\n                        changed = true;\r\n                    }\r\n                    if (changed) {\r\n                        // @todo: is this OK?\r\n                        strokePattern._changed();\r\n                    }\r\n                    */\r\n                    let pattern = strokePattern.pattern;\r\n                    if (pattern) {\r\n                        this._display.lineStyle(strokeWidth, pattern, strokeOpacity, lineJoin, lineCap);\r\n                        this._display.endStroke();\r\n                        if (strokePattern instanceof PicturePattern) {\r\n                            strokePattern.events.once(\"loaded\", () => {\r\n                                this._clear = true;\r\n                                this.markDirty();\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (this.getPrivate(\"showingTooltip\")) {\r\n                this.showTooltip();\r\n            }\r\n        }\r\n        this._clear = false;\r\n    }\r\n}\r\nObject.defineProperty(Graphics, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Graphics\"\r\n});\r\nObject.defineProperty(Graphics, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Sprite.classNames.concat([Graphics.className])\r\n});\r\n//# sourceMappingURL=Graphics.js.map","import { Graphics } from \"./Graphics\";\r\n/**\r\n * Draws a rectangle.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class Rectangle extends Graphics {\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this._display.isMeasured = true;\r\n        this.setPrivateRaw(\"trustBounds\", true);\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"width\") || this.isDirty(\"height\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\")) {\r\n            this._clear = true;\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this._clear && !this.get(\"draw\")) {\r\n            this._draw();\r\n        }\r\n    }\r\n    _draw() {\r\n        let w = this.width();\r\n        let h = this.height();\r\n        let x = 0;\r\n        let y = 0;\r\n        let wSign = w / Math.abs(w);\r\n        let hSign = h / Math.abs(h);\r\n        if (this.get(\"containStroke\", false)) {\r\n            const strokeWidth = this.get(\"strokeWidth\", 0);\r\n            w -= strokeWidth * wSign;\r\n            h -= strokeWidth * hSign;\r\n            x += strokeWidth / 2 * wSign;\r\n            y += strokeWidth / 2 * hSign;\r\n        }\r\n        this._display.drawRect(x, y, w, h);\r\n    }\r\n    _updateSize() {\r\n        this.markDirty();\r\n        this._clear = true;\r\n    }\r\n}\r\nObject.defineProperty(Rectangle, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Rectangle\"\r\n});\r\nObject.defineProperty(Rectangle, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Graphics.classNames.concat([Rectangle.className])\r\n});\r\n//# sourceMappingURL=Rectangle.js.map","import { Entity } from \"../util/Entity\";\r\nexport function eachChildren(container, f) {\r\n    if (container.get(\"reverseChildren\", false)) {\r\n        container.children.eachReverse(f);\r\n    }\r\n    else {\r\n        container.children.each(f);\r\n    }\r\n}\r\n/**\r\n * Base class for [[Container]] layouts.\r\n */\r\nexport class Layout extends Entity {\r\n}\r\nObject.defineProperty(Layout, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Layout\"\r\n});\r\nObject.defineProperty(Layout, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Entity.classNames.concat([Layout.className])\r\n});\r\n//# sourceMappingURL=Layout.js.map","import { Layout, eachChildren } from \"./Layout\";\r\nimport * as $type from \"../util/Type\";\r\nimport { Percent } from \"../util/Percent\";\r\n/**\r\n * A horizontal children layout for [[Container]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/#Layout} for more info\r\n */\r\nexport class HorizontalLayout extends Layout {\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateContainer(container) {\r\n        let paddingLeft = container.get(\"paddingLeft\", 0);\r\n        let availableWidth = container.innerWidth();\r\n        let totalPercent = 0;\r\n        eachChildren(container, (child) => {\r\n            if (child.isVisible()) {\r\n                if (child.get(\"position\") == \"relative\") {\r\n                    let childWidth = child.get(\"width\");\r\n                    if (childWidth instanceof Percent) {\r\n                        totalPercent += childWidth.value;\r\n                        let w = availableWidth * childWidth.value;\r\n                        let minWidth = child.get(\"minWidth\", child.getPrivate(\"minWidth\", -Infinity));\r\n                        if (minWidth > w) {\r\n                            availableWidth -= minWidth;\r\n                            totalPercent -= childWidth.value;\r\n                        }\r\n                        let maxWidth = child.get(\"maxWidth\", child.getPrivate(\"maxWidth\", Infinity));\r\n                        if (w > maxWidth) {\r\n                            availableWidth -= maxWidth;\r\n                            totalPercent -= childWidth.value;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (!$type.isNumber(childWidth)) {\r\n                            childWidth = child.width();\r\n                        }\r\n                        availableWidth -= childWidth + child.get(\"marginLeft\", 0) + child.get(\"marginRight\", 0);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        if (availableWidth <= 0 || availableWidth == Infinity) {\r\n            availableWidth = .1;\r\n        }\r\n        //if (availableWidth > 0) {\r\n        eachChildren(container, (child) => {\r\n            if (child.isVisible()) {\r\n                if (child.get(\"position\") == \"relative\") {\r\n                    let childWidth = child.get(\"width\");\r\n                    if (childWidth instanceof Percent) {\r\n                        let privateWidth = availableWidth * childWidth.value / totalPercent - child.get(\"marginLeft\", 0) - child.get(\"marginRight\", 0);\r\n                        let minWidth = child.get(\"minWidth\", child.getPrivate(\"minWidth\", -Infinity));\r\n                        let maxWidth = child.get(\"maxWidth\", child.getPrivate(\"maxWidth\", Infinity));\r\n                        privateWidth = Math.min(Math.max(minWidth, privateWidth), maxWidth);\r\n                        child.setPrivate(\"width\", privateWidth);\r\n                    }\r\n                    else {\r\n                        if (child._prevSettings.width instanceof Percent) {\r\n                            child.setPrivate(\"width\", undefined);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        //}\r\n        let prevX = paddingLeft;\r\n        eachChildren(container, (child) => {\r\n            if (child.get(\"position\") == \"relative\") {\r\n                if (child.isVisible()) {\r\n                    let bounds = child.adjustedLocalBounds();\r\n                    let marginLeft = child.get(\"marginLeft\", 0);\r\n                    let marginRight = child.get(\"marginRight\", 0);\r\n                    let maxWidth = child.get(\"maxWidth\");\r\n                    let left = bounds.left;\r\n                    let right = bounds.right;\r\n                    if (maxWidth) {\r\n                        if (right - left > maxWidth) {\r\n                            right = left + maxWidth;\r\n                        }\r\n                    }\r\n                    let x = prevX + marginLeft - left;\r\n                    child.setPrivate(\"x\", x);\r\n                    prevX = x + right + marginRight;\r\n                }\r\n                else {\r\n                    child.setPrivate(\"x\", undefined);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nObject.defineProperty(HorizontalLayout, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"HorizontalLayout\"\r\n});\r\nObject.defineProperty(HorizontalLayout, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Layout.classNames.concat([HorizontalLayout.className])\r\n});\r\n//# sourceMappingURL=HorizontalLayout.js.map","import { Layout, eachChildren } from \"./Layout\";\r\nimport * as $type from \"../util/Type\";\r\nimport { Percent } from \"../util/Percent\";\r\n/**\r\n * A vertical children layout for [[Container]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/#Layout} for more info\r\n */\r\nexport class VerticalLayout extends Layout {\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateContainer(container) {\r\n        let paddingTop = container.get(\"paddingTop\", 0);\r\n        let availableHeight = container.innerHeight();\r\n        let totalPercent = 0;\r\n        eachChildren(container, (child) => {\r\n            if (child.isVisible()) {\r\n                if (child.get(\"position\") == \"relative\") {\r\n                    let childHeight = child.get(\"height\");\r\n                    if (childHeight instanceof Percent) {\r\n                        totalPercent += childHeight.value;\r\n                        let h = availableHeight * childHeight.value;\r\n                        let minHeight = child.get(\"minHeight\", child.getPrivate(\"minHeight\", -Infinity));\r\n                        if (minHeight > h) {\r\n                            availableHeight -= minHeight;\r\n                            totalPercent -= childHeight.value;\r\n                        }\r\n                        let maxHeight = child.get(\"maxHeight\", child.getPrivate(\"maxHeight\", Infinity));\r\n                        if (h > maxHeight) {\r\n                            availableHeight -= maxHeight;\r\n                            totalPercent -= childHeight.value;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (!$type.isNumber(childHeight)) {\r\n                            childHeight = child.height();\r\n                        }\r\n                        availableHeight -= childHeight + child.get(\"marginTop\", 0) + child.get(\"marginBottom\", 0);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        if (availableHeight <= 0 || availableHeight == Infinity) {\r\n            availableHeight = .1;\r\n        }\r\n        //if (availableHeight > 0) {\r\n        eachChildren(container, (child) => {\r\n            if (child.isVisible()) {\r\n                if (child.get(\"position\") == \"relative\") {\r\n                    let childHeight = child.get(\"height\");\r\n                    if (childHeight instanceof Percent) {\r\n                        let privateHeight = availableHeight * childHeight.value / totalPercent - child.get(\"marginTop\", 0) - child.get(\"marginBottom\", 0);\r\n                        let minHeight = child.get(\"minHeight\", child.getPrivate(\"minHeight\", -Infinity));\r\n                        let maxHeight = child.get(\"maxHeight\", child.getPrivate(\"maxHeight\", Infinity));\r\n                        privateHeight = Math.min(Math.max(minHeight, privateHeight), maxHeight);\r\n                        child.setPrivate(\"height\", privateHeight);\r\n                    }\r\n                    else {\r\n                        if (child._prevSettings.height instanceof Percent) {\r\n                            child.setPrivate(\"height\", undefined);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        //}\r\n        let prevY = paddingTop;\r\n        eachChildren(container, (child) => {\r\n            if (child.get(\"position\") == \"relative\") {\r\n                if (child.isVisible()) {\r\n                    let bounds = child.adjustedLocalBounds();\r\n                    let marginTop = child.get(\"marginTop\", 0);\r\n                    let top = bounds.top;\r\n                    let bottom = bounds.bottom;\r\n                    let maxHeight = child.get(\"maxHeight\");\r\n                    if (maxHeight) {\r\n                        if (bottom - top > maxHeight) {\r\n                            bottom = top + maxHeight;\r\n                        }\r\n                    }\r\n                    let marginBottom = child.get(\"marginBottom\", 0);\r\n                    let y = prevY + marginTop - top;\r\n                    child.setPrivate(\"y\", y);\r\n                    prevY = y + bottom + marginBottom;\r\n                }\r\n                else {\r\n                    child.setPrivate(\"y\", undefined);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nObject.defineProperty(VerticalLayout, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"VerticalLayout\"\r\n});\r\nObject.defineProperty(VerticalLayout, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Layout.classNames.concat([VerticalLayout.className])\r\n});\r\n//# sourceMappingURL=VerticalLayout.js.map","import { Layout, eachChildren } from \"./Layout\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $math from \"../util/Math\";\r\n/**\r\n * A grid children layout for [[Container]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/#Layout} for more info\r\n */\r\nexport class GridLayout extends Layout {\r\n    _afterNew() {\r\n        this._setRawDefault(\"maxColumns\", Number.MAX_VALUE);\r\n        super._afterNew();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateContainer(container) {\r\n        let paddingLeft = container.get(\"paddingLeft\", 0);\r\n        let paddingRight = container.get(\"paddingRight\", 0);\r\n        let paddingTop = container.get(\"paddingTop\", 0);\r\n        let availableWidth = container.maxWidth() - paddingLeft - paddingRight;\r\n        let minCellWidth = availableWidth;\r\n        let maxCellWidth = 1;\r\n        eachChildren(container, (child) => {\r\n            if (child.get(\"visible\") && child.getPrivate(\"visible\") && !child.get(\"forceHidden\")) {\r\n                if (child.get(\"position\") != \"absolute\") {\r\n                    let childWidth = child.width();\r\n                    if (childWidth < minCellWidth) {\r\n                        minCellWidth = childWidth;\r\n                    }\r\n                    if (childWidth > maxCellWidth) {\r\n                        maxCellWidth = childWidth;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        minCellWidth = $math.fitToRange(minCellWidth, 1, availableWidth);\r\n        maxCellWidth = $math.fitToRange(maxCellWidth, 1, availableWidth);\r\n        let columnCount = 1;\r\n        if (this.get(\"fixedWidthGrid\")) {\r\n            columnCount = availableWidth / maxCellWidth;\r\n        }\r\n        else {\r\n            columnCount = availableWidth / minCellWidth;\r\n        }\r\n        columnCount = Math.max(1, Math.floor(columnCount));\r\n        columnCount = Math.min(this.get(\"maxColumns\", Number.MAX_VALUE), columnCount);\r\n        let columnWidths = this.getColumnWidths(container, columnCount, maxCellWidth, availableWidth);\r\n        let prevY = paddingTop;\r\n        let column = 0;\r\n        let maxRowHeight = 0;\r\n        columnCount = columnWidths.length;\r\n        let prevX = paddingLeft;\r\n        eachChildren(container, (child) => {\r\n            if (child.get(\"position\") == \"relative\" && child.isVisible()) {\r\n                const marginTop = child.get(\"marginTop\", 0);\r\n                const marginBottom = child.get(\"marginBottom\", 0);\r\n                let bounds = child.adjustedLocalBounds();\r\n                let marginLeft = child.get(\"marginLeft\", 0);\r\n                let marginRight = child.get(\"marginRight\", 0);\r\n                let x = prevX + marginLeft - bounds.left;\r\n                let y = prevY + marginTop - bounds.top;\r\n                child.setPrivate(\"x\", x);\r\n                child.setPrivate(\"y\", y);\r\n                prevX += columnWidths[column] + marginRight;\r\n                maxRowHeight = Math.max(maxRowHeight, child.height() + marginTop + marginBottom);\r\n                column++;\r\n                if (column >= columnCount) {\r\n                    column = 0;\r\n                    prevX = paddingLeft;\r\n                    prevY += maxRowHeight;\r\n                    maxRowHeight = 0;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getColumnWidths(container, columnCount, maxCellWidth, availableWidth) {\r\n        let totalWidth = 0;\r\n        let columnWidths = [];\r\n        let column = 0;\r\n        eachChildren(container, (child) => {\r\n            let bounds = child.adjustedLocalBounds();\r\n            if (child.get(\"position\") != \"absolute\" && child.isVisible()) {\r\n                if (this.get(\"fixedWidthGrid\")) {\r\n                    columnWidths[column] = maxCellWidth;\r\n                }\r\n                else {\r\n                    columnWidths[column] = Math.max(columnWidths[column] | 0, bounds.right - bounds.left + child.get(\"marginLeft\", 0) + child.get(\"marginRight\", 0));\r\n                }\r\n                if (column < container.children.length - 1) {\r\n                    column++;\r\n                    if (column == columnCount) {\r\n                        column = 0;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        $array.each(columnWidths, (w) => {\r\n            totalWidth += w;\r\n        });\r\n        if (totalWidth > availableWidth) {\r\n            if (columnCount > 2) {\r\n                columnCount -= 1;\r\n                return this.getColumnWidths(container, columnCount, maxCellWidth, availableWidth);\r\n            }\r\n            else {\r\n                return [availableWidth];\r\n            }\r\n        }\r\n        return columnWidths;\r\n    }\r\n}\r\nObject.defineProperty(GridLayout, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"GridLayout\"\r\n});\r\nObject.defineProperty(GridLayout, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Layout.classNames.concat([GridLayout.className])\r\n});\r\n//# sourceMappingURL=GridLayout.js.map","import { Color } from \"./Color\";\r\nimport * as $type from \"./Type\";\r\nexport class TextFormatter {\r\n    /**\r\n     * Replaces brackets with temporary placeholders.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Input text\r\n     * @return Escaped text\r\n     */\r\n    static escape(text) {\r\n        return text.\r\n            replace(/\\[\\[/g, this.prefix + \"1\").\r\n            replace(/([^\\/\\]]{1})\\]\\]/g, \"$1\" + this.prefix + \"2\").\r\n            replace(/\\]\\]/g, this.prefix + \"2\").\r\n            replace(/\\{\\{/g, this.prefix + \"3\").\r\n            replace(/\\}\\}/g, this.prefix + \"4\").\r\n            replace(/\\'\\'/g, this.prefix + \"5\");\r\n    }\r\n    /**\r\n     * Replaces placeholders back to brackets.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Escaped text\r\n     * @return Unescaped text\r\n     */\r\n    static unescape(text) {\r\n        return text.\r\n            replace(new RegExp(this.prefix + \"1\", \"g\"), \"[[\").\r\n            replace(new RegExp(this.prefix + \"2\", \"g\"), \"]]\").\r\n            replace(new RegExp(this.prefix + \"3\", \"g\"), \"{{\").\r\n            replace(new RegExp(this.prefix + \"4\", \"g\"), \"}}\").\r\n            replace(new RegExp(this.prefix + \"5\", \"g\"), \"''\");\r\n    }\r\n    /**\r\n     * Cleans up the text text for leftover double square brackets.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Input text\r\n     * @return Cleaned up text\r\n     */\r\n    static cleanUp(text) {\r\n        return text.\r\n            replace(/\\[\\[/g, \"[\").\r\n            replace(/\\]\\]/g, \"]\").\r\n            replace(/\\{\\{/g, \"{\").\r\n            replace(/\\}\\}/g, \"}\").\r\n            replace(/\\'\\'/g, \"'\");\r\n    }\r\n    /**\r\n     * Splits string into chunks. (style blocks, quoted blocks, regular blocks)\r\n     *\r\n     * If the second parameter `quotedBlocks` is set to `true` this method will\r\n     * also single out text blocks enclosed within single quotes that no\r\n     * formatting should be applied to, and they should be displayed as is.\r\n     *\r\n     * Default for the above is `false`, so that you can use single quote in text\r\n     * without escaping it.\r\n     *\r\n     * If enabled, single quotes can be escaped by doubling it - adding two\r\n     * single quotes, which will be replaced by a one single quote in the final\r\n     * output.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text          Text to chunk\r\n     * @param quotedBlocks  Use quoted blocks\r\n     * @param noFormatting  Formatting blocks will be treated as regular text\r\n     * @return Array of string chunks\r\n     */\r\n    static chunk(text, quotedBlocks = false, noFormatting = false) {\r\n        // Init result\r\n        let res = [];\r\n        // Replace double (escaped) square spaces and quotes with temporary codes\r\n        text = this.escape(text);\r\n        // Deal with style blocks\r\n        let chunks = quotedBlocks ? text.split(\"'\") : [text];\r\n        for (let i = 0; i < chunks.length; i++) {\r\n            let chunk = chunks[i];\r\n            // Empty?\r\n            if (chunk === \"\") {\r\n                continue;\r\n            }\r\n            if ((i % 2) === 0) {\r\n                // Text outside quotes\r\n                // Parse for style blocks which are \"text\" chunks, the rest chunks are\r\n                // \"value\"\r\n                chunk = chunk.replace(/\\]\\[/g, \"]\" + $type.PLACEHOLDER + \"[\");\r\n                chunk = chunk.replace(/\\[\\]/g, \"[ ]\");\r\n                let chunks2 = chunk.split(/[\\[\\]]+/);\r\n                for (let i2 = 0; i2 < chunks2.length; i2++) {\r\n                    let chunk2 = this.cleanUp(this.unescape(chunks2[i2]));\r\n                    // Placeholder?\r\n                    if (chunk2 === $type.PLACEHOLDER) {\r\n                        continue;\r\n                    }\r\n                    // Empty?\r\n                    if (chunk2 === \"\") {\r\n                        continue;\r\n                    }\r\n                    // Block or value\r\n                    if ((i2 % 2) === 0) {\r\n                        res.push({\r\n                            \"type\": \"value\",\r\n                            \"text\": chunk2\r\n                        });\r\n                    }\r\n                    else {\r\n                        res.push({\r\n                            \"type\": noFormatting ? \"value\" : \"format\",\r\n                            \"text\": \"[\" + chunk2 + \"]\"\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                // A text within doublequotes\r\n                // All chunks are \"text\"\r\n                let chunks2 = chunk.split(/[\\[\\]]+/);\r\n                for (let i2 = 0; i2 < chunks2.length; i2++) {\r\n                    let chunk2 = this.cleanUp(this.unescape(chunks2[i2]));\r\n                    // Empty?\r\n                    if (chunk2 === \"\") {\r\n                        continue;\r\n                    }\r\n                    // Block or text\r\n                    if ((i2 % 2) === 0) {\r\n                        res.push({\r\n                            \"type\": \"text\",\r\n                            \"text\": chunk2\r\n                        });\r\n                    }\r\n                    else if (this.isImage(chunk2)) {\r\n                        res.push({\r\n                            \"type\": \"image\",\r\n                            \"text\": \"[\" + chunk2 + \"]\"\r\n                        });\r\n                    }\r\n                    else {\r\n                        res.push({\r\n                            \"type\": \"format\",\r\n                            \"text\": \"[\" + chunk2 + \"]\"\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    /**\r\n     * Checks if supplied format contains image information and should be\r\n     * formatted as such.\r\n     * I.e.: `[img: myImage.png]`\r\n     *\r\n     * @ignore\r\n     * @param  text  Format\r\n     * @return true if it is an image\r\n     */\r\n    static isImage(text) {\r\n        return text.match(/img[ ]?:/) ? true : false;\r\n    }\r\n    static getTextStyle(style) {\r\n        // let textStyle: string[] = [];\r\n        // let textFill: string | undefined;\r\n        let format = {};\r\n        if (style == \"\" || style == \"[ ]\") {\r\n            return {};\r\n        }\r\n        // Pre-process quoted text\r\n        const q = style.match(/('[^']*')|(\"[^\"]*\")/gi);\r\n        if (q) {\r\n            for (let i = 0; i < q.length; i++) {\r\n                style = style.replace(q[i], q[i].replace(/['\"]*/g, \"\").replace(/[ ]+/g, \"+\"));\r\n            }\r\n        }\r\n        // Get style parts\r\n        let b = style.match(/([\\w\\-]*:[\\s]?[^;\\s\\]]*)|(\\#[\\w]{1,6})|([\\w\\-]+)|(\\/)/gi);\r\n        // Empty?\r\n        if (!b) {\r\n            return {};\r\n        }\r\n        // Check each part\r\n        for (let i = 0; i < b.length; i++) {\r\n            if (b[i].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i)) {\r\n                format.fontWeight = b[i];\r\n            }\r\n            else if (b[i].match(/^(underline|line-through)$/i)) {\r\n                format.textDecoration = b[i];\r\n            }\r\n            else if (b[i] == \"/\") {\r\n                // Just closing tag\r\n                // Do nothing\r\n            }\r\n            else if (!b[i].match(/:/)) {\r\n                // Color\r\n                format.fill = Color.fromString(b[i]);\r\n            }\r\n            else {\r\n                const p = b[i].replace(\"+\", \" \").split(/:[ ]*/);\r\n                format[p[0]] = p[1];\r\n                //textStyle.push(b[i].replace(/^[a-zA-Z]:[ ]*/, \"\"));\r\n                //b[i] = b[i].replace(/\\+/g, \" \");\r\n            }\r\n        }\r\n        return format;\r\n    }\r\n}\r\nObject.defineProperty(TextFormatter, \"prefix\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"__amcharts__\"\r\n});\r\n//# sourceMappingURL=TextFormatter.js.map","/** @ignore */ /** */\r\nimport * as $type from \"./Type\";\r\nimport * as $utils from \"./Utils\";\r\nimport { Sprite } from \"../render/Sprite\";\r\nimport { TextFormatter } from \"./TextFormatter\";\r\n/**\r\n * @ignore\r\n */\r\nexport function populateString(target, string) {\r\n    if (string != null) {\r\n        string = \"\" + string;\r\n        string = TextFormatter.escape(string);\r\n        let tags = string.match(/\\{([^}]+)\\}/g);\r\n        let i;\r\n        if (tags) {\r\n            for (i = 0; i < tags.length; i++) {\r\n                let tag = tags[i].replace(/\\{([^}]+)\\}/, \"$1\");\r\n                let value = getTagValue(target, tag, \"\");\r\n                if (value == null) {\r\n                    value = \"\";\r\n                }\r\n                string = string.split(tags[i]).join(value);\r\n            }\r\n        }\r\n        string = TextFormatter.unescape(string);\r\n    }\r\n    else {\r\n        string = \"\";\r\n    }\r\n    // TODO: apply adapter?\r\n    return string;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction getTagValue(target, tagName, format) {\r\n    let value;\r\n    const dataItem = target.dataItem;\r\n    // Parse parts\r\n    let parts = [];\r\n    let reg = /(format[a-zA-Z]*)\\((.*)\\)|([^.]+)/g;\r\n    let matches;\r\n    while (true) {\r\n        matches = reg.exec(tagName);\r\n        if (matches === null) {\r\n            break;\r\n        }\r\n        if (matches[3]) {\r\n            // Simple property\r\n            parts.push({\r\n                prop: matches[3]\r\n            });\r\n            // Check if maybe we should force a formatter on this value\r\n            const dateFields = target.getDateFormatter().get(\"dateFields\", []);\r\n            const numericFields = target.getNumberFormatter().get(\"numericFields\", []);\r\n            const durationFields = target.getDurationFormatter().get(\"durationFields\", []);\r\n            if (dateFields.indexOf(matches[3]) !== -1) {\r\n                parts.push({\r\n                    method: \"formatDate\",\r\n                    params: []\r\n                });\r\n            }\r\n            else if (numericFields.indexOf(matches[3]) !== -1) {\r\n                parts.push({\r\n                    method: \"formatNumber\",\r\n                    params: []\r\n                });\r\n            }\r\n            else if (durationFields.indexOf(matches[3]) !== -1) {\r\n                parts.push({\r\n                    method: \"formatDuration\",\r\n                    params: []\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            // Method\r\n            // Parse parameters\r\n            let params = [];\r\n            if ($utils.trim(matches[2]) != \"\") {\r\n                let reg2 = /'([^']*)'|\"([^\"]*)\"|([0-9\\-]+)/g;\r\n                let matches2;\r\n                while (true) {\r\n                    matches2 = reg2.exec(matches[2]);\r\n                    if (matches2 === null) {\r\n                        break;\r\n                    }\r\n                    params.push(matches2[1] || matches2[2] || matches2[3]);\r\n                }\r\n            }\r\n            parts.push({\r\n                method: matches[1],\r\n                params: params\r\n            });\r\n        }\r\n    }\r\n    // Check if we can retrieve the value from data item\r\n    if (dataItem) {\r\n        // Check values\r\n        value = getTagValueFromObject(target, parts, dataItem._settings);\r\n        // Check properties\r\n        if (value == null || $type.isObject(value)) { // isObject helps to solve problem with date axis, as for example dateX will get dateX from values object and won't get to the dateX date.\r\n            value = getTagValueFromObject(target, parts, dataItem);\r\n        }\r\n        // Check data context\r\n        let dataContext = dataItem.dataContext;\r\n        if (value == null && dataContext) {\r\n            value = getTagValueFromObject(target, parts, dataContext);\r\n            // Maybe it's a literal dot-separated name of the key in dataContext?\r\n            if (value == null) {\r\n                value = getTagValueFromObject(target, [{\r\n                        prop: tagName\r\n                    }], dataContext);\r\n            }\r\n            // scond data context level sometimes exist (tree map)\r\n            if (value == null && dataContext.dataContext) {\r\n                value = getTagValueFromObject(target, parts, dataContext.dataContext);\r\n            }\r\n        }\r\n        // Check component's data item\r\n        if (value == null && dataItem.component && dataItem.component.dataItem !== dataItem) {\r\n            value = getTagValue(dataItem.component, tagName, format);\r\n        }\r\n    }\r\n    // Check sprite's properties\r\n    if (value == null) {\r\n        value = getTagValueFromObject(target, parts, target);\r\n    }\r\n    // Finally, check the parent\r\n    if (value == null && target.parent) {\r\n        value = getTagValue(target.parent, tagName, format);\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction getCustomDataValue(target, prop) {\r\n    const customData = target.getPrivate(\"customData\");\r\n    if ($type.isObject(customData)) {\r\n        return customData[prop];\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getTagValueFromObject(target, parts, object, format) {\r\n    let current = object;\r\n    let formatApplied = false;\r\n    for (let i = 0, len = parts.length; i < len; i++) {\r\n        let part = parts[i];\r\n        if (part.prop) {\r\n            // Regular property\r\n            if (current instanceof Sprite) {\r\n                let tmp = current.get(part.prop);\r\n                if (tmp == null)\r\n                    tmp = current.getPrivate(part.prop);\r\n                if (tmp == null)\r\n                    tmp = getCustomDataValue(current, part.prop);\r\n                if (tmp == null)\r\n                    tmp = current[part.prop];\r\n                current = tmp;\r\n            }\r\n            else if (current.get) {\r\n                let tmp = current.get(part.prop);\r\n                if (tmp == null)\r\n                    tmp = current[part.prop];\r\n                current = tmp;\r\n            }\r\n            else {\r\n                current = current[part.prop];\r\n            }\r\n            if (current == null) {\r\n                // Not set, return undefined\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            // Method\r\n            switch (part.method) {\r\n                case \"formatNumber\":\r\n                    let numberValue = $type.toNumber(current);\r\n                    if (numberValue != null) {\r\n                        current = target.getNumberFormatter().format(numberValue, format || part.params[0] || undefined);\r\n                        formatApplied = true;\r\n                    }\r\n                    break;\r\n                case \"formatDate\":\r\n                    let dateValue = $type.toDate(current);\r\n                    if (!$type.isDate(dateValue) || $type.isNaN(dateValue.getTime())) {\r\n                        // Was not able to get date out of value, quitting and letting\r\n                        // calling method try another value\r\n                        return;\r\n                    }\r\n                    if (dateValue != null) {\r\n                        current = target.getDateFormatter().format(dateValue, format || part.params[0] || undefined);\r\n                        formatApplied = true;\r\n                    }\r\n                    break;\r\n                case \"formatDuration\":\r\n                    let durationValue = $type.toNumber(current);\r\n                    if (durationValue != null) {\r\n                        current = target.getDurationFormatter().format(durationValue, format || part.params[0] || undefined, part.params[1] || undefined);\r\n                        formatApplied = true;\r\n                    }\r\n                    break;\r\n                case \"urlEncode\":\r\n                case \"encodeURIComponent\":\r\n                    current = encodeURIComponent(current);\r\n                    break;\r\n                default:\r\n                    if (current[part.method]) {\r\n                        current[part.method].apply(object, part.params);\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    // Apply default format if it wasn't applied explicitly\r\n    if (!formatApplied) {\r\n        let formatParts = [{\r\n                method: \"\",\r\n                params: format\r\n            }];\r\n        if (format == null) {\r\n            // Format is not set\r\n            // Determine from the type of the value\r\n            if ($type.isNumber(current)) {\r\n                formatParts[0].method = \"formatNumber\";\r\n                formatParts[0].params = \"\";\r\n            }\r\n            else if ($type.isDate(current)) {\r\n                formatParts[0].method = \"formatDate\";\r\n                formatParts[0].params = \"\";\r\n            }\r\n        }\r\n        else {\r\n            // Format set\r\n            // Try to determine formatter based on the format\r\n            let formatterType = $utils.getFormat(format);\r\n            // format\r\n            if (formatterType === \"number\") {\r\n                formatParts[0].method = \"formatNumber\";\r\n            }\r\n            else if (formatterType === \"date\") {\r\n                formatParts[0].method = \"formatDate\";\r\n            }\r\n            else if (formatterType === \"duration\") {\r\n                formatParts[0].method = \"formatDuration\";\r\n            }\r\n        }\r\n        // Apply format\r\n        if (formatParts[0].method) {\r\n            current = getTagValueFromObject(target, formatParts, current);\r\n        }\r\n    }\r\n    return current;\r\n}\r\n//# sourceMappingURL=PopulateString.js.map","import { Children } from \"../util/Children\";\r\nimport { Percent } from \"../util/Percent\";\r\nimport { Sprite } from \"./Sprite\";\r\nimport { Rectangle } from \"./Rectangle\";\r\nimport { HorizontalLayout } from \"./HorizontalLayout\";\r\nimport { VerticalLayout } from \"./VerticalLayout\";\r\nimport { GridLayout } from \"./GridLayout\";\r\nimport { populateString } from \"../util/PopulateString\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $type from \"../util/Type\";\r\nimport * as $utils from \"../util/Utils\";\r\n/**\r\n * A basic element that can have child elements, maintain their layout, and\r\n * have a background.\r\n *\r\n * It can have any [[Sprite]] element as a child, from very basic shapes, to\r\n * full-fledged charts.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/} for more info\r\n * @important\r\n */\r\nexport class Container extends Sprite {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeContainer()\r\n        });\r\n        Object.defineProperty(this, \"_childrenDisplay\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeContainer()\r\n        });\r\n        /**\r\n         * List of Container's child elements.\r\n         */\r\n        Object.defineProperty(this, \"children\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Children(this)\r\n        });\r\n        Object.defineProperty(this, \"_percentageSizeChildren\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_percentagePositionChildren\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_prevWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_prevHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_contentWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_contentHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_contentMask\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_vsbd0\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_vsbd1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_hsbd0\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_hsbd1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_childrenPrep\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_childrenUpdt\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this._display.addChild(this._childrenDisplay);\r\n    }\r\n    _afterChanged() {\r\n        super._afterChanged();\r\n        this._childrenPrep = false;\r\n        this._childrenUpdt = false;\r\n    }\r\n    _dispose() {\r\n        $array.eachReverse(this.allChildren(), (child) => {\r\n            child.dispose();\r\n        });\r\n        if (this.getPrivate(\"htmlElement\")) {\r\n            this._root._removeHTMLContent(this);\r\n        }\r\n        super._dispose();\r\n    }\r\n    _beforeChanged() {\r\n        if (!this._childrenPrep) {\r\n            this._prepareChildren();\r\n        }\r\n        if (!this._childrenUpdt) {\r\n            this._updateChildren();\r\n        }\r\n        super._beforeChanged();\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this.isDirty(\"interactiveChildren\")) {\r\n            this._display.interactiveChildren = this.get(\"interactiveChildren\", false);\r\n        }\r\n        if (this.isDirty(\"layout\")) {\r\n            this._prevWidth = 0;\r\n            this._prevHeight = 0;\r\n            this.markDirtyBounds();\r\n            if (this._prevSettings.layout) {\r\n                this.children.each((child) => {\r\n                    child.removePrivate(\"x\");\r\n                    child.removePrivate(\"y\");\r\n                });\r\n            }\r\n        }\r\n        if (this.isDirty(\"paddingTop\") || this.isDirty(\"paddingBottom\") || this.isDirty(\"paddingLeft\") || this.isDirty(\"paddingRight\")) {\r\n            this.children.each((child) => {\r\n                child.markDirtyPosition();\r\n            });\r\n        }\r\n        if (this.isDirty(\"maskContent\")) {\r\n            const childrenDisplay = this._childrenDisplay;\r\n            let contentMask = this._contentMask;\r\n            if (this.get(\"maskContent\")) {\r\n                if (!contentMask) {\r\n                    contentMask = Rectangle.new(this._root, {\r\n                        x: -.5,\r\n                        y: -.5,\r\n                        width: this.width() + 1,\r\n                        height: this.height() + 1\r\n                    });\r\n                    this._contentMask = contentMask;\r\n                    childrenDisplay.addChildAt(contentMask._display, 0);\r\n                    childrenDisplay.mask = contentMask._display;\r\n                }\r\n            }\r\n            else {\r\n                if (contentMask) {\r\n                    childrenDisplay.removeChild(contentMask._display);\r\n                    childrenDisplay.mask = null;\r\n                    contentMask.dispose();\r\n                    this._contentMask = undefined;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _updateSize() {\r\n        super._updateSize();\r\n        $array.each(this._percentageSizeChildren, (child) => {\r\n            child._updateSize();\r\n        });\r\n        $array.each(this._percentagePositionChildren, (child) => {\r\n            child.markDirtyPosition();\r\n            child._updateSize();\r\n        });\r\n        this.updateBackground();\r\n    }\r\n    updateBackground() {\r\n        const background = this.get(\"background\");\r\n        let bounds = this._localBounds;\r\n        if (bounds && !this.isHidden()) {\r\n            let x = bounds.left;\r\n            let y = bounds.top;\r\n            let w = bounds.right - x;\r\n            let h = bounds.bottom - y;\r\n            let maxWidth = this.get(\"maxWidth\");\r\n            let maxHeight = this.get(\"maxHeight\");\r\n            if (maxHeight) {\r\n                if (h > maxHeight) {\r\n                    h = maxHeight;\r\n                }\r\n            }\r\n            if (maxWidth) {\r\n                if (w > maxWidth) {\r\n                    w = maxWidth;\r\n                }\r\n            }\r\n            let width = this.width();\r\n            let height = this.height();\r\n            if (background) {\r\n                background.setAll({ width: w, height: h, x: x, y: y });\r\n                if (this._display.interactive) {\r\n                    background._display.interactive = true;\r\n                }\r\n            }\r\n            const contentMask = this._contentMask;\r\n            if (contentMask) {\r\n                contentMask.setAll({ width: width + 1, height: height + 1 });\r\n            }\r\n            const verticalScrollbar = this.get(\"verticalScrollbar\");\r\n            if (verticalScrollbar) {\r\n                verticalScrollbar.set(\"height\", height);\r\n                verticalScrollbar.set(\"x\", width - verticalScrollbar.width() - verticalScrollbar.get(\"marginRight\", 0));\r\n                let start = verticalScrollbar.get(\"start\", 0);\r\n                let end = verticalScrollbar.get(\"end\", 1);\r\n                if (start > 1 - end) {\r\n                    verticalScrollbar.set(\"start\", Math.max(0, end - height / this._contentHeight));\r\n                }\r\n                else {\r\n                    verticalScrollbar.set(\"end\", Math.min(1, start + height / this._contentHeight));\r\n                }\r\n                const bg = verticalScrollbar.get(\"background\");\r\n                if (bg) {\r\n                    bg.setAll({ width: verticalScrollbar.width(), height: height });\r\n                }\r\n                let visible = true;\r\n                if (this._contentHeight <= height) {\r\n                    visible = false;\r\n                }\r\n                verticalScrollbar.setPrivate(\"visible\", visible);\r\n            }\r\n        }\r\n    }\r\n    _applyThemes(force = false) {\r\n        if (super._applyThemes(force)) {\r\n            this.eachChildren((child) => {\r\n                child._applyThemes(force);\r\n            });\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n    _applyState(name) {\r\n        super._applyState(name);\r\n        if (this.get(\"setStateOnChildren\")) {\r\n            this.eachChildren((child) => {\r\n                child.states.apply(name);\r\n            });\r\n        }\r\n    }\r\n    _applyStateAnimated(name, duration) {\r\n        super._applyStateAnimated(name, duration);\r\n        if (this.get(\"setStateOnChildren\")) {\r\n            this.eachChildren((child) => {\r\n                child.states.applyAnimate(name, duration);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Returns container's inner width (width without padding) in pixels.\r\n     *\r\n     * @return Inner width (px)\r\n     */\r\n    innerWidth() {\r\n        return this.width() - this.get(\"paddingRight\", 0) - this.get(\"paddingLeft\", 0);\r\n    }\r\n    /**\r\n     * Returns container's inner height (height without padding) in pixels.\r\n     *\r\n     * @return Inner height (px)\r\n     */\r\n    innerHeight() {\r\n        return this.height() - this.get(\"paddingTop\", 0) - this.get(\"paddingBottom\", 0);\r\n    }\r\n    _getBounds() {\r\n        if (!this.get(\"html\")) {\r\n            let width = this.get(\"width\");\r\n            let height = this.get(\"height\");\r\n            let pWidth = this.getPrivate(\"width\");\r\n            let pHeight = this.getPrivate(\"height\");\r\n            let bounds = {\r\n                left: 0,\r\n                top: 0,\r\n                right: this.width(),\r\n                bottom: this.height()\r\n            };\r\n            let layout = this.get(\"layout\");\r\n            let horizontal = false;\r\n            let vertical = false;\r\n            if (layout instanceof HorizontalLayout || layout instanceof GridLayout) {\r\n                horizontal = true;\r\n            }\r\n            if (layout instanceof VerticalLayout) {\r\n                vertical = true;\r\n            }\r\n            if ((width != null || pWidth != null) && (height != null || pHeight != null) && !this.get(\"verticalScrollbar\")) {\r\n                // void\r\n            }\r\n            else {\r\n                let m = Number.MAX_VALUE;\r\n                let l = m;\r\n                let r = -m;\r\n                let t = m;\r\n                let b = -m;\r\n                const paddingLeft = this.get(\"paddingLeft\", 0);\r\n                const paddingTop = this.get(\"paddingTop\", 0);\r\n                const paddingRight = this.get(\"paddingRight\", 0);\r\n                const paddingBottom = this.get(\"paddingBottom\", 0);\r\n                this.children.each((child) => {\r\n                    if (child.get(\"position\") != \"absolute\" && child.get(\"isMeasured\")) {\r\n                        let childBounds = child.adjustedLocalBounds();\r\n                        let childX = child.x();\r\n                        let childY = child.y();\r\n                        let cl = childX + childBounds.left;\r\n                        let cr = childX + childBounds.right;\r\n                        let ct = childY + childBounds.top;\r\n                        let cb = childY + childBounds.bottom;\r\n                        if (horizontal) {\r\n                            cl -= child.get(\"marginLeft\", 0);\r\n                            cr += child.get(\"marginRight\", 0);\r\n                        }\r\n                        if (vertical) {\r\n                            ct -= child.get(\"marginTop\", 0);\r\n                            cb += child.get(\"marginBottom\", 0);\r\n                        }\r\n                        if (cl < l) {\r\n                            l = cl;\r\n                        }\r\n                        if (cr > r) {\r\n                            r = cr;\r\n                        }\r\n                        if (ct < t) {\r\n                            t = ct;\r\n                        }\r\n                        if (cb > b) {\r\n                            b = cb;\r\n                        }\r\n                    }\r\n                });\r\n                if (l == m) {\r\n                    l = 0;\r\n                }\r\n                if (r == -m) {\r\n                    r = 0;\r\n                }\r\n                if (t == m) {\r\n                    t = 0;\r\n                }\r\n                if (b == -m) {\r\n                    b = 0;\r\n                }\r\n                bounds.left = l - paddingLeft;\r\n                bounds.top = t - paddingTop;\r\n                bounds.right = r + paddingRight;\r\n                bounds.bottom = b + paddingBottom;\r\n                const minWidth = this.get(\"minWidth\");\r\n                if ($type.isNumber(minWidth) && minWidth > 0) {\r\n                    if (bounds.right - bounds.left < minWidth) {\r\n                        if (bounds.right >= minWidth) {\r\n                            bounds.left = bounds.right - minWidth;\r\n                        }\r\n                        else {\r\n                            bounds.right = bounds.left + minWidth;\r\n                        }\r\n                    }\r\n                }\r\n                const minHeight = this.get(\"minHeight\");\r\n                if ($type.isNumber(minHeight) && minHeight > 0) {\r\n                    if (bounds.bottom - bounds.top < minHeight) {\r\n                        if (bounds.bottom >= minHeight) {\r\n                            bounds.top = bounds.bottom - minHeight;\r\n                        }\r\n                        else {\r\n                            bounds.bottom = bounds.top + minHeight;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this._contentWidth = bounds.right - bounds.left;\r\n            this._contentHeight = bounds.bottom - bounds.top;\r\n            if ($type.isNumber(width)) {\r\n                bounds.left = 0;\r\n                bounds.right = width;\r\n            }\r\n            if ($type.isNumber(pWidth)) {\r\n                bounds.left = 0;\r\n                bounds.right = pWidth;\r\n            }\r\n            if ($type.isNumber(height)) {\r\n                bounds.top = 0;\r\n                bounds.bottom = height;\r\n            }\r\n            if ($type.isNumber(pHeight)) {\r\n                bounds.top = 0;\r\n                bounds.bottom = pHeight;\r\n            }\r\n            this._localBounds = bounds;\r\n        }\r\n        else {\r\n            let bounds = this._localBounds;\r\n            if (bounds) {\r\n                this._contentWidth = bounds.right - bounds.left;\r\n                this._contentHeight = bounds.bottom - bounds.top;\r\n            }\r\n        }\r\n    }\r\n    _updateBounds() {\r\n        const layout = this.get(\"layout\");\r\n        if (layout) {\r\n            layout.updateContainer(this);\r\n        }\r\n        super._updateBounds();\r\n        this.updateBackground();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirty() {\r\n        super.markDirty();\r\n        this._root._addDirtyParent(this);\r\n    }\r\n    _prepareChildren() {\r\n        this._childrenPrep = true;\r\n        const innerWidth = this.innerWidth();\r\n        const innerHeight = this.innerHeight();\r\n        if (innerWidth != this._prevWidth || innerHeight != this._prevHeight) {\r\n            let layout = this.get(\"layout\");\r\n            let horizontal = false;\r\n            let vertical = false;\r\n            if (layout) {\r\n                if (layout instanceof HorizontalLayout || layout instanceof GridLayout) {\r\n                    horizontal = true;\r\n                }\r\n                if (layout instanceof VerticalLayout) {\r\n                    vertical = true;\r\n                }\r\n            }\r\n            $array.each(this._percentageSizeChildren, (child) => {\r\n                if (!horizontal) {\r\n                    let width = child.get(\"width\");\r\n                    if (width instanceof Percent) {\r\n                        child.setPrivate(\"width\", width.value * innerWidth);\r\n                    }\r\n                }\r\n                if (!vertical) {\r\n                    let height = child.get(\"height\");\r\n                    if (height instanceof Percent) {\r\n                        child.setPrivate(\"height\", height.value * innerHeight);\r\n                    }\r\n                }\r\n            });\r\n            $array.each(this._percentagePositionChildren, (child) => {\r\n                child.markDirtyPosition();\r\n                child.markDirtyBounds();\r\n            });\r\n            this._prevWidth = innerWidth;\r\n            this._prevHeight = innerHeight;\r\n            this._sizeDirty = true;\r\n            this.updateBackground();\r\n        }\r\n        //this._handleStates();\r\n    }\r\n    _updateHTMLContent() {\r\n        const html = this.get(\"html\", \"\");\r\n        if (html && html !== \"\") {\r\n            this._root._setHTMLContent(this, populateString(this, html));\r\n        }\r\n        else {\r\n            this._root._removeHTMLContent(this);\r\n        }\r\n        this._root._positionHTMLElement(this);\r\n    }\r\n    /**\r\n     * If scrolling is enabled on the Container (by adding `verticalScrollbar`)\r\n     * the Container will scroll in such way so that target element becomes\r\n     * visible if its currently outside of view.\r\n     *\r\n     * @param  child  Target child\r\n     * @since 5.10.5\r\n     */\r\n    scrollToChild(child) {\r\n        const verticalScrollbar = this.get(\"verticalScrollbar\");\r\n        if (verticalScrollbar) {\r\n            let y = child.y();\r\n            let h = this.innerHeight();\r\n            let ch = child.height();\r\n            let contentH = this._contentHeight;\r\n            let max = 1 - (h - ch / 2) / contentH;\r\n            if (y + ch * .7 + this._childrenDisplay.y > h || y - ch * .3 + this._childrenDisplay.y < 0) {\r\n                let pos = Math.max(0, Math.min(max, (y - ch / 2) / contentH));\r\n                verticalScrollbar.animate({ key: \"start\", to: pos, duration: verticalScrollbar.get(\"animationDuration\", 0), easing: verticalScrollbar.get(\"animationEasing\") });\r\n            }\r\n        }\r\n    }\r\n    _updateChildren() {\r\n        this._childrenUpdt = true;\r\n        if (this.isDirty(\"html\")) {\r\n            this._updateHTMLContent();\r\n        }\r\n        if (this.isDirty(\"verticalScrollbar\")) {\r\n            const verticalScrollbar = this.get(\"verticalScrollbar\");\r\n            if (verticalScrollbar) {\r\n                verticalScrollbar._setParent(this);\r\n                verticalScrollbar.startGrip.setPrivate(\"visible\", false);\r\n                verticalScrollbar.endGrip.setPrivate(\"visible\", false);\r\n                this.set(\"maskContent\", true);\r\n                this.set(\"paddingRight\", verticalScrollbar.width() + verticalScrollbar.get(\"marginRight\", 0) + verticalScrollbar.get(\"marginLeft\", 0));\r\n                let background = this.get(\"background\");\r\n                if (!background) {\r\n                    background = this.set(\"background\", Rectangle.new(this._root, {\r\n                        themeTags: [\"background\"],\r\n                        fillOpacity: 0,\r\n                        fill: this._root.interfaceColors.get(\"alternativeBackground\")\r\n                    }));\r\n                }\r\n                this._vsbd0 = this.events.on(\"wheel\", (event) => {\r\n                    const wheelEvent = event.originalEvent;\r\n                    // Ignore wheel event if it is happening on a non-chart element, e.g. if\r\n                    // some page element is over the chart.\r\n                    if ($utils.isLocalEvent(wheelEvent, this)) {\r\n                        wheelEvent.preventDefault();\r\n                    }\r\n                    else {\r\n                        return;\r\n                    }\r\n                    let shiftY = wheelEvent.deltaY / 5000;\r\n                    const start = verticalScrollbar.get(\"start\", 0);\r\n                    const end = verticalScrollbar.get(\"end\", 1);\r\n                    if (start + shiftY <= 0) {\r\n                        shiftY = -start;\r\n                    }\r\n                    if (end + shiftY >= 1) {\r\n                        shiftY = 1 - end;\r\n                    }\r\n                    if (start + shiftY >= 0 && end + shiftY <= 1) {\r\n                        verticalScrollbar.set(\"start\", start + shiftY);\r\n                        verticalScrollbar.set(\"end\", end + shiftY);\r\n                    }\r\n                });\r\n                this._disposers.push(this._vsbd0);\r\n                this._vsbd1 = verticalScrollbar.events.on(\"rangechanged\", () => {\r\n                    let h = this._contentHeight;\r\n                    const childrenDisplay = this._childrenDisplay;\r\n                    const contentMask = this._contentMask;\r\n                    childrenDisplay.y = -verticalScrollbar.get(\"start\", 0) * h;\r\n                    childrenDisplay.markDirtyLayer();\r\n                    if (contentMask) {\r\n                        contentMask._display.y = -childrenDisplay.y;\r\n                        childrenDisplay.mask = contentMask._display;\r\n                    }\r\n                });\r\n                this._disposers.push(this._vsbd1);\r\n                this._display.addChild(verticalScrollbar._display);\r\n            }\r\n            else {\r\n                const previous = this._prevSettings.verticalScrollbar;\r\n                if (previous) {\r\n                    this._display.removeChild(previous._display);\r\n                    if (this._vsbd0) {\r\n                        this._vsbd0.dispose();\r\n                    }\r\n                    if (this._vsbd1) {\r\n                        this._vsbd1.dispose();\r\n                    }\r\n                    const childrenDisplay = this._childrenDisplay;\r\n                    childrenDisplay.y = 0;\r\n                    this.setPrivate(\"height\", undefined);\r\n                    this.set(\"maskContent\", false);\r\n                    this.set(\"paddingRight\", undefined);\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"background\")) {\r\n            // TODO maybe this should dispose ?\r\n            const previous = this._prevSettings[\"background\"];\r\n            if (previous) {\r\n                this._display.removeChild(previous._display);\r\n            }\r\n            const background = this.get(\"background\");\r\n            if (background instanceof Sprite) {\r\n                background.set(\"isMeasured\", false);\r\n                background._setParent(this);\r\n                this._display.addChildAt(background._display, 0);\r\n            }\r\n        }\r\n        if (this.isDirty(\"mask\")) {\r\n            const mask = this.get(\"mask\");\r\n            const previous = this._prevSettings[\"mask\"];\r\n            if (previous) {\r\n                this._display.removeChild(previous._display);\r\n                if (previous != mask) {\r\n                    previous.dispose();\r\n                }\r\n            }\r\n            if (mask) {\r\n                const parent = mask.parent;\r\n                if (parent) {\r\n                    parent.children.removeValue(mask);\r\n                }\r\n                mask._setParent(this);\r\n                this._display.addChildAt(mask._display, 0);\r\n                this._childrenDisplay.mask = mask._display;\r\n            }\r\n        }\r\n    }\r\n    _processTemplateField() {\r\n        super._processTemplateField();\r\n        this.children.each((child) => {\r\n            child._processTemplateField();\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    walkChildren(f) {\r\n        this.children.each((child) => {\r\n            if (child instanceof Container) {\r\n                child.walkChildren(f);\r\n            }\r\n            f(child);\r\n        });\r\n    }\r\n    eachChildren(f) {\r\n        const background = this.get(\"background\");\r\n        if (background) {\r\n            f(background);\r\n        }\r\n        const verticalScrollbar = this.get(\"verticalScrollbar\");\r\n        if (verticalScrollbar) {\r\n            f(verticalScrollbar);\r\n        }\r\n        const mask = this.get(\"mask\");\r\n        if (mask) {\r\n            f(mask);\r\n        }\r\n        this.children.values.forEach((child) => {\r\n            f(child);\r\n        });\r\n    }\r\n    allChildren() {\r\n        const output = [];\r\n        this.eachChildren((x) => {\r\n            output.push(x);\r\n        });\r\n        return output;\r\n    }\r\n    _setDataItem(dataItem) {\r\n        const updated = (dataItem !== this._dataItem);\r\n        super._setDataItem(dataItem);\r\n        const html = this.get(\"html\", \"\");\r\n        if (html && html !== \"\" && updated) {\r\n            this._root._setHTMLContent(this, populateString(this, html));\r\n        }\r\n    }\r\n    contentWidth() {\r\n        return this._contentWidth;\r\n    }\r\n    contentHeight() {\r\n        return this._contentHeight;\r\n    }\r\n}\r\nObject.defineProperty(Container, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Container\"\r\n});\r\nObject.defineProperty(Container, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Sprite.classNames.concat([Container.className])\r\n});\r\n//# sourceMappingURL=Container.js.map","import { Sprite } from \"./Sprite\";\r\nimport { populateString } from \"../util/PopulateString\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $utils from \"../util/Utils\";\r\nimport { Disposer } from \"../util/Disposer\";\r\n/**\r\n * @ignore Text is an internal class. Use Label instead.\r\n */\r\nexport class Text extends Sprite {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"textStyle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeTextStyle()\r\n        });\r\n        Object.defineProperty(this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._root._renderer.makeText(\"\", this.textStyle)\r\n        });\r\n        Object.defineProperty(this, \"_textStyles\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [\r\n                \"textAlign\",\r\n                \"fontFamily\",\r\n                \"fontSize\",\r\n                \"fontStyle\",\r\n                \"fontWeight\",\r\n                \"fontStyle\",\r\n                \"fontVariant\",\r\n                \"textDecoration\",\r\n                \"shadowColor\",\r\n                \"shadowBlur\",\r\n                \"shadowOffsetX\",\r\n                \"shadowOffsetY\",\r\n                \"shadowOpacity\",\r\n                // \"leading\",\r\n                // \"letterSpacing\",\r\n                \"lineHeight\",\r\n                \"baselineRatio\",\r\n                //\"padding\",\r\n                // \"stroke\",\r\n                // \"strokeThickness\",\r\n                // \"trim\",\r\n                // \"wordWrap\",\r\n                \"direction\",\r\n                \"textBaseline\",\r\n                \"oversizedBehavior\",\r\n                \"breakWords\",\r\n                \"ellipsis\",\r\n                \"minScale\",\r\n                \"maxChars\"\r\n            ]\r\n        });\r\n        Object.defineProperty(this, \"_originalScale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _updateBounds() {\r\n        if (!this.get(\"text\")) {\r\n            let newBounds = {\r\n                left: 0,\r\n                right: 0,\r\n                top: 0,\r\n                bottom: 0,\r\n            };\r\n            this._adjustedLocalBounds = newBounds;\r\n        }\r\n        else {\r\n            super._updateBounds();\r\n            let fillGradient = this.get(\"fillGradient\");\r\n            if (fillGradient) {\r\n                this._display.style.fill = fillGradient.getFill(this);\r\n            }\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        this._display.clear();\r\n        let textStyle = this.textStyle;\r\n        if (this.isDirty(\"opacity\")) {\r\n            let opacity = this.get(\"opacity\", 1);\r\n            this._display.alpha = opacity;\r\n        }\r\n        if (this.isDirty(\"text\") || this.isDirty(\"populateText\")) {\r\n            this._display.text = this._getText();\r\n            this.markDirtyBounds();\r\n            if (this.get(\"role\") == \"tooltip\") {\r\n                this._root.updateTooltip(this);\r\n            }\r\n        }\r\n        if (this.isPrivateDirty(\"tooltipElement\")) {\r\n            const tooltipElement = this.getPrivate(\"tooltipElement\");\r\n            if (tooltipElement) {\r\n                this._disposers.push(new Disposer(() => {\r\n                    this._root._removeTooltipElement(this);\r\n                }));\r\n            }\r\n        }\r\n        if (this.isDirty(\"width\")) {\r\n            textStyle.wordWrapWidth = this.width();\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"oversizedBehavior\")) {\r\n            textStyle.oversizedBehavior = this.get(\"oversizedBehavior\", \"none\");\r\n            this._display.invalidateVisibility();\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"breakWords\")) {\r\n            textStyle.breakWords = this.get(\"breakWords\", false);\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"ellipsis\")) {\r\n            textStyle.ellipsis = this.get(\"ellipsis\");\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"ignoreFormatting\")) {\r\n            textStyle.ignoreFormatting = this.get(\"ignoreFormatting\", false);\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"minScale\")) {\r\n            textStyle.minScale = this.get(\"minScale\", 0);\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"fill\") || this.isDirty(\"fillGradient\")) {\r\n            const fill = this.get(\"fill\");\r\n            const fillGradient = this.get(\"fillGradient\");\r\n            const fillOpacity = this.get(\"fillOpacity\");\r\n            if (fillGradient) {\r\n                if (fill) {\r\n                    const stops = fillGradient.get(\"stops\", []);\r\n                    if (stops.length) {\r\n                        $array.each(stops, (stop) => {\r\n                            if ((!stop.color || stop.colorInherited) && fill) {\r\n                                stop.color = fill;\r\n                                stop.colorInherited = true;\r\n                            }\r\n                            if (stop.opacity == null || stop.opacityInherited) {\r\n                                stop.opacity = fillOpacity;\r\n                                stop.opacityInherited = true;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                textStyle.fill = fillGradient.getFill(this);\r\n            }\r\n            else if (fill) {\r\n                textStyle.fill = fill;\r\n            }\r\n        }\r\n        if (this.isDirty(\"fillOpacity\")) {\r\n            let fillOpacity = this.get(\"fillOpacity\", 1);\r\n            if (fillOpacity) {\r\n                textStyle.fillOpacity = fillOpacity;\r\n            }\r\n        }\r\n        if (this.isDirty(\"maxWidth\") || this.isPrivateDirty(\"maxWidth\")) {\r\n            textStyle.maxWidth = this.get(\"maxWidth\", this.getPrivate(\"maxWidth\"));\r\n            this.markDirtyBounds();\r\n        }\r\n        if (this.isDirty(\"maxHeight\") || this.isPrivateDirty(\"maxHeight\")) {\r\n            textStyle.maxHeight = this.get(\"maxHeight\", this.getPrivate(\"maxHeight\"));\r\n            this.markDirtyBounds();\r\n        }\r\n        $array.each(this._textStyles, (styleName) => {\r\n            if (this._dirty[styleName]) {\r\n                textStyle[styleName] = this.get(styleName);\r\n                this.markDirtyBounds();\r\n            }\r\n        });\r\n        textStyle[\"fontSize\"] = this.get(\"fontSize\");\r\n        textStyle[\"fontFamily\"] = this.get(\"fontFamily\");\r\n        this._display.style = textStyle;\r\n        if (this.isDirty(\"role\") && this.get(\"role\") == \"tooltip\") {\r\n            this._root.updateTooltip(this);\r\n        }\r\n    }\r\n    _getText() {\r\n        let text = this.get(\"text\", \"\");\r\n        if (this.get(\"maxChars\")) {\r\n            text = $utils.truncateTextWithEllipsis(text, this.get(\"maxChars\", 100000000), this.get(\"breakWords\"), this.get(\"ellipsis\"));\r\n        }\r\n        return this.get(\"populateText\") ? populateString(this, text) : text;\r\n    }\r\n    _getAccessibleText() {\r\n        const ariaLabel = this.get(\"ariaLabel\");\r\n        if (ariaLabel !== undefined) {\r\n            return this.get(\"populateText\") ? populateString(this, ariaLabel) : ariaLabel;\r\n        }\r\n        return this._getText();\r\n    }\r\n    /**\r\n     * Forces the text to be re-evaluated and re-populated.\r\n     */\r\n    markDirtyText() {\r\n        this._display.text = this._getText();\r\n        if (this.get(\"role\") == \"tooltip\") {\r\n            this._root.updateTooltip(this);\r\n        }\r\n        this.markDirtyBounds();\r\n        this.markDirty();\r\n    }\r\n    _setDataItem(dataItem) {\r\n        super._setDataItem(dataItem);\r\n        if (this.get(\"populateText\")) {\r\n            this.markDirtyText();\r\n        }\r\n    }\r\n    getNumberFormatter() {\r\n        if (this.parent) {\r\n            return this.parent.getNumberFormatter();\r\n        }\r\n        else {\r\n            return super.getNumberFormatter();\r\n        }\r\n    }\r\n    getDateFormatter() {\r\n        if (this.parent) {\r\n            return this.parent.getDateFormatter();\r\n        }\r\n        else {\r\n            return super.getDateFormatter();\r\n        }\r\n    }\r\n    getDurationFormatter() {\r\n        if (this.parent) {\r\n            return this.parent.getDurationFormatter();\r\n        }\r\n        else {\r\n            return super.getDurationFormatter();\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Text, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Text\"\r\n});\r\nObject.defineProperty(Text, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Sprite.classNames.concat([Text.className])\r\n});\r\n//# sourceMappingURL=Text.js.map","/** @ignore */ /** */\r\nimport * as $array from \"./Array\";\r\nimport * as $utils from \"./Utils\";\r\n/**\r\n * @ignore\r\n */\r\nclass Native {\r\n    constructor() {\r\n        Object.defineProperty(this, \"_observer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_targets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        this._observer = new ResizeObserver((entries) => {\r\n            $array.each(entries, (entry) => {\r\n                $array.each(this._targets, (x) => {\r\n                    if (x.target === entry.target) {\r\n                        x.callback();\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    }\r\n    addTarget(target, callback) {\r\n        this._observer.observe(target, { box: \"border-box\" });\r\n        this._targets.push({ target, callback });\r\n    }\r\n    removeTarget(target) {\r\n        this._observer.unobserve(target);\r\n        $array.keepIf(this._targets, (x) => {\r\n            return x.target !== target;\r\n        });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass Raf {\r\n    constructor() {\r\n        Object.defineProperty(this, \"_timer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_targets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n    addTarget(target, callback) {\r\n        if (this._timer === null) {\r\n            let lastTime = null;\r\n            const loop = () => {\r\n                const currentTime = Date.now();\r\n                if (lastTime === null || currentTime > (lastTime + Raf.delay)) {\r\n                    lastTime = currentTime;\r\n                    $array.each(this._targets, (x) => {\r\n                        let newSize = x.target.getBoundingClientRect();\r\n                        if (newSize.width !== x.size.width || newSize.height !== x.size.height) {\r\n                            x.size = newSize;\r\n                            x.callback();\r\n                        }\r\n                    });\r\n                }\r\n                if (this._targets.length === 0) {\r\n                    this._timer = null;\r\n                }\r\n                else {\r\n                    this._timer = requestAnimationFrame(loop);\r\n                }\r\n            };\r\n            this._timer = requestAnimationFrame(loop);\r\n        }\r\n        // We start off with fake bounds so that sensor always kicks in\r\n        let size = { width: 0, height: 0, left: 0, right: 0, top: 0, bottom: 0, x: 0, y: 0 };\r\n        this._targets.push({ target, callback, size });\r\n    }\r\n    removeTarget(target) {\r\n        $array.keepIf(this._targets, (x) => {\r\n            return x.target !== target;\r\n        });\r\n        if (this._targets.length === 0) {\r\n            if (this._timer !== null) {\r\n                cancelAnimationFrame(this._timer);\r\n                this._timer = null;\r\n            }\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Raf, \"delay\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: 200\r\n});\r\n/**\r\n * @ignore\r\n */\r\nlet observer = null;\r\n/**\r\n * @ignore\r\n */\r\nfunction makeSensor() {\r\n    if (observer === null) {\r\n        if (typeof ResizeObserver !== \"undefined\") {\r\n            observer = new Native();\r\n        }\r\n        else {\r\n            observer = new Raf();\r\n        }\r\n    }\r\n    return observer;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class ResizeSensor {\r\n    constructor(element, callback) {\r\n        Object.defineProperty(this, \"_sensor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_element\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_listener\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        this._sensor = makeSensor();\r\n        this._element = element;\r\n        // This is needed because we need to know when the window is zoomed\r\n        this._listener = $utils.onZoom(callback);\r\n        this._sensor.addTarget(element, callback);\r\n    }\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            this._sensor.removeTarget(this._element);\r\n            this._listener.dispose();\r\n        }\r\n    }\r\n    get sensor() {\r\n        return this._sensor;\r\n    }\r\n}\r\n//# sourceMappingURL=ResizeSensor.js.map","import { Entity } from \"./Entity\";\r\n/**\r\n * Presets for common UI elements.\r\n */\r\nexport class InterfaceColors extends Entity {\r\n}\r\nObject.defineProperty(InterfaceColors, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"InterfaceColors\"\r\n});\r\nObject.defineProperty(InterfaceColors, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Entity.classNames.concat([InterfaceColors.className])\r\n});\r\n//# sourceMappingURL=InterfaceColors.js.map","import { Text } from \"../render/Text\";\r\nimport { p50, p100 } from \"../util/Percent\";\r\nimport { Container } from \"./Container\";\r\nimport * as $array from \"../../core/util/Array\";\r\nimport * as $type from \"../../core/util/Type\";\r\n/**\r\n * Creates a label with support for in-line styling and data bindings.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/labels/} for more info\r\n */\r\nexport class Label extends Container {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_text\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_textKeys\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [\r\n                \"text\",\r\n                \"fill\",\r\n                \"fillGradient\",\r\n                \"fillOpacity\",\r\n                \"textAlign\",\r\n                \"fontFamily\",\r\n                \"fontSize\",\r\n                \"fontStyle\",\r\n                \"fontWeight\",\r\n                \"fontStyle\",\r\n                \"fontVariant\",\r\n                \"textDecoration\",\r\n                \"shadowColor\",\r\n                \"shadowBlur\",\r\n                \"shadowOffsetX\",\r\n                \"shadowOffsetY\",\r\n                \"shadowOpacity\",\r\n                // \"leading\",\r\n                // \"letterSpacing\",\r\n                \"lineHeight\",\r\n                \"baselineRatio\",\r\n                //\"padding\",\r\n                // \"stroke\",\r\n                // \"strokeThickness\",\r\n                // \"trim\",\r\n                // \"wordWrap\",\r\n                \"direction\",\r\n                \"textBaseline\",\r\n                \"oversizedBehavior\",\r\n                \"breakWords\",\r\n                \"ellipsis\",\r\n                \"minScale\",\r\n                \"populateText\",\r\n                \"role\",\r\n                \"ignoreFormatting\",\r\n                \"maxChars\",\r\n                \"ariaLabel\"\r\n            ]\r\n        });\r\n    }\r\n    /**\r\n     * @ignore Text is not to be used directly\r\n     */\r\n    get text() {\r\n        return this._text;\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this._makeText();\r\n        $array.each(this._textKeys, (property) => {\r\n            const propValue = this.get(property);\r\n            if (propValue != undefined) {\r\n                this._text.set(property, propValue);\r\n            }\r\n        });\r\n        if (this.get(\"html\", \"\") !== \"\") {\r\n            this._text.set(\"text\", \"\");\r\n        }\r\n        this.onPrivate(\"maxWidth\", () => {\r\n            this._setMaxDimentions();\r\n        });\r\n        this.onPrivate(\"maxHeight\", () => {\r\n            this._setMaxDimentions();\r\n        });\r\n    }\r\n    _makeText() {\r\n        this._text = this.children.push(Text.new(this._root, {}));\r\n    }\r\n    _updateChildren() {\r\n        super._updateChildren();\r\n        const text = this._text;\r\n        $array.each(this._textKeys, (property) => {\r\n            this._text.set(property, this.get(property));\r\n        });\r\n        if (this.isDirty(\"maxWidth\") || this.isDirty(\"maxHeight\") || this.isDirty(\"rotation\")) {\r\n            this._setMaxDimentions();\r\n        }\r\n        // Do not show regular text if HTML is used\r\n        if (this.get(\"html\", \"\") !== \"\") {\r\n            text.set(\"text\", \"\");\r\n        }\r\n        else {\r\n            text.set(\"text\", this.get(\"text\"));\r\n            this._maybeUpdateHTMLColor();\r\n        }\r\n        if (this.isDirty(\"fill\") || this.isDirty(\"fillGradient\")) {\r\n            this._maybeUpdateHTMLColor();\r\n        }\r\n        if (this.isDirty(\"textAlign\") || this.isDirty(\"width\")) {\r\n            const textAlign = this.get(\"textAlign\");\r\n            let x;\r\n            if (this.get(\"width\") != null) {\r\n                if (textAlign == \"right\") {\r\n                    x = p100;\r\n                }\r\n                else if (textAlign == \"center\") {\r\n                    x = p50;\r\n                }\r\n                else {\r\n                    x = 0;\r\n                }\r\n            }\r\n            else {\r\n                if (textAlign == \"left\" || textAlign == \"start\") {\r\n                    x = this.get(\"paddingLeft\", 0);\r\n                }\r\n                else if (textAlign == \"right\" || textAlign == \"end\") {\r\n                    x = -this.get(\"paddingRight\", 0);\r\n                }\r\n            }\r\n            text.set(\"x\", x);\r\n        }\r\n        const background = this.get(\"background\");\r\n        if (background) {\r\n            background.setPrivate(\"visible\", text._display.textVisible);\r\n        }\r\n    }\r\n    _maybeUpdateHTMLColor() {\r\n        const htmlElement = this.getPrivate(\"htmlElement\");\r\n        if (htmlElement && this.get(\"fill\")) {\r\n            htmlElement.style.color = this.get(\"fill\").toCSSHex();\r\n            //@todo support gradient\r\n        }\r\n    }\r\n    _setMaxDimentions() {\r\n        const rotation = this.get(\"rotation\");\r\n        const vertical = rotation == 90 || rotation == 270 || rotation == -90;\r\n        const text = this._text;\r\n        const maxWidth = this.get(\"maxWidth\", this.getPrivate(\"maxWidth\", Infinity));\r\n        if ($type.isNumber(maxWidth)) {\r\n            text.set(vertical ? \"maxHeight\" : \"maxWidth\", maxWidth - this.get(\"paddingTop\", 0) - this.get(\"paddingBottom\", 0));\r\n        }\r\n        else {\r\n            text.set(vertical ? \"maxHeight\" : \"maxWidth\", undefined);\r\n        }\r\n        const maxHeight = this.get(\"maxHeight\", this.getPrivate(\"maxHeight\", Infinity));\r\n        if ($type.isNumber(maxHeight)) {\r\n            text.set(vertical ? \"maxWidth\" : \"maxHeight\", maxHeight - this.get(\"paddingLeft\", 0) - this.get(\"paddingRight\", 0));\r\n        }\r\n        else {\r\n            text.set(vertical ? \"maxWidth\" : \"maxHeight\", undefined);\r\n        }\r\n        this.root.events.once(\"frameended\", () => {\r\n            text.markDirtyBounds();\r\n        });\r\n    }\r\n    _setDataItem(dataItem) {\r\n        super._setDataItem(dataItem);\r\n        this._markDirtyKey(\"text\");\r\n        this._markDirtyKey(\"html\");\r\n        const text = this._text;\r\n        if (text.get(\"populateText\")) {\r\n            text.markDirtyText();\r\n        }\r\n        const html = this.get(\"html\");\r\n        if (html && html !== \"\") {\r\n            this._updateHTMLContent();\r\n        }\r\n    }\r\n    /**\r\n     * Returns text with populated placeholders and formatting if `populateText` is\r\n     * set to `true`.\r\n     *\r\n     * @return Populated text\r\n     */\r\n    getText() {\r\n        return this._text._getText();\r\n    }\r\n    /**\r\n     * Returns \"aria-label\" text with populated placeholders and formatting\r\n     * if `populateText` is set to `true`.\r\n     *\r\n     * @return Populated text\r\n     */\r\n    getAccessibleText() {\r\n        return this._text._getAccessibleText();\r\n    }\r\n}\r\nObject.defineProperty(Label, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Label\"\r\n});\r\nObject.defineProperty(Label, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Container.classNames.concat([Label.className])\r\n});\r\n//# sourceMappingURL=Label.js.map","import { Graphics } from \"./Graphics\";\r\nimport * as $math from \"../util/Math\";\r\n/**\r\n * Draws a rectangle with a pointer.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class PointedRectangle extends Graphics {\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"pointerBaseWidth\") || this.isDirty(\"cornerRadius\") || this.isDirty(\"pointerLength\") || this.isDirty(\"pointerX\") || this.isDirty(\"pointerY\") || this.isDirty(\"width\") || this.isDirty(\"height\")) {\r\n            this._clear = true;\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this._clear) {\r\n            this.markDirtyBounds();\r\n            let w = this.width();\r\n            let h = this.height();\r\n            if (w > 0 && h > 0) {\r\n                let cr = this.get(\"cornerRadius\", 8);\r\n                cr = $math.fitToRange(cr, 0, Math.min(w / 2, h / 2));\r\n                let x = this.get(\"pointerX\", 0);\r\n                let y = this.get(\"pointerY\", 0);\r\n                let bwh = this.get(\"pointerBaseWidth\", 15) / 2;\r\n                // corner coordinates\r\n                // top left\r\n                let xtl = 0;\r\n                let ytl = 0;\r\n                // top right\r\n                let xtr = w;\r\n                let ytr = 0;\r\n                // bottom right\r\n                let xbr = w;\r\n                let ybr = h;\r\n                // bottom left\r\n                let xbl = 0;\r\n                let ybl = h;\r\n                // find stem base side: http://$math.stackexchange.com/questions/274712/calculate-on-which-side-of-straign-line-is-dot-located\r\n                // d=(x−x1)(y2−y1)−(y−y1)(x2−x1)\r\n                let d1 = (x - xtl) * (ybr - ytl) - (y - ytl) * (xbr - xtl);\r\n                let d2 = (x - xbl) * (ytr - ybl) - (y - ybl) * (xtr - xbl);\r\n                const display = this._display;\r\n                // top\r\n                display.moveTo(cr, 0);\r\n                if (d1 > 0 && d2 > 0) {\r\n                    let stemX = Math.round($math.fitToRange(x, cr + bwh, w - bwh - cr));\r\n                    y = $math.fitToRange(y, -Infinity, 0);\r\n                    display.lineTo(stemX - bwh, 0);\r\n                    display.lineTo(x, y);\r\n                    display.lineTo(stemX + bwh, 0);\r\n                }\r\n                display.lineTo(w - cr, 0);\r\n                display.arcTo(w, 0, w, cr, cr);\r\n                // right\r\n                if (d1 > 0 && d2 < 0) {\r\n                    let stemY = Math.round($math.fitToRange(y, cr + bwh, h - bwh - cr));\r\n                    x = $math.fitToRange(x, w, Infinity);\r\n                    display.lineTo(w, cr);\r\n                    display.lineTo(w, Math.max(stemY - bwh, cr));\r\n                    display.lineTo(x, y);\r\n                    display.lineTo(w, stemY + bwh);\r\n                }\r\n                display.lineTo(w, h - cr);\r\n                display.arcTo(w, h, w - cr, h, cr);\r\n                // bottom\r\n                if (d1 < 0 && d2 < 0) {\r\n                    let stemX = Math.round($math.fitToRange(x, cr + bwh, w - bwh - cr));\r\n                    y = $math.fitToRange(y, h, Infinity);\r\n                    display.lineTo(w - cr, h);\r\n                    display.lineTo(stemX + bwh, h);\r\n                    display.lineTo(x, y);\r\n                    display.lineTo(stemX - bwh, h);\r\n                }\r\n                display.lineTo(cr, h);\r\n                display.arcTo(0, h, 0, h - cr, cr);\r\n                // left\r\n                if (d1 < 0 && d2 > 0) {\r\n                    let stemY = Math.round($math.fitToRange(y, cr + bwh, h - cr - bwh));\r\n                    x = $math.fitToRange(x, -Infinity, 0);\r\n                    display.lineTo(0, h - cr);\r\n                    display.lineTo(0, stemY + bwh);\r\n                    display.lineTo(x, y);\r\n                    display.lineTo(0, Math.max(stemY - bwh, cr));\r\n                }\r\n                display.lineTo(0, cr);\r\n                display.arcTo(0, 0, cr, 0, cr);\r\n                display.closePath();\r\n            }\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(PointedRectangle, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"PointedRectangle\"\r\n});\r\nObject.defineProperty(PointedRectangle, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Graphics.classNames.concat([PointedRectangle.className])\r\n});\r\n//# sourceMappingURL=PointedRectangle.js.map","import { MultiDisposer } from \"../util/Disposer\";\r\nimport { Label } from \"../render/Label\";\r\nimport { PointedRectangle } from \"../render/PointedRectangle\";\r\nimport { Container } from \"./Container\";\r\nimport { Percent } from \"../util/Percent\";\r\nimport { Color } from \"../util/Color\";\r\nimport * as $math from \"../util/Math\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $utils from \"../util/Utils\";\r\n/**\r\n * Creates a tooltip.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/tooltips/} for more info\r\n * @important\r\n */\r\nexport class Tooltip extends Container {\r\n    constructor(root, settings, isReal, templates = []) {\r\n        super(root, settings, isReal, templates);\r\n        Object.defineProperty(this, \"_fx\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_fy\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_label\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_fillDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_fillGrDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_strokeDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_labelDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_w\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_h\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_keepHoverDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_htmlContentHovered\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"tooltip\"]);\r\n        super._afterNew();\r\n        const background = this._setDefaultFn(\"background\", () => {\r\n            return PointedRectangle.new(this._root, {});\r\n        });\r\n        background.set(\"themeTags\", [\"tooltip\", \"background\"]);\r\n        this._label = this.children.push(Label.new(this._root, {}));\r\n        this._disposers.push(this._label.events.on(\"boundschanged\", () => {\r\n            this._updateBackground();\r\n        }));\r\n        this._disposers.push(this.on(\"bounds\", () => {\r\n            this._updateBackground();\r\n        }));\r\n        this._updateTextColor();\r\n        this._root.tooltipContainer.children.push(this);\r\n        this.hide(0);\r\n        this._disposers.push(this.label.onPrivate(\"htmlElement\", (htmlElement) => {\r\n            if (htmlElement) {\r\n                this._disposers.push($utils.addEventListener(htmlElement, \"pointerover\", (_ev) => {\r\n                    this._htmlContentHovered = true;\r\n                }));\r\n                this._disposers.push($utils.addEventListener(htmlElement, \"pointerout\", (_ev) => {\r\n                    this._htmlContentHovered = false;\r\n                }));\r\n            }\r\n        }));\r\n        this.on(\"visible\", (_ev) => {\r\n            this._handleReaderAnnouncement();\r\n        });\r\n        this.label.events.on(\"dataitemchanged\", (_ev) => {\r\n            this._handleReaderAnnouncement();\r\n        });\r\n        this._root._tooltips.push(this);\r\n    }\r\n    _handleReaderAnnouncement() {\r\n        if (this.get(\"readerAnnounce\") && this.isVisibleDeep()) {\r\n            this._root.readerAlert(this.label.getAccessibleText());\r\n        }\r\n    }\r\n    /**\r\n     * A [[Label]] element for the tooltip.\r\n     *\r\n     * @readonly\r\n     * @return Label\r\n     */\r\n    get label() {\r\n        return this._label;\r\n    }\r\n    /**\r\n     * Permanently disposes the tooltip.\r\n     */\r\n    _dispose() {\r\n        super._dispose();\r\n        $array.remove(this._root._tooltips, this);\r\n    }\r\n    _updateChildren() {\r\n        super._updateChildren();\r\n        if (this.isDirty(\"pointerOrientation\") || this.isPrivateDirty(\"minWidth\") || this.isPrivateDirty(\"minHeight\")) {\r\n            this.get(\"background\")._markDirtyKey(\"width\");\r\n        }\r\n        const labelText = this.get(\"labelText\");\r\n        if (labelText != null) {\r\n            this.label.set(\"text\", this.get(\"labelText\"));\r\n        }\r\n        const labelHTML = this.get(\"labelHTML\");\r\n        if (labelHTML != null) {\r\n            this.label.set(\"html\", this.get(\"labelHTML\"));\r\n        }\r\n        const labelAriaLabel = this.get(\"labelAriaLabel\");\r\n        if (labelAriaLabel != null) {\r\n            this.label.set(\"ariaLabel\", this.get(\"labelAriaLabel\"));\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this.isDirty(\"pointTo\") || this.isDirty(\"pointerOrientation\")) {\r\n            // can't compare to previous, as sometimes pointTo is set twice (when pointer moves, so the position won't be udpated)\r\n            this._updateBackground();\r\n        }\r\n        if (this.isDirty(\"tooltipTarget\")) {\r\n            this.updateBackgroundColor();\r\n        }\r\n        if (this.isDirty(\"keepTargetHover\")) {\r\n            const keephover = this.get(\"keepTargetHover\");\r\n            if (keephover) {\r\n                const bg = this.get(\"background\");\r\n                this._keepHoverDp = new MultiDisposer([\r\n                    bg.events.on(\"pointerover\", (_ev) => {\r\n                        let target = this.get(\"tooltipTarget\");\r\n                        if (target) {\r\n                            if (target.parent && target.parent.getPrivate(\"tooltipTarget\") == target) {\r\n                                target = target.parent;\r\n                            }\r\n                            target.hover();\r\n                        }\r\n                    }),\r\n                    bg.events.on(\"pointerout\", (_ev) => {\r\n                        let target = this.get(\"tooltipTarget\");\r\n                        if (target) {\r\n                            if (target.parent && target.parent.getPrivate(\"tooltipTarget\") == target) {\r\n                                target = target.parent;\r\n                            }\r\n                            if (!this._htmlContentHovered) {\r\n                                target.unhover();\r\n                            }\r\n                        }\r\n                    })\r\n                ]);\r\n                this.label.onPrivate(\"htmlElement\", (htmlElement) => {\r\n                    if (this._keepHoverDp && htmlElement) {\r\n                        this._keepHoverDp.disposers.push($utils.addEventListener(htmlElement, \"pointerleave\", (ev) => {\r\n                            const outEvent = this.root._renderer.getEvent(ev);\r\n                            bg.events.dispatch(\"pointerout\", {\r\n                                type: \"pointerout\",\r\n                                originalEvent: outEvent.event,\r\n                                point: outEvent.point,\r\n                                simulated: false,\r\n                                target: bg\r\n                            });\r\n                        }));\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (this._keepHoverDp) {\r\n                    this._keepHoverDp.dispose();\r\n                    this._keepHoverDp = undefined;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _onShow() {\r\n        super._onShow();\r\n        this.updateBackgroundColor();\r\n    }\r\n    updateBackgroundColor() {\r\n        let tooltipTarget = this.get(\"tooltipTarget\");\r\n        const background = this.get(\"background\");\r\n        let fill;\r\n        let stroke;\r\n        if (tooltipTarget && background) {\r\n            fill = tooltipTarget.get(\"fill\");\r\n            stroke = tooltipTarget.get(\"stroke\");\r\n            if (fill == null) {\r\n                fill = stroke;\r\n            }\r\n            if (this.get(\"getFillFromSprite\")) {\r\n                if (this._fillDp) {\r\n                    this._fillDp.dispose();\r\n                }\r\n                if (fill != null) {\r\n                    background.set(\"fill\", fill);\r\n                }\r\n                this._fillDp = tooltipTarget.on(\"fill\", (fill) => {\r\n                    if (fill != null) {\r\n                        background.set(\"fill\", fill);\r\n                        this._updateTextColor(fill);\r\n                    }\r\n                });\r\n                this._disposers.push(this._fillDp);\r\n            }\r\n            if (this.get(\"getFillGradientFromSprite\")) {\r\n                if (this._fillGrDp) {\r\n                    this._fillGrDp.dispose();\r\n                }\r\n                let fillGradient = tooltipTarget.get(\"fillGradient\");\r\n                if (fillGradient != null) {\r\n                    background.set(\"fillGradient\", fillGradient);\r\n                }\r\n                this._fillGrDp = tooltipTarget.on(\"fillGradient\", (fillGradient) => {\r\n                    if (fillGradient != null) {\r\n                        background.set(\"fillGradient\", fillGradient);\r\n                    }\r\n                });\r\n                this._disposers.push(this._fillGrDp);\r\n            }\r\n            if (this.get(\"getStrokeFromSprite\")) {\r\n                if (this._strokeDp) {\r\n                    this._strokeDp.dispose();\r\n                }\r\n                if (fill != null) {\r\n                    background.set(\"stroke\", fill);\r\n                }\r\n                this._strokeDp = tooltipTarget.on(\"fill\", (fill) => {\r\n                    if (fill != null) {\r\n                        background.set(\"stroke\", fill);\r\n                    }\r\n                });\r\n                this._disposers.push(this._strokeDp);\r\n            }\r\n            if (this.get(\"getLabelFillFromSprite\")) {\r\n                if (this._labelDp) {\r\n                    this._labelDp.dispose();\r\n                }\r\n                if (fill != null) {\r\n                    this.label.set(\"fill\", fill);\r\n                }\r\n                this._labelDp = tooltipTarget.on(\"fill\", (fill) => {\r\n                    if (fill != null) {\r\n                        this.label.set(\"fill\", fill);\r\n                    }\r\n                });\r\n                this._disposers.push(this._labelDp);\r\n            }\r\n        }\r\n        this._updateTextColor(fill);\r\n    }\r\n    _updateTextColor(fill) {\r\n        if (this.get(\"autoTextColor\")) {\r\n            if (fill == null) {\r\n                fill = this.get(\"background\").get(\"fill\");\r\n            }\r\n            if (fill == null) {\r\n                fill = this._root.interfaceColors.get(\"background\");\r\n            }\r\n            if (fill instanceof Color) {\r\n                this.label.set(\"fill\", Color.alternative(fill, this._root.interfaceColors.get(\"alternativeText\"), this._root.interfaceColors.get(\"text\")));\r\n            }\r\n        }\r\n    }\r\n    _setDataItem(dataItem) {\r\n        super._setDataItem(dataItem);\r\n        this.label._setDataItem(dataItem);\r\n    }\r\n    _updateBackground() {\r\n        super.updateBackground();\r\n        const parent = this._root.container;\r\n        if (parent) {\r\n            let cw = 0.5;\r\n            let ch = 0.5;\r\n            let centerX = this.get(\"centerX\");\r\n            if (centerX instanceof Percent) {\r\n                cw = centerX.value;\r\n            }\r\n            let centerY = this.get(\"centerY\");\r\n            if (centerY instanceof Percent) {\r\n                ch = centerY.value;\r\n            }\r\n            let parentW = parent.width();\r\n            let parentH = parent.height();\r\n            let tooltipContainer = this.parent;\r\n            let xx = 0;\r\n            let yy = 0;\r\n            if (tooltipContainer) {\r\n                xx = tooltipContainer.x();\r\n                yy = tooltipContainer.y();\r\n                const layerMargin = tooltipContainer.get(\"layerMargin\");\r\n                if (layerMargin) {\r\n                    xx += layerMargin.left || 0;\r\n                    yy += layerMargin.top || 0;\r\n                    parentW += (layerMargin.left || 0) + (layerMargin.right || 0);\r\n                    parentH += (layerMargin.top || 0) + (layerMargin.bottom || 0);\r\n                }\r\n            }\r\n            const bounds = this.get(\"bounds\", { left: -xx, top: -yy, right: parentW - xx, bottom: parentH - yy });\r\n            this._updateBounds();\r\n            let w = this.width();\r\n            let h = this.height();\r\n            // use old w and h,as when tooltip is hidden, these are 0 and unneeded animation happens\r\n            if (w === 0) {\r\n                w = this._w;\r\n            }\r\n            if (h === 0) {\r\n                h = this._h;\r\n            }\r\n            let pointTo = this.get(\"pointTo\", { x: parentW / 2, y: parentH / 2 });\r\n            let x = pointTo.x;\r\n            let y = pointTo.y;\r\n            let pointerOrientation = this.get(\"pointerOrientation\");\r\n            let background = this.get(\"background\");\r\n            let pointerLength = 0;\r\n            let bgStrokeSizeY = 0;\r\n            let bgStrokeSizeX = 0;\r\n            if (background instanceof PointedRectangle) {\r\n                pointerLength = background.get(\"pointerLength\", 0);\r\n                bgStrokeSizeY = background.get(\"strokeWidth\", 0) / 2;\r\n                bgStrokeSizeX = bgStrokeSizeY;\r\n                background.set(\"width\", w);\r\n                background.set(\"height\", h);\r\n            }\r\n            let pointerX = 0;\r\n            let pointerY = 0;\r\n            let boundsW = bounds.right - bounds.left;\r\n            let boundsH = bounds.bottom - bounds.top;\r\n            // horizontal\r\n            if (pointerOrientation == \"horizontal\" || pointerOrientation == \"left\" || pointerOrientation == \"right\") {\r\n                bgStrokeSizeY = 0;\r\n                if (pointerOrientation == \"horizontal\") {\r\n                    if (x > bounds.left + boundsW / 2) {\r\n                        x -= (w * (1 - cw) + pointerLength);\r\n                        bgStrokeSizeX *= -1;\r\n                    }\r\n                    else {\r\n                        x += (w * cw + pointerLength);\r\n                    }\r\n                }\r\n                else if (pointerOrientation == \"left\") {\r\n                    x += (w * (1 - cw) + pointerLength);\r\n                }\r\n                else {\r\n                    x -= (w * cw + pointerLength);\r\n                    bgStrokeSizeX *= -1;\r\n                }\r\n            }\r\n            // vertical pointer\r\n            else {\r\n                bgStrokeSizeX = 0;\r\n                if (pointerOrientation == \"vertical\") {\r\n                    if (y > bounds.top + h / 2 + pointerLength) {\r\n                        y -= (h * (1 - ch) + pointerLength);\r\n                    }\r\n                    else {\r\n                        y += (h * ch + pointerLength);\r\n                        bgStrokeSizeY *= -1;\r\n                    }\r\n                }\r\n                else if (pointerOrientation == \"down\") {\r\n                    y -= (h * (1 - ch) + pointerLength);\r\n                }\r\n                else {\r\n                    y += (h * ch + pointerLength);\r\n                    bgStrokeSizeY *= -1;\r\n                }\r\n            }\r\n            x = $math.fitToRange(x, bounds.left + w * cw, bounds.left + boundsW - w * (1 - cw)) + bgStrokeSizeX;\r\n            y = $math.fitToRange(y, bounds.top + h * ch, bounds.top + boundsH - h * (1 - ch)) - bgStrokeSizeY;\r\n            pointerX = pointTo.x - x + w * cw + bgStrokeSizeX;\r\n            pointerY = pointTo.y - y + h * ch - bgStrokeSizeY;\r\n            this._fx = x;\r\n            this._fy = y;\r\n            const animationDuration = this.get(\"animationDuration\", 0);\r\n            if (animationDuration > 0 && this.get(\"visible\") && this.get(\"opacity\") > 0.1) {\r\n                const animationEasing = this.get(\"animationEasing\");\r\n                this.animate({ key: \"x\", to: x, duration: animationDuration, easing: animationEasing });\r\n                this.animate({ key: \"y\", to: y, duration: animationDuration, easing: animationEasing });\r\n            }\r\n            else {\r\n                this.set(\"x\", x);\r\n                this.set(\"y\", y);\r\n            }\r\n            if (background instanceof PointedRectangle) {\r\n                background.set(\"pointerX\", pointerX);\r\n                background.set(\"pointerY\", pointerY);\r\n            }\r\n            if (w > 0) {\r\n                this._w = w;\r\n            }\r\n            if (h > 0) {\r\n                this._h = h;\r\n            }\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Tooltip, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Tooltip\"\r\n});\r\nObject.defineProperty(Tooltip, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Container.classNames.concat([Tooltip.className])\r\n});\r\n//# sourceMappingURL=Tooltip.js.map","import { Entity } from \"./Entity\";\r\nimport { TextFormatter } from \"./TextFormatter\";\r\nimport * as $object from \"./Object\";\r\nimport * as $utils from \"./Utils\";\r\nimport * as $type from \"./Type\";\r\n/**\r\n * Number formatter\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/} for more info\r\n * @important\r\n */\r\nexport class NumberFormatter extends Entity {\r\n    _setDefaults() {\r\n        // Defaults\r\n        this._setDefault(\"negativeBase\", 0);\r\n        this._setDefault(\"numberFormat\", \"#,###.#####\");\r\n        this._setDefault(\"smallNumberThreshold\", 1.00);\r\n        const bns = \"_big_number_suffix_\";\r\n        const sns = \"_small_number_suffix_\";\r\n        const bs = \"_byte_suffix_\";\r\n        this._setDefault(\"bigNumberPrefixes\", [\r\n            { \"number\": 1e+3, \"suffix\": this._t(bns + \"3\") },\r\n            { \"number\": 1e+6, \"suffix\": this._t(bns + \"6\") },\r\n            { \"number\": 1e+9, \"suffix\": this._t(bns + \"9\") },\r\n            { \"number\": 1e+12, \"suffix\": this._t(bns + \"12\") },\r\n            { \"number\": 1e+15, \"suffix\": this._t(bns + \"15\") },\r\n            { \"number\": 1e+18, \"suffix\": this._t(bns + \"18\") },\r\n            { \"number\": 1e+21, \"suffix\": this._t(bns + \"21\") },\r\n            { \"number\": 1e+24, \"suffix\": this._t(bns + \"24\") }\r\n        ]);\r\n        this._setDefault(\"smallNumberPrefixes\", [\r\n            { \"number\": 1e-24, \"suffix\": this._t(sns + \"24\") },\r\n            { \"number\": 1e-21, \"suffix\": this._t(sns + \"21\") },\r\n            { \"number\": 1e-18, \"suffix\": this._t(sns + \"18\") },\r\n            { \"number\": 1e-15, \"suffix\": this._t(sns + \"15\") },\r\n            { \"number\": 1e-12, \"suffix\": this._t(sns + \"12\") },\r\n            { \"number\": 1e-9, \"suffix\": this._t(sns + \"9\") },\r\n            { \"number\": 1e-6, \"suffix\": this._t(sns + \"6\") },\r\n            { \"number\": 1e-3, \"suffix\": this._t(sns + \"3\") }\r\n        ]);\r\n        this._setDefault(\"bytePrefixes\", [\r\n            { \"number\": 1, suffix: this._t(bs + \"B\") },\r\n            { \"number\": 1024, suffix: this._t(bs + \"KB\") },\r\n            { \"number\": 1048576, suffix: this._t(bs + \"MB\") },\r\n            { \"number\": 1073741824, suffix: this._t(bs + \"GB\") },\r\n            { \"number\": 1099511627776, suffix: this._t(bs + \"TB\") },\r\n            { \"number\": 1125899906842624, suffix: this._t(bs + \"PB\") }\r\n        ]);\r\n        super._setDefaults();\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n    }\r\n    /**\r\n     * Formats the number according to specific format.\r\n     *\r\n     * @param value   Value to format\r\n     * @param format  Format to apply\r\n     * @return Formatted number\r\n     */\r\n    format(value, format, precision) {\r\n        // no format passed in or \"Number\"\r\n        if (format == null || ($type.isString(format) && format.toLowerCase() === \"number\")) {\r\n            format = this.get(\"numberFormat\", \"\");\r\n        }\r\n        // Init return value\r\n        let formatted;\r\n        // Cast to number just in case\r\n        // TODO: maybe use better casting\r\n        let source = Number(value);\r\n        // Is it a built-in format or Intl.NumberFormatOptions\r\n        if ($type.isObject(format)) {\r\n            try {\r\n                if (this.get(\"intlLocales\")) {\r\n                    return new Intl.NumberFormat(this.get(\"intlLocales\"), format).format(source);\r\n                }\r\n                else {\r\n                    return new Intl.NumberFormat(undefined, format).format(source);\r\n                }\r\n            }\r\n            catch (e) {\r\n                return \"Invalid\";\r\n            }\r\n        }\r\n        else {\r\n            // Clean format\r\n            format = $utils.cleanFormat(format);\r\n            // Get format info (it will also deal with parser caching)\r\n            let info = this.parseFormat(format, this._root.language);\r\n            // format and replace the number\r\n            let details;\r\n            if (source > this.get(\"negativeBase\")) {\r\n                details = info.positive;\r\n            }\r\n            else if (source < this.get(\"negativeBase\")) {\r\n                details = info.negative;\r\n            }\r\n            else {\r\n                details = info.zero;\r\n            }\r\n            // Adjust precision\r\n            if (precision != null && !details.mod) {\r\n                details = $object.copy(details);\r\n                details.decimals.active = source == 0 ? 0 : precision;\r\n            }\r\n            // Format\r\n            formatted = details.template.split($type.PLACEHOLDER).join(this.applyFormat(source, details));\r\n        }\r\n        if (this.get(\"forceLTR\") === true) {\r\n            formatted = \"‎\" + formatted;\r\n        }\r\n        return formatted;\r\n    }\r\n    /**\r\n     * Parses supplied format into structured object which can be used to format\r\n     * the number.\r\n     *\r\n     * @param format Format string, i.e. \"#,###.00\"\r\n     * @param language Language\r\n     * @ignore\r\n     */\r\n    parseFormat(format, language) {\r\n        // Check cache\r\n        // TODO\r\n        // let cached = this.getCache(format);\r\n        // if (cached != null) {\r\n        // \treturn cached;\r\n        // }\r\n        const thousandSeparator = language.translateEmpty(\"_thousandSeparator\");\r\n        const decimalSeparator = language.translateEmpty(\"_decimalSeparator\");\r\n        // init format parse info holder\r\n        let info = {\r\n            \"positive\": {\r\n                \"thousands\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"interval\": -1,\r\n                    \"separator\": thousandSeparator\r\n                },\r\n                \"decimals\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"separator\": decimalSeparator\r\n                },\r\n                \"template\": \"\",\r\n                \"source\": \"\",\r\n                \"parsed\": false\r\n            },\r\n            \"negative\": {\r\n                \"thousands\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"interval\": -1,\r\n                    \"separator\": thousandSeparator\r\n                },\r\n                \"decimals\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"separator\": decimalSeparator\r\n                },\r\n                \"template\": \"\",\r\n                \"source\": \"\",\r\n                \"parsed\": false\r\n            },\r\n            \"zero\": {\r\n                \"thousands\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"interval\": -1,\r\n                    \"separator\": thousandSeparator\r\n                },\r\n                \"decimals\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"separator\": decimalSeparator\r\n                },\r\n                \"template\": \"\",\r\n                \"source\": \"\",\r\n                \"parsed\": false\r\n            }\r\n        };\r\n        // Escape double vertical bars (that mean display one vertical bar)\r\n        format = format.replace(\"||\", $type.PLACEHOLDER2);\r\n        // Split it up and deal with different formats\r\n        let parts = format.split(\"|\");\r\n        info.positive.source = parts[0];\r\n        if (typeof parts[2] === \"undefined\") {\r\n            info.zero = info.positive;\r\n        }\r\n        else {\r\n            info.zero.source = parts[2];\r\n        }\r\n        if (typeof parts[1] === \"undefined\") {\r\n            info.negative = info.positive;\r\n        }\r\n        else {\r\n            info.negative.source = parts[1];\r\n        }\r\n        // Parse each\r\n        $object.each(info, (_part, item) => {\r\n            // Already parsed\r\n            if (item.parsed) {\r\n                return;\r\n            }\r\n            // Check cached\r\n            // TODO\r\n            // if (typeof this.getCache(item.source) !== \"undefined\") {\r\n            // \tinfo[part] = this.getCache(item.source);\r\n            // \treturn;\r\n            // }\r\n            // Begin parsing\r\n            let partFormat = item.source;\r\n            // Just \"Number\"?\r\n            if (partFormat.toLowerCase() === \"number\") {\r\n                partFormat = this.get(\"numberFormat\", \"#,###.#####\");\r\n            }\r\n            // Let TextFormatter split into chunks\r\n            let chunks = TextFormatter.chunk(partFormat, true);\r\n            for (let i = 0; i < chunks.length; i++) {\r\n                let chunk = chunks[i];\r\n                // replace back double vertical bar\r\n                chunk.text = chunk.text.replace($type.PLACEHOLDER2, \"|\");\r\n                if (chunk.type === \"value\") {\r\n                    // Parse format\r\n                    // Look for codes\r\n                    let matches = chunk.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP‰!]?/);\r\n                    if (matches) {\r\n                        if (matches === null || matches[0] === \"\") {\r\n                            // no codes here - assume string\r\n                            // nothing to do here\r\n                            item.template += chunk.text;\r\n                        }\r\n                        else {\r\n                            // look for the format modifiers at the end\r\n                            let mods = matches[0].match(/[abespABESP%‰!]{2}|[abespABESP%‰]{1}$/);\r\n                            if (mods) {\r\n                                item.mod = mods[0].toLowerCase();\r\n                                item.modSpacing = matches[0].match(/[ ]{1}[abespABESP%‰!]{1}$/) ? true : false;\r\n                            }\r\n                            // break the format up\r\n                            let a = matches[0].split(\".\");\r\n                            // Deal with thousands\r\n                            if (a[0] === \"\") {\r\n                                // No directives for thousands\r\n                                // Leave default settings (no formatting)\r\n                            }\r\n                            else {\r\n                                // Counts\r\n                                item.thousands.active = (a[0].match(/0/g) || []).length;\r\n                                item.thousands.passive = (a[0].match(/\\#/g) || []).length + item.thousands.active;\r\n                                // Separator interval\r\n                                let b = a[0].split(\",\");\r\n                                if (b.length === 1) {\r\n                                    // No thousands separators\r\n                                    // Do nothing\r\n                                }\r\n                                else {\r\n                                    // Use length fo the last chunk as thousands length\r\n                                    item.thousands.interval = (b.pop() || \"\").length;\r\n                                    if (item.thousands.interval === 0) {\r\n                                        item.thousands.interval = -1;\r\n                                    }\r\n                                }\r\n                            }\r\n                            // Deal with decimals\r\n                            if (typeof (a[1]) === \"undefined\") {\r\n                                // No directives for decimals\r\n                                // Leave at defaults (no formatting)\r\n                            }\r\n                            else {\r\n                                // Counts\r\n                                item.decimals.active = (a[1].match(/0/g) || []).length;\r\n                                item.decimals.passive = (a[1].match(/\\#/g) || []).length + item.decimals.active;\r\n                            }\r\n                            // Add special code to template\r\n                            item.template += chunk.text.split(matches[0]).join($type.PLACEHOLDER);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    // Quoted string - take it as it is\r\n                    item.template += chunk.text;\r\n                }\r\n            }\r\n            // Apply style formatting\r\n            //item.template = getTextFormatter().format(item.template, this.outputFormat);\r\n            // Save cache\r\n            // TODO\r\n            //this.setCache(item.source, item);\r\n            // Mark this as parsed\r\n            item.parsed = true;\r\n        });\r\n        // Save cache (the whole thing)\r\n        // TODO\r\n        //this.setCache(format, info);\r\n        return info;\r\n    }\r\n    /**\r\n     * Applies parsed format to a numeric value.\r\n     *\r\n     * @param value    Value\r\n     * @param details  Parsed format as returned by parseFormat()\r\n     * @return Formatted number\r\n     * @ignore\r\n     */\r\n    applyFormat(value, details) {\r\n        // Use absolute values\r\n        let negative = value < 0;\r\n        value = Math.abs(value);\r\n        // Recalculate according to modifier\r\n        let prefix = \"\", suffix = \"\";\r\n        let mods = details.mod ? details.mod.split(\"\") : [];\r\n        if (mods.indexOf(\"b\") !== -1) {\r\n            let a = this.applyPrefix(value, this.get(\"bytePrefixes\"), mods.indexOf(\"!\") !== -1);\r\n            value = a[0];\r\n            prefix = a[1];\r\n            suffix = a[2];\r\n            if (details.modSpacing) {\r\n                suffix = \" \" + suffix;\r\n            }\r\n        }\r\n        else if (mods.indexOf(\"a\") !== -1) {\r\n            let a = this.applyPrefix(value, value < this.get(\"smallNumberThreshold\") ? this.get(\"smallNumberPrefixes\") : this.get(\"bigNumberPrefixes\"), mods.indexOf(\"!\") !== -1);\r\n            value = a[0];\r\n            prefix = a[1];\r\n            suffix = a[2];\r\n            if (details.modSpacing) {\r\n                suffix = \" \" + suffix;\r\n            }\r\n        }\r\n        else if (mods.indexOf(\"p\") !== -1) {\r\n            let ol = Math.min(value.toString().length + 2, 21);\r\n            //value *= 100;\r\n            value = parseFloat(value.toPrecision(ol));\r\n            prefix = this._root.language.translate(\"_percentPrefix\");\r\n            suffix = this._root.language.translate(\"_percentSuffix\");\r\n            if (prefix == \"\" && suffix == \"\") {\r\n                suffix = \"%\";\r\n            }\r\n        }\r\n        else if (mods.indexOf(\"%\") !== -1) {\r\n            let ol = Math.min(value.toString().length + 2, 21);\r\n            value *= 100;\r\n            value = parseFloat(value.toPrecision(ol));\r\n            suffix = \"%\";\r\n        }\r\n        else if (mods.indexOf(\"‰\") !== -1) {\r\n            let ol = Math.min(value.toString().length + 3, 21);\r\n            value *= 1000;\r\n            value = parseFloat(value.toPrecision(ol));\r\n            suffix = \"‰\";\r\n        }\r\n        // Round to passive\r\n        if (mods.indexOf(\"e\") !== -1) {\r\n            // convert the value to exponential\r\n            let exp;\r\n            if (details.decimals.passive >= 0) {\r\n                exp = value.toExponential(details.decimals.passive).split(\"e\");\r\n            }\r\n            else {\r\n                exp = value.toExponential().split(\"e\");\r\n            }\r\n            value = Number(exp[0]);\r\n            suffix = \"e\" + exp[1];\r\n            if (details.modSpacing) {\r\n                suffix = \" \" + suffix;\r\n            }\r\n        }\r\n        else if (details.decimals.passive === 0) {\r\n            value = Math.round(value);\r\n        }\r\n        else if (details.decimals.passive > 0) {\r\n            const decimals = $utils.decimalPlaces(value);\r\n            if (decimals > 0) {\r\n                const d = Math.pow(10, details.decimals.passive);\r\n                value = Math.round(parseFloat((value * d).toFixed(decimals))) / d;\r\n            }\r\n        }\r\n        // Init return value\r\n        let res = \"\";\r\n        // Calc integer and decimal parts\r\n        let a = $type.numberToString(value).split(\".\");\r\n        // Format integers\r\n        let ints = a[0];\r\n        // Pad integers to active length\r\n        if (ints.length < details.thousands.active) {\r\n            ints = Array(details.thousands.active - ints.length + 1).join(\"0\") + ints;\r\n        }\r\n        // Insert thousands separators\r\n        if (details.thousands.interval > 0) {\r\n            let ip = [];\r\n            let intsr = ints.split(\"\").reverse().join(\"\");\r\n            for (let i = 0, len = ints.length; i <= len; i += details.thousands.interval) {\r\n                let c = intsr.substr(i, details.thousands.interval).split(\"\").reverse().join(\"\");\r\n                if (c !== \"\") {\r\n                    ip.unshift(c);\r\n                }\r\n            }\r\n            ints = ip.join(details.thousands.separator);\r\n        }\r\n        // Add integers\r\n        res += ints;\r\n        // Add decimals\r\n        if (a.length === 1) {\r\n            a.push(\"\");\r\n        }\r\n        let decs = a[1];\r\n        // Fill zeros?\r\n        if (decs.length < details.decimals.active) {\r\n            decs += Array(details.decimals.active - decs.length + 1).join(\"0\");\r\n        }\r\n        if (decs !== \"\") {\r\n            res += details.decimals.separator + decs;\r\n        }\r\n        // Can't have empty return value\r\n        if (res === \"\") {\r\n            res = \"0\";\r\n        }\r\n        // Add minus sign back\r\n        if (value !== 0 && negative && (mods.indexOf(\"s\") === -1)) {\r\n            res = \"-\" + res;\r\n        }\r\n        // Add suffixes/prefixes\r\n        if (prefix) {\r\n            res = prefix + res;\r\n        }\r\n        if (suffix) {\r\n            res += suffix;\r\n        }\r\n        return res;\r\n    }\r\n    applyPrefix(value, prefixes, force = false) {\r\n        let newvalue = value;\r\n        let prefix = \"\";\r\n        let suffix = \"\";\r\n        let applied = false;\r\n        let k = 1;\r\n        for (let i = 0, len = prefixes.length; i < len; i++) {\r\n            if (prefixes[i].number <= value) {\r\n                if (prefixes[i].number === 0) {\r\n                    newvalue = 0;\r\n                }\r\n                else {\r\n                    newvalue = value / prefixes[i].number;\r\n                    k = prefixes[i].number;\r\n                }\r\n                prefix = prefixes[i].prefix;\r\n                suffix = prefixes[i].suffix;\r\n                applied = true;\r\n            }\r\n        }\r\n        if (!applied && force && prefixes.length && value != 0) {\r\n            // Prefix was not applied. Use the first prefix.\r\n            newvalue = value / prefixes[0].number;\r\n            prefix = prefixes[0].prefix;\r\n            suffix = prefixes[0].suffix;\r\n            applied = true;\r\n        }\r\n        if (applied) {\r\n            newvalue = parseFloat(newvalue.toPrecision(Math.min(k.toString().length + Math.floor(newvalue).toString().replace(/[^0-9]*/g, \"\").length, 21)));\r\n        }\r\n        return [newvalue, prefix, suffix];\r\n    }\r\n    /**\r\n     * Replaces brackets with temporary placeholders.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Input text\r\n     * @return Escaped text\r\n     */\r\n    escape(text) {\r\n        return text.replace(\"||\", $type.PLACEHOLDER2);\r\n    }\r\n    /**\r\n     * Replaces placeholders back to brackets.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Escaped text\r\n     * @return Unescaped text\r\n     */\r\n    unescape(text) {\r\n        return text.replace($type.PLACEHOLDER2, \"|\");\r\n    }\r\n}\r\n//# sourceMappingURL=NumberFormatter.js.map","function parseDate(timezone, date) {\r\n    let year = 0;\r\n    let month = 0;\r\n    let day = 1;\r\n    let hour = 0;\r\n    let minute = 0;\r\n    let second = 0;\r\n    let millisecond = 0;\r\n    let weekday = 0;\r\n    timezone.formatToParts(date).forEach((x) => {\r\n        switch (x.type) {\r\n            case \"year\":\r\n                year = +x.value;\r\n                break;\r\n            case \"month\":\r\n                month = (+x.value) - 1;\r\n                break;\r\n            case \"day\":\r\n                day = +x.value;\r\n                break;\r\n            case \"hour\":\r\n                hour = +x.value;\r\n                break;\r\n            case \"minute\":\r\n                minute = +x.value;\r\n                break;\r\n            case \"second\":\r\n                second = +x.value;\r\n                break;\r\n            case \"fractionalSecond\":\r\n                millisecond = +x.value;\r\n                break;\r\n            case \"weekday\":\r\n                switch (x.value) {\r\n                    case \"Sun\":\r\n                        weekday = 0;\r\n                        break;\r\n                    case \"Mon\":\r\n                        weekday = 1;\r\n                        break;\r\n                    case \"Tue\":\r\n                        weekday = 2;\r\n                        break;\r\n                    case \"Wed\":\r\n                        weekday = 3;\r\n                        break;\r\n                    case \"Thu\":\r\n                        weekday = 4;\r\n                        break;\r\n                    case \"Fri\":\r\n                        weekday = 5;\r\n                        break;\r\n                    case \"Sat\":\r\n                        weekday = 6;\r\n                        break;\r\n                }\r\n        }\r\n    });\r\n    if (hour === 24) {\r\n        hour = 0;\r\n    }\r\n    return { year, month, day, hour, minute, second, millisecond, weekday };\r\n}\r\nfunction toUTCDate(timezone, date) {\r\n    const { year, month, day, hour, minute, second, millisecond } = parseDate(timezone, date);\r\n    return Date.UTC(year, month, day, hour, minute, second, millisecond);\r\n}\r\nexport class Timezone {\r\n    constructor(timezone, isReal) {\r\n        Object.defineProperty(this, \"_utc\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_dtf\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"name\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n        this.name = timezone;\r\n        this._utc = new Intl.DateTimeFormat(\"en-US\", {\r\n            hour12: false,\r\n            timeZone: \"UTC\",\r\n            year: \"numeric\",\r\n            month: \"2-digit\",\r\n            day: \"2-digit\",\r\n            hour: \"2-digit\",\r\n            minute: \"2-digit\",\r\n            second: \"2-digit\",\r\n            weekday: \"short\",\r\n            fractionalSecondDigits: 3,\r\n        });\r\n        this._dtf = new Intl.DateTimeFormat(\"en-US\", {\r\n            hour12: false,\r\n            timeZone: timezone,\r\n            year: \"numeric\",\r\n            month: \"2-digit\",\r\n            day: \"2-digit\",\r\n            hour: \"2-digit\",\r\n            minute: \"2-digit\",\r\n            second: \"2-digit\",\r\n            weekday: \"short\",\r\n            fractionalSecondDigits: 3,\r\n        });\r\n    }\r\n    /**\r\n     * Use this method to create an instance of this class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @param   timezone  IANA timezone\r\n     * @return            Instantiated object\r\n     */\r\n    static new(timezone) {\r\n        return (new this(timezone, true));\r\n    }\r\n    convertLocal(date) {\r\n        const offset = this.offsetUTC(date);\r\n        const userOffset = date.getTimezoneOffset();\r\n        const output = new Date(date);\r\n        output.setUTCMinutes(output.getUTCMinutes() - (offset - userOffset));\r\n        const newUserOffset = output.getTimezoneOffset();\r\n        if (userOffset != newUserOffset) {\r\n            output.setUTCMinutes(output.getUTCMinutes() + newUserOffset - userOffset);\r\n        }\r\n        return output;\r\n    }\r\n    offsetUTC(date) {\r\n        const utc = toUTCDate(this._utc, date);\r\n        const dtf = toUTCDate(this._dtf, date);\r\n        return (utc - dtf) / 60000;\r\n    }\r\n    parseDate(date) {\r\n        return parseDate(this._dtf, date);\r\n    }\r\n}\r\n//# sourceMappingURL=Timezone.js.map","import { Entity } from \"./Entity\";\r\nimport { TextFormatter } from \"./TextFormatter\";\r\nimport { Timezone } from \"./Timezone\";\r\nimport * as $type from \"./Type\";\r\nimport * as $utils from \"./Utils\";\r\n/**\r\n * Date formatter class.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\r\n * @important\r\n */\r\nexport class DateFormatter extends Entity {\r\n    _setDefaults() {\r\n        // Defaults\r\n        this._setDefault(\"capitalize\", true);\r\n        this._setDefault(\"dateFormat\", \"yyyy-MM-dd\");\r\n        super._setDefaults();\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n    }\r\n    /**\r\n     * Formats a source `Date` object into string format\r\n     * @param   source          inpout date\r\n     * @param   format          Output format\r\n     * @param   ignoreTimezone  Ignore timezone?\r\n     * @return                  Formatted date\r\n     */\r\n    format(source, format, ignoreTimezone = false) {\r\n        // Locale?\r\n        // TODO\r\n        // No format passed in or it's empty\r\n        if (typeof format === \"undefined\" || format === \"\") {\r\n            format = this.get(\"dateFormat\", \"yyyy-MM-dd\");\r\n        }\r\n        // Init return value\r\n        let formatted;\r\n        // Cast?\r\n        // TODO: decide if we need to cast\r\n        let date = source;\r\n        // Is it a built-in format or Intl.DateTimeFormat\r\n        if ($type.isObject(format)) {\r\n            try {\r\n                const locales = this.get(\"intlLocales\");\r\n                if (locales) {\r\n                    return new Intl.DateTimeFormat(locales, format).format(date);\r\n                }\r\n                else {\r\n                    return new Intl.DateTimeFormat(undefined, format).format(date);\r\n                }\r\n            }\r\n            catch (e) {\r\n                return \"Invalid\";\r\n            }\r\n        }\r\n        // get format info (it will also deal with parser caching)\r\n        let info = this.parseFormat(format);\r\n        // Should we apply custom time zone?\r\n        const timezone = this._root.timezone;\r\n        let originalDate = date;\r\n        if (timezone && !this._root.utc && !ignoreTimezone) {\r\n            date = timezone.convertLocal(date);\r\n        }\r\n        // Check if it's a valid date\r\n        if (!$type.isNumber(date.getTime())) {\r\n            // TODO translation\r\n            //return this._t(\"Invalid date\");\r\n            return \"Invalid date\";\r\n        }\r\n        // Apply format\r\n        formatted = this.applyFormat(date, info, ignoreTimezone, originalDate);\r\n        // Capitalize\r\n        if (this.get(\"capitalize\")) {\r\n            formatted = formatted.replace(/^.{1}/, formatted.substr(0, 1).toUpperCase());\r\n        }\r\n        // We're done\r\n        return formatted;\r\n    }\r\n    /**\r\n     * Applies format to Date.\r\n     *\r\n     * @param date      Date object\r\n     * @param info      Parsed format information\r\n     * @return Formatted date string\r\n     */\r\n    applyFormat(date, info, ignoreTimezone = false, originalDate) {\r\n        // Init return value\r\n        let res = info.template;\r\n        // Get values\r\n        let fullYear, month, weekday, day, hours, minutes, seconds, milliseconds, timestamp = date.getTime();\r\n        if (this._root.utc && !ignoreTimezone) {\r\n            fullYear = date.getUTCFullYear();\r\n            month = date.getUTCMonth();\r\n            weekday = date.getUTCDay();\r\n            day = date.getUTCDate();\r\n            hours = date.getUTCHours();\r\n            minutes = date.getUTCMinutes();\r\n            seconds = date.getUTCSeconds();\r\n            milliseconds = date.getUTCMilliseconds();\r\n        }\r\n        else {\r\n            fullYear = date.getFullYear();\r\n            month = date.getMonth();\r\n            weekday = date.getDay();\r\n            day = date.getDate();\r\n            hours = date.getHours();\r\n            minutes = date.getMinutes();\r\n            seconds = date.getSeconds();\r\n            milliseconds = date.getMilliseconds();\r\n        }\r\n        // Go through each part and format/replace it in template\r\n        for (let i = 0, len = info.parts.length; i < len; i++) {\r\n            let value = \"\";\r\n            switch (info.parts[i]) {\r\n                case \"G\":\r\n                    value = this._t(fullYear < 0\r\n                        ? \"_era_bc\"\r\n                        : \"_era_ad\");\r\n                    break;\r\n                case \"yyyy\":\r\n                    value = Math.abs(fullYear).toString();\r\n                    if (fullYear < 0) {\r\n                        value += this._t(\"_era_bc\");\r\n                    }\r\n                    break;\r\n                case \"yyy\":\r\n                case \"yy\":\r\n                case \"y\":\r\n                    value = Math.abs(fullYear).toString().substr(-info.parts[i].length);\r\n                    if (fullYear < 0) {\r\n                        value += this._t(\"_era_bc\");\r\n                    }\r\n                    break;\r\n                case \"YYYY\":\r\n                case \"YYY\":\r\n                case \"YY\":\r\n                case \"Y\":\r\n                    let year = $utils.getWeekYear(date, this._root.utc);\r\n                    if (info.parts[i] == \"YYYY\") {\r\n                        value = Math.abs(year).toString();\r\n                    }\r\n                    else {\r\n                        value = Math.abs(year).toString().substr(-info.parts[i].length);\r\n                    }\r\n                    if (year < 0) {\r\n                        value += this._t(\"_era_bc\");\r\n                    }\r\n                    break;\r\n                case \"u\":\r\n                    // @todo\r\n                    break;\r\n                case \"q\":\r\n                    value = \"\" + Math.ceil((date.getMonth() + 1) / 3);\r\n                    break;\r\n                case \"MMMMM\":\r\n                    value = this._t(this._getMonth(month)).substr(0, 1);\r\n                    break;\r\n                case \"MMMM\":\r\n                    value = this._t(this._getMonth(month));\r\n                    break;\r\n                case \"MMM\":\r\n                    value = this._t(this._getShortMonth(month));\r\n                    break;\r\n                case \"MM\":\r\n                    value = $utils.padString(month + 1, 2, \"0\");\r\n                    break;\r\n                case \"M\":\r\n                    value = (month + 1).toString();\r\n                    break;\r\n                case \"ww\":\r\n                    value = $utils.padString($utils.getWeek(date, this._root.utc), 2, \"0\");\r\n                    break;\r\n                case \"w\":\r\n                    value = $utils.getWeek(date, this._root.utc).toString();\r\n                    break;\r\n                case \"W\":\r\n                    value = $utils.getMonthWeek(date, this._root.utc).toString();\r\n                    break;\r\n                case \"dd\":\r\n                    value = $utils.padString(day, 2, \"0\");\r\n                    break;\r\n                case \"d\":\r\n                    value = day.toString();\r\n                    break;\r\n                case \"DD\":\r\n                case \"DDD\":\r\n                    value = $utils.padString($utils.getYearDay(date, this._root.utc).toString(), info.parts[i].length, \"0\");\r\n                    break;\r\n                case \"D\":\r\n                    value = $utils.getYearDay(date, this._root.utc).toString();\r\n                    break;\r\n                case \"F\":\r\n                    // @todo\r\n                    break;\r\n                case \"g\":\r\n                    // @todo\r\n                    break;\r\n                case \"t\":\r\n                    value = this._root.language.translateFunc(\"_dateOrd\").call(this, day);\r\n                    break;\r\n                case \"E\":\r\n                    value = (weekday || 7).toString();\r\n                    break;\r\n                case \"EE\":\r\n                    value = $utils.padString((weekday || 7).toString(), 2, \"0\");\r\n                    break;\r\n                case \"EEE\":\r\n                case \"eee\":\r\n                    value = this._t(this._getShortWeekday(weekday));\r\n                    break;\r\n                case \"EEEE\":\r\n                case \"eeee\":\r\n                    value = this._t(this._getWeekday(weekday));\r\n                    break;\r\n                case \"EEEEE\":\r\n                case \"eeeee\":\r\n                    value = this._t(this._getShortWeekday(weekday)).substr(0, 1);\r\n                    break;\r\n                case \"e\":\r\n                case \"ee\":\r\n                    value = (weekday - (this._root.locale.firstDayOfWeek || 1) + 1).toString();\r\n                    if (info.parts[i] == \"ee\") {\r\n                        value = $utils.padString(value, 2, \"0\");\r\n                    }\r\n                    break;\r\n                case \"a\":\r\n                    if (hours >= 12) {\r\n                        value = this._t(\"PM\");\r\n                    }\r\n                    else {\r\n                        value = this._t(\"AM\");\r\n                    }\r\n                    break;\r\n                case \"aa\":\r\n                    if (hours >= 12) {\r\n                        value = this._t(\"P.M.\");\r\n                    }\r\n                    else {\r\n                        value = this._t(\"A.M.\");\r\n                    }\r\n                    break;\r\n                case \"aaa\":\r\n                    if (hours >= 12) {\r\n                        value = this._t(\"P\");\r\n                    }\r\n                    else {\r\n                        value = this._t(\"A\");\r\n                    }\r\n                    break;\r\n                case \"h\":\r\n                    value = $utils.get12Hours(hours).toString();\r\n                    break;\r\n                case \"hh\":\r\n                    value = $utils.padString($utils.get12Hours(hours), 2, \"0\");\r\n                    break;\r\n                case \"H\":\r\n                    value = hours.toString();\r\n                    break;\r\n                case \"HH\":\r\n                    value = $utils.padString(hours, 2, \"0\");\r\n                    break;\r\n                case \"K\":\r\n                    value = $utils.get12Hours(hours, 0).toString();\r\n                    break;\r\n                case \"KK\":\r\n                    value = $utils.padString($utils.get12Hours(hours, 0), 2, \"0\");\r\n                    break;\r\n                case \"k\":\r\n                    value = (hours + 1).toString();\r\n                    break;\r\n                case \"kk\":\r\n                    value = $utils.padString(hours + 1, 2, \"0\");\r\n                    break;\r\n                case \"m\":\r\n                    value = minutes.toString();\r\n                    break;\r\n                case \"mm\":\r\n                    value = $utils.padString(minutes, 2, \"0\");\r\n                    break;\r\n                case \"s\":\r\n                    value = seconds.toString();\r\n                    break;\r\n                case \"ss\":\r\n                    value = $utils.padString(seconds, 2, \"0\");\r\n                    break;\r\n                case \"S\":\r\n                case \"SS\":\r\n                case \"SSS\":\r\n                    value = Math.round((milliseconds / 1000) * Math.pow(10, info.parts[i].length)).toString();\r\n                    break;\r\n                case \"x\":\r\n                    value = timestamp.toString();\r\n                    break;\r\n                case \"n\":\r\n                case \"nn\":\r\n                case \"nnn\":\r\n                    value = $utils.padString(milliseconds, info.parts[i].length, \"0\");\r\n                    break;\r\n                case \"z\":\r\n                    value = $utils.getTimeZone(originalDate || date, false, false, this._root.utc, this._root.timezone ? this._root.timezone.name : undefined).replace(/[+-]+[0-9]+$/, \"\");\r\n                    break;\r\n                case \"zz\":\r\n                    value = $utils.getTimeZone(originalDate || date, true, false, this._root.utc, this._root.timezone ? this._root.timezone.name : undefined);\r\n                    break;\r\n                case \"zzz\":\r\n                    value = $utils.getTimeZone(originalDate || date, false, true, this._root.utc, this._root.timezone ? this._root.timezone.name : undefined).replace(/[+-]+[0-9]+$/, \"\");\r\n                    break;\r\n                case \"zzzz\":\r\n                    value = $utils.getTimeZone(originalDate || date, true, true, this._root.utc, this._root.timezone ? this._root.timezone.name : undefined);\r\n                    break;\r\n                case \"Z\":\r\n                case \"ZZ\":\r\n                    let timezone = this._root.utc ? \"UTC\" : this._root.timezone;\r\n                    if (timezone instanceof Timezone) {\r\n                        timezone = timezone.name;\r\n                    }\r\n                    const offset = timezone ? $utils.getTimezoneOffset(timezone, originalDate || date) : date.getTimezoneOffset();\r\n                    let tz = Math.abs(offset) / 60;\r\n                    let tzh = Math.floor(tz);\r\n                    let tzm = tz * 60 - tzh * 60;\r\n                    if (this._root.utc) {\r\n                        tzh = 0;\r\n                        tzm = 0;\r\n                    }\r\n                    if (info.parts[i] == \"Z\") {\r\n                        value = \"GMT\";\r\n                        value += offset > 0 ? \"-\" : \"+\";\r\n                        value += $utils.padString(tzh, 2) + \":\" + $utils.padString(tzm, 2);\r\n                    }\r\n                    else {\r\n                        value = offset > 0 ? \"-\" : \"+\";\r\n                        value += $utils.padString(tzh, 2) + $utils.padString(tzm, 2);\r\n                    }\r\n                    break;\r\n                case \"i\":\r\n                    value = date.toISOString();\r\n                    break;\r\n                case \"I\":\r\n                    value = date.toUTCString();\r\n                    break;\r\n            }\r\n            res = res.replace($type.PLACEHOLDER, value);\r\n        }\r\n        return res;\r\n    }\r\n    /**\r\n     * Parses format into structured infromation.\r\n     *\r\n     * @param format Format template\r\n     */\r\n    parseFormat(format) {\r\n        // Check cache\r\n        // TODO: implement caching of the parsed format\r\n        // Init format parse info holder\r\n        let info = {\r\n            \"template\": \"\",\r\n            \"parts\": []\r\n        };\r\n        // Let TextFormatter split into chunks\r\n        let chunks = TextFormatter.chunk(format, true);\r\n        for (let i = 0; i < chunks.length; i++) {\r\n            let chunk = chunks[i];\r\n            if (chunk.type === \"value\") {\r\n                // Just \"Date\"?\r\n                if (chunk.text.match(/^date$/i)) {\r\n                    let dateFormat = this.get(\"dateFormat\", \"yyyy-MM-dd\");\r\n                    if (!$type.isString(dateFormat)) {\r\n                        dateFormat = \"yyyy-MM-dd\";\r\n                    }\r\n                    chunk.text = dateFormat;\r\n                }\r\n                // Find all possible parts\r\n                let matches = chunk.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);\r\n                // Found?\r\n                if (matches) {\r\n                    // Populate template\r\n                    for (let x = 0; x < matches.length; x++) {\r\n                        info.parts.push(matches[x]);\r\n                        chunk.text = chunk.text.replace(matches[x], $type.PLACEHOLDER);\r\n                    }\r\n                }\r\n            }\r\n            // Apply to template\r\n            info.template += chunk.text;\r\n        }\r\n        // Save cache\r\n        // TODO\r\n        return info;\r\n    }\r\n    _months() {\r\n        return [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n    }\r\n    _getMonth(index) {\r\n        return this._months()[index];\r\n    }\r\n    _shortMonths() {\r\n        return [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May(short)\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n    }\r\n    _getShortMonth(index) {\r\n        return this._shortMonths()[index];\r\n    }\r\n    _weekdays() {\r\n        return [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n    }\r\n    _getWeekday(index) {\r\n        return this._weekdays()[index];\r\n    }\r\n    _shortWeekdays() {\r\n        return [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n    }\r\n    _getShortWeekday(index) {\r\n        return this._shortWeekdays()[index];\r\n    }\r\n    parse(source, format, utc) {\r\n        // If UTC is not supplied, use Root setting\r\n        if (typeof utc === \"undefined\") {\r\n            utc = this._root.utc;\r\n        }\r\n        // Is it already a Date\r\n        if (source instanceof Date) {\r\n            return source;\r\n        }\r\n        // Is it a numeric timestamp\r\n        if ($type.isNumber(source)) {\r\n            return new Date(source);\r\n        }\r\n        // Are we parsing a timestamp?\r\n        if (format == \"x\") {\r\n            return new Date(parseInt(source));\r\n        }\r\n        // No? Let's check if it's string, and try converting to it if nec\r\n        if (!$type.isString(source)) {\r\n            source = source.toString();\r\n        }\r\n        // Init return value\r\n        let res;\r\n        // Init RegEx for parsing\r\n        let reg = \"\";\r\n        // Clean format\r\n        format = $utils.cleanFormat(format);\r\n        // Clip format to length of the source string\r\n        format = format.substr(0, source.length);\r\n        // Parse format\r\n        let info = this.parseFormat(format);\r\n        // Init parsed items holder\r\n        let parsedIndexes = {\r\n            \"year\": -1,\r\n            \"year3\": -1,\r\n            \"year2\": -1,\r\n            \"year1\": -1,\r\n            \"month\": -1,\r\n            \"monthShort\": -1,\r\n            \"monthLong\": -1,\r\n            \"weekdayShort\": -1,\r\n            \"weekdayLong\": -1,\r\n            \"day\": -1,\r\n            \"yearDay\": -1,\r\n            \"week\": -1,\r\n            \"hourBase0\": -1,\r\n            \"hour12Base0\": -1,\r\n            \"hourBase1\": -1,\r\n            \"hour12Base1\": -1,\r\n            \"minute\": -1,\r\n            \"second\": -1,\r\n            \"millisecond\": -1,\r\n            \"millisecondDigits\": -1,\r\n            \"am\": -1,\r\n            \"zone\": -1,\r\n            \"timestamp\": -1,\r\n            \"iso\": -1\r\n        };\r\n        // Init values\r\n        let resValues = {\r\n            \"year\": 1970,\r\n            \"month\": 0,\r\n            \"day\": 1,\r\n            \"hour\": 0,\r\n            \"minute\": 0,\r\n            \"second\": 0,\r\n            \"millisecond\": 0,\r\n            \"timestamp\": null,\r\n            \"offset\": 0,\r\n            \"utc\": utc\r\n        };\r\n        // Index adjuster\r\n        let indexAdjust = 0;\r\n        let index = 0;\r\n        // Iterate through all of the parts\r\n        for (let i = 0; i < info.parts.length; i++) {\r\n            // Set current match index\r\n            index = i + indexAdjust + 1;\r\n            switch (info.parts[i]) {\r\n                case \"yyyy\":\r\n                case \"YYYY\":\r\n                    reg += \"([0-9]{4})\";\r\n                    parsedIndexes.year = index;\r\n                    break;\r\n                case \"yyy\":\r\n                case \"YYY\":\r\n                    reg += \"([0-9]{3})\";\r\n                    parsedIndexes.year3 = index;\r\n                    break;\r\n                case \"yy\":\r\n                case \"YY\":\r\n                    reg += \"([0-9]{2})\";\r\n                    parsedIndexes.year2 = index;\r\n                    break;\r\n                case \"y\":\r\n                case \"Y\":\r\n                    reg += \"([0-9]{1})\";\r\n                    parsedIndexes.year1 = index;\r\n                    break;\r\n                case \"MMMM\":\r\n                    reg += \"(\" + this.getStringList(this._months()).join(\"|\") + \")\";\r\n                    parsedIndexes.monthLong = index;\r\n                    break;\r\n                case \"MMM\":\r\n                    reg += \"(\" + this.getStringList(this._shortMonths()).join(\"|\") + \")\";\r\n                    parsedIndexes.monthShort = index;\r\n                    break;\r\n                case \"MM\":\r\n                case \"M\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.month = index;\r\n                    break;\r\n                case \"ww\":\r\n                case \"w\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.week = index;\r\n                    break;\r\n                case \"dd\":\r\n                case \"d\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.day = index;\r\n                    break;\r\n                case \"DDD\":\r\n                case \"DD\":\r\n                case \"D\":\r\n                    reg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.yearDay = index;\r\n                    break;\r\n                case \"dddd\":\r\n                    reg += \"(\" + this.getStringList(this._weekdays()).join(\"|\") + \")\";\r\n                    parsedIndexes.weekdayLong = index;\r\n                    break;\r\n                case \"ddd\":\r\n                    reg += \"(\" + this.getStringList(this._shortWeekdays()).join(\"|\") + \")\";\r\n                    parsedIndexes.weekdayShort = index;\r\n                    break;\r\n                case \"aaa\":\r\n                case \"aa\":\r\n                case \"a\":\r\n                    // TODO: fix (escape regex)\r\n                    reg += \"(\" + this.getStringList([\"AM\", \"PM\", \"A\\.M\\.\", \"P\\.M\\.\", \"A\", \"P\"]).join(\"|\") + \")\";\r\n                    parsedIndexes.am = index;\r\n                    break;\r\n                case \"hh\":\r\n                case \"h\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.hour12Base1 = index;\r\n                    break;\r\n                case \"HH\":\r\n                case \"H\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.hourBase0 = index;\r\n                    break;\r\n                case \"KK\":\r\n                case \"K\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.hour12Base0 = index;\r\n                    break;\r\n                case \"kk\":\r\n                case \"k\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.hourBase1 = index;\r\n                    break;\r\n                case \"mm\":\r\n                case \"m\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.minute = index;\r\n                    break;\r\n                case \"ss\":\r\n                case \"s\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.second = index;\r\n                    break;\r\n                case \"SSS\":\r\n                case \"SS\":\r\n                case \"S\":\r\n                    reg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.millisecond = index;\r\n                    parsedIndexes.millisecondDigits = info.parts[i].length;\r\n                    break;\r\n                case \"nnn\":\r\n                case \"nn\":\r\n                case \"n\":\r\n                    reg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.millisecond = index;\r\n                    break;\r\n                case \"x\":\r\n                    reg += \"([0-9]{1,})\";\r\n                    parsedIndexes.timestamp = index;\r\n                    break;\r\n                case \"Z\":\r\n                    reg += \"GMT([-+]+[0-9]{2}:[0-9]{2})\";\r\n                    parsedIndexes.zone = index;\r\n                    break;\r\n                case \"ZZ\":\r\n                    reg += \"([\\\\-+]+[0-9]{2}[0-9]{2})\";\r\n                    parsedIndexes.zone = index;\r\n                    break;\r\n                case \"i\":\r\n                    reg += \"([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\\\.?([0-9]{0,3})([zZ]|[+\\\\-][0-9]{2}:?[0-9]{2}|$)\";\r\n                    parsedIndexes.iso = index;\r\n                    indexAdjust += 7;\r\n                    break;\r\n                case \"G\":\r\n                case \"YYYY\":\r\n                case \"YYY\":\r\n                case \"YY\":\r\n                case \"Y\":\r\n                case \"MMMMM\":\r\n                case \"W\":\r\n                case \"EEEEE\":\r\n                case \"EEEE\":\r\n                case \"EEE\":\r\n                case \"EE\":\r\n                case \"E\":\r\n                case \"eeeee\":\r\n                case \"eeee\":\r\n                case \"eee\":\r\n                case \"ee\":\r\n                case \"e\":\r\n                case \"zzzz\":\r\n                case \"zzz\":\r\n                case \"zz\":\r\n                case \"z\":\r\n                case \"t\":\r\n                    // Ignore\r\n                    indexAdjust--;\r\n                    break;\r\n            }\r\n            reg += \"[^0-9]*\";\r\n        }\r\n        // Try matching\r\n        let regex = new RegExp(reg);\r\n        let matches = source.match(regex);\r\n        if (matches) {\r\n            // Populate the date object\r\n            // Full year\r\n            if (parsedIndexes.year > -1) {\r\n                resValues.year = parseInt(matches[parsedIndexes.year]);\r\n            }\r\n            // 3-digit year\r\n            if (parsedIndexes.year3 > -1) {\r\n                let val = parseInt(matches[parsedIndexes.year3]);\r\n                val += 1000;\r\n                resValues.year = val;\r\n            }\r\n            // 2-digit year\r\n            if (parsedIndexes.year2 > -1) {\r\n                let val = parseInt(matches[parsedIndexes.year2]);\r\n                if (val > 50) {\r\n                    val += 1000;\r\n                }\r\n                else {\r\n                    val += 2000;\r\n                }\r\n                resValues.year = val;\r\n            }\r\n            // 1-digit year\r\n            if (parsedIndexes.year1 > -1) {\r\n                let val = parseInt(matches[parsedIndexes.year1]);\r\n                val = Math.floor((new Date().getFullYear()) / 10) * 10 + val;\r\n                resValues.year = val;\r\n            }\r\n            // Full month\r\n            if (parsedIndexes.monthLong > -1) {\r\n                resValues.month = this.resolveMonth(matches[parsedIndexes.monthLong]);\r\n            }\r\n            // Short month\r\n            if (parsedIndexes.monthShort > -1) {\r\n                resValues.month = this.resolveShortMonth(matches[parsedIndexes.monthShort]);\r\n            }\r\n            // Numeric month\r\n            if (parsedIndexes.month > -1) {\r\n                resValues.month = parseInt(matches[parsedIndexes.month]) - 1;\r\n            }\r\n            // Weekday\r\n            // @todo\r\n            // Week\r\n            if ((parsedIndexes.week > -1) && (parsedIndexes.day === -1)) {\r\n                // We parse weeks ONLY if day is not explicitly set\r\n                // TODO: this needs work\r\n                // (but maybe later - I can hardly imagine anyone passing their dates in weeks)\r\n                resValues.month = 0;\r\n                resValues.day = $utils.getDayFromWeek(parseInt(matches[parsedIndexes.week]), resValues.year, 1, utc);\r\n            }\r\n            // Day\r\n            if (parsedIndexes.day > -1) {\r\n                resValues.day = parseInt(matches[parsedIndexes.day]);\r\n            }\r\n            // Year day\r\n            if (parsedIndexes.yearDay > -1) {\r\n                resValues.month = 0;\r\n                resValues.day = parseInt(matches[parsedIndexes.yearDay]);\r\n            }\r\n            // 24 Hour (0-23)\r\n            if (parsedIndexes.hourBase0 > -1) {\r\n                resValues.hour = parseInt(matches[parsedIndexes.hourBase0]);\r\n            }\r\n            // 24 Hour (1-24)\r\n            if (parsedIndexes.hourBase1 > -1) {\r\n                resValues.hour = parseInt(matches[parsedIndexes.hourBase1]) - 1;\r\n            }\r\n            // 12 Hour (0-11)\r\n            if (parsedIndexes.hour12Base0 > -1) {\r\n                let val = parseInt(matches[parsedIndexes.hour12Base0]);\r\n                if (val == 11) {\r\n                    val = 0;\r\n                }\r\n                if ((parsedIndexes.am > -1) && !this.isAm(matches[parsedIndexes.am])) {\r\n                    val += 12;\r\n                }\r\n                resValues.hour = val;\r\n            }\r\n            // 12 Hour (1-12)\r\n            if (parsedIndexes.hour12Base1 > -1) {\r\n                let val = parseInt(matches[parsedIndexes.hour12Base1]);\r\n                if (val == 12) {\r\n                    val = 0;\r\n                }\r\n                if ((parsedIndexes.am > -1) && !this.isAm(matches[parsedIndexes.am])) {\r\n                    val += 12;\r\n                }\r\n                resValues.hour = val;\r\n            }\r\n            // Minute\r\n            if (parsedIndexes.minute > -1) {\r\n                resValues.minute = parseInt(matches[parsedIndexes.minute]);\r\n            }\r\n            // Second\r\n            if (parsedIndexes.second > -1) {\r\n                resValues.second = parseInt(matches[parsedIndexes.second]);\r\n            }\r\n            // Millisecond\r\n            if (parsedIndexes.millisecond > -1) {\r\n                let val = parseInt(matches[parsedIndexes.millisecond]);\r\n                if (parsedIndexes.millisecondDigits == 2) {\r\n                    val *= 10;\r\n                }\r\n                else if (parsedIndexes.millisecondDigits == 1) {\r\n                    val *= 100;\r\n                }\r\n                resValues.millisecond = val;\r\n            }\r\n            // Timestamp\r\n            if (parsedIndexes.timestamp > -1) {\r\n                resValues.timestamp = parseInt(matches[parsedIndexes.timestamp]);\r\n                const ts = new Date(resValues.timestamp);\r\n                resValues.year = ts.getUTCFullYear();\r\n                resValues.month = ts.getUTCMonth();\r\n                resValues.day = ts.getUTCDate();\r\n                resValues.hour = ts.getUTCHours();\r\n                resValues.minute = ts.getUTCMinutes();\r\n                resValues.second = ts.getUTCSeconds();\r\n                resValues.millisecond = ts.getUTCMilliseconds();\r\n            }\r\n            // Adjust time zone\r\n            if (parsedIndexes.zone > -1) {\r\n                resValues.offset = this.resolveTimezoneOffset(new Date(resValues.year, resValues.month, resValues.day), matches[parsedIndexes.zone]);\r\n            }\r\n            // ISO\r\n            if (parsedIndexes.iso > -1) {\r\n                resValues.year = $type.toNumber(matches[parsedIndexes.iso + 0]);\r\n                resValues.month = $type.toNumber(matches[parsedIndexes.iso + 1]) - 1;\r\n                resValues.day = $type.toNumber(matches[parsedIndexes.iso + 2]);\r\n                resValues.hour = $type.toNumber(matches[parsedIndexes.iso + 3]);\r\n                resValues.minute = $type.toNumber(matches[parsedIndexes.iso + 4]);\r\n                resValues.second = $type.toNumber(matches[parsedIndexes.iso + 5]);\r\n                resValues.millisecond = $type.toNumber(matches[parsedIndexes.iso + 6]);\r\n                if (matches[parsedIndexes.iso + 7] == \"Z\" || matches[parsedIndexes.iso + 7] == \"z\") {\r\n                    resValues.utc = true;\r\n                }\r\n                else if (matches[parsedIndexes.iso + 7] != \"\") {\r\n                    resValues.offset = this.resolveTimezoneOffset(new Date(resValues.year, resValues.month, resValues.day), matches[parsedIndexes.iso + 7]);\r\n                }\r\n            }\r\n            // Create Date object\r\n            if (resValues.utc) {\r\n                res = new Date(Date.UTC(resValues.year, resValues.month, resValues.day, resValues.hour, resValues.minute, resValues.second, resValues.millisecond));\r\n            }\r\n            else {\r\n                res = new Date(resValues.year, resValues.month, resValues.day, resValues.hour, resValues.minute + resValues.offset, resValues.second, resValues.millisecond);\r\n            }\r\n        }\r\n        else {\r\n            // Didn't match anything\r\n            // Let's try dropping it into Date constructor and hope for the best\r\n            res = new Date(source);\r\n        }\r\n        return res;\r\n    }\r\n    resolveTimezoneOffset(date, zone) {\r\n        let value = zone.match(/([+\\-]?)([0-9]{2}):?([0-9]{2})/);\r\n        if (value) {\r\n            let match = zone.match(/([+\\-]?)([0-9]{2}):?([0-9]{2})/);\r\n            let dir = match[1];\r\n            let hour = match[2];\r\n            let minute = match[3];\r\n            let offset = parseInt(hour) * 60 + parseInt(minute);\r\n            // Adjust offset\r\n            // Making it negative does not seem to make sense, but it's right\r\n            // because of how JavaScript calculates GMT offsets\r\n            if (dir == \"+\") {\r\n                offset *= -1;\r\n            }\r\n            // Check the difference in offset\r\n            let originalOffset = (date || new Date()).getTimezoneOffset();\r\n            let diff = offset - originalOffset;\r\n            return diff;\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * Resolves month name (i.e. \"December\") into a month number (11).\r\n     *\r\n     * @param value  Month name\r\n     * @return Month number\r\n     */\r\n    resolveMonth(value) {\r\n        // Let's try English first\r\n        let month = this._months().indexOf(value);\r\n        if (month > -1) {\r\n            return month;\r\n        }\r\n        // Try the translation\r\n        if (!this._root.language.isDefault()) {\r\n            month = this._root.language.translateAll(this._months()).indexOf(value);\r\n            if (month > -1) {\r\n                return month;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * Resolves short month name (i.e. \"Dec\") into a month number.\r\n     *\r\n     * @param value  Short month name\r\n     * @return Month number\r\n     */\r\n    resolveShortMonth(value) {\r\n        // Let's try English first\r\n        let month = this._shortMonths().indexOf(value);\r\n        if (month > -1) {\r\n            return month;\r\n        }\r\n        // Maybe long month (workaround for May)\r\n        month = this._months().indexOf(value);\r\n        if (month > -1) {\r\n            return month;\r\n        }\r\n        // Try the translation\r\n        if (this._root.language && !this._root.language.isDefault()) {\r\n            month = this._root.language.translateAll(this._shortMonths()).indexOf(value);\r\n            if (month > -1) {\r\n                return month;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * Checks if passed in string represents AM/PM notation in many of its\r\n     * versions.\r\n     *\r\n     * @param value  Source string\r\n     * @return Is it AM/PM?\r\n     */\r\n    isAm(value) {\r\n        let list = this.getStringList([\"AM\", \"A.M.\", \"A\"]);\r\n        return list.indexOf(value.toUpperCase()) > -1;\r\n    }\r\n    /**\r\n     * Translates list of strings.\r\n     *\r\n     * @param list  Source strings\r\n     * @return Translated strings\r\n     */\r\n    getStringList(list) {\r\n        let res = [];\r\n        for (let i = 0; i < list.length; i++) {\r\n            // translate?\r\n            if (this._root.language) {\r\n                res.push($utils.escapeForRgex(this._t(list[i])));\r\n            }\r\n            else {\r\n                res.push($utils.escapeForRgex(list[i]));\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n}\r\n//# sourceMappingURL=DateFormatter.js.map","import { Entity } from \"./Entity\";\r\nimport { TextFormatter } from \"./TextFormatter\";\r\nimport * as $object from \"./Object\";\r\nimport * as $utils from \"./Utils\";\r\nimport * as $type from \"./Type\";\r\n/**\r\n * A class used to format numberic values as time duration.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-durations/} for more info\r\n */\r\nexport class DurationFormatter extends Entity {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * Collection of aliases for units.\r\n         */\r\n        Object.defineProperty(this, \"_unitAliases\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {\r\n                \"Y\": \"y\",\r\n                \"D\": \"d\",\r\n                \"H\": \"h\",\r\n                \"K\": \"h\",\r\n                \"k\": \"h\",\r\n                \"n\": \"S\"\r\n            }\r\n        });\r\n    }\r\n    _setDefaults() {\r\n        const dmillisecond = \"_duration_millisecond\";\r\n        const dsecond = \"_duration_second\";\r\n        const dminute = \"_duration_minute\";\r\n        const dhour = \"_duration_hour\";\r\n        const dday = \"_duration_day\";\r\n        const dweek = \"_duration_week\";\r\n        const dmonth = \"_duration_month\";\r\n        const dyear = \"_duration_year\";\r\n        const asecond = \"_second\";\r\n        const aminute = \"_minute\";\r\n        const ahour = \"_hour\";\r\n        const aday = \"_day\";\r\n        const aweek = \"_week\";\r\n        const amonth = \"_week\";\r\n        const ayear = \"_year\";\r\n        // Defaults\r\n        this._setDefault(\"negativeBase\", 0);\r\n        this._setDefault(\"baseUnit\", \"second\");\r\n        this._setDefault(\"durationFormats\", {\r\n            \"millisecond\": {\r\n                \"millisecond\": this._t(dmillisecond),\r\n                \"second\": this._t((dmillisecond + asecond)),\r\n                \"minute\": this._t((dmillisecond + aminute)),\r\n                \"hour\": this._t((dmillisecond + ahour)),\r\n                \"day\": this._t((dmillisecond + aday)),\r\n                \"week\": this._t((dmillisecond + aweek)),\r\n                \"month\": this._t((dmillisecond + amonth)),\r\n                \"year\": this._t((dmillisecond + ayear))\r\n            },\r\n            \"second\": {\r\n                \"second\": this._t((dsecond)),\r\n                \"minute\": this._t((dsecond + aminute)),\r\n                \"hour\": this._t((dsecond + ahour)),\r\n                \"day\": this._t((dsecond + aday)),\r\n                \"week\": this._t((dsecond + aweek)),\r\n                \"month\": this._t((dsecond + amonth)),\r\n                \"year\": this._t((dsecond + ayear))\r\n            },\r\n            \"minute\": {\r\n                \"minute\": this._t((dminute)),\r\n                \"hour\": this._t((dminute + ahour)),\r\n                \"day\": this._t((dminute + aday)),\r\n                \"week\": this._t((dminute + aweek)),\r\n                \"month\": this._t((dminute + amonth)),\r\n                \"year\": this._t((dminute + ayear))\r\n            },\r\n            \"hour\": {\r\n                \"hour\": this._t((dhour)),\r\n                \"day\": this._t((dhour + aday)),\r\n                \"week\": this._t((dhour + aweek)),\r\n                \"month\": this._t((dhour + amonth)),\r\n                \"year\": this._t((dhour + ayear))\r\n            },\r\n            \"day\": {\r\n                \"day\": this._t((dday)),\r\n                \"week\": this._t((dday + aweek)),\r\n                \"month\": this._t((dday + amonth)),\r\n                \"year\": this._t((dday + ayear))\r\n            },\r\n            \"week\": {\r\n                \"week\": this._t((dweek)),\r\n                \"month\": this._t((dweek + amonth)),\r\n                \"year\": this._t((dweek + ayear))\r\n            },\r\n            \"month\": {\r\n                \"month\": this._t((dmonth)),\r\n                \"year\": this._t((dmonth + ayear))\r\n            },\r\n            \"year\": {\r\n                \"year\": this._t(dyear)\r\n            }\r\n        });\r\n        super._setDefaults();\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n    }\r\n    /**\r\n     * Formats the number as duration.\r\n     *\r\n     * For example `1000` (base unit seconds) would be converted to `16:40` as in\r\n     * 16 minutes and 40 seconds.\r\n     *\r\n     * @param value   Value to format\r\n     * @param format  Format to apply\r\n     * @param base    Override base unit\r\n     * @return Formatted number\r\n     */\r\n    format(value, format, base) {\r\n        // no base unit?\r\n        let baseUnit = base || this.get(\"baseUnit\");\r\n        // no format passed in or empty\r\n        if (typeof format === \"undefined\" || format === \"\") {\r\n            if (this.get(\"durationFormat\") != null) {\r\n                format = this.get(\"durationFormat\");\r\n            }\r\n            else {\r\n                format = this.getFormat($type.toNumber(value), undefined, baseUnit);\r\n            }\r\n        }\r\n        // Clean format\r\n        format = $utils.cleanFormat(format);\r\n        // get format info (it will also deal with parser caching)\r\n        let info = this.parseFormat(format, baseUnit);\r\n        // cast to number just in case\r\n        // TODO: maybe use better casting\r\n        let source = Number(value);\r\n        // format and replace the number\r\n        let details;\r\n        if (source > this.get(\"negativeBase\")) {\r\n            details = info.positive;\r\n        }\r\n        else if (source < this.get(\"negativeBase\")) {\r\n            details = info.negative;\r\n        }\r\n        else {\r\n            details = info.zero;\r\n        }\r\n        // Format\r\n        let formatted = this.applyFormat(source, details);\r\n        // Apply color?\r\n        if (details.color !== \"\") {\r\n            formatted = \"[\" + details.color + \"]\" + formatted + \"[/]\";\r\n        }\r\n        return formatted;\r\n    }\r\n    /**\r\n     * Parses supplied format into structured object which can be used to format\r\n     * the number.\r\n     *\r\n     * @param format  Format string, i.e. \"#,###.00\"\r\n     * @param base    Override base unit\r\n     * @return Parsed information\r\n     */\r\n    parseFormat(format, base) {\r\n        // Check cache\r\n        // TODO\r\n        // let cached = this.getCache(format);\r\n        // if (cached != null) {\r\n        // \treturn cached;\r\n        // }\r\n        // no base unit?\r\n        let baseUnit = base || this.get(\"baseUnit\");\r\n        // Initialize duration parsing info\r\n        let info = {\r\n            \"positive\": {\r\n                \"color\": \"\",\r\n                \"template\": \"\",\r\n                \"parts\": [],\r\n                \"source\": \"\",\r\n                \"baseUnit\": baseUnit,\r\n                \"parsed\": false,\r\n                \"absolute\": false\r\n            },\r\n            \"negative\": {\r\n                \"color\": \"\",\r\n                \"template\": \"\",\r\n                \"parts\": [],\r\n                \"source\": \"\",\r\n                \"baseUnit\": baseUnit,\r\n                \"parsed\": false,\r\n                \"absolute\": false\r\n            },\r\n            \"zero\": {\r\n                \"color\": \"\",\r\n                \"template\": \"\",\r\n                \"parts\": [],\r\n                \"source\": \"\",\r\n                \"baseUnit\": baseUnit,\r\n                \"parsed\": false,\r\n                \"absolute\": false\r\n            }\r\n        };\r\n        // Escape double vertical bars (that mean display one vertical bar)\r\n        format = format.replace(\"||\", $type.PLACEHOLDER2);\r\n        // Split it up and deal with different formats\r\n        let parts = format.split(\"|\");\r\n        info.positive.source = parts[0];\r\n        if (typeof parts[2] === \"undefined\") {\r\n            info.zero = info.positive;\r\n        }\r\n        else {\r\n            info.zero.source = parts[2];\r\n        }\r\n        if (typeof parts[1] === \"undefined\") {\r\n            info.negative = info.positive;\r\n        }\r\n        else {\r\n            info.negative.source = parts[1];\r\n        }\r\n        // Parse each\r\n        $object.each(info, (_part, item) => {\r\n            // Already parsed\r\n            if (item.parsed) {\r\n                return;\r\n            }\r\n            // Check cached\r\n            // TODO\r\n            // if (typeof this.getCache(item.source) !== \"undefined\") {\r\n            // \tinfo[part] = this.getCache(item.source);\r\n            // \treturn;\r\n            // }\r\n            // Begin parsing\r\n            let partFormat = item.source;\r\n            // Check for [] directives\r\n            let dirs = [];\r\n            dirs = item.source.match(/^\\[([^\\]]*)\\]/);\r\n            if (dirs && dirs.length && dirs[0] !== \"\") {\r\n                partFormat = item.source.substr(dirs[0].length);\r\n                item.color = dirs[1];\r\n            }\r\n            // Let TextFormatter split into chunks\r\n            let chunks = TextFormatter.chunk(partFormat, true);\r\n            for (let i = 0; i < chunks.length; i++) {\r\n                let chunk = chunks[i];\r\n                // replace back double vertical bar\r\n                chunk.text = chunk.text.replace($type.PLACEHOLDER2, \"|\");\r\n                if (chunk.type === \"value\") {\r\n                    // Just \"Duration\"?\r\n                    // if (chunk.text.toLowerCase() === \"duration\") {\r\n                    // \tchunk.text = durationFormat;\r\n                    // }\r\n                    // Check for \"a\" (absolute) modifier\r\n                    if (chunk.text.match(/[yYMdDwhHKkmsSn]+a/)) {\r\n                        item.absolute = true;\r\n                        chunk.text = chunk.text.replace(/([yYMdDwhHKkmsSn]+)a/, \"$1\");\r\n                    }\r\n                    // Find all possible parts\r\n                    let matches = chunk.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);\r\n                    if (matches) {\r\n                        // Populate template\r\n                        for (let x = 0; x < matches.length; x++) {\r\n                            // Is it an alias?\r\n                            if (matches[x] == null) {\r\n                                matches[x] = this._unitAliases[matches[x]];\r\n                            }\r\n                            item.parts.push(matches[x]);\r\n                            chunk.text = chunk.text.replace(matches[x], $type.PLACEHOLDER);\r\n                        }\r\n                    }\r\n                }\r\n                // Apply to template\r\n                item.template += chunk.text;\r\n            }\r\n            // Apply style formatting\r\n            //item.template = TextFormatter.format(item.template, this.outputFormat);\r\n            // Save cache\r\n            // TODO\r\n            //this.setCache(item.source, item);\r\n            // Mark this as parsed\r\n            item.parsed = true;\r\n        });\r\n        // Save cache (the whole thing)\r\n        // TODO\r\n        //this.setCache(format, info);\r\n        return info;\r\n    }\r\n    /**\r\n     * Applies parsed format to a numeric value.\r\n     *\r\n     * @param value    Value\r\n     * @param details  Parsed format as returned by {parseFormat}\r\n     * @return Formatted duration\r\n     */\r\n    applyFormat(value, details) {\r\n        // Use absolute values\r\n        let negative = !details.absolute && (value < this.get(\"negativeBase\"));\r\n        value = Math.abs(value);\r\n        // Recalculate to milliseconds\r\n        let tstamp = this.toTimeStamp(value, details.baseUnit);\r\n        // Init return value\r\n        let res = details.template;\r\n        const values = {\r\n            millisecond: 0,\r\n            second: 0,\r\n            minute: 0,\r\n            hour: 0,\r\n            day: 0,\r\n            week: 0,\r\n            month: 0,\r\n            year: 0\r\n        };\r\n        // Iterate through duration parts\r\n        for (let i = 0, len = details.parts.length; i < len; i++) {\r\n            // Gather the part\r\n            let part = details.parts[i];\r\n            let unit = this._toTimeUnit(part.substr(0, 1));\r\n            // Calculate current unit value\r\n            let ints;\r\n            const unitValue = this._getUnitValue(unit);\r\n            if (i < (len - 1)) {\r\n                ints = Math.floor(tstamp / unitValue);\r\n            }\r\n            else {\r\n                ints = Math.round(tstamp / unitValue);\r\n            }\r\n            values[unit] += ints;\r\n            // Reduce timestamp\r\n            tstamp -= ints * unitValue;\r\n        }\r\n        // Check if we have full unit that we need to bump up to higher unit\r\n        $object.each(values, (unit, value) => {\r\n            if (unit == \"millisecond\" && value == 1000) {\r\n                values[\"second\"]++;\r\n                values[\"millisecond\"] = 0;\r\n            }\r\n            else if (unit == \"second\" && value == 60) {\r\n                values[\"minute\"]++;\r\n                values[\"second\"] = 0;\r\n            }\r\n            else if (unit == \"minute\" && value == 60) {\r\n                values[\"hour\"]++;\r\n                values[\"minute\"] = 0;\r\n            }\r\n            else if (unit == \"hour\" && value == 24) {\r\n                values[\"day\"]++;\r\n                values[\"hour\"] = 0;\r\n            }\r\n            else if (unit == \"day\" && value == 7 && details.parts.indexOf(\"w\") !== -1) {\r\n                values[\"week\"]++;\r\n                values[\"day\"] = 0;\r\n            }\r\n            else if (unit == \"day\" && value == 30) {\r\n                values[\"month\"]++;\r\n                values[\"day\"] = 0;\r\n            }\r\n            else if (unit == \"month\" && value == 12) {\r\n                values[\"year\"]++;\r\n                values[\"month\"] = 0;\r\n            }\r\n            // if (val > 0) {\r\n            // \tres = res.replace($type.PLACEHOLDER, $utils.padString(val, 2, \"0\"));\r\n            // }\r\n            // else {\r\n            // \tres = res.replace($type.PLACEHOLDER, \"\");\r\n            // }\r\n        });\r\n        // Iterate again\r\n        for (let i = 0, len = details.parts.length; i < len; i++) {\r\n            // Gather the part\r\n            let part = details.parts[i];\r\n            let unit = this._toTimeUnit(part.substr(0, 1));\r\n            let digits = part.length;\r\n            // Calculate current unit value\r\n            res = res.replace($type.PLACEHOLDER, $utils.padString(values[unit], digits, \"0\"));\r\n        }\r\n        // Reapply negative sign\r\n        if (negative) {\r\n            res = \"-\" + res;\r\n        }\r\n        return res;\r\n    }\r\n    /**\r\n     * Converts numeric value to timestamp in milliseconds.\r\n     *\r\n     * @param value     A source value\r\n     * @param baseUnit  Base unit the source value is in: \"q\", \"s\", \"i\", \"h\", \"d\", \"w\", \"m\", \"y\"\r\n     * @return Value representation as a timestamp in milliseconds\r\n     */\r\n    toTimeStamp(value, baseUnit) {\r\n        return value * this._getUnitValue(baseUnit);\r\n    }\r\n    _toTimeUnit(code) {\r\n        switch (code) {\r\n            case \"S\":\r\n                return \"millisecond\";\r\n            case \"s\":\r\n                return \"second\";\r\n            case \"m\":\r\n                return \"minute\";\r\n            case \"h\":\r\n                return \"hour\";\r\n            case \"d\":\r\n                return \"day\";\r\n            case \"w\":\r\n                return \"week\";\r\n            case \"M\":\r\n                return \"month\";\r\n            case \"y\":\r\n                return \"year\";\r\n        }\r\n        ;\r\n    }\r\n    /**\r\n     * Returns appropriate default format for the value.\r\n     *\r\n     * If `maxValue` is sepcified, it will use that value to determine the time\r\n     * unit for the format.\r\n     *\r\n     * For example if your `baseUnit` is `\"second\"` and you pass in `10`, you\r\n     * will get `\"10\"`.\r\n     *\r\n     * However, you might want it to be formatted in the context of bigger scale,\r\n     * say 10 minutes (600 seconds). If you pass in `600` as `maxValue`, all\r\n     * values, including small ones will use format with minutes, e.g.:\r\n     * `00:10`, `00:50`, `12: 30`, etc.\r\n     *\r\n     * @param value     Value to format\r\n     * @param maxValue  Maximum value to be used to determine format\r\n     * @param baseUnit  Base unit of the value\r\n     * @return Format\r\n     */\r\n    getFormat(value, maxValue, baseUnit) {\r\n        // Is format override set?\r\n        if (this.get(\"durationFormat\") != null) {\r\n            return this.get(\"durationFormat\");\r\n        }\r\n        // Get base unit\r\n        if (!baseUnit) {\r\n            baseUnit = this.get(\"baseUnit\");\r\n        }\r\n        if (maxValue != null && value != maxValue) {\r\n            value = Math.abs(value);\r\n            maxValue = Math.abs(maxValue);\r\n            let maxUnit = this.getValueUnit(Math.max(value, maxValue), baseUnit);\r\n            return this.get(\"durationFormats\")[baseUnit][maxUnit];\r\n        }\r\n        else {\r\n            let unit = this.getValueUnit(value, baseUnit);\r\n            return this.get(\"durationFormats\")[baseUnit][unit];\r\n        }\r\n    }\r\n    /**\r\n     * Returns value's closest denominator time unit, e.g 100 seconds is\r\n     * `\"minute\"`, while 59 seconds would still be `second`.\r\n     *\r\n     * @param value     Source duration value\r\n     * @param baseUnit  Base unit\r\n     * @return Denominator\r\n     */\r\n    getValueUnit(value, baseUnit) {\r\n        // Get base unit\r\n        if (!baseUnit) {\r\n            baseUnit = this.get(\"baseUnit\");\r\n        }\r\n        // Convert to milliseconds\r\n        let currentUnit;\r\n        let ms = this.getMilliseconds(value, baseUnit);\r\n        $object.eachContinue(this._getUnitValues(), (key, val) => {\r\n            if (key == baseUnit || currentUnit) {\r\n                let num = ms / val;\r\n                if (num <= 1) {\r\n                    if (!currentUnit) {\r\n                        currentUnit = key;\r\n                    }\r\n                    return false;\r\n                }\r\n                currentUnit = key;\r\n            }\r\n            return true;\r\n        });\r\n        return currentUnit;\r\n    }\r\n    /**\r\n     * Converts value to milliseconds according to `baseUnit`.\r\n     *\r\n     * @param value     Source duration value\r\n     * @param baseUnit  Base unit\r\n     * @return Value in milliseconds\r\n     */\r\n    getMilliseconds(value, baseUnit) {\r\n        // Get base unit\r\n        if (!baseUnit) {\r\n            baseUnit = this.get(\"baseUnit\");\r\n        }\r\n        return value * this._getUnitValue(baseUnit);\r\n    }\r\n    _getUnitValue(timeUnit) {\r\n        return this._getUnitValues()[timeUnit];\r\n    }\r\n    _getUnitValues() {\r\n        return {\r\n            \"millisecond\": 1,\r\n            \"second\": 1000,\r\n            \"minute\": 60000,\r\n            \"hour\": 3600000,\r\n            \"day\": 86400000,\r\n            \"week\": 604800000,\r\n            \"month\": 2592000000,\r\n            \"year\": 31536000000,\r\n        };\r\n    }\r\n}\r\n//# sourceMappingURL=DurationFormatter.js.map","/**\r\n * amCharts 5 locale\r\n *\r\n * Locale: en\r\n * Language: International English\r\n * Author: Martynas Majeris\r\n *\r\n * Follow instructions in [on this page](https://www.amcharts.com/docs/v5/tutorials/creating-translations/) to make corrections or add new translations.\r\n *\r\n * ---\r\n * Edit but leave the header section above this line. You can remove any\r\n * subsequent comment sections.\r\n * ---\r\n *\r\n * Use this file as a template to create translations. Leave the key part in\r\n * English intact. Fill the value with a translation.\r\n *\r\n * Empty string means no translation, so default \"International English\"\r\n * will be used.\r\n *\r\n * If you need the translation to literally be an empty string, use `null`\r\n * instead.\r\n *\r\n * IMPORTANT:\r\n * When translating make good effort to keep the translation length\r\n * at least the same chartcount as the English, especially for short prompts.\r\n *\r\n * Having significantly longer prompts may distort the actual charts.\r\n *\r\n * NOTE:\r\n * Some prompts - like months or weekdays - come in two versions: full and\r\n * shortened.\r\n *\r\n * If there's no official shortened version of these in your language, and it\r\n * would not be possible to invent such short versions that don't seem weird\r\n * to native speakers of that language, fill those with the same as full\r\n * version.\r\n *\r\n * PLACEHOLDERS:\r\n * Some prompts have placeholders like \"%1\". Those will be replaced by actual\r\n * values during translation and should be retained in the translated prompts.\r\n *\r\n * Placeholder positions may be changed to better suit structure of the\r\n * sentence.\r\n *\r\n * For example \"From %1 to %2\", when actually used will replace \"%1\" with an\r\n * actual value representing range start, and \"%2\" will be replaced by end\r\n * value.\r\n *\r\n * E.g. in a Scrollbar for Value axis \"From %1 to %2\" will become\r\n * \"From 100 to 200\". You may translate \"From\" and \"to\", as well as re-arrange\r\n * the order of the prompt itself, but make sure the \"%1\" and \"%2\" remain, in\r\n * places where they will make sense.\r\n *\r\n * Save the file as language_LOCALE, i.e. `en_GB.ts`, `fr_FR.ts`, etc.\r\n */\r\nexport default {\r\n    \"firstDayOfWeek\": 1,\r\n    // Number formatting options.\r\n    // \r\n    // Please check with the local standards which separator is accepted to be\r\n    // used for separating decimals, and which for thousands.\r\n    \"_decimalSeparator\": \".\",\r\n    \"_thousandSeparator\": \",\",\r\n    // Position of the percent sign in numbers\r\n    \"_percentPrefix\": null,\r\n    \"_percentSuffix\": \"%\",\r\n    // Suffixes for numbers\r\n    // When formatting numbers, big or small numers might be reformatted to\r\n    // shorter version, by applying a suffix.\r\n    // \r\n    // For example, 1000000 might become \"1m\".\r\n    // Or 1024 might become \"1KB\" if we're formatting byte numbers.\r\n    // \r\n    // This section defines such suffixes for all such cases.\r\n    \"_big_number_suffix_3\": \"k\",\r\n    \"_big_number_suffix_6\": \"M\",\r\n    \"_big_number_suffix_9\": \"G\",\r\n    \"_big_number_suffix_12\": \"T\",\r\n    \"_big_number_suffix_15\": \"P\",\r\n    \"_big_number_suffix_18\": \"E\",\r\n    \"_big_number_suffix_21\": \"Z\",\r\n    \"_big_number_suffix_24\": \"Y\",\r\n    \"_small_number_suffix_3\": \"m\",\r\n    \"_small_number_suffix_6\": \"μ\",\r\n    \"_small_number_suffix_9\": \"n\",\r\n    \"_small_number_suffix_12\": \"p\",\r\n    \"_small_number_suffix_15\": \"f\",\r\n    \"_small_number_suffix_18\": \"a\",\r\n    \"_small_number_suffix_21\": \"z\",\r\n    \"_small_number_suffix_24\": \"y\",\r\n    \"_byte_suffix_B\": \"B\",\r\n    \"_byte_suffix_KB\": \"KB\",\r\n    \"_byte_suffix_MB\": \"MB\",\r\n    \"_byte_suffix_GB\": \"GB\",\r\n    \"_byte_suffix_TB\": \"TB\",\r\n    \"_byte_suffix_PB\": \"PB\",\r\n    // Default date formats for various periods.\r\n    // \r\n    // This should reflect official or de facto formatting universally accepted\r\n    // in the country translation is being made for\r\n    // Available format codes here:\r\n    // https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/#Format_codes\r\n    // \r\n    // This will be used when formatting date/time for particular granularity,\r\n    // e.g. \"_date_hour\" will be shown whenever we need to show time as hours.\r\n    // \r\n    // \"date\" is used as in default date format when showing standalone dates.\r\n    \"_date\": \"yyyy-MM-dd\",\r\n    \"_date_millisecond\": \"mm:ss SSS\",\r\n    \"_date_millisecond_full\": \"HH:mm:ss SSS\",\r\n    \"_date_second\": \"HH:mm:ss\",\r\n    \"_date_second_full\": \"HH:mm:ss\",\r\n    \"_date_minute\": \"HH:mm\",\r\n    \"_date_minute_full\": \"HH:mm - MMM dd, yyyy\",\r\n    \"_date_hour\": \"HH:mm\",\r\n    \"_date_hour_short\": \"HH\",\r\n    \"_date_hour_full\": \"HH:mm - MMM dd, yyyy\",\r\n    \"_date_day\": \"MMM dd\",\r\n    \"_date_day_full\": \"MMM dd, yyyy\",\r\n    \"_date_week\": \"ww\",\r\n    \"_date_week_full\": \"MMM dd, yyyy\",\r\n    \"_date_month\": \"MMM\",\r\n    \"_date_month_full\": \"MMM, yyyy\",\r\n    \"_date_year\": \"yyyy\",\r\n    // Default duration formats for various base units.\r\n    // \r\n    // This will be used by DurationFormatter to format numeric values into\r\n    // duration.\r\n    // \r\n    // Notice how each duration unit comes in several versions. This is to ensure\r\n    // that each base unit is shown correctly.\r\n    // \r\n    // For example, if we have baseUnit set to \"second\", meaning our duration is\r\n    // in seconds.\r\n    // \r\n    // If we pass in `50` to formatter, it will know that we have just 50 seconds\r\n    // (less than a minute) so it will use format in `\"_duration_second\"` (\"ss\"),\r\n    // and the formatted result will be in like `\"50\"`.\r\n    // \r\n    // If we pass in `70`, which is more than a minute, the formatter will switch\r\n    // to `\"_duration_second_minute\"` (\"mm:ss\"), resulting in \"01:10\" formatted\r\n    // text.\r\n    // \r\n    // Available codes here:\r\n    // https://www.amcharts.com/docs/v4/concepts/formatters/formatting-duration/#Available_Codes\r\n    \"_duration_millisecond\": \"SSS\",\r\n    \"_duration_millisecond_second\": \"ss.SSS\",\r\n    \"_duration_millisecond_minute\": \"mm:ss SSS\",\r\n    \"_duration_millisecond_hour\": \"hh:mm:ss SSS\",\r\n    \"_duration_millisecond_day\": \"d'd' mm:ss SSS\",\r\n    \"_duration_millisecond_week\": \"d'd' mm:ss SSS\",\r\n    \"_duration_millisecond_month\": \"M'm' dd'd' mm:ss SSS\",\r\n    \"_duration_millisecond_year\": \"y'y' MM'm' dd'd' mm:ss SSS\",\r\n    \"_duration_second\": \"ss\",\r\n    \"_duration_second_minute\": \"mm:ss\",\r\n    \"_duration_second_hour\": \"hh:mm:ss\",\r\n    \"_duration_second_day\": \"d'd' hh:mm:ss\",\r\n    \"_duration_second_week\": \"d'd' hh:mm:ss\",\r\n    \"_duration_second_month\": \"M'm' dd'd' hh:mm:ss\",\r\n    \"_duration_second_year\": \"y'y' MM'm' dd'd' hh:mm:ss\",\r\n    \"_duration_minute\": \"mm\",\r\n    \"_duration_minute_hour\": \"hh:mm\",\r\n    \"_duration_minute_day\": \"d'd' hh:mm\",\r\n    \"_duration_minute_week\": \"d'd' hh:mm\",\r\n    \"_duration_minute_month\": \"M'm' dd'd' hh:mm\",\r\n    \"_duration_minute_year\": \"y'y' MM'm' dd'd' hh:mm\",\r\n    \"_duration_hour\": \"hh'h'\",\r\n    \"_duration_hour_day\": \"d'd' hh'h'\",\r\n    \"_duration_hour_week\": \"d'd' hh'h'\",\r\n    \"_duration_hour_month\": \"M'm' dd'd' hh'h'\",\r\n    \"_duration_hour_year\": \"y'y' MM'm' dd'd' hh'h'\",\r\n    \"_duration_day\": \"d'd'\",\r\n    \"_duration_day_week\": \"d'd'\",\r\n    \"_duration_day_month\": \"M'm' dd'd'\",\r\n    \"_duration_day_year\": \"y'y' MM'm' dd'd'\",\r\n    \"_duration_week\": \"w'w'\",\r\n    \"_duration_week_month\": \"w'w'\",\r\n    \"_duration_week_year\": \"w'w'\",\r\n    \"_duration_month\": \"M'm'\",\r\n    \"_duration_month_year\": \"y'y' MM'm'\",\r\n    \"_duration_year\": \"y'y'\",\r\n    // Era translations\r\n    \"_era_ad\": \"AD\",\r\n    \"_era_bc\": \"BC\",\r\n    // Day part, used in 12-hour formats, e.g. 5 P.M.\r\n    // Please note that these come in 3 variants:\r\n    // * one letter (e.g. \"A\")\r\n    // * two letters (e.g. \"AM\")\r\n    // * two letters with dots (e.g. \"A.M.\")\r\n    // \r\n    // All three need to to be translated even if they are all the same. Some\r\n    // users might use one, some the other.\r\n    \"A\": \"\",\r\n    \"P\": \"\",\r\n    \"AM\": \"\",\r\n    \"PM\": \"\",\r\n    \"A.M.\": \"\",\r\n    \"P.M.\": \"\",\r\n    // Date-related stuff.\r\n    // \r\n    // When translating months, if there's a difference, use the form which is\r\n    // best for a full date, e.g. as you would use it in \"2018 January 1\".\r\n    // \r\n    // Note that May is listed twice. This is because in English May is the same\r\n    // in both long and short forms, while in other languages it may not be the\r\n    // case. Translate \"May\" to full word, while \"May(short)\" to shortened\r\n    // version.\r\n    // \r\n    // Should month names and weekdays be capitalized or not?\r\n    // \r\n    // Rule of thumb is this: if the names should always be capitalized,\r\n    // regardless of name position within date (\"January\", \"21st January 2018\",\r\n    // etc.) use capitalized names. Otherwise enter all lowercase.\r\n    // \r\n    // The date formatter will automatically capitalize names if they are the\r\n    // first (or only) word in resulting date.\r\n    \"January\": \"\",\r\n    \"February\": \"\",\r\n    \"March\": \"\",\r\n    \"April\": \"\",\r\n    \"May\": \"\",\r\n    \"June\": \"\",\r\n    \"July\": \"\",\r\n    \"August\": \"\",\r\n    \"September\": \"\",\r\n    \"October\": \"\",\r\n    \"November\": \"\",\r\n    \"December\": \"\",\r\n    \"Jan\": \"\",\r\n    \"Feb\": \"\",\r\n    \"Mar\": \"\",\r\n    \"Apr\": \"\",\r\n    \"May(short)\": \"May\",\r\n    \"Jun\": \"\",\r\n    \"Jul\": \"\",\r\n    \"Aug\": \"\",\r\n    \"Sep\": \"\",\r\n    \"Oct\": \"\",\r\n    \"Nov\": \"\",\r\n    \"Dec\": \"\",\r\n    // Weekdays.\r\n    \"Sunday\": \"\",\r\n    \"Monday\": \"\",\r\n    \"Tuesday\": \"\",\r\n    \"Wednesday\": \"\",\r\n    \"Thursday\": \"\",\r\n    \"Friday\": \"\",\r\n    \"Saturday\": \"\",\r\n    \"Sun\": \"\",\r\n    \"Mon\": \"\",\r\n    \"Tue\": \"\",\r\n    \"Wed\": \"\",\r\n    \"Thu\": \"\",\r\n    \"Fri\": \"\",\r\n    \"Sat\": \"\",\r\n    // Date ordinal function.\r\n    // \r\n    // This is used when adding number ordinal when formatting days in dates.\r\n    // \r\n    // E.g. \"January 1st\", \"February 2nd\".\r\n    // \r\n    // The function accepts day number, and returns a string to be added to the\r\n    // day, like in default English translation, if we pass in 2, we will receive\r\n    // \"nd\" back.\r\n    \"_dateOrd\": function (day) {\r\n        let res = \"th\";\r\n        if ((day < 11) || (day > 13)) {\r\n            switch (day % 10) {\r\n                case 1:\r\n                    res = \"st\";\r\n                    break;\r\n                case 2:\r\n                    res = \"nd\";\r\n                    break;\r\n                case 3:\r\n                    res = \"rd\";\r\n                    break;\r\n            }\r\n        }\r\n        return res;\r\n    },\r\n    // Various chart controls.\r\n    // Shown as a tooltip on zoom out button.\r\n    \"Zoom Out\": \"\",\r\n    // Timeline buttons\r\n    \"Play\": \"\",\r\n    \"Stop\": \"\",\r\n    // Chart's Legend screen reader title.\r\n    \"Legend\": \"\",\r\n    // Legend's item screen reader indicator.\r\n    \"Press ENTER to toggle\": \"\",\r\n    // Shown when the chart is busy loading something.\r\n    \"Loading\": \"\",\r\n    // Shown as the first button in the breadcrumb navigation, e.g.:\r\n    // Home > First level > ...\r\n    \"Home\": \"\",\r\n    // Chart types.\r\n    // Those are used as default screen reader titles for the main chart element\r\n    // unless developer has set some more descriptive title.\r\n    \"Chart\": \"\",\r\n    \"Serial chart\": \"\",\r\n    \"X/Y chart\": \"\",\r\n    \"Pie chart\": \"\",\r\n    \"Gauge chart\": \"\",\r\n    \"Radar chart\": \"\",\r\n    \"Sankey diagram\": \"\",\r\n    \"Flow diagram\": \"\",\r\n    \"Chord diagram\": \"\",\r\n    \"TreeMap chart\": \"\",\r\n    \"Force directed tree\": \"\",\r\n    \"Sliced chart\": \"\",\r\n    // Series types.\r\n    // Used to name series by type for screen readers if they do not have their\r\n    // name set.\r\n    \"Series\": \"\",\r\n    \"Candlestick Series\": \"\",\r\n    \"OHLC Series\": \"\",\r\n    \"Column Series\": \"\",\r\n    \"Line Series\": \"\",\r\n    \"Pie Slice Series\": \"\",\r\n    \"Funnel Series\": \"\",\r\n    \"Pyramid Series\": \"\",\r\n    \"X/Y Series\": \"\",\r\n    // Map-related stuff.\r\n    \"Map\": \"\",\r\n    \"Press ENTER to zoom in\": \"\",\r\n    \"Press ENTER to zoom out\": \"\",\r\n    \"Use arrow keys to zoom in and out\": \"\",\r\n    \"Use plus and minus keys on your keyboard to zoom in and out\": \"\",\r\n    // Export-related stuff.\r\n    // These prompts are used in Export menu labels.\r\n    // \r\n    // \"Export\" is the top-level menu item.\r\n    // \r\n    // \"Image\", \"Data\", \"Print\" as second-level indicating type of export\r\n    // operation.\r\n    // \r\n    // Leave actual format untranslated, unless you absolutely know that they\r\n    // would convey more meaning in some other way.\r\n    \"Export\": \"\",\r\n    \"Image\": \"\",\r\n    \"Data\": \"\",\r\n    \"Print\": \"\",\r\n    \"Press ENTER or use arrow keys to navigate\": \"\",\r\n    \"Press ENTER to open\": \"\",\r\n    \"Press ENTER to print.\": \"\",\r\n    \"Press ENTER to export as %1.\": \"\",\r\n    \"(Press ESC to close this message)\": \"\",\r\n    \"Image Export Complete\": \"\",\r\n    \"Export operation took longer than expected. Something might have gone wrong.\": \"\",\r\n    \"Saved from\": \"\",\r\n    \"PNG\": \"\",\r\n    \"JPG\": \"\",\r\n    \"GIF\": \"\",\r\n    \"SVG\": \"\",\r\n    \"PDF\": \"\",\r\n    \"JSON\": \"\",\r\n    \"CSV\": \"\",\r\n    \"XLSX\": \"\",\r\n    \"HTML\": \"\",\r\n    // Scrollbar-related stuff.\r\n    // \r\n    // Scrollbar is a control which can zoom and pan the axes on the chart.\r\n    // \r\n    // Each scrollbar has two grips: left or right (for horizontal scrollbar) or\r\n    // upper and lower (for vertical one).\r\n    // \r\n    // Prompts change in relation to whether Scrollbar is vertical or horizontal.\r\n    // \r\n    // The final section is used to indicate the current range of selection.\r\n    \"Use TAB to select grip buttons or left and right arrows to change selection\": \"\",\r\n    \"Use left and right arrows to move selection\": \"\",\r\n    \"Use left and right arrows to move left selection\": \"\",\r\n    \"Use left and right arrows to move right selection\": \"\",\r\n    \"Use TAB select grip buttons or up and down arrows to change selection\": \"\",\r\n    \"Use up and down arrows to move selection\": \"\",\r\n    \"Use up and down arrows to move lower selection\": \"\",\r\n    \"Use up and down arrows to move upper selection\": \"\",\r\n    \"From %1 to %2\": \"\",\r\n    \"From %1\": \"\",\r\n    \"To %1\": \"\",\r\n    // Data loader-related.\r\n    \"No parser available for file: %1\": \"\",\r\n    \"Error parsing file: %1\": \"\",\r\n    \"Unable to load file: %1\": \"\",\r\n    \"Invalid date\": \"\",\r\n    // Common actions\r\n    \"Close\": \"\",\r\n    \"Minimize\": \"\",\r\n    \"Confirm\": \"\"\r\n};\r\n//# sourceMappingURL=en.js.map","import { Entity } from \"./Entity\";\r\nimport * as $array from \"./Array\";\r\nimport * as $object from \"./Object\";\r\nimport en from \"../../../locales/en\";\r\n;\r\n/**\r\n * Add localization functionality.\r\n */\r\nexport class Language extends Entity {\r\n    _setDefaults() {\r\n        this.setPrivate(\"defaultLocale\", en);\r\n        super._setDefaults();\r\n    }\r\n    /**\r\n     * Returns a prompt translation.\r\n     *\r\n     * @param   prompt   Prompt to translate\r\n     * @param   locale   Target locale\r\n     * @param   ...rest  Parameters\r\n     * @return           Translation\r\n     */\r\n    translate(prompt, locale, ...rest) {\r\n        // Get langauge\r\n        if (!locale) {\r\n            locale = this._root.locale || this.getPrivate(\"defaultLocale\");\r\n        }\r\n        // Init translation\r\n        let translation = prompt;\r\n        let value = locale[prompt];\r\n        // Try to look for the translation\r\n        if (value === null) {\r\n            translation = \"\";\r\n        }\r\n        else if (value != null) {\r\n            // It might be an empty string\r\n            if (value) {\r\n                translation = value;\r\n            }\r\n        }\r\n        else if (locale !== this.getPrivate(\"defaultLocale\")) {\r\n            // Try to look in default language\r\n            return this.translate(prompt, this.getPrivate(\"defaultLocale\"), ...rest);\r\n        }\r\n        // Replace %1, %2, etc params\r\n        if (rest.length) {\r\n            for (let len = rest.length, i = 0; i < len; ++i) {\r\n                translation = translation.split(\"%\" + (i + 1)).join(rest[i]);\r\n            }\r\n        }\r\n        // Return the translation\r\n        return translation;\r\n    }\r\n    /**\r\n     * Returns a prompt translation, including custom prompts.\r\n     *\r\n     * @param   prompt   Prompt to translate\r\n     * @param   locale   Target locale\r\n     * @param   ...rest  Parameters\r\n     * @return           Translation\r\n     */\r\n    translateAny(prompt, locale, ...rest) {\r\n        return this.translate(prompt, locale, ...rest);\r\n    }\r\n    /**\r\n     * Add a custom prompt to locale.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/locales/creating-translations/#Extending_locale_with_custom_prompts}\r\n     * @param  prompt       Source prompt\r\n     * @param  translation  Tanslation\r\n     * @param  locale       Target locale\r\n     */\r\n    setTranslationAny(prompt, translation, locale) {\r\n        const localeTarget = locale || this._root.locale;\r\n        localeTarget[prompt] = translation;\r\n    }\r\n    /**\r\n     * Add a batch of custom prompts.\r\n     *\r\n     * @since 5.3.3\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/locales/creating-translations/#Extending_locale_with_custom_prompts}\r\n     * @param  translations  Translations\r\n     * @param  locale        Target locale\r\n     */\r\n    setTranslationsAny(translations, locale) {\r\n        $object.each(translations, (key, val) => {\r\n            this.setTranslationAny(key, val, locale);\r\n        });\r\n    }\r\n    translateEmpty(prompt, locale, ...rest) {\r\n        let translation = this.translate(prompt, locale, ...rest);\r\n        return translation == prompt ? \"\" : translation;\r\n    }\r\n    translateFunc(prompt, locale) {\r\n        if (this._root.locale[prompt]) {\r\n            return this._root.locale[prompt];\r\n        }\r\n        // Try to look in default language\r\n        if (locale !== this.getPrivate(\"defaultLocale\")) {\r\n            return this.translateFunc(prompt, this.getPrivate(\"defaultLocale\"));\r\n        }\r\n        // Fail - return empty function\r\n        return () => {\r\n            return \"\";\r\n        };\r\n    }\r\n    /**\r\n     * Translates a btach of prompts.\r\n     *\r\n     * @param  list    Array of prompts to translate\r\n     * @param  locale  Target locale\r\n     * @return         Array of translations\r\n     */\r\n    translateAll(list, locale) {\r\n        // Translate all items in the list\r\n        if (!this.isDefault()) {\r\n            return $array.map(list, (x) => this.translate(x, locale));\r\n        }\r\n        else {\r\n            return list;\r\n        }\r\n    }\r\n    /**\r\n     * Returns `true` if the currently selected locale is a default locale.\r\n     *\r\n     * @return `true` if locale is default; `false` if it is not.\r\n     */\r\n    isDefault() {\r\n        return this.getPrivate(\"defaultLocale\") === this._root.locale;\r\n    }\r\n}\r\n//# sourceMappingURL=Language.js.map","import { Template } from \"./util/Template\";\r\nimport * as $order from \"./util/Order\";\r\nimport * as $array from \"./util/Array\";\r\n/**\r\n * A base class for an amCharts theme.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/themes/} for more info\r\n * @important\r\n */\r\nexport class Theme {\r\n    constructor(root, isReal) {\r\n        Object.defineProperty(this, \"_root\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_rules\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        this._root = root;\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n    }\r\n    /**\r\n     * Use this method to create an instance of this class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @param   root      Root element\r\n     * @param   settings  Settings\r\n     * @param   template  Template\r\n     * @return            Instantiated object\r\n     */\r\n    static new(root) {\r\n        const x = (new this(root, true));\r\n        x.setupDefaultRules();\r\n        return x;\r\n    }\r\n    setupDefaultRules() { }\r\n    /**\r\n     * Looks up the rules for a specific theme class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/themes/} for more info\r\n     * @param   themeClass Theme class\r\n     * @return             Array<IRule<A>>\r\n     */\r\n    _lookupRules(themeClass) {\r\n        return this._rules[themeClass];\r\n    }\r\n    /**\r\n     * Creates a [[Template]] for specific theme class and tags.\r\n     *\r\n     * NOTE: the difference from `rule()` is that `ruleRaw()` does not do any\r\n     * type checks.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/themes/} for more info\r\n     * @param   themeClass Theme class\r\n     * @param   themeTags  Theme tags\r\n     * @return             Template\r\n     */\r\n    ruleRaw(themeClass, themeTags = []) {\r\n        let rules = this._rules[themeClass];\r\n        if (!rules) {\r\n            rules = this._rules[themeClass] = [];\r\n        }\r\n        themeTags.sort($order.compare);\r\n        const { index, found } = $array.getSortedIndex(rules, (x) => {\r\n            const order = $order.compare(x.tags.length, themeTags.length);\r\n            if (order === 0) {\r\n                return $order.compareArray(x.tags, themeTags, $order.compare);\r\n            }\r\n            else {\r\n                return order;\r\n            }\r\n        });\r\n        if (found) {\r\n            return rules[index].template;\r\n        }\r\n        else {\r\n            const template = Template.new({});\r\n            rules.splice(index, 0, {\r\n                tags: themeTags,\r\n                template,\r\n            });\r\n            return template;\r\n        }\r\n    }\r\n    /**\r\n     * Creates a [[Template]] for specific theme class and tags.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/themes/} for more info\r\n     * @param   themeClass Theme class\r\n     * @param   themeTags  Theme tags\r\n     * @return             Template\r\n     */\r\n    rule(themeClass, themeTags = []) {\r\n        return this.ruleRaw(themeClass, themeTags);\r\n    }\r\n}\r\n//# sourceMappingURL=Theme.js.map","import { Theme } from \"../core/Theme\";\r\nimport { p100, p50, percent } from \"../core/util/Percent\";\r\nimport { color, Color } from \"../core/util/Color\";\r\nimport { GridLayout } from \"../core/render/GridLayout\";\r\nimport { Label } from \"../core/render/Label\";\r\nimport * as $ease from \"../core/util/Ease\";\r\n/**\r\n * @ignore\r\n */\r\nexport function setColor(rule, key, ic, name) {\r\n    // TODO this shouldn't use get, figure out a better way\r\n    rule.set(key, ic.get(name));\r\n    ic.on(name, (value) => {\r\n        rule.set(key, value);\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class DefaultTheme extends Theme {\r\n    setupDefaultRules() {\r\n        super.setupDefaultRules();\r\n        const language = this._root.language;\r\n        const ic = this._root.interfaceColors;\r\n        const horizontalLayout = this._root.horizontalLayout;\r\n        const verticalLayout = this._root.verticalLayout;\r\n        const r = this.rule.bind(this);\r\n        /**\r\n         * ========================================================================\r\n         * core\r\n         * ========================================================================\r\n         */\r\n        r(\"InterfaceColors\").setAll({\r\n            stroke: Color.fromHex(0xe5e5e5),\r\n            fill: Color.fromHex(0xf3f3f3),\r\n            primaryButton: Color.fromHex(0x6794dc),\r\n            primaryButtonHover: Color.fromHex(0x6771dc),\r\n            primaryButtonDown: Color.fromHex(0x68dc76),\r\n            primaryButtonActive: Color.fromHex(0x68dc76),\r\n            primaryButtonDisabled: Color.fromHex(0xdadada),\r\n            primaryButtonTextDisabled: Color.fromHex(0xffffff),\r\n            primaryButtonText: Color.fromHex(0xffffff),\r\n            primaryButtonStroke: Color.fromHex(0xffffff),\r\n            secondaryButton: Color.fromHex(0xd9d9d9),\r\n            secondaryButtonHover: Color.fromHex(0xa3a3a3),\r\n            secondaryButtonDown: Color.fromHex(0x8d8d8d),\r\n            secondaryButtonActive: Color.fromHex(0xe6e6e6),\r\n            secondaryButtonText: Color.fromHex(0x000000),\r\n            secondaryButtonStroke: Color.fromHex(0xffffff),\r\n            grid: Color.fromHex(0x000000),\r\n            background: Color.fromHex(0xffffff),\r\n            alternativeBackground: Color.fromHex(0x000000),\r\n            text: Color.fromHex(0x000000),\r\n            alternativeText: Color.fromHex(0xffffff),\r\n            disabled: Color.fromHex(0xadadad),\r\n            positive: Color.fromHex(0x50b300),\r\n            negative: Color.fromHex(0xb30000)\r\n        });\r\n        {\r\n            const rule = r(\"ColorSet\");\r\n            rule.setAll({\r\n                passOptions: {\r\n                    hue: 0.05,\r\n                    saturation: 0,\r\n                    lightness: 0\r\n                },\r\n                colors: [\r\n                    Color.fromHex(0x67b7dc)\r\n                ],\r\n                step: 1,\r\n                //baseColor: Color.fromRGB(103, 183, 220),\r\n                //count: 20,\r\n                reuse: false,\r\n                startIndex: 0\r\n            });\r\n            rule.setPrivate(\"currentStep\", 0);\r\n            rule.setPrivate(\"currentPass\", 0);\r\n        }\r\n        r(\"Entity\").setAll({\r\n            stateAnimationDuration: 0,\r\n            stateAnimationEasing: $ease.out($ease.cubic)\r\n        });\r\n        r(\"Component\").setAll({\r\n            interpolationDuration: 0,\r\n            interpolationEasing: $ease.out($ease.cubic)\r\n        });\r\n        r(\"Sprite\").setAll({\r\n            visible: true,\r\n            scale: 1,\r\n            opacity: 1,\r\n            rotation: 0,\r\n            position: \"relative\",\r\n            tooltipX: p50,\r\n            tooltipY: p50,\r\n            tooltipPosition: \"fixed\",\r\n            isMeasured: true\r\n        });\r\n        r(\"Sprite\").states.create(\"default\", { \"visible\": true, opacity: 1 });\r\n        r(\"Container\").setAll({\r\n            interactiveChildren: true,\r\n            setStateOnChildren: false\r\n        });\r\n        r(\"Graphics\").setAll({\r\n            strokeWidth: 1\r\n        });\r\n        r(\"Chart\").setAll({\r\n            width: p100,\r\n            height: p100,\r\n            interactiveChildren: false\r\n        });\r\n        r(\"ZoomableContainer\").setAll({\r\n            width: p100,\r\n            height: p100,\r\n            wheelable: true,\r\n            pinchZoom: true,\r\n            maxZoomLevel: 32,\r\n            minZoomLevel: 1,\r\n            zoomStep: 2,\r\n            animationEasing: $ease.out($ease.cubic),\r\n            animationDuration: 600,\r\n            maxPanOut: 0.4\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: alignment\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Sprite\", [\"horizontal\", \"center\"]).setAll({\r\n            centerX: p50,\r\n            x: p50\r\n        });\r\n        r(\"Sprite\", [\"vertical\", \"center\"]).setAll({\r\n            centerY: p50,\r\n            y: p50\r\n        });\r\n        r(\"Container\", [\"horizontal\", \"layout\"]).setAll({\r\n            layout: horizontalLayout\r\n        });\r\n        r(\"Container\", [\"vertical\", \"layout\"]).setAll({\r\n            layout: verticalLayout\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: patterns\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Pattern\").setAll({\r\n            repetition: \"repeat\",\r\n            width: 50,\r\n            height: 50,\r\n            rotation: 0,\r\n            fillOpacity: 1\r\n        });\r\n        r(\"LinePattern\").setAll({\r\n            gap: 6,\r\n            colorOpacity: 1,\r\n            width: 49,\r\n            height: 49\r\n        });\r\n        r(\"RectanglePattern\").setAll({\r\n            gap: 6,\r\n            checkered: false,\r\n            centered: true,\r\n            maxWidth: 5,\r\n            maxHeight: 5,\r\n            width: 48,\r\n            height: 48,\r\n            strokeWidth: 0\r\n        });\r\n        r(\"CirclePattern\").setAll({\r\n            gap: 5,\r\n            checkered: false,\r\n            centered: false,\r\n            radius: 3,\r\n            strokeWidth: 0,\r\n            width: 45,\r\n            height: 45\r\n        });\r\n        r(\"GrainPattern\").setAll({\r\n            width: 200,\r\n            height: 200,\r\n            colors: [Color.fromHex(0x000000)],\r\n            size: 1,\r\n            horizontalGap: 0,\r\n            verticalGap: 0,\r\n            density: 1,\r\n            minOpacity: 0,\r\n            maxOpacity: 0.2\r\n        });\r\n        {\r\n            const rule = r(\"PatternSet\");\r\n            rule.setAll({\r\n                step: 1\r\n            });\r\n            setColor(rule, \"color\", ic, \"stroke\");\r\n        }\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: gradients\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"LinearGradient\").setAll({\r\n            rotation: 90\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: Legend\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Legend\").setAll({\r\n            fillField: \"fill\",\r\n            strokeField: \"stroke\",\r\n            nameField: \"name\",\r\n            layout: GridLayout.new(this._root, {}),\r\n            layer: 30,\r\n            clickTarget: \"itemContainer\"\r\n        });\r\n        // Class: Container\r\n        r(\"Container\", [\"legend\", \"item\", \"itemcontainer\"]).setAll({\r\n            paddingLeft: 5,\r\n            paddingRight: 5,\r\n            paddingBottom: 5,\r\n            paddingTop: 5,\r\n            layout: horizontalLayout,\r\n            setStateOnChildren: true,\r\n            interactiveChildren: false,\r\n            ariaChecked: true,\r\n            focusable: true,\r\n            ariaLabel: language.translate(\"Press ENTER to toggle\"),\r\n            role: \"checkbox\"\r\n        });\r\n        {\r\n            const rule = r(\"Rectangle\", [\"legend\", \"item\", \"background\"]);\r\n            rule.setAll({\r\n                fillOpacity: 0,\r\n            });\r\n            setColor(rule, \"fill\", ic, \"background\");\r\n        }\r\n        r(\"Container\", [\"legend\", \"marker\"]).setAll({\r\n            setStateOnChildren: true,\r\n            centerY: p50,\r\n            paddingLeft: 0,\r\n            paddingRight: 0,\r\n            paddingBottom: 0,\r\n            paddingTop: 0,\r\n            width: 18,\r\n            height: 18\r\n        });\r\n        r(\"RoundedRectangle\", [\"legend\", \"marker\", \"rectangle\"]).setAll({\r\n            width: p100,\r\n            height: p100,\r\n            cornerRadiusBL: 3,\r\n            cornerRadiusTL: 3,\r\n            cornerRadiusBR: 3,\r\n            cornerRadiusTR: 3\r\n        });\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"legend\", \"marker\", \"rectangle\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"fill\", ic, \"disabled\");\r\n            setColor(rule, \"stroke\", ic, \"disabled\");\r\n        }\r\n        r(\"Label\", [\"legend\", \"label\"]).setAll({\r\n            centerY: p50,\r\n            marginLeft: 5,\r\n            paddingRight: 0,\r\n            paddingLeft: 0,\r\n            paddingTop: 0,\r\n            paddingBottom: 0,\r\n            populateText: true\r\n        });\r\n        {\r\n            const rule = r(\"Label\", [\"legend\", \"label\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"fill\", ic, \"disabled\");\r\n        }\r\n        r(\"Label\", [\"legend\", \"value\", \"label\"]).setAll({\r\n            centerY: p50,\r\n            marginLeft: 5,\r\n            paddingRight: 0,\r\n            paddingLeft: 0,\r\n            paddingTop: 0,\r\n            paddingBottom: 0,\r\n            width: 50,\r\n            centerX: p100,\r\n            populateText: true\r\n        });\r\n        {\r\n            const rule = r(\"Label\", [\"legend\", \"value\", \"label\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"fill\", ic, \"disabled\");\r\n        }\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: HeatLegend\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"HeatLegend\").setAll({\r\n            stepCount: 1\r\n        });\r\n        r(\"RoundedRectangle\", [\"heatlegend\", \"marker\"]).setAll({\r\n            cornerRadiusTR: 0,\r\n            cornerRadiusBR: 0,\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusBL: 0\r\n        });\r\n        r(\"RoundedRectangle\", [\"vertical\", \"heatlegend\", \"marker\"]).setAll({\r\n            height: p100,\r\n            width: 15\r\n        });\r\n        r(\"RoundedRectangle\", [\"horizontal\", \"heatlegend\", \"marker\"]).setAll({\r\n            width: p100,\r\n            height: 15\r\n        });\r\n        r(\"HeatLegend\", [\"vertical\"]).setAll({\r\n            height: p100\r\n        });\r\n        r(\"HeatLegend\", [\"horizontal\"]).setAll({\r\n            width: p100\r\n        });\r\n        r(\"Label\", [\"heatlegend\", \"start\"]).setAll({\r\n            paddingLeft: 5,\r\n            paddingRight: 5,\r\n            paddingTop: 5,\r\n            paddingBottom: 5\r\n        });\r\n        r(\"Label\", [\"heatlegend\", \"end\"]).setAll({\r\n            paddingLeft: 5,\r\n            paddingRight: 5,\r\n            paddingTop: 5,\r\n            paddingBottom: 5\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: Labels\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        {\r\n            const rule = r(\"Label\");\r\n            rule.setAll({\r\n                paddingTop: 8,\r\n                paddingBottom: 8,\r\n                paddingLeft: 10,\r\n                paddingRight: 10,\r\n                fontFamily: \"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\",\r\n                fontSize: \"1em\",\r\n                populateText: false\r\n            });\r\n            setColor(rule, \"fill\", ic, \"text\");\r\n        }\r\n        r(\"RadialLabel\").setAll({\r\n            textType: \"regular\",\r\n            centerY: p50,\r\n            centerX: p50,\r\n            inside: false,\r\n            radius: 0,\r\n            baseRadius: p100,\r\n            orientation: \"auto\",\r\n            textAlign: \"center\"\r\n        });\r\n        r(\"EditableLabel\").setAll({\r\n            editOn: \"click\",\r\n            //setStateOnChildren: true,\r\n            themeTags: [\"editablelabel\"],\r\n            multiLine: true\r\n        });\r\n        r(\"RoundedRectangle\", [\"editablelabel\", \"background\"]).setAll({\r\n            fillOpacity: 0,\r\n            fill: Color.fromHex(0x000000),\r\n            cornerRadiusBL: 3,\r\n            cornerRadiusBR: 3,\r\n            cornerRadiusTL: 3,\r\n            cornerRadiusTR: 3,\r\n            strokeOpacity: 0,\r\n            stroke: Color.fromHex(0x000000)\r\n        });\r\n        {\r\n            r(\"RoundedRectangle\", [\"editablelabel\", \"background\"]).states.create(\"active\", {\r\n                strokeOpacity: 0.2,\r\n            });\r\n        }\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: Elements and shapes\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"RoundedRectangle\").setAll({\r\n            cornerRadiusTL: 8,\r\n            cornerRadiusBL: 8,\r\n            cornerRadiusTR: 8,\r\n            cornerRadiusBR: 8\r\n        });\r\n        r(\"PointedRectangle\").setAll({\r\n            pointerBaseWidth: 15,\r\n            pointerLength: 10,\r\n            cornerRadius: 8\r\n        });\r\n        r(\"Slice\").setAll({\r\n            shiftRadius: 0,\r\n            dRadius: 0,\r\n            dInnerRadius: 0\r\n        });\r\n        {\r\n            const rule = r(\"Tick\");\r\n            rule.setAll({\r\n                strokeOpacity: .15,\r\n                isMeasured: false,\r\n                length: 4.5,\r\n                position: \"absolute\",\r\n                crisp: true\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n        }\r\n        r(\"Bullet\").setAll({\r\n            locationX: 0.5,\r\n            locationY: 0.5\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: Tooltip\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Tooltip\").setAll({\r\n            position: \"absolute\",\r\n            getFillFromSprite: true,\r\n            getStrokeFromSprite: false,\r\n            autoTextColor: true,\r\n            paddingTop: 9,\r\n            paddingBottom: 8,\r\n            paddingLeft: 10,\r\n            paddingRight: 10,\r\n            marginBottom: 5,\r\n            pointerOrientation: \"vertical\",\r\n            centerX: p50,\r\n            centerY: p50,\r\n            animationEasing: $ease.out($ease.cubic),\r\n            exportable: false\r\n            //layer: 100\r\n        });\r\n        // system tooltip\r\n        r(\"Tooltip\", [\"system\"]).setAll({\r\n            pointerOrientation: \"horizontal\",\r\n            paddingTop: 4,\r\n            paddingRight: 7,\r\n            paddingBottom: 4,\r\n            paddingLeft: 7\r\n        });\r\n        {\r\n            const rule = r(\"PointedRectangle\", [\"tooltip\", \"system\", \"background\"]);\r\n            rule.setAll({\r\n                strokeOpacity: 0.3\r\n            });\r\n            setColor(rule, \"fill\", ic, \"background\");\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n        }\r\n        r(\"Label\", [\"tooltip\", \"system\"]).setAll({\r\n            fontSize: 12,\r\n            fill: ic.get(\"background\")\r\n        });\r\n        r(\"Polygon\").setAll({\r\n            animationEasing: $ease.out($ease.cubic),\r\n        });\r\n        r(\"Link\").setAll({\r\n            cornerRadius: 8,\r\n            setStateOnChildren: true\r\n        });\r\n        {\r\n            const rule = r(\"OrthogonalLine\", [\"link\", \"line\"]);\r\n            rule.setAll({\r\n                isMeasured: false,\r\n                crisp: true\r\n            });\r\n            const stateActive = rule.states.create(\"active\", {\r\n                strokeWidth: 2\r\n            });\r\n            setColor(stateActive, \"stroke\", ic, \"negative\");\r\n        }\r\n        r(\"OrthogonalLine\", [\"link\", \"hit\"]).setAll({\r\n            strokeWidth: 10,\r\n            opacity: 0,\r\n            strokeOpacity: 0\r\n        });\r\n        {\r\n            const rule = r(\"OrthogonalLine\");\r\n            rule.setAll({\r\n                strokeWidth: 1,\r\n                strokeOpacity: 1,\r\n                cornerRadius: 10\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n        }\r\n        {\r\n            const rule = r(\"Triangle\", [\"link\"]);\r\n            rule.setAll({\r\n                width: 14,\r\n                height: 10,\r\n                centerY: 0\r\n            });\r\n            setColor(rule, \"fill\", ic, \"grid\");\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n            rule.states.create(\"default\", {\r\n                stateAnimationDuration: 0\r\n            });\r\n            const state = rule.states.create(\"active\", {\r\n                stateAnimationDuration: 0,\r\n                stroke: color(0xffffff),\r\n                strokeWidth: 2\r\n            });\r\n            // draw circle and x inside\r\n            state.set(\"draw\", (display) => {\r\n                display.arc(0, 0, 11, 0, Math.PI * 2);\r\n                display.moveTo(-4, -4);\r\n                display.lineTo(4, 4);\r\n                display.moveTo(4, -4);\r\n                display.lineTo(-4, 4);\r\n            });\r\n            setColor(state, \"fill\", ic, \"negative\");\r\n        }\r\n        {\r\n            const rule = r(\"PointedRectangle\", [\"tooltip\", \"background\"]);\r\n            rule.setAll({\r\n                strokeOpacity: 0.9,\r\n                cornerRadius: 4,\r\n                pointerLength: 4,\r\n                pointerBaseWidth: 8,\r\n                fillOpacity: 0.9,\r\n                stroke: Color.fromHex(0xffffff)\r\n            });\r\n        }\r\n        {\r\n            const rule = r(\"Label\", [\"tooltip\"]);\r\n            rule.setAll({\r\n                role: \"tooltip\",\r\n                populateText: true,\r\n                paddingRight: 0,\r\n                paddingTop: 0,\r\n                paddingLeft: 0,\r\n                paddingBottom: 0\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeText\");\r\n        }\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: Button\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Button\").setAll({\r\n            paddingTop: 8,\r\n            paddingBottom: 8,\r\n            paddingLeft: 10,\r\n            paddingRight: 10,\r\n            interactive: true,\r\n            layout: horizontalLayout,\r\n            interactiveChildren: false,\r\n            setStateOnChildren: true,\r\n            focusable: true\r\n        });\r\n        r(\"Button\").states.create(\"hover\", {});\r\n        r(\"Button\").states.create(\"down\", { stateAnimationDuration: 0 });\r\n        r(\"Button\").states.create(\"active\", {});\r\n        r(\"Button\").states.create(\"disabled\", {\r\n            forceInactive: true\r\n        });\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"button\", \"background\"]);\r\n            setColor(rule, \"fill\", ic, \"primaryButton\");\r\n            setColor(rule, \"stroke\", ic, \"primaryButtonStroke\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"button\", \"background\"]).states.create(\"hover\", {});\r\n            setColor(rule, \"fill\", ic, \"primaryButtonHover\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"button\", \"background\"]).states.create(\"down\", { stateAnimationDuration: 0 });\r\n            setColor(rule, \"fill\", ic, \"primaryButtonDown\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"button\", \"background\"]).states.create(\"active\", {});\r\n            setColor(rule, \"fill\", ic, \"primaryButtonActive\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"button\", \"background\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"fill\", ic, \"primaryButtonDisabled\");\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"button\", \"icon\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"fill\", ic, \"primaryButtonTextDisabled\");\r\n        }\r\n        {\r\n            const rule = r(\"Label\", [\"button\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"fill\", ic, \"primaryButtonTextDisabled\");\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"button\", \"icon\"]);\r\n            rule.setAll({\r\n                forceInactive: true\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"primaryButtonText\");\r\n        }\r\n        {\r\n            const rule = r(\"Label\", [\"button\"]);\r\n            setColor(rule, \"fill\", ic, \"primaryButtonText\");\r\n        }\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * ConfirmButton\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"ConfirmButton\").setAll({\r\n            toggleKey: \"active\",\r\n            setStateOnChildren: true,\r\n            label: Label.new(this._root, {\r\n                text: language.translate(\"Confirm\"),\r\n                forceHidden: true\r\n            })\r\n        });\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"button\", \"background\", \"confirm\"]).states.create(\"active\", {});\r\n            setColor(rule, \"fill\", ic, \"negative\");\r\n        }\r\n        r(\"Label\", [\"button\", \"confirm\"]).setAll({\r\n            paddingTop: 0,\r\n            paddingBottom: 0,\r\n            paddingRight: 3,\r\n            paddingLeft: 5\r\n        });\r\n        r(\"Label\", [\"button\", \"confirm\"]).states.create(\"default\", {\r\n            stateAnimationDuration: 0\r\n        });\r\n        r(\"Label\", [\"button\", \"confirm\"]).states.create(\"active\", {\r\n            forceHidden: false,\r\n            stateAnimationDuration: 0\r\n        });\r\n        {\r\n            const rule = r(\"Graphics\", [\"icon\", \"confirm\", \"button\"]);\r\n            rule.setAll({\r\n                stateAnimationDuration: 0\r\n            });\r\n            rule.states.create(\"default\", {\r\n                stateAnimationDuration: 0\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"primaryButtonText\");\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"icon\", \"confirm\", \"button\"]).states.create(\"active\", {\r\n                svgPath: \"M -5 1 L 0 6 L 8 -5\",\r\n                strokeWidth: 2\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"primaryButtonText\");\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"icon\", \"confirm\", \"button\", \"secondary\"]).states.create(\"active\", {});\r\n            setColor(rule, \"stroke\", ic, \"primaryButtonText\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"button\", \"background\", \"confirm\", \"secondary\"]).states.create(\"active\", {\r\n                fillOpacity: 1\r\n            });\r\n            setColor(rule, \"fill\", ic, \"negative\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"button\", \"background\", \"confirm\", \"secondary\"]).states.create(\"hoverActive\", {\r\n                fillOpacity: 1\r\n            });\r\n            setColor(rule, \"fill\", ic, \"negative\");\r\n        }\r\n        // required\r\n        r(\"Button\", [\"button\", \"confirm\"]).states.create(\"hoverActive\", {});\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * charts/xy: ZoomOutButton\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Button\", [\"zoom\"]).setAll({\r\n            paddingTop: 18,\r\n            paddingBottom: 18,\r\n            paddingLeft: 12,\r\n            paddingRight: 12,\r\n            centerX: 46,\r\n            centerY: -10,\r\n            y: 0,\r\n            x: p100,\r\n            role: \"button\",\r\n            ariaLabel: language.translate(\"Zoom Out\"),\r\n            layer: 30\r\n        });\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"background\", \"button\", \"zoom\"]);\r\n            rule.setAll({\r\n                cornerRadiusBL: 40,\r\n                cornerRadiusBR: 40,\r\n                cornerRadiusTL: 40,\r\n                cornerRadiusTR: 40\r\n            });\r\n            setColor(rule, \"fill\", ic, \"primaryButton\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"background\", \"button\", \"zoom\"]).states.create(\"hover\", {});\r\n            setColor(rule, \"fill\", ic, \"primaryButtonHover\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"background\", \"button\", \"zoom\"]).states.create(\"down\", { stateAnimationDuration: 0 });\r\n            setColor(rule, \"fill\", ic, \"primaryButtonDown\");\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"icon\", \"button\", \"zoom\"]);\r\n            rule.setAll({\r\n                crisp: true,\r\n                strokeOpacity: 0.7,\r\n                draw: (display) => {\r\n                    display.moveTo(0, 0);\r\n                    display.lineTo(12, 0);\r\n                }\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"primaryButtonText\");\r\n        }\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: ResizeButton\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Button\", [\"resize\"]).setAll({\r\n            paddingTop: 9,\r\n            paddingBottom: 9,\r\n            paddingLeft: 13,\r\n            paddingRight: 13,\r\n            draggable: true,\r\n            centerX: p50,\r\n            centerY: p50,\r\n            position: \"absolute\",\r\n            role: \"slider\",\r\n            ariaValueMin: \"0\",\r\n            ariaValueMax: \"100\",\r\n            ariaLabel: language.translate(\"Use up and down arrows to move selection\")\r\n        });\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"background\", \"resize\", \"button\"]);\r\n            rule.setAll({\r\n                cornerRadiusBL: 40,\r\n                cornerRadiusBR: 40,\r\n                cornerRadiusTL: 40,\r\n                cornerRadiusTR: 40\r\n            });\r\n            setColor(rule, \"fill\", ic, \"secondaryButton\");\r\n            setColor(rule, \"stroke\", ic, \"secondaryButtonStroke\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"background\", \"resize\", \"button\"]).states.create(\"hover\", {});\r\n            setColor(rule, \"fill\", ic, \"secondaryButtonHover\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"background\", \"resize\", \"button\"]).states.create(\"down\", { stateAnimationDuration: 0 });\r\n            setColor(rule, \"fill\", ic, \"secondaryButtonDown\");\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"resize\", \"button\", \"icon\"]);\r\n            rule.setAll({\r\n                interactive: false,\r\n                crisp: true,\r\n                strokeOpacity: 0.5,\r\n                draw: (display) => {\r\n                    display.moveTo(0, 0.5);\r\n                    display.lineTo(0, 12.5);\r\n                    display.moveTo(4, 0.5);\r\n                    display.lineTo(4, 12.5);\r\n                }\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"secondaryButtonText\");\r\n        }\r\n        r(\"Button\", [\"resize\", \"vertical\"]).setAll({\r\n            rotation: 90,\r\n            cursorOverStyle: \"ns-resize\"\r\n        });\r\n        r(\"Button\", [\"resize\", \"horizontal\"]).setAll({\r\n            cursorOverStyle: \"ew-resize\"\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: PlayButton\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Button\", [\"play\"]).setAll({\r\n            paddingTop: 13,\r\n            paddingBottom: 13,\r\n            paddingLeft: 14,\r\n            paddingRight: 14,\r\n            ariaLabel: language.translate(\"Play\"),\r\n            toggleKey: \"active\"\r\n        });\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"play\", \"background\"]);\r\n            rule.setAll({\r\n                strokeOpacity: 0.5,\r\n                cornerRadiusBL: 100,\r\n                cornerRadiusBR: 100,\r\n                cornerRadiusTL: 100,\r\n                cornerRadiusTR: 100\r\n            });\r\n            setColor(rule, \"fill\", ic, \"primaryButton\");\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"play\", \"icon\"]);\r\n            rule.setAll({\r\n                stateAnimationDuration: 0,\r\n                dx: 1,\r\n                draw: (display) => {\r\n                    display.moveTo(0, -5);\r\n                    display.lineTo(8, 0);\r\n                    display.lineTo(0, 5);\r\n                    display.lineTo(0, -5);\r\n                }\r\n            });\r\n            setColor(rule, \"fill\", ic, \"primaryButtonText\");\r\n        }\r\n        r(\"Graphics\", [\"play\", \"icon\"]).states.create(\"default\", {\r\n            stateAnimationDuration: 0\r\n        });\r\n        r(\"Graphics\", [\"play\", \"icon\"]).states.create(\"active\", {\r\n            stateAnimationDuration: 0,\r\n            draw: (display) => {\r\n                display.moveTo(-4, -5);\r\n                display.lineTo(-1, -5);\r\n                display.lineTo(-1, 5);\r\n                display.lineTo(-4, 5);\r\n                display.lineTo(-4, -5);\r\n                display.moveTo(4, -5);\r\n                display.lineTo(1, -5);\r\n                display.lineTo(1, 5);\r\n                display.lineTo(4, 5);\r\n                display.lineTo(4, -5);\r\n            }\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: SwitchButton\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Button\", [\"switch\"]).setAll({\r\n            paddingTop: 4,\r\n            paddingBottom: 4,\r\n            paddingLeft: 4,\r\n            paddingRight: 4,\r\n            ariaLabel: language.translate(\"Press ENTER to toggle\"),\r\n            toggleKey: \"active\",\r\n            width: 40,\r\n            height: 24,\r\n            layout: null\r\n        });\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"switch\", \"background\"]);\r\n            rule.setAll({\r\n                strokeOpacity: 0.5,\r\n                cornerRadiusBL: 100,\r\n                cornerRadiusBR: 100,\r\n                cornerRadiusTL: 100,\r\n                cornerRadiusTR: 100\r\n            });\r\n            setColor(rule, \"fill\", ic, \"primaryButton\");\r\n        }\r\n        {\r\n            const rule = r(\"Circle\", [\"switch\", \"icon\"]);\r\n            rule.setAll({\r\n                radius: 8,\r\n                centerY: 0,\r\n                centerX: 0,\r\n                dx: 0\r\n            });\r\n            setColor(rule, \"fill\", ic, \"primaryButtonText\");\r\n        }\r\n        r(\"Graphics\", [\"switch\", \"icon\"]).states.create(\"active\", {\r\n            dx: 16\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * core: Scrollbar\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Scrollbar\").setAll({\r\n            start: 0,\r\n            end: 1,\r\n            layer: 30,\r\n            animationEasing: $ease.out($ease.cubic)\r\n        });\r\n        r(\"Scrollbar\", [\"vertical\"]).setAll({\r\n            marginRight: 13,\r\n            marginLeft: 13,\r\n            minWidth: 12,\r\n            height: p100\r\n        });\r\n        r(\"Scrollbar\", [\"horizontal\"]).setAll({\r\n            marginTop: 13,\r\n            marginBottom: 13,\r\n            minHeight: 12,\r\n            width: p100\r\n        });\r\n        this.rule(\"Button\", [\"scrollbar\"]).setAll({\r\n            exportable: false\r\n        });\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"scrollbar\", \"main\", \"background\"]);\r\n            rule.setAll({\r\n                cornerRadiusTL: 8,\r\n                cornerRadiusBL: 8,\r\n                cornerRadiusTR: 8,\r\n                cornerRadiusBR: 8,\r\n                fillOpacity: 0.8,\r\n            });\r\n            setColor(rule, \"fill\", ic, \"fill\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"scrollbar\", \"thumb\"]);\r\n            rule.setAll({\r\n                role: \"slider\",\r\n                ariaLive: \"polite\",\r\n                position: \"absolute\",\r\n                draggable: true\r\n            });\r\n            setColor(rule, \"fill\", ic, \"secondaryButton\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"scrollbar\", \"thumb\"]).states.create(\"hover\", {});\r\n            setColor(rule, \"fill\", ic, \"secondaryButtonHover\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"scrollbar\", \"thumb\"]).states.create(\"down\", { stateAnimationDuration: 0 });\r\n            setColor(rule, \"fill\", ic, \"secondaryButtonDown\");\r\n        }\r\n        r(\"RoundedRectangle\", [\"scrollbar\", \"thumb\", \"vertical\"]).setAll({\r\n            x: p50,\r\n            width: p100,\r\n            centerX: p50,\r\n            ariaLabel: language.translate(\"Use up and down arrows to move selection\")\r\n        });\r\n        r(\"RoundedRectangle\", [\"scrollbar\", \"thumb\", \"horizontal\"]).setAll({\r\n            y: p50,\r\n            centerY: p50,\r\n            height: p100,\r\n            ariaLabel: language.translate(\"Use left and right arrows to move selection\")\r\n        });\r\n        // @todo: is this needed? used to be \"ContentScrollbar\"\r\n        // r(\"Scrollbar\", [\"content?\"]).setAll({\r\n        // \tmarginRight: 0,\r\n        // \tmarginLeft: 5,\r\n        // \tlayer: 5\r\n        // });\r\n        /**\r\n         * ========================================================================\r\n         * charts/xy\r\n         * ========================================================================\r\n         *\r\n         * This needs to be in DefaultTheme because it's the only theme that is\r\n         * automatically applied to Root, and tooltips different ancestors\r\n         * than actual charts using them.\r\n         */\r\n        {\r\n            const rule = r(\"PointedRectangle\", [\"axis\", \"tooltip\", \"background\"]);\r\n            rule.setAll({\r\n                cornerRadius: 0\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n        }\r\n        r(\"Label\", [\"axis\", \"tooltip\"]).setAll({\r\n            role: undefined\r\n        });\r\n        r(\"Label\", [\"axis\", \"tooltip\", \"y\"]).setAll({\r\n            textAlign: \"right\"\r\n        });\r\n        r(\"Label\", [\"axis\", \"tooltip\", \"y\", \"opposite\"]).setAll({\r\n            textAlign: \"left\"\r\n        });\r\n        r(\"Label\", [\"axis\", \"tooltip\", \"x\"]).setAll({\r\n            textAlign: \"center\"\r\n        });\r\n        r(\"Tooltip\", [\"categoryaxis\"]).setAll({\r\n            labelText: \"{category}\"\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * Shapes\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        // Class: Graphics\r\n        r(\"Star\").setAll({\r\n            spikes: 5,\r\n            innerRadius: 5,\r\n            radius: 10\r\n        });\r\n        // STOCK\r\n        r(\"Tooltip\", [\"stock\"]).setAll({\r\n            paddingTop: 6,\r\n            paddingBottom: 5,\r\n            paddingLeft: 7,\r\n            paddingRight: 7\r\n        });\r\n        r(\"Tooltip\", ['indicator']).setAll({\r\n            forceHidden: true\r\n        });\r\n        r(\"PointedRectangle\", [\"tooltip\", \"stock\", \"axis\"]).setAll({\r\n            pointerLength: 0,\r\n            pointerBaseWidth: 0,\r\n            cornerRadius: 3\r\n        });\r\n        r(\"Label\", [\"tooltip\", \"stock\"]).setAll({\r\n            fontSize: \"0.8em\"\r\n        });\r\n        // resizer\r\n        r(\"SpriteResizer\").setAll({\r\n            rotationStep: 10,\r\n            isMeasured: false\r\n        });\r\n        {\r\n            const rule = r(\"Container\", [\"resizer\", \"grip\"]);\r\n            rule.states.create(\"hover\", {});\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"resizer\", \"grip\"]);\r\n            rule.setAll({\r\n                strokeOpacity: 0.7,\r\n                strokeWidth: 1,\r\n                fillOpacity: 1,\r\n                width: 12,\r\n                height: 12\r\n            });\r\n            setColor(rule, \"fill\", ic, \"background\");\r\n            setColor(rule, \"stroke\", ic, \"alternativeBackground\");\r\n        }\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"resizer\", \"grip\", \"outline\"]);\r\n            rule.setAll({\r\n                strokeOpacity: 0,\r\n                fillOpacity: 0,\r\n                width: 20,\r\n                height: 20\r\n            });\r\n            rule.states.create(\"hover\", {\r\n                fillOpacity: 0.3\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n        }\r\n        r(\"RoundedRectangle\", [\"resizer\", \"grip\", \"left\"]).setAll({\r\n            cornerRadiusBL: 0,\r\n            cornerRadiusBR: 0,\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusTR: 0\r\n        });\r\n        r(\"RoundedRectangle\", [\"resizer\", \"grip\", \"right\"]).setAll({\r\n            cornerRadiusBL: 0,\r\n            cornerRadiusBR: 0,\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusTR: 0\r\n        });\r\n        {\r\n            const rule = r(\"Rectangle\", [\"resizer\", \"rectangle\"]);\r\n            rule.setAll({\r\n                strokeDasharray: [2, 2],\r\n                strokeOpacity: 0.5,\r\n                strokeWidth: 1\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"alternativeBackground\");\r\n        }\r\n        r(\"Graphics\", [\"button\", \"plus\", \"icon\"]).setAll({\r\n            x: p50,\r\n            y: p50,\r\n            draw: (display) => {\r\n                display.moveTo(-4, 0);\r\n                display.lineTo(4, 0);\r\n                display.moveTo(0, -4);\r\n                display.lineTo(0, 4);\r\n            }\r\n        });\r\n        r(\"Graphics\", [\"button\", \"minus\", \"icon\"]).setAll({\r\n            x: p50,\r\n            y: p50,\r\n            draw: (display) => {\r\n                display.moveTo(-4, 0);\r\n                display.lineTo(4, 0);\r\n            }\r\n        });\r\n        r(\"Graphics\", [\"button\", \"home\", \"icon\"]).setAll({\r\n            x: p50,\r\n            y: p50,\r\n            svgPath: \"M 8 -1 L 6 -1 L 6 7 L 2 7 L 2 1 L -2 1 L -2 7 L -6 7 L -6 -1 L -8 -1 L 0 -9 L 8 -1 Z M 8 -1\"\r\n        });\r\n        r(\"Button\", [\"zoomtools\"]).setAll({\r\n            marginTop: 1,\r\n            marginBottom: 2\r\n        });\r\n        r(\"ZoomTools\").setAll({\r\n            x: p100,\r\n            centerX: p100,\r\n            y: p100,\r\n            centerY: p100,\r\n            paddingRight: 10,\r\n            paddingBottom: 10\r\n        });\r\n        // Progress pie\r\n        r(\"ProgressPie\").setAll({\r\n            radius: p100,\r\n            width: 50,\r\n            height: 50,\r\n            centerX: percent(-50),\r\n            centerY: percent(-50),\r\n            innerRadius: percent(85),\r\n            numberFormat: \"#.\"\r\n        });\r\n        {\r\n            const rule = r(\"Label\", [\"progresspie\"]);\r\n            rule.setAll({\r\n                centerX: p50,\r\n                centerY: p50,\r\n                fontSize: \"0.75em\"\r\n            });\r\n            setColor(rule, \"fill\", ic, \"primaryButton\");\r\n        }\r\n        {\r\n            const rule = r(\"Circle\", [\"progresspie\"]);\r\n            rule.setAll({\r\n                fillOpacity: 0.5\r\n            });\r\n            setColor(rule, \"fill\", ic, \"background\");\r\n        }\r\n        {\r\n            const rule = r(\"Slice\", [\"progresspie\"]);\r\n            rule.setAll({\r\n                startAngle: -90\r\n            });\r\n            setColor(rule, \"fill\", ic, \"primaryButton\");\r\n        }\r\n        {\r\n            const rule = r(\"Slice\", [\"progresspie\", \"background\"]);\r\n            rule.setAll({\r\n                fillOpacity: 0.2,\r\n                arc: 360\r\n            });\r\n            setColor(rule, \"fill\", ic, \"primaryButton\");\r\n        }\r\n        // Numeric stepper\r\n        r(\"EditableLabel\", [\"numericstepper\"]).setAll({\r\n            y: p50,\r\n            centerY: p50,\r\n            multiLine: false,\r\n            marginRight: 2\r\n        });\r\n        {\r\n            const rule = r(\"Container\", [\"numericstepper\", \"buttons\"]);\r\n            rule.setAll({\r\n                layout: this._root.verticalLayout,\r\n                centerY: p50,\r\n                y: p50,\r\n                marginRight: 10,\r\n                opacity: 0\r\n            });\r\n            rule.states.create(\"active\", {\r\n                opacity: 1\r\n            });\r\n            rule.states.create(\"default\", {\r\n                opacity: 0\r\n            });\r\n        }\r\n        {\r\n            const rule = r(\"Triangle\", [\"numericstepper\"]);\r\n            rule.setAll({\r\n                width: 17,\r\n                height: 11,\r\n                marginTop: 3,\r\n                marginBottom: 3,\r\n                strokeWidth: 5,\r\n                strokeOpacity: 0,\r\n                cursorOverStyle: \"pointer\"\r\n            });\r\n            setColor(rule, \"fill\", ic, \"secondaryButton\");\r\n        }\r\n        {\r\n            const rule = r(\"Triangle\", [\"downbutton\"]);\r\n            rule.setAll({\r\n                rotation: 180\r\n            });\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=DefaultTheme.js.map","/**\r\n * Modified from Pixi:\r\n *\r\n * The MIT License\r\n *\r\n * Copyright (c) 2013-2017 Mathew Groves, Chad Engler\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n */\r\n/**\r\n * @ignore\r\n */\r\nexport class Matrix {\r\n    constructor(a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0) {\r\n        Object.defineProperty(this, \"a\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"b\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"c\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"d\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"tx\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"ty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.a = a;\r\n        this.b = b;\r\n        this.c = c;\r\n        this.d = d;\r\n        this.tx = tx;\r\n        this.ty = ty;\r\n    }\r\n    /**\r\n     * Sets the matrix based on all the available properties\r\n     */\r\n    setTransform(x, y, pivotX, pivotY, rotation, scale = 1) {\r\n        this.a = Math.cos(rotation) * scale;\r\n        this.b = Math.sin(rotation) * scale;\r\n        this.c = -Math.sin(rotation) * scale;\r\n        this.d = Math.cos(rotation) * scale;\r\n        this.tx = x - ((pivotX * this.a) + (pivotY * this.c));\r\n        this.ty = y - ((pivotX * this.b) + (pivotY * this.d));\r\n    }\r\n    /**\r\n     * Get a new position with the current transformation applied.\r\n     * Can be used to go from a child's coordinate space to the world coordinate space. (e.g. rendering)\r\n     */\r\n    apply(origin) {\r\n        return {\r\n            x: (this.a * origin.x) + (this.c * origin.y) + this.tx,\r\n            y: (this.b * origin.x) + (this.d * origin.y) + this.ty\r\n        };\r\n    }\r\n    /**\r\n     * Get a new position with the inverse of the current transformation applied.\r\n     * Can be used to go from the world coordinate space to a child's coordinate space. (e.g. input)\r\n     */\r\n    applyInverse(origin) {\r\n        const id = 1 / ((this.a * this.d) + (this.c * -this.b));\r\n        return {\r\n            x: (this.d * id * origin.x) + (-this.c * id * origin.y) + (((this.ty * this.c) - (this.tx * this.d)) * id),\r\n            y: (this.a * id * origin.y) + (-this.b * id * origin.x) + (((-this.ty * this.a) + (this.tx * this.b)) * id)\r\n        };\r\n    }\r\n    /**\r\n     * Appends the given Matrix to this Matrix.\r\n     */\r\n    append(matrix) {\r\n        const a1 = this.a;\r\n        const b1 = this.b;\r\n        const c1 = this.c;\r\n        const d1 = this.d;\r\n        this.a = (matrix.a * a1) + (matrix.b * c1);\r\n        this.b = (matrix.a * b1) + (matrix.b * d1);\r\n        this.c = (matrix.c * a1) + (matrix.d * c1);\r\n        this.d = (matrix.c * b1) + (matrix.d * d1);\r\n        this.tx = (matrix.tx * a1) + (matrix.ty * c1) + this.tx;\r\n        this.ty = (matrix.tx * b1) + (matrix.ty * d1) + this.ty;\r\n    }\r\n    /**\r\n     * Prepends the given Matrix to this Matrix.\r\n     */\r\n    prepend(matrix) {\r\n        const tx1 = this.tx;\r\n        if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\r\n            const a1 = this.a;\r\n            const c1 = this.c;\r\n            this.a = (a1 * matrix.a) + (this.b * matrix.c);\r\n            this.b = (a1 * matrix.b) + (this.b * matrix.d);\r\n            this.c = (c1 * matrix.a) + (this.d * matrix.c);\r\n            this.d = (c1 * matrix.b) + (this.d * matrix.d);\r\n        }\r\n        this.tx = (tx1 * matrix.a) + (this.ty * matrix.c) + matrix.tx;\r\n        this.ty = (tx1 * matrix.b) + (this.ty * matrix.d) + matrix.ty;\r\n    }\r\n    /**\r\n     * Copies the other matrix's properties into this matrix\r\n     */\r\n    copyFrom(matrix) {\r\n        this.a = matrix.a;\r\n        this.b = matrix.b;\r\n        this.c = matrix.c;\r\n        this.d = matrix.d;\r\n        this.tx = matrix.tx;\r\n        this.ty = matrix.ty;\r\n    }\r\n}\r\n//# sourceMappingURL=Matrix.js.map","var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar TAU = Math.PI * 2;\n\nvar mapToEllipse = function mapToEllipse(_ref, rx, ry, cosphi, sinphi, centerx, centery) {\n  var x = _ref.x,\n      y = _ref.y;\n\n  x *= rx;\n  y *= ry;\n\n  var xp = cosphi * x - sinphi * y;\n  var yp = sinphi * x + cosphi * y;\n\n  return {\n    x: xp + centerx,\n    y: yp + centery\n  };\n};\n\nvar approxUnitArc = function approxUnitArc(ang1, ang2) {\n  // If 90 degree circular arc, use a constant\n  // as derived from http://spencermortensen.com/articles/bezier-circle\n  var a = ang2 === 1.5707963267948966 ? 0.551915024494 : ang2 === -1.5707963267948966 ? -0.551915024494 : 4 / 3 * Math.tan(ang2 / 4);\n\n  var x1 = Math.cos(ang1);\n  var y1 = Math.sin(ang1);\n  var x2 = Math.cos(ang1 + ang2);\n  var y2 = Math.sin(ang1 + ang2);\n\n  return [{\n    x: x1 - y1 * a,\n    y: y1 + x1 * a\n  }, {\n    x: x2 + y2 * a,\n    y: y2 - x2 * a\n  }, {\n    x: x2,\n    y: y2\n  }];\n};\n\nvar vectorAngle = function vectorAngle(ux, uy, vx, vy) {\n  var sign = ux * vy - uy * vx < 0 ? -1 : 1;\n\n  var dot = ux * vx + uy * vy;\n\n  if (dot > 1) {\n    dot = 1;\n  }\n\n  if (dot < -1) {\n    dot = -1;\n  }\n\n  return sign * Math.acos(dot);\n};\n\nvar getArcCenter = function getArcCenter(px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinphi, cosphi, pxp, pyp) {\n  var rxsq = Math.pow(rx, 2);\n  var rysq = Math.pow(ry, 2);\n  var pxpsq = Math.pow(pxp, 2);\n  var pypsq = Math.pow(pyp, 2);\n\n  var radicant = rxsq * rysq - rxsq * pypsq - rysq * pxpsq;\n\n  if (radicant < 0) {\n    radicant = 0;\n  }\n\n  radicant /= rxsq * pypsq + rysq * pxpsq;\n  radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n\n  var centerxp = radicant * rx / ry * pyp;\n  var centeryp = radicant * -ry / rx * pxp;\n\n  var centerx = cosphi * centerxp - sinphi * centeryp + (px + cx) / 2;\n  var centery = sinphi * centerxp + cosphi * centeryp + (py + cy) / 2;\n\n  var vx1 = (pxp - centerxp) / rx;\n  var vy1 = (pyp - centeryp) / ry;\n  var vx2 = (-pxp - centerxp) / rx;\n  var vy2 = (-pyp - centeryp) / ry;\n\n  var ang1 = vectorAngle(1, 0, vx1, vy1);\n  var ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n\n  if (sweepFlag === 0 && ang2 > 0) {\n    ang2 -= TAU;\n  }\n\n  if (sweepFlag === 1 && ang2 < 0) {\n    ang2 += TAU;\n  }\n\n  return [centerx, centery, ang1, ang2];\n};\n\nvar arcToBezier = function arcToBezier(_ref2) {\n  var px = _ref2.px,\n      py = _ref2.py,\n      cx = _ref2.cx,\n      cy = _ref2.cy,\n      rx = _ref2.rx,\n      ry = _ref2.ry,\n      _ref2$xAxisRotation = _ref2.xAxisRotation,\n      xAxisRotation = _ref2$xAxisRotation === undefined ? 0 : _ref2$xAxisRotation,\n      _ref2$largeArcFlag = _ref2.largeArcFlag,\n      largeArcFlag = _ref2$largeArcFlag === undefined ? 0 : _ref2$largeArcFlag,\n      _ref2$sweepFlag = _ref2.sweepFlag,\n      sweepFlag = _ref2$sweepFlag === undefined ? 0 : _ref2$sweepFlag;\n\n  var curves = [];\n\n  if (rx === 0 || ry === 0) {\n    return [];\n  }\n\n  var sinphi = Math.sin(xAxisRotation * TAU / 360);\n  var cosphi = Math.cos(xAxisRotation * TAU / 360);\n\n  var pxp = cosphi * (px - cx) / 2 + sinphi * (py - cy) / 2;\n  var pyp = -sinphi * (px - cx) / 2 + cosphi * (py - cy) / 2;\n\n  if (pxp === 0 && pyp === 0) {\n    return [];\n  }\n\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n\n  var lambda = Math.pow(pxp, 2) / Math.pow(rx, 2) + Math.pow(pyp, 2) / Math.pow(ry, 2);\n\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n\n  var _getArcCenter = getArcCenter(px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinphi, cosphi, pxp, pyp),\n      _getArcCenter2 = _slicedToArray(_getArcCenter, 4),\n      centerx = _getArcCenter2[0],\n      centery = _getArcCenter2[1],\n      ang1 = _getArcCenter2[2],\n      ang2 = _getArcCenter2[3];\n\n  // If 'ang2' == 90.0000000001, then `ratio` will evaluate to\n  // 1.0000000001. This causes `segments` to be greater than one, which is an\n  // unecessary split, and adds extra points to the bezier curve. To alleviate\n  // this issue, we round to 1.0 when the ratio is close to 1.0.\n\n\n  var ratio = Math.abs(ang2) / (TAU / 4);\n  if (Math.abs(1.0 - ratio) < 0.0000001) {\n    ratio = 1.0;\n  }\n\n  var segments = Math.max(Math.ceil(ratio), 1);\n\n  ang2 /= segments;\n\n  for (var i = 0; i < segments; i++) {\n    curves.push(approxUnitArc(ang1, ang2));\n    ang1 += ang2;\n  }\n\n  return curves.map(function (curve) {\n    var _mapToEllipse = mapToEllipse(curve[0], rx, ry, cosphi, sinphi, centerx, centery),\n        x1 = _mapToEllipse.x,\n        y1 = _mapToEllipse.y;\n\n    var _mapToEllipse2 = mapToEllipse(curve[1], rx, ry, cosphi, sinphi, centerx, centery),\n        x2 = _mapToEllipse2.x,\n        y2 = _mapToEllipse2.y;\n\n    var _mapToEllipse3 = mapToEllipse(curve[2], rx, ry, cosphi, sinphi, centerx, centery),\n        x = _mapToEllipse3.x,\n        y = _mapToEllipse3.y;\n\n    return { x1: x1, y1: y1, x2: x2, y2: y2, x: x, y: y };\n  });\n};\n\nexport default arcToBezier;","/** @ignore */ /** */\r\nimport { BlendMode } from \"./Renderer\";\r\nimport { Color } from \"../../util/Color\";\r\nimport { Matrix } from \"../../util/Matrix\";\r\nimport { Percent, percent } from \"../../util/Percent\";\r\n//import { Throttler } from \"../../util/Throttler\";\r\nimport { ArrayDisposer, Disposer, DisposerClass, CounterDisposer, MultiDisposer } from \"../../util/Disposer\";\r\nimport { TextFormatter } from \"../../util/TextFormatter\";\r\nimport * as $utils from \"../../util/Utils\";\r\nimport * as $array from \"../../util/Array\";\r\nimport * as $object from \"../../util/Object\";\r\nimport * as $type from \"../../util/Type\";\r\nimport * as $math from \"../../util/Math\";\r\nimport arcToBezier from 'svg-arc-to-cubic-bezier';\r\n/**\r\n * @ignore\r\n */\r\nfunction checkArgs(name, actual, expected) {\r\n    if (actual !== expected) {\r\n        throw new Error(\"Required \" + expected + \" arguments for \" + name + \" but got \" + actual);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction checkMinArgs(name, actual, expected) {\r\n    if (actual < expected) {\r\n        throw new Error(\"Required at least \" + expected + \" arguments for \" + name + \" but got \" + actual);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction checkEvenArgs(name, actual, expected) {\r\n    checkMinArgs(name, actual, expected);\r\n    if ((actual % expected) !== 0) {\r\n        throw new Error(\"Arguments for \" + name + \" must be in pairs of \" + expected);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n * This splits the flag so that way 0017 will be processed as 0 0 17\r\n *\r\n * This is important for weird paths like `M17 5A1 1 0 0017 30 1 1 0 0017 5`\r\n */\r\nfunction splitArcFlags(args) {\r\n    for (let i = 0; i < args.length; i += 7) {\r\n        let index = i + 3;\r\n        let flag = args[index];\r\n        if (flag.length > 1) {\r\n            const a = /^([01])([01])(.*)$/.exec(flag);\r\n            if (a !== null) {\r\n                args.splice(index, 0, a[1]);\r\n                ++index;\r\n                args.splice(index, 0, a[2]);\r\n                ++index;\r\n                if (a[3].length > 0) {\r\n                    args[index] = a[3];\r\n                }\r\n                else {\r\n                    args.splice(index, 1);\r\n                }\r\n            }\r\n        }\r\n        ++index;\r\n        flag = args[index];\r\n        if (flag.length > 1) {\r\n            const a = /^([01])(.+)$/.exec(flag);\r\n            if (a !== null) {\r\n                args.splice(index, 0, a[1]);\r\n                ++index;\r\n                args[index] = a[2];\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction assertBinary(value) {\r\n    if (value === 0 || value === 1) {\r\n        return value;\r\n    }\r\n    else {\r\n        throw new Error(\"Flag must be 0 or 1\");\r\n    }\r\n}\r\n//  1 -> 0xffffff * (2 / 2)\r\n//  2 -> 0xffffff * (1 / 2)\r\n//\r\n//  3 -> 0xffffff * (3 / 4)\r\n//  4 -> 0xffffff * (1 / 4)\r\n//\r\n//  5 -> 0xffffff * (7 / 8)\r\n//  6 -> 0xffffff * (5 / 8)\r\n//  7 -> 0xffffff * (3 / 8)\r\n//  8 -> 0xffffff * (1 / 8)\r\n//\r\n//  9 -> 0xffffff * (15 / 16)\r\n// 10 -> 0xffffff * (13 / 16)\r\n// 11 -> 0xffffff * (11 / 16)\r\n// 12 -> 0xffffff *  (9 / 16)\r\n// 13 -> 0xffffff *  (7 / 16)\r\n// 14 -> 0xffffff *  (5 / 16)\r\n// 15 -> 0xffffff *  (3 / 16)\r\n// 16 -> 0xffffff *  (1 / 16)\r\n// @todo remove this old color distribution algo if the new one pans out\r\n/*function distributeId(id: number): number {\r\n    if (id === 1) {\r\n        return 0x000001;\r\n\r\n    } else {\r\n        // Finds the closest power of 2\r\n        const base = Math.pow(2, Math.ceil(Math.log(id) / Math.log(2)));\r\n\r\n        // Translates the id into an odd fraction index\r\n        const index = ((base - id) * 2) + 1;\r\n\r\n        // TODO is Math.round correct ?\r\n        return Math.round(0xffffff * (index / base));\r\n    }\r\n}*/\r\n/**\r\n * Function by smeans:\r\n * https://lowcode.life/generating-unique-contrasting-colors-in-javascript/\r\n * @ignore\r\n */\r\nfunction distributeId(id) {\r\n    const rgb = [0, 0, 0];\r\n    for (let i = 0; i < 24; i++) {\r\n        rgb[i % 3] <<= 1;\r\n        rgb[i % 3] |= id & 0x01;\r\n        id >>= 1;\r\n    }\r\n    return (rgb[0] | 0) + (rgb[1] << 8) + (rgb[2] << 16);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction eachTargets(hitTarget, f) {\r\n    for (;;) {\r\n        if (hitTarget.interactive) {\r\n            if (!f(hitTarget)) {\r\n                break;\r\n            }\r\n        }\r\n        if (hitTarget._parent) {\r\n            hitTarget = hitTarget._parent;\r\n        }\r\n        else {\r\n            break;\r\n        }\r\n    }\r\n}\r\n// TODO feature detection for mouse/touch/pointer\r\n/**\r\n * @ignore\r\n */\r\nfunction onPointerEvent(element, name, f) {\r\n    return $utils.addEventListener(element, $utils.getRendererEvent(name), (event) => {\r\n        const target = $utils.getEventTarget(event);\r\n        let touches = event.touches;\r\n        if (touches) {\r\n            if (touches.length == 0) {\r\n                touches = event.changedTouches;\r\n            }\r\n            f($array.copy(touches), target);\r\n        }\r\n        else {\r\n            f([event], target);\r\n        }\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction isTainted(image) {\r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.width = 1;\r\n    canvas.height = 1;\r\n    const context = canvas.getContext(\"2d\", { willReadFrequently: true });\r\n    context.drawImage(image, 0, 0, 1, 1);\r\n    try {\r\n        context.getImageData(0, 0, 1, 1);\r\n        return false;\r\n    }\r\n    catch (err) {\r\n        console.warn(\"Image \\\"\" + image.src + \"\\\" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors\");\r\n        return true;\r\n    }\r\n}\r\n/**\r\n * This is needed to workaround a bug in iOS which causes it to not GC canvas elements.\r\n *\r\n * @ignore\r\n */\r\nfunction clearCanvas(view) {\r\n    view.width = 0;\r\n    view.height = 0;\r\n    view.style.width = \"0px\";\r\n    view.style.height = \"0px\";\r\n}\r\n/**\r\n * Aligns the coordinate to the pixel, so it renders crisp\r\n *\r\n * @ignore\r\n */\r\nfunction crisp(x) {\r\n    return Math.floor(x) + .5;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasPivot {\r\n    constructor() {\r\n        Object.defineProperty(this, \"_x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n    }\r\n    get x() {\r\n        return this._x;\r\n    }\r\n    get y() {\r\n        return this._y;\r\n    }\r\n    set x(value) {\r\n        this._x = value;\r\n    }\r\n    set y(value) {\r\n        this._y = value;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasDisplayObject extends DisposerClass {\r\n    constructor(renderer) {\r\n        super();\r\n        Object.defineProperty(this, \"_layer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"mask\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"visible\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"exportable\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"interactive\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"inactive\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"wheelable\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"cancelTouch\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"isMeasured\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"buttonMode\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"alpha\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"compoundAlpha\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"angle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"scale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"crisp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"pivot\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new CanvasPivot()\r\n        });\r\n        Object.defineProperty(this, \"filter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"cursorOverStyle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_replacedCursorStyle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_localMatrix\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Matrix()\r\n        });\r\n        Object.defineProperty(this, \"_matrix\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Matrix()\r\n        });\r\n        // TODO can this be replaced with _localMatrix ?\r\n        Object.defineProperty(this, \"_uMatrix\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Matrix()\r\n        });\r\n        Object.defineProperty(this, \"_renderer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_parent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_localBounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_bounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_colorId\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._renderer = renderer;\r\n    }\r\n    subStatus(status) {\r\n        return {\r\n            inactive: (this.inactive == null ? status.inactive : this.inactive),\r\n            layer: this._layer || status.layer,\r\n        };\r\n    }\r\n    _dispose() {\r\n        this._renderer._removeObject(this);\r\n        this.getLayer().dirty = true;\r\n    }\r\n    getCanvas() {\r\n        return this.getLayer().view;\r\n    }\r\n    getLayer() {\r\n        let self = this;\r\n        for (;;) {\r\n            if (self._layer) {\r\n                return self._layer;\r\n            }\r\n            else if (self._parent) {\r\n                self = self._parent;\r\n            }\r\n            else {\r\n                return this._renderer.defaultLayer;\r\n            }\r\n        }\r\n    }\r\n    setLayer(order, margin) {\r\n        if (order == null) {\r\n            this._layer = undefined;\r\n        }\r\n        else {\r\n            const visible = true;\r\n            this._layer = this._renderer.getLayer(order, visible);\r\n            this._layer.visible = visible;\r\n            this._layer.margin = margin;\r\n            if (margin) {\r\n                $utils.setInteractive(this._layer.view, false);\r\n            }\r\n            this._renderer._ghostLayer.setMargin(this._renderer.layers);\r\n            if (this._parent) {\r\n                this._parent.registerChildLayer(this._layer);\r\n            }\r\n            this._layer.dirty = true;\r\n            this._renderer.resizeLayer(this._layer);\r\n            this._renderer.resizeGhost();\r\n        }\r\n    }\r\n    markDirtyLayer() {\r\n        this.getLayer().dirty = true;\r\n    }\r\n    clear() {\r\n        this.invalidateBounds();\r\n    }\r\n    invalidateBounds() {\r\n        this._localBounds = undefined;\r\n    }\r\n    _addBounds(_bounds) { }\r\n    _getColorId() {\r\n        if (this._colorId === undefined) {\r\n            this._colorId = this._renderer.paintId(this);\r\n        }\r\n        return this._colorId;\r\n    }\r\n    _isInteractive(status) {\r\n        return !status.inactive && (this.interactive || this._renderer._forceInteractive > 0);\r\n    }\r\n    _isInteractiveMask(status) {\r\n        return this._isInteractive(status);\r\n    }\r\n    contains(child) {\r\n        for (;;) {\r\n            if (child === this) {\r\n                return true;\r\n            }\r\n            else if (child._parent) {\r\n                child = child._parent;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    toGlobal(point) {\r\n        return this._matrix.apply(point);\r\n    }\r\n    toLocal(point) {\r\n        return this._matrix.applyInverse(point);\r\n    }\r\n    getLocalMatrix() {\r\n        this._uMatrix.setTransform(0, 0, this.pivot.x, this.pivot.y, this.angle * Math.PI / 180, this.scale);\r\n        return this._uMatrix;\r\n    }\r\n    getLocalBounds() {\r\n        if (!this._localBounds) {\r\n            const bn = 10000000;\r\n            this._localBounds = {\r\n                left: bn,\r\n                top: bn,\r\n                right: -bn,\r\n                bottom: -bn\r\n            };\r\n            this._addBounds(this._localBounds);\r\n        }\r\n        return this._localBounds;\r\n    }\r\n    getAdjustedBounds(bounds) {\r\n        this._setMatrix();\r\n        const matrix = this.getLocalMatrix();\r\n        const p0 = matrix.apply({ x: bounds.left, y: bounds.top });\r\n        const p1 = matrix.apply({ x: bounds.right, y: bounds.top });\r\n        const p2 = matrix.apply({ x: bounds.right, y: bounds.bottom });\r\n        const p3 = matrix.apply({ x: bounds.left, y: bounds.bottom });\r\n        return {\r\n            left: Math.min(p0.x, p1.x, p2.x, p3.x),\r\n            top: Math.min(p0.y, p1.y, p2.y, p3.y),\r\n            right: Math.max(p0.x, p1.x, p2.x, p3.x),\r\n            bottom: Math.max(p0.y, p1.y, p2.y, p3.y)\r\n        };\r\n    }\r\n    on(key, callback, context) {\r\n        if (this.interactive) {\r\n            return this._renderer._addEvent(this, key, callback, context);\r\n        }\r\n        else {\r\n            return new Disposer(() => { });\r\n        }\r\n    }\r\n    _setMatrix() {\r\n        // TODO only calculate this if it has actually changed\r\n        this._localMatrix.setTransform(this.x, this.y, this.pivot.x, this.pivot.y, \r\n        // Converts degrees to radians\r\n        this.angle * Math.PI / 180, this.scale);\r\n        this._matrix.copyFrom(this._localMatrix);\r\n        if (this._parent) {\r\n            // TODO only calculate this if it has actually changed\r\n            this._matrix.prepend(this._parent._matrix);\r\n        }\r\n    }\r\n    _transform(context, resolution) {\r\n        const m = this._matrix;\r\n        let tx = m.tx * resolution;\r\n        let ty = m.ty * resolution;\r\n        if (this.crisp) {\r\n            tx = crisp(tx);\r\n            ty = crisp(ty);\r\n        }\r\n        context.setTransform(m.a * resolution, m.b * resolution, m.c * resolution, m.d * resolution, tx, ty);\r\n    }\r\n    _transformMargin(context, resolution, margin) {\r\n        const m = this._matrix;\r\n        context.setTransform(m.a * resolution, m.b * resolution, m.c * resolution, m.d * resolution, (m.tx + margin.left) * resolution, (m.ty + margin.top) * resolution);\r\n    }\r\n    _transformLayer(context, resolution, layer) {\r\n        if (layer.margin) {\r\n            this._transformMargin(context, layer.scale || resolution, layer.margin);\r\n        }\r\n        else {\r\n            this._transform(context, layer.scale || resolution);\r\n        }\r\n    }\r\n    render(status, targetGhostLayer = 0) {\r\n        if (this.visible && (this.exportable !== false || !this._renderer._omitTainted)) {\r\n            this._setMatrix();\r\n            const subStatus = this.subStatus(status);\r\n            const resolution = this._renderer.resolution;\r\n            const layers = this._renderer.layers;\r\n            const ghostLayer = this._renderer._ghostLayer;\r\n            const ghostContext = ghostLayer.context;\r\n            const mask = this.mask;\r\n            if (mask) {\r\n                mask._setMatrix();\r\n            }\r\n            // TODO improve this\r\n            $array.each(layers, (layer) => {\r\n                if (layer) {\r\n                    const context = layer.context;\r\n                    context.save();\r\n                    // We must apply the mask before we transform the element\r\n                    if (mask) {\r\n                        mask._transformLayer(context, resolution, layer);\r\n                        mask._runPath(context);\r\n                        context.clip();\r\n                    }\r\n                    context.globalAlpha = this.compoundAlpha * this.alpha;\r\n                    this._transformLayer(context, resolution, layer);\r\n                    if (this.filter) {\r\n                        context.filter = this.filter;\r\n                    }\r\n                }\r\n            });\r\n            ghostContext.save();\r\n            // We must apply the mask before we transform the element\r\n            if (mask && this._isInteractiveMask(subStatus)) {\r\n                mask._transformMargin(ghostContext, resolution, ghostLayer.margin);\r\n                mask._runPath(ghostContext);\r\n                ghostContext.clip();\r\n            }\r\n            this._transformMargin(ghostContext, resolution, ghostLayer.margin);\r\n            if ((subStatus.layer.order > 0) && !targetGhostLayer) {\r\n                $array.move(this._renderer._deferredGhostLayers, subStatus.layer.order);\r\n            }\r\n            this._render(subStatus, targetGhostLayer);\r\n            ghostContext.restore();\r\n            $array.each(layers, (layer) => {\r\n                if (layer) {\r\n                    layer.context.restore();\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _render(status, _targetGhostLayer = 0) {\r\n        if (this.exportable === false) {\r\n            status.layer.tainted = true;\r\n        }\r\n    }\r\n    _ghostOnly(targetGhostLayer = 0) {\r\n        return targetGhostLayer > 0 ? true : false;\r\n    }\r\n    _drawGhost(status, targetGhostLayer = 0) {\r\n        const interactive = this._isInteractive(status);\r\n        const order = status.layer.order || 0;\r\n        return interactive && ((order == 0 && !this._ghostOnly(targetGhostLayer)) || order == targetGhostLayer) ? true : false;\r\n    }\r\n    hovering() {\r\n        return this._renderer._hovering.has(this);\r\n    }\r\n    dragging() {\r\n        return this._renderer._dragging.some((x) => x.value === this);\r\n    }\r\n    shouldCancelTouch() {\r\n        const renderer = this._renderer;\r\n        if (renderer.tapToActivate && !renderer._touchActive) {\r\n            return false;\r\n        }\r\n        if (this.cancelTouch) {\r\n            return true;\r\n        }\r\n        else if (this._parent) {\r\n            return this._parent.shouldCancelTouch();\r\n        }\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasContainer extends CanvasDisplayObject {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"interactiveChildren\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_childLayers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_children\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n    _isInteractiveMask(status) {\r\n        return this.interactiveChildren || super._isInteractiveMask(status);\r\n    }\r\n    addChild(child) {\r\n        child._parent = this;\r\n        this._children.push(child);\r\n        if (child._layer) {\r\n            this.registerChildLayer(child._layer);\r\n        }\r\n    }\r\n    addChildAt(child, index) {\r\n        child._parent = this;\r\n        this._children.splice(index, 0, child);\r\n        if (child._layer) {\r\n            this.registerChildLayer(child._layer);\r\n        }\r\n    }\r\n    removeChild(child) {\r\n        child._parent = undefined;\r\n        $array.removeFirst(this._children, child);\r\n    }\r\n    _render(status, targetGhostLayer) {\r\n        super._render(status);\r\n        const renderer = this._renderer;\r\n        if (this.interactive && this.interactiveChildren) {\r\n            ++renderer._forceInteractive;\r\n        }\r\n        $array.each(this._children, (child) => {\r\n            child.compoundAlpha = this.compoundAlpha * this.alpha;\r\n            child.render(status, targetGhostLayer);\r\n        });\r\n        if (this.interactive && this.interactiveChildren) {\r\n            --renderer._forceInteractive;\r\n        }\r\n    }\r\n    registerChildLayer(layer) {\r\n        if (!this._childLayers) {\r\n            this._childLayers = [];\r\n        }\r\n        $array.pushOne(this._childLayers, layer);\r\n        if (this._parent) {\r\n            this._parent.registerChildLayer(layer);\r\n        }\r\n    }\r\n    markDirtyLayer(deep = false) {\r\n        super.markDirtyLayer();\r\n        if (deep && this._childLayers) {\r\n            $array.each(this._childLayers, (layer) => layer.dirty = true);\r\n        }\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        if (this._childLayers) {\r\n            $array.each(this._childLayers, (layer) => {\r\n                layer.dirty = true;\r\n            });\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction setPoint(bounds, point) {\r\n    bounds.left = Math.min(bounds.left, point.x);\r\n    bounds.top = Math.min(bounds.top, point.y);\r\n    bounds.right = Math.max(bounds.right, point.x);\r\n    bounds.bottom = Math.max(bounds.bottom, point.y);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass Op {\r\n    colorize(_context, _forceColor) { }\r\n    colorizeGhost(context, forceColor) {\r\n        this.colorize(context, forceColor);\r\n    }\r\n    path(_context) { }\r\n    pathGhost(context) {\r\n        this.path(context);\r\n    }\r\n    addBounds(_bounds) { }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass BeginPath extends Op {\r\n    colorize(context, _forceColor) {\r\n        context.beginPath();\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass BeginFill extends Op {\r\n    constructor(color) {\r\n        super();\r\n        Object.defineProperty(this, \"color\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: color\r\n        });\r\n    }\r\n    colorize(context, forceColor) {\r\n        if (forceColor !== undefined) {\r\n            context.fillStyle = forceColor;\r\n        }\r\n        else {\r\n            context.fillStyle = this.color;\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass EndFill extends Op {\r\n    constructor(clearShadow) {\r\n        super();\r\n        Object.defineProperty(this, \"clearShadow\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: clearShadow\r\n        });\r\n    }\r\n    colorize(context, _forceColor) {\r\n        context.fill();\r\n        if (this.clearShadow) {\r\n            context.shadowColor = \"\";\r\n            context.shadowBlur = 0;\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass EndStroke extends Op {\r\n    colorize(context, _forceColor) {\r\n        context.stroke();\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass LineStyle extends Op {\r\n    constructor(width, color, lineJoin, lineCap) {\r\n        super();\r\n        Object.defineProperty(this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: width\r\n        });\r\n        Object.defineProperty(this, \"color\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: color\r\n        });\r\n        Object.defineProperty(this, \"lineJoin\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: lineJoin\r\n        });\r\n        Object.defineProperty(this, \"lineCap\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: lineCap\r\n        });\r\n    }\r\n    colorize(context, forceColor) {\r\n        if (forceColor !== undefined) {\r\n            context.strokeStyle = forceColor;\r\n        }\r\n        else {\r\n            context.strokeStyle = this.color;\r\n        }\r\n        context.lineWidth = this.width;\r\n        if (this.lineJoin) {\r\n            context.lineJoin = this.lineJoin;\r\n        }\r\n        if (this.lineCap) {\r\n            context.lineCap = this.lineCap;\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass LineDash extends Op {\r\n    constructor(dash) {\r\n        super();\r\n        Object.defineProperty(this, \"dash\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: dash\r\n        });\r\n    }\r\n    colorize(context, _forceColor) {\r\n        context.setLineDash(this.dash);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass LineDashOffset extends Op {\r\n    constructor(dashOffset) {\r\n        super();\r\n        Object.defineProperty(this, \"dashOffset\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: dashOffset\r\n        });\r\n    }\r\n    colorize(context, _forceColor) {\r\n        context.lineDashOffset = this.dashOffset;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass DrawRect extends Op {\r\n    constructor(x, y, width, height) {\r\n        super();\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n        Object.defineProperty(this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: width\r\n        });\r\n        Object.defineProperty(this, \"height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: height\r\n        });\r\n    }\r\n    path(context) {\r\n        context.rect(this.x, this.y, this.width, this.height);\r\n    }\r\n    addBounds(bounds) {\r\n        const l = this.x;\r\n        const t = this.y;\r\n        const r = l + this.width;\r\n        const b = t + this.height;\r\n        setPoint(bounds, { x: l, y: t });\r\n        setPoint(bounds, { x: r, y: t });\r\n        setPoint(bounds, { x: l, y: b });\r\n        setPoint(bounds, { x: r, y: b });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass DrawCircle extends Op {\r\n    constructor(x, y, radius) {\r\n        super();\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n        Object.defineProperty(this, \"radius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radius\r\n        });\r\n    }\r\n    path(context) {\r\n        context.moveTo(this.x + this.radius, this.y);\r\n        context.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\r\n    }\r\n    // TODO handle skewing and rotation\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.x - this.radius, y: this.y - this.radius });\r\n        setPoint(bounds, { x: this.x + this.radius, y: this.y + this.radius });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass DrawEllipse extends Op {\r\n    constructor(x, y, radiusX, radiusY) {\r\n        super();\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n        Object.defineProperty(this, \"radiusX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radiusX\r\n        });\r\n        Object.defineProperty(this, \"radiusY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radiusY\r\n        });\r\n    }\r\n    path(context) {\r\n        context.ellipse(0, 0, this.radiusX, this.radiusY, 0, 0, Math.PI * 2);\r\n    }\r\n    // TODO handle skewing and rotation\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.x - this.radiusX, y: this.y - this.radiusY });\r\n        setPoint(bounds, { x: this.x + this.radiusX, y: this.y + this.radiusY });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass Arc extends Op {\r\n    constructor(cx, cy, radius, startAngle, endAngle, anticlockwise) {\r\n        super();\r\n        Object.defineProperty(this, \"cx\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cx\r\n        });\r\n        Object.defineProperty(this, \"cy\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cy\r\n        });\r\n        Object.defineProperty(this, \"radius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radius\r\n        });\r\n        Object.defineProperty(this, \"startAngle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: startAngle\r\n        });\r\n        Object.defineProperty(this, \"endAngle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: endAngle\r\n        });\r\n        Object.defineProperty(this, \"anticlockwise\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: anticlockwise\r\n        });\r\n    }\r\n    path(context) {\r\n        if (this.radius > 0) {\r\n            context.arc(this.cx, this.cy, this.radius, this.startAngle, this.endAngle, this.anticlockwise);\r\n        }\r\n    }\r\n    addBounds(bounds) {\r\n        let arcBounds = $math.getArcBounds(this.cx, this.cy, this.startAngle * $math.DEGREES, this.endAngle * $math.DEGREES, this.radius);\r\n        setPoint(bounds, { x: arcBounds.left, y: arcBounds.top });\r\n        setPoint(bounds, { x: arcBounds.right, y: arcBounds.bottom });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass ArcTo extends Op {\r\n    constructor(x1, y1, x2, y2, radius) {\r\n        super();\r\n        Object.defineProperty(this, \"x1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x1\r\n        });\r\n        Object.defineProperty(this, \"y1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y1\r\n        });\r\n        Object.defineProperty(this, \"x2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x2\r\n        });\r\n        Object.defineProperty(this, \"y2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y2\r\n        });\r\n        Object.defineProperty(this, \"radius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radius\r\n        });\r\n    }\r\n    path(context) {\r\n        if (this.radius > 0) {\r\n            context.arcTo(this.x1, this.y1, this.x2, this.y2, this.radius);\r\n        }\r\n    }\r\n    // TODO: add points\r\n    addBounds(_bounds) {\r\n        /*\r\n        // not finished\r\n        https://math.stackexchange.com/questions/1781438/finding-the-center-of-a-circle-given-two-points-and-a-radius-algebraically\r\n\r\n        if (prevPoint) {\r\n            let x1 = prevPoint.x;\r\n            let y1 = prevPoint.y;\r\n            let x2 = this.x2;\r\n            let y2 = this.y2;\r\n            let r = this.radius;\r\n\r\n            let xa = (x2 - x1) / 2;\r\n            let ya = (y2 - y1) / 2;\r\n\r\n            let x0 = x1 + xa;\r\n            let y0 = y1 + ya;\r\n\r\n            let a = Math.hypot(xa, ya);\r\n            let b = Math.sqrt(r * r - a * a);\r\n\r\n            let cx = x0 + b * ya / a;\r\n            let cy = y0 - b * xa / a;\r\n\r\n            console.log(cx, cy);\r\n        }*/\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass LineTo extends Op {\r\n    constructor(x, y) {\r\n        super();\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n    }\r\n    path(context) {\r\n        context.lineTo(this.x, this.y);\r\n    }\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.x, y: this.y });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass MoveTo extends Op {\r\n    constructor(x, y) {\r\n        super();\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n    }\r\n    path(context) {\r\n        context.moveTo(this.x, this.y);\r\n    }\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.x, y: this.y });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass ClosePath extends Op {\r\n    path(context) {\r\n        context.closePath();\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass BezierCurveTo extends Op {\r\n    constructor(cpX, cpY, cpX2, cpY2, toX, toY) {\r\n        super();\r\n        Object.defineProperty(this, \"cpX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpX\r\n        });\r\n        Object.defineProperty(this, \"cpY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpY\r\n        });\r\n        Object.defineProperty(this, \"cpX2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpX2\r\n        });\r\n        Object.defineProperty(this, \"cpY2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpY2\r\n        });\r\n        Object.defineProperty(this, \"toX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: toX\r\n        });\r\n        Object.defineProperty(this, \"toY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: toY\r\n        });\r\n    }\r\n    path(context) {\r\n        context.bezierCurveTo(this.cpX, this.cpY, this.cpX2, this.cpY2, this.toX, this.toY);\r\n    }\r\n    // TODO: OK?\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.cpX, y: this.cpY });\r\n        setPoint(bounds, { x: this.cpX2, y: this.cpY2 });\r\n        setPoint(bounds, { x: this.toX, y: this.toY });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass QuadraticCurveTo extends Op {\r\n    constructor(cpX, cpY, toX, toY) {\r\n        super();\r\n        Object.defineProperty(this, \"cpX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpX\r\n        });\r\n        Object.defineProperty(this, \"cpY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpY\r\n        });\r\n        Object.defineProperty(this, \"toX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: toX\r\n        });\r\n        Object.defineProperty(this, \"toY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: toY\r\n        });\r\n    }\r\n    path(context) {\r\n        context.quadraticCurveTo(this.cpX, this.cpY, this.toX, this.toY);\r\n    }\r\n    // TODO: OK?\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.cpX, y: this.cpY });\r\n        setPoint(bounds, { x: this.toX, y: this.toY });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass Shadow extends Op {\r\n    constructor(color, blur, offsetX, offsetY, opacity) {\r\n        super();\r\n        Object.defineProperty(this, \"color\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: color\r\n        });\r\n        Object.defineProperty(this, \"blur\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: blur\r\n        });\r\n        Object.defineProperty(this, \"offsetX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: offsetX\r\n        });\r\n        Object.defineProperty(this, \"offsetY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: offsetY\r\n        });\r\n        Object.defineProperty(this, \"opacity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: opacity\r\n        });\r\n    }\r\n    colorize(context, _forceColor) {\r\n        if (this.opacity) {\r\n            context.fillStyle = this.color;\r\n        }\r\n        context.shadowColor = this.color;\r\n        context.shadowBlur = this.blur;\r\n        context.shadowOffsetX = this.offsetX;\r\n        context.shadowOffsetY = this.offsetY;\r\n    }\r\n    colorizeGhost(_context, _forceColor) { }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass GraphicsImage extends Op {\r\n    constructor(image, width, height, x, y) {\r\n        super();\r\n        Object.defineProperty(this, \"image\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: image\r\n        });\r\n        Object.defineProperty(this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: width\r\n        });\r\n        Object.defineProperty(this, \"height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: height\r\n        });\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n    }\r\n    path(context) {\r\n        context.drawImage(this.image, this.x, this.y, this.width, this.height);\r\n    }\r\n    // TODO: OK?\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.x, y: this.y });\r\n        setPoint(bounds, { x: this.width, y: this.height });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasGraphics extends CanvasDisplayObject {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_operations\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"blendMode\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: BlendMode.NORMAL\r\n        });\r\n        Object.defineProperty(this, \"_hasShadows\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_fillAlpha\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_strokeAlpha\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    clear() {\r\n        super.clear();\r\n        this._operations.length = 0;\r\n    }\r\n    _pushOp(op) {\r\n        this._operations.push(op);\r\n    }\r\n    beginFill(color, alpha = 1) {\r\n        this._fillAlpha = alpha;\r\n        if (color) {\r\n            if (color instanceof Color) {\r\n                this._pushOp(new BeginFill(color.toCSS(alpha)));\r\n            }\r\n            else {\r\n                this.isMeasured = true;\r\n                this._pushOp(new BeginFill(color));\r\n            }\r\n        }\r\n        else {\r\n            this._pushOp(new BeginFill(\"rgba(0, 0, 0, \" + alpha + \")\"));\r\n        }\r\n    }\r\n    endFill() {\r\n        this._pushOp(new EndFill(this._hasShadows));\r\n    }\r\n    endStroke() {\r\n        this._pushOp(new EndStroke());\r\n    }\r\n    beginPath() {\r\n        this._pushOp(new BeginPath());\r\n    }\r\n    lineStyle(width = 0, color, alpha = 1, lineJoin, lineCap) {\r\n        this._strokeAlpha = alpha;\r\n        if (color) {\r\n            if (color instanceof Color) {\r\n                this._pushOp(new LineStyle(width, color.toCSS(alpha), lineJoin, lineCap));\r\n            }\r\n            else {\r\n                this._pushOp(new LineStyle(width, color, lineJoin, lineCap));\r\n            }\r\n        }\r\n        else {\r\n            this._pushOp(new LineStyle(width, \"rgba(0, 0, 0, \" + alpha + \")\", lineJoin, lineCap));\r\n        }\r\n    }\r\n    setLineDash(dash) {\r\n        this._pushOp(new LineDash(dash ? dash : []));\r\n    }\r\n    setLineDashOffset(dashOffset = 0) {\r\n        this._pushOp(new LineDashOffset(dashOffset));\r\n    }\r\n    drawRect(x, y, width, height) {\r\n        this._pushOp(new DrawRect(x, y, width, height));\r\n    }\r\n    drawCircle(x, y, radius) {\r\n        this._pushOp(new DrawCircle(x, y, radius));\r\n    }\r\n    drawEllipse(x, y, radiusX, radiusY) {\r\n        this._pushOp(new DrawEllipse(x, y, radiusX, radiusY));\r\n    }\r\n    arc(cx, cy, radius, startAngle, endAngle, anticlockwise = false) {\r\n        this._pushOp(new Arc(cx, cy, radius, startAngle, endAngle, anticlockwise));\r\n    }\r\n    arcTo(x1, y1, x2, y2, radius) {\r\n        this._pushOp(new ArcTo(x1, y1, x2, y2, radius));\r\n    }\r\n    lineTo(x, y) {\r\n        this._pushOp(new LineTo(x, y));\r\n    }\r\n    moveTo(x, y) {\r\n        this._pushOp(new MoveTo(x, y));\r\n    }\r\n    bezierCurveTo(cpX, cpY, cpX2, cpY2, toX, toY) {\r\n        this._pushOp(new BezierCurveTo(cpX, cpY, cpX2, cpY2, toX, toY));\r\n    }\r\n    quadraticCurveTo(cpX, cpY, toX, toY) {\r\n        this._pushOp(new QuadraticCurveTo(cpX, cpY, toX, toY));\r\n    }\r\n    closePath() {\r\n        this._pushOp(new ClosePath());\r\n    }\r\n    shadow(color, blur = 0, offsetX = 0, offsetY = 0, opacity) {\r\n        this._hasShadows = true;\r\n        this._pushOp(new Shadow(opacity ? color.toCSS(opacity) : color.toCSS(this._fillAlpha || this._strokeAlpha), blur, offsetX, offsetY));\r\n    }\r\n    image(image, width, height, x, y) {\r\n        this._pushOp(new GraphicsImage(image, width, height, x, y));\r\n    }\r\n    // https://svgwg.org/svg2-draft/paths.html#DProperty\r\n    // TODO better error checking\r\n    svgPath(path) {\r\n        let x = 0;\r\n        let y = 0;\r\n        let cpx = null;\r\n        let cpy = null;\r\n        let qcpx = null;\r\n        let qcpy = null;\r\n        const SEGMENTS_REGEXP = /([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g;\r\n        const ARGS_REGEXP = /[\\u0009\\u0020\\u000A\\u000C\\u000D]*([\\+\\-]?[0-9]*\\.?[0-9]+(?:[eE][\\+\\-]?[0-9]+)?)[\\u0009\\u0020\\u000A\\u000C\\u000D]*,?/g;\r\n        let match;\r\n        while ((match = SEGMENTS_REGEXP.exec(path)) !== null) {\r\n            const name = match[1];\r\n            const rest = match[2];\r\n            const args = [];\r\n            while ((match = ARGS_REGEXP.exec(rest)) !== null) {\r\n                args.push(match[1]);\r\n            }\r\n            // Reset control point\r\n            if (name !== \"S\" && name !== \"s\" && name !== \"C\" && name !== \"c\") {\r\n                cpx = null;\r\n                cpy = null;\r\n            }\r\n            // Reset control point\r\n            if (name !== \"Q\" && name !== \"q\" && name !== \"T\" && name !== \"t\") {\r\n                qcpx = null;\r\n                qcpy = null;\r\n            }\r\n            switch (name) {\r\n                case \"M\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    x = +args[0];\r\n                    y = +args[1];\r\n                    this.moveTo(x, y);\r\n                    for (let i = 2; i < args.length; i += 2) {\r\n                        x = +args[i];\r\n                        y = +args[i + 1];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"m\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    x += +args[0];\r\n                    y += +args[1];\r\n                    this.moveTo(x, y);\r\n                    for (let i = 2; i < args.length; i += 2) {\r\n                        x += +args[i];\r\n                        y += +args[i + 1];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"L\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    for (let i = 0; i < args.length; i += 2) {\r\n                        x = +args[i];\r\n                        y = +args[i + 1];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"l\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    for (let i = 0; i < args.length; i += 2) {\r\n                        x += +args[i];\r\n                        y += +args[i + 1];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"H\":\r\n                    checkMinArgs(name, args.length, 1);\r\n                    for (let i = 0; i < args.length; ++i) {\r\n                        x = +args[i];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"h\":\r\n                    checkMinArgs(name, args.length, 1);\r\n                    for (let i = 0; i < args.length; ++i) {\r\n                        x += +args[i];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"V\":\r\n                    checkMinArgs(name, args.length, 1);\r\n                    for (let i = 0; i < args.length; ++i) {\r\n                        y = +args[i];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"v\":\r\n                    checkMinArgs(name, args.length, 1);\r\n                    for (let i = 0; i < args.length; ++i) {\r\n                        y += +args[i];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"C\":\r\n                    checkEvenArgs(name, args.length, 6);\r\n                    for (let i = 0; i < args.length; i += 6) {\r\n                        const x1 = +args[i];\r\n                        const y1 = +args[i + 1];\r\n                        cpx = +args[i + 2];\r\n                        cpy = +args[i + 3];\r\n                        x = +args[i + 4];\r\n                        y = +args[i + 5];\r\n                        this.bezierCurveTo(x1, y1, cpx, cpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"c\":\r\n                    checkEvenArgs(name, args.length, 6);\r\n                    for (let i = 0; i < args.length; i += 6) {\r\n                        const x1 = +args[i] + x;\r\n                        const y1 = +args[i + 1] + y;\r\n                        cpx = +args[i + 2] + x;\r\n                        cpy = +args[i + 3] + y;\r\n                        x += +args[i + 4];\r\n                        y += +args[i + 5];\r\n                        this.bezierCurveTo(x1, y1, cpx, cpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"S\":\r\n                    checkEvenArgs(name, args.length, 4);\r\n                    if (cpx === null || cpy === null) {\r\n                        cpx = x;\r\n                        cpy = y;\r\n                    }\r\n                    for (let i = 0; i < args.length; i += 4) {\r\n                        const x1 = 2 * x - cpx;\r\n                        const y1 = 2 * y - cpy;\r\n                        cpx = +args[i];\r\n                        cpy = +args[i + 1];\r\n                        x = +args[i + 2];\r\n                        y = +args[i + 3];\r\n                        this.bezierCurveTo(x1, y1, cpx, cpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"s\":\r\n                    checkEvenArgs(name, args.length, 4);\r\n                    if (cpx === null || cpy === null) {\r\n                        cpx = x;\r\n                        cpy = y;\r\n                    }\r\n                    for (let i = 0; i < args.length; i += 4) {\r\n                        const x1 = 2 * x - cpx;\r\n                        const y1 = 2 * y - cpy;\r\n                        cpx = +args[i] + x;\r\n                        cpy = +args[i + 1] + y;\r\n                        x += +args[i + 2];\r\n                        y += +args[i + 3];\r\n                        this.bezierCurveTo(x1, y1, cpx, cpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"Q\":\r\n                    checkEvenArgs(name, args.length, 4);\r\n                    for (let i = 0; i < args.length; i += 4) {\r\n                        qcpx = +args[i];\r\n                        qcpy = +args[i + 1];\r\n                        x = +args[i + 2];\r\n                        y = +args[i + 3];\r\n                        this.quadraticCurveTo(qcpx, qcpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"q\":\r\n                    checkEvenArgs(name, args.length, 4);\r\n                    for (let i = 0; i < args.length; i += 4) {\r\n                        qcpx = +args[i] + x;\r\n                        qcpy = +args[i + 1] + y;\r\n                        x += +args[i + 2];\r\n                        y += +args[i + 3];\r\n                        this.quadraticCurveTo(qcpx, qcpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"T\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    if (qcpx === null || qcpy === null) {\r\n                        qcpx = x;\r\n                        qcpy = y;\r\n                    }\r\n                    for (let i = 0; i < args.length; i += 2) {\r\n                        qcpx = 2 * x - qcpx;\r\n                        qcpy = 2 * y - qcpy;\r\n                        x = +args[i];\r\n                        y = +args[i + 1];\r\n                        this.quadraticCurveTo(qcpx, qcpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"t\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    if (qcpx === null || qcpy === null) {\r\n                        qcpx = x;\r\n                        qcpy = y;\r\n                    }\r\n                    for (let i = 0; i < args.length; i += 2) {\r\n                        qcpx = 2 * x - qcpx;\r\n                        qcpy = 2 * y - qcpy;\r\n                        x += +args[i];\r\n                        y += +args[i + 1];\r\n                        this.quadraticCurveTo(qcpx, qcpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"A\":\r\n                case \"a\":\r\n                    const relative = (name === \"a\");\r\n                    splitArcFlags(args);\r\n                    checkEvenArgs(name, args.length, 7);\r\n                    for (let i = 0; i < args.length; i += 7) {\r\n                        let cx = +args[i + 5];\r\n                        let cy = +args[i + 6];\r\n                        if (relative) {\r\n                            cx += x;\r\n                            cy += y;\r\n                        }\r\n                        const bs = arcToBezier({\r\n                            px: x,\r\n                            py: y,\r\n                            rx: +args[i],\r\n                            ry: +args[i + 1],\r\n                            xAxisRotation: +args[i + 2],\r\n                            largeArcFlag: assertBinary(+args[i + 3]),\r\n                            sweepFlag: assertBinary(+args[i + 4]),\r\n                            cx,\r\n                            cy,\r\n                        });\r\n                        $array.each(bs, (b) => {\r\n                            this.bezierCurveTo(b.x1, b.y1, b.x2, b.y2, b.x, b.y);\r\n                            x = b.x;\r\n                            y = b.y;\r\n                        });\r\n                    }\r\n                    break;\r\n                case \"Z\":\r\n                case \"z\":\r\n                    checkArgs(name, args.length, 0);\r\n                    this.closePath();\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    _runPath(context) {\r\n        context.beginPath();\r\n        $array.each(this._operations, (op) => {\r\n            op.path(context);\r\n        });\r\n    }\r\n    _render(status, targetGhostLayer = 0) {\r\n        super._render(status);\r\n        const layerDirty = status.layer.dirty;\r\n        const interactive = this._isInteractive(status);\r\n        const ghostOnly = this._ghostOnly(targetGhostLayer);\r\n        const drawGhost = this._drawGhost(status, targetGhostLayer);\r\n        if (layerDirty || interactive || ghostOnly) {\r\n            const context = status.layer.context;\r\n            const ghostContext = this._renderer._ghostLayer.context;\r\n            if (layerDirty && !ghostOnly) {\r\n                context.globalCompositeOperation = this.blendMode;\r\n                context.beginPath();\r\n            }\r\n            let color;\r\n            if (drawGhost) {\r\n                ghostContext.beginPath();\r\n                color = this._getColorId();\r\n            }\r\n            $array.each(this._operations, (op) => {\r\n                if (layerDirty && !ghostOnly) {\r\n                    op.path(context);\r\n                    op.colorize(context, undefined);\r\n                }\r\n                if (drawGhost) {\r\n                    op.pathGhost(ghostContext);\r\n                    op.colorizeGhost(ghostContext, color);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    renderDetached(context) {\r\n        if (this.visible) {\r\n            this._setMatrix();\r\n            context.save();\r\n            // We must apply the mask before we transform the element\r\n            const mask = this.mask;\r\n            if (mask) {\r\n                mask._setMatrix();\r\n                mask._transform(context, 1);\r\n                mask._runPath(context);\r\n                context.clip();\r\n            }\r\n            // TODO handle compoundAlpha somehow ?\r\n            context.globalAlpha = this.compoundAlpha * this.alpha;\r\n            this._transform(context, 1);\r\n            if (this.filter) {\r\n                context.filter = this.filter;\r\n            }\r\n            context.globalCompositeOperation = this.blendMode;\r\n            context.beginPath();\r\n            $array.each(this._operations, (op) => {\r\n                op.path(context);\r\n                op.colorize(context, undefined);\r\n            });\r\n            context.restore();\r\n        }\r\n    }\r\n    _addBounds(bounds) {\r\n        if (this.visible && this.isMeasured) {\r\n            $array.each(this._operations, (op) => {\r\n                op.addBounds(bounds);\r\n            });\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasText extends CanvasDisplayObject {\r\n    constructor(renderer, text, style) {\r\n        super(renderer);\r\n        Object.defineProperty(this, \"text\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"style\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"resolution\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"textVisible\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"truncated\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_textInfo\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_originalScale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        this.text = text;\r\n        this.style = style;\r\n    }\r\n    invalidateBounds() {\r\n        super.invalidateBounds();\r\n        this._textInfo = undefined;\r\n    }\r\n    invalidateVisibility() {\r\n        this.textVisible = true;\r\n        this.scale = this._originalScale || 1;\r\n    }\r\n    _shared(context) {\r\n        if (this.style.textAlign) {\r\n            context.textAlign = this.style.textAlign;\r\n        }\r\n        if (this.style.direction) {\r\n            context.direction = this.style.direction;\r\n        }\r\n        if (this.style.textBaseline) {\r\n            context.textBaseline = this.style.textBaseline;\r\n        }\r\n    }\r\n    _prerender(status, ignoreGhost = false, ignoreFontWeight = false) {\r\n        super._render(status);\r\n        const context = status.layer.context;\r\n        const ghostContext = this._renderer._ghostLayer.context;\r\n        // Font style\r\n        const style = this.style;\r\n        let fontStyle = this._getFontStyle(undefined, ignoreFontWeight);\r\n        context.font = fontStyle;\r\n        if (this._isInteractive(status) && !ignoreGhost) {\r\n            ghostContext.font = fontStyle;\r\n        }\r\n        // Other parameters\r\n        if (style.fill) {\r\n            if (style.fill instanceof Color) {\r\n                context.fillStyle = style.fill.toCSS(style.fillOpacity != undefined ? style.fillOpacity : 1);\r\n            }\r\n            else {\r\n                context.fillStyle = style.fill;\r\n            }\r\n        }\r\n        if (style.shadowColor) {\r\n            status.layer.context.shadowColor = style.shadowColor.toCSS(style.shadowOpacity || 1);\r\n        }\r\n        if (style.shadowBlur) {\r\n            status.layer.context.shadowBlur = style.shadowBlur;\r\n        }\r\n        if (style.shadowOffsetX) {\r\n            status.layer.context.shadowOffsetX = style.shadowOffsetX;\r\n        }\r\n        if (style.shadowOffsetY) {\r\n            status.layer.context.shadowOffsetY = style.shadowOffsetY;\r\n        }\r\n        this._shared(context);\r\n        if (this._isInteractive(status) && !ignoreGhost) {\r\n            ghostContext.fillStyle = this._getColorId();\r\n            this._shared(ghostContext);\r\n        }\r\n    }\r\n    _getFontStyle(style2, ignoreFontWeight = false) {\r\n        // Process defaults\r\n        const style = this.style;\r\n        let fontStyle = [];\r\n        if (style2 && style2.fontVariant) {\r\n            fontStyle.push(style2.fontVariant);\r\n        }\r\n        else if (style.fontVariant) {\r\n            fontStyle.push(style.fontVariant);\r\n        }\r\n        if (!ignoreFontWeight) {\r\n            if (style2 && style2.fontWeight) {\r\n                fontStyle.push(style2.fontWeight);\r\n            }\r\n            else if (style.fontWeight) {\r\n                fontStyle.push(style.fontWeight);\r\n            }\r\n        }\r\n        if (style2 && style2.fontStyle) {\r\n            fontStyle.push(style2.fontStyle);\r\n        }\r\n        else if (style.fontStyle) {\r\n            fontStyle.push(style.fontStyle);\r\n        }\r\n        if (style2 && style2.fontSize) {\r\n            if ($type.isNumber(style2.fontSize)) {\r\n                style2.fontSize = style2.fontSize + \"px\";\r\n            }\r\n            fontStyle.push(style2.fontSize);\r\n        }\r\n        else if (style.fontSize) {\r\n            if ($type.isNumber(style.fontSize)) {\r\n                style.fontSize = style.fontSize + \"px\";\r\n            }\r\n            fontStyle.push(style.fontSize);\r\n        }\r\n        if (style2 && style2.fontFamily) {\r\n            fontStyle.push(style2.fontFamily);\r\n        }\r\n        else if (style.fontFamily) {\r\n            fontStyle.push(style.fontFamily);\r\n        }\r\n        else if (fontStyle.length) {\r\n            fontStyle.push(\"Arial\");\r\n        }\r\n        return fontStyle.join(\" \");\r\n    }\r\n    _render(status, targetGhostLayer = 0) {\r\n        // We need measurements in order to properly position text for alignment\r\n        if (!this._textInfo) {\r\n            this._measure(status);\r\n        }\r\n        if (this.textVisible) {\r\n            const interactive = this._isInteractive(status);\r\n            const context = status.layer.context;\r\n            const layerDirty = status.layer.dirty;\r\n            const ghostContext = this._renderer._ghostLayer.context;\r\n            const ghostOnly = this._ghostOnly(targetGhostLayer);\r\n            const drawGhost = this._drawGhost(status, targetGhostLayer);\r\n            context.save();\r\n            ghostContext.save();\r\n            this._prerender(status);\r\n            // const lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\r\n            // const x = this._localBounds && (this._localBounds.left < 0) ? Math.abs(this._localBounds.left) : 0;\r\n            // Process text info produced by _measure()\r\n            $array.each(this._textInfo, (line, _index) => {\r\n                $array.each(line.textChunks, (chunk, _index) => {\r\n                    // Set style\r\n                    if (chunk.style) {\r\n                        context.save();\r\n                        ghostContext.save();\r\n                        if (!ghostOnly) {\r\n                            context.font = chunk.style;\r\n                        }\r\n                        if (this._isInteractive(status)) {\r\n                            ghostContext.font = chunk.style;\r\n                        }\r\n                    }\r\n                    if (chunk.fill) {\r\n                        context.save();\r\n                        if (!ghostOnly) {\r\n                            context.fillStyle = chunk.fill.toCSS();\r\n                        }\r\n                        // Color does not affect ghostContext so we not set it\r\n                    }\r\n                    // Draw text\r\n                    if (layerDirty && !ghostOnly) {\r\n                        context.fillText(chunk.text, chunk.offsetX, line.offsetY + chunk.offsetY);\r\n                    }\r\n                    // Draw underline\r\n                    if (chunk.textDecoration == \"underline\" || chunk.textDecoration == \"line-through\") {\r\n                        let thickness = 1;\r\n                        let offset = 1;\r\n                        let fontSize = chunk.height;\r\n                        const oversizedBehavior = this.style.oversizedBehavior || \"\";\r\n                        if ([\"truncate\", \"wrap\", \"wrap-no-break\"].indexOf(oversizedBehavior) > -1) {\r\n                            // Measure actual width of the text so the line fits\r\n                            const metrics = this._measureText(chunk.text, context);\r\n                            chunk.width = metrics.actualBoundingBoxLeft + metrics.actualBoundingBoxRight;\r\n                        }\r\n                        let offsetX = chunk.offsetX;\r\n                        switch (this.style.textAlign) {\r\n                            case \"right\":\r\n                            case \"end\":\r\n                                offsetX -= chunk.width;\r\n                                break;\r\n                            case \"center\":\r\n                                offsetX -= chunk.width / 2;\r\n                                break;\r\n                        }\r\n                        if (chunk.style) {\r\n                            const format = TextFormatter.getTextStyle(chunk.style);\r\n                            switch (format.fontWeight) {\r\n                                case \"bolder\":\r\n                                case \"bold\":\r\n                                case \"700\":\r\n                                case \"800\":\r\n                                case \"900\":\r\n                                    thickness = 2;\r\n                                    break;\r\n                            }\r\n                        }\r\n                        if (fontSize) {\r\n                            offset = fontSize / 20;\r\n                        }\r\n                        let y;\r\n                        if (chunk.textDecoration == \"line-through\") {\r\n                            y = thickness + line.offsetY + chunk.offsetY - chunk.height / 2;\r\n                        }\r\n                        else {\r\n                            y = thickness + offset * 1.5 + line.offsetY + chunk.offsetY;\r\n                        }\r\n                        if (!ghostOnly) {\r\n                            context.save();\r\n                            context.beginPath();\r\n                            if (chunk.fill) {\r\n                                context.strokeStyle = chunk.fill.toCSS();\r\n                            }\r\n                            else if (this.style.fill && this.style.fill instanceof Color) {\r\n                                context.strokeStyle = this.style.fill.toCSS();\r\n                            }\r\n                            context.lineWidth = thickness * offset;\r\n                            context.moveTo(offsetX, y);\r\n                            context.lineTo(offsetX + chunk.width, y);\r\n                            context.stroke();\r\n                            context.restore();\r\n                        }\r\n                    }\r\n                    if (interactive && this.interactive && drawGhost) {\r\n                        // Draw text in ghost canvas ONLY if it is set as interactive\r\n                        // explicitly. This way we avoid hit test anomalies caused by anti\r\n                        // aliasing of text.\r\n                        ghostContext.fillText(chunk.text, chunk.offsetX, line.offsetY + chunk.offsetY);\r\n                    }\r\n                    if (chunk.fill) {\r\n                        context.restore();\r\n                        // Color does not affect ghostContext so we not set it\r\n                    }\r\n                    // Reset style\r\n                    if (chunk.style) {\r\n                        context.restore();\r\n                        ghostContext.restore();\r\n                    }\r\n                });\r\n            });\r\n            context.restore();\r\n            ghostContext.restore();\r\n        }\r\n    }\r\n    _addBounds(bounds) {\r\n        if (this.visible && this.isMeasured) {\r\n            //if (this._textVisible) {\r\n            const x = this._measure({\r\n                inactive: this.inactive,\r\n                layer: this.getLayer(),\r\n            });\r\n            setPoint(bounds, { x: x.left, y: x.top });\r\n            setPoint(bounds, { x: x.right, y: x.bottom });\r\n            //}\r\n        }\r\n    }\r\n    _ignoreFontWeight() {\r\n        return /apple/i.test(navigator.vendor);\r\n    }\r\n    _measure(status) {\r\n        const context = status.layer.context;\r\n        const ghostContext = this._renderer._ghostLayer.context;\r\n        const rtl = this.style.direction == \"rtl\";\r\n        // Reset text info\r\n        this._textInfo = [];\r\n        // Init\r\n        const oversizedBehavior = this.style.oversizedBehavior;\r\n        const maxWidth = this.style.maxWidth;\r\n        const truncate = $type.isNumber(maxWidth) && oversizedBehavior == \"truncate\";\r\n        const wrap = $type.isNumber(maxWidth) && (oversizedBehavior == \"wrap\" || oversizedBehavior == \"wrap-no-break\");\r\n        // Pre-render\r\n        context.save();\r\n        ghostContext.save();\r\n        this._prerender(status, true, this._ignoreFontWeight());\r\n        // Get default font metrix\r\n        const refText = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 \";\r\n        // Split up text into lines\r\n        const lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\r\n        let styleRestored = true;\r\n        let minX = 0;\r\n        let maxX = 0;\r\n        // Iterate through the lines\r\n        let offsetY = 0;\r\n        let currentStyle;\r\n        $array.each(lines, (line, _index) => {\r\n            // Split up line into format/value chunks\r\n            let chunks;\r\n            if (line == \"\") {\r\n                chunks = [{\r\n                        type: \"value\",\r\n                        text: \"\"\r\n                    }];\r\n            }\r\n            else {\r\n                chunks = TextFormatter.chunk(line, false, this.style.ignoreFormatting);\r\n            }\r\n            while (chunks.length > 0) {\r\n                // Init line object\r\n                let lineInfo = {\r\n                    offsetY: offsetY,\r\n                    ascent: 0,\r\n                    width: 0,\r\n                    height: 0,\r\n                    left: 0,\r\n                    right: 0,\r\n                    textChunks: []\r\n                };\r\n                // Measure reference text\r\n                const metrics = this._measureText(refText, context);\r\n                const height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\r\n                lineInfo.height = height;\r\n                lineInfo.ascent = metrics.actualBoundingBoxAscent;\r\n                let currentFormat;\r\n                let currentDecoration = this.style.textDecoration;\r\n                let currentFill;\r\n                let currentChunkWidth;\r\n                let skipFurtherText = false;\r\n                let firstTextChunk = true;\r\n                let leftoverChunks = [];\r\n                let currentVerticalAlign;\r\n                //let offsetX = 0;\r\n                //let chunk;\r\n                //while(chunk = chunks.shift()) {\r\n                $array.eachContinue(chunks, (chunk, index) => {\r\n                    // Format chunk\r\n                    if (chunk.type == \"format\") {\r\n                        if (chunk.text == \"[/]\") {\r\n                            if (!styleRestored) {\r\n                                context.restore();\r\n                                ghostContext.restore();\r\n                                styleRestored = true;\r\n                            }\r\n                            currentFill = undefined;\r\n                            currentStyle = undefined;\r\n                            currentChunkWidth = undefined;\r\n                            currentDecoration = this.style.textDecoration;\r\n                            currentVerticalAlign = undefined;\r\n                            currentFormat = chunk.text;\r\n                        }\r\n                        else {\r\n                            if (!styleRestored) {\r\n                                context.restore();\r\n                                ghostContext.restore();\r\n                            }\r\n                            let format = TextFormatter.getTextStyle(chunk.text);\r\n                            const fontStyle = this._getFontStyle(format);\r\n                            context.save();\r\n                            ghostContext.save();\r\n                            context.font = fontStyle;\r\n                            currentStyle = fontStyle;\r\n                            currentFormat = chunk.text;\r\n                            if (format.textDecoration) {\r\n                                currentDecoration = format.textDecoration;\r\n                            }\r\n                            if (format.fill) {\r\n                                currentFill = format.fill;\r\n                            }\r\n                            if (format.width) {\r\n                                currentChunkWidth = $type.toNumber(format.width);\r\n                            }\r\n                            if (format.verticalAlign) {\r\n                                currentVerticalAlign = format.verticalAlign;\r\n                            }\r\n                            styleRestored = false;\r\n                            // Measure reference text after change of format\r\n                            const metrics = this._measureText(refText, context);\r\n                            const height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\r\n                            if (height > lineInfo.height) {\r\n                                lineInfo.height = height;\r\n                            }\r\n                            if (metrics.actualBoundingBoxAscent > lineInfo.ascent) {\r\n                                lineInfo.ascent = metrics.actualBoundingBoxAscent;\r\n                            }\r\n                        }\r\n                    }\r\n                    // Text chunk\r\n                    else if (chunk.type == \"value\" && !skipFurtherText) {\r\n                        // Measure\r\n                        const metrics = this._measureText(chunk.text, context);\r\n                        let chunkWidth = metrics.actualBoundingBoxLeft + metrics.actualBoundingBoxRight;\r\n                        // Check for fit\r\n                        if (truncate) {\r\n                            this.truncated = undefined;\r\n                            // Break words?\r\n                            let breakWords = firstTextChunk || this.style.breakWords || false;\r\n                            // Measure ellipsis and check if it fits\r\n                            const ellipsis = this.style.ellipsis || \"\";\r\n                            const ellipsisMetrics = this._measureText(ellipsis, context);\r\n                            const ellipsisWidth = ellipsisMetrics.actualBoundingBoxLeft + ellipsisMetrics.actualBoundingBoxRight;\r\n                            // Check fit\r\n                            if ((lineInfo.width + chunkWidth) > maxWidth) {\r\n                                const excessWidth = maxWidth - lineInfo.width - ellipsisWidth;\r\n                                chunk.text = this._truncateText(context, chunk.text, excessWidth, breakWords);\r\n                                chunk.text += ellipsis;\r\n                                skipFurtherText = true;\r\n                                this.truncated = true;\r\n                            }\r\n                        }\r\n                        else if (wrap) {\r\n                            // Check fit\r\n                            if ((lineInfo.width + chunkWidth) > maxWidth) {\r\n                                const excessWidth = maxWidth - lineInfo.width;\r\n                                const tmpText = this._truncateText(context, chunk.text, excessWidth, false, (firstTextChunk && this.style.oversizedBehavior != \"wrap-no-break\"));\r\n                                if (tmpText == \"\") {\r\n                                    // Unable to fit a single letter - hide the whole label\r\n                                    this.textVisible = true;\r\n                                    return false;\r\n                                }\r\n                                //skipFurtherText = true;\r\n                                //Add remaining chunks for the next line\r\n                                leftoverChunks = chunks.slice(index + 1);\r\n                                //Add remaining text of current chunk if it was forced-cut\r\n                                if ($utils.trim(tmpText) != $utils.trim(chunk.text)) {\r\n                                    leftoverChunks.unshift({\r\n                                        type: \"value\",\r\n                                        text: chunk.text.substr(tmpText.length)\r\n                                    });\r\n                                    if (currentFormat) {\r\n                                        leftoverChunks.unshift({\r\n                                            type: \"format\",\r\n                                            text: currentFormat\r\n                                        });\r\n                                    }\r\n                                }\r\n                                // Set current chunk (truncated)\r\n                                chunk.text = $utils.trim(tmpText);\r\n                                chunks = [];\r\n                                skipFurtherText = true;\r\n                            }\r\n                        }\r\n                        // Chunk width?\r\n                        let leftBoundMod = 1;\r\n                        let rightBoundMod = 1;\r\n                        if (currentStyle && currentChunkWidth && (currentChunkWidth > chunkWidth)) {\r\n                            // increase horizontal bounding boxes accordingly\r\n                            const boundsMod = chunkWidth / currentChunkWidth;\r\n                            switch (this.style.textAlign) {\r\n                                case \"right\":\r\n                                case \"end\":\r\n                                    leftBoundMod = boundsMod;\r\n                                    break;\r\n                                case \"center\":\r\n                                    leftBoundMod = boundsMod;\r\n                                    rightBoundMod = boundsMod;\r\n                                    break;\r\n                                default:\r\n                                    rightBoundMod = boundsMod;\r\n                            }\r\n                            chunkWidth = currentChunkWidth;\r\n                        }\r\n                        const chunkHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\r\n                        if (chunkHeight > lineInfo.height) {\r\n                            lineInfo.height = chunkHeight;\r\n                        }\r\n                        if (metrics.actualBoundingBoxAscent > lineInfo.ascent) {\r\n                            lineInfo.ascent = metrics.actualBoundingBoxAscent;\r\n                        }\r\n                        lineInfo.width += chunkWidth;\r\n                        lineInfo.left += metrics.actualBoundingBoxLeft / leftBoundMod;\r\n                        lineInfo.right += metrics.actualBoundingBoxRight / rightBoundMod;\r\n                        lineInfo.textChunks.push({\r\n                            style: currentStyle,\r\n                            fill: currentFill,\r\n                            text: chunk.text,\r\n                            width: chunkWidth,\r\n                            height: chunkHeight,\r\n                            left: metrics.actualBoundingBoxLeft,\r\n                            right: metrics.actualBoundingBoxRight,\r\n                            ascent: metrics.actualBoundingBoxAscent,\r\n                            offsetX: 0,\r\n                            offsetY: 0,\r\n                            textDecoration: currentDecoration,\r\n                            verticalAlign: currentVerticalAlign\r\n                        });\r\n                        //offsetX += chunkWidth;\r\n                        firstTextChunk = false;\r\n                    }\r\n                    if (leftoverChunks) {\r\n                        //return false;\r\n                    }\r\n                    return true;\r\n                    //}\r\n                });\r\n                if (this.style.lineHeight instanceof Percent) {\r\n                    lineInfo.height *= this.style.lineHeight.value;\r\n                    lineInfo.ascent *= this.style.lineHeight.value;\r\n                }\r\n                else {\r\n                    lineInfo.height *= this.style.lineHeight || 1.2;\r\n                    lineInfo.ascent *= this.style.lineHeight || 1.2;\r\n                }\r\n                if (minX < lineInfo.left) {\r\n                    minX = lineInfo.left;\r\n                }\r\n                if (maxX < lineInfo.right) {\r\n                    maxX = lineInfo.right;\r\n                }\r\n                this._textInfo.push(lineInfo);\r\n                //lineInfo.offsetY += lineInfo.ascent;\r\n                offsetY += lineInfo.height;\r\n                // Reset chunks so that it can proceed to the next line\r\n                chunks = leftoverChunks || [];\r\n            }\r\n        });\r\n        if (!styleRestored) {\r\n            context.restore();\r\n            ghostContext.restore();\r\n        }\r\n        // Adjust chunk internal offsets\r\n        $array.each(this._textInfo, (lineInfo, _index) => {\r\n            let currentChunkOffset = 0;\r\n            $array.each(lineInfo.textChunks, (chunk) => {\r\n                chunk.offsetX = currentChunkOffset + chunk.left - lineInfo.left;\r\n                chunk.offsetY += lineInfo.height - lineInfo.height * (this.style.baselineRatio || 0.19);\r\n                currentChunkOffset += chunk.width * (rtl ? -1 : 1);\r\n                if (chunk.verticalAlign) {\r\n                    switch (chunk.verticalAlign) {\r\n                        case \"super\":\r\n                            chunk.offsetY -= lineInfo.height / 2 - chunk.height / 2;\r\n                            break;\r\n                        case \"sub\":\r\n                            chunk.offsetY += chunk.height / 2;\r\n                            break;\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        const bounds = {\r\n            left: rtl ? -maxX : -minX,\r\n            top: 0,\r\n            right: rtl ? minX : maxX,\r\n            bottom: offsetY,\r\n        };\r\n        // We need to fit?\r\n        if (oversizedBehavior !== \"none\") {\r\n            const ratio = this._fitRatio(bounds);\r\n            if (ratio < 1) {\r\n                if (oversizedBehavior == \"fit\") {\r\n                    if ($type.isNumber(this.style.minScale) && (ratio < this.style.minScale)) {\r\n                        this.textVisible = false;\r\n                        bounds.left = 0;\r\n                        bounds.top = 0;\r\n                        bounds.right = 0;\r\n                        bounds.bottom = 0;\r\n                    }\r\n                    else {\r\n                        if (!this._originalScale) {\r\n                            this._originalScale = this.scale;\r\n                        }\r\n                        this.scale = ratio;\r\n                        this.textVisible = true;\r\n                    }\r\n                }\r\n                else if (oversizedBehavior == \"hide\") {\r\n                    this.textVisible = false;\r\n                    bounds.left = 0;\r\n                    bounds.top = 0;\r\n                    bounds.right = 0;\r\n                    bounds.bottom = 0;\r\n                }\r\n                else {\r\n                    switch (this.style.textAlign) {\r\n                        case \"right\":\r\n                        case \"end\":\r\n                            bounds.left = rtl ? maxWidth : -maxWidth;\r\n                            bounds.right = 0;\r\n                            break;\r\n                        case \"center\":\r\n                            bounds.left = -maxWidth / 2;\r\n                            bounds.right = maxWidth / 2;\r\n                            break;\r\n                        default:\r\n                            bounds.left = 0;\r\n                            bounds.right = rtl ? -maxWidth : maxWidth;\r\n                    }\r\n                    this.scale = this._originalScale || 1;\r\n                    this._originalScale = undefined;\r\n                    this.textVisible = true;\r\n                }\r\n            }\r\n            else {\r\n                this.scale = this._originalScale || 1;\r\n                this._originalScale = undefined;\r\n                this.textVisible = true;\r\n            }\r\n        }\r\n        context.restore();\r\n        ghostContext.restore();\r\n        return bounds;\r\n    }\r\n    _fitRatio(bounds) {\r\n        const maxW = this.style.maxWidth;\r\n        const maxH = this.style.maxHeight;\r\n        if (!$type.isNumber(maxW) && !$type.isNumber(maxH)) {\r\n            return 1;\r\n        }\r\n        const w = bounds.right - bounds.left;\r\n        const h = bounds.bottom - bounds.top;\r\n        return Math.min(maxW / w || 1, maxH / h || 1);\r\n    }\r\n    _truncateText(context, text, maxWidth, breakWords = false, fallbackBreakWords = true) {\r\n        let width;\r\n        do {\r\n            if (breakWords) {\r\n                text = text.slice(0, -1);\r\n            }\r\n            else {\r\n                let tmp = text.replace(/[^,;:!?\\\\\\/\\s​]+[,;:!?\\\\\\/\\s​]*$/g, \"\");\r\n                if ((tmp == \"\" || tmp === text) && fallbackBreakWords) {\r\n                    breakWords = true;\r\n                }\r\n                else if (tmp == \"\") {\r\n                    return text;\r\n                }\r\n                else {\r\n                    text = tmp;\r\n                }\r\n            }\r\n            const metrics = this._measureText(text, context);\r\n            width = metrics.actualBoundingBoxLeft + metrics.actualBoundingBoxRight;\r\n        } while ((width > maxWidth) && text != \"\");\r\n        return text;\r\n    }\r\n    _measureText(text, context) {\r\n        let metrics = context.measureText(text);\r\n        let fakeMetrics = {};\r\n        if (metrics.actualBoundingBoxAscent == null) {\r\n            const div = document.createElement(\"div\");\r\n            div.innerText = text;\r\n            div.style.visibility = \"hidden\";\r\n            div.style.position = \"absolute\";\r\n            div.style.top = \"-1000000px;\";\r\n            div.style.fontFamily = this.style.fontFamily || \"\";\r\n            div.style.fontSize = this.style.fontSize + \"\";\r\n            document.body.appendChild(div);\r\n            const bbox = div.getBoundingClientRect();\r\n            document.body.removeChild(div);\r\n            const h = bbox.height;\r\n            const w = metrics.width;\r\n            let left = 0;\r\n            let right = w;\r\n            fakeMetrics = {\r\n                actualBoundingBoxAscent: h,\r\n                actualBoundingBoxDescent: 0,\r\n                actualBoundingBoxLeft: left,\r\n                actualBoundingBoxRight: right,\r\n                fontBoundingBoxAscent: h,\r\n                fontBoundingBoxDescent: 0,\r\n                width: w\r\n            };\r\n            //return fake;\r\n        }\r\n        else {\r\n            fakeMetrics = {\r\n                actualBoundingBoxAscent: metrics.actualBoundingBoxAscent,\r\n                actualBoundingBoxDescent: metrics.actualBoundingBoxDescent,\r\n                actualBoundingBoxLeft: metrics.actualBoundingBoxLeft,\r\n                actualBoundingBoxRight: metrics.actualBoundingBoxRight,\r\n                fontBoundingBoxAscent: metrics.actualBoundingBoxAscent,\r\n                fontBoundingBoxDescent: metrics.actualBoundingBoxDescent,\r\n                width: metrics.width\r\n            };\r\n        }\r\n        const w = metrics.width;\r\n        switch (this.style.textAlign) {\r\n            case \"right\":\r\n            case \"end\":\r\n                fakeMetrics.actualBoundingBoxLeft = w;\r\n                fakeMetrics.actualBoundingBoxRight = 0;\r\n                break;\r\n            case \"center\":\r\n                fakeMetrics.actualBoundingBoxLeft = w / 2;\r\n                fakeMetrics.actualBoundingBoxRight = w / 2;\r\n                break;\r\n            default:\r\n                fakeMetrics.actualBoundingBoxLeft = 0;\r\n                fakeMetrics.actualBoundingBoxRight = w;\r\n        }\r\n        return fakeMetrics;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasTextStyle {\r\n    constructor() {\r\n        //public wordWrapWidth: number = 100;\r\n        Object.defineProperty(this, \"fill\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fillOpacity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"textAlign\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontFamily\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontSize\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontWeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontStyle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontVariant\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"textDecoration\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowColor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowBlur\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOffsetX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOffsetY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOpacity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // leading?: number;\r\n        // letterSpacing?: number;\r\n        Object.defineProperty(this, \"lineHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: percent(120)\r\n        });\r\n        Object.defineProperty(this, \"baselineRatio\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0.19\r\n        });\r\n        // padding?: number;\r\n        // stroke?: number;\r\n        // strokeThickness?: number;\r\n        // trim?: number;\r\n        // wordWrap?: boolean;\r\n        Object.defineProperty(this, \"direction\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"textBaseline\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"oversizedBehavior\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"none\"\r\n        });\r\n        Object.defineProperty(this, \"breakWords\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"ellipsis\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"…\"\r\n        });\r\n        Object.defineProperty(this, \"maxWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"maxHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"minScale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"ignoreFormatting\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasRadialText extends CanvasText {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"textType\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"circular\"\r\n        });\r\n        Object.defineProperty(this, \"radius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"startAngle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"inside\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"orientation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"auto\"\r\n        });\r\n        Object.defineProperty(this, \"kerning\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_textReversed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    _render(status, targetGhostLayer = 0) {\r\n        switch (this.textType) {\r\n            case \"circular\":\r\n                this._renderCircular(status, targetGhostLayer);\r\n                break;\r\n            default:\r\n                super._render(status, targetGhostLayer);\r\n                break;\r\n        }\r\n    }\r\n    _renderCircular(status, targetGhostLayer = 0) {\r\n        if (this.textVisible) {\r\n            this._prerender(status);\r\n            const interactive = this._isInteractive(status);\r\n            const context = status.layer.context;\r\n            const layerDirty = status.layer.dirty;\r\n            const ghostContext = this._renderer._ghostLayer.context;\r\n            // Savepoint\r\n            context.save();\r\n            if (interactive) {\r\n                ghostContext.save();\r\n            }\r\n            // We need measurements in order to properly position text for alignment\r\n            if (!this._textInfo) {\r\n                this._measure(status);\r\n            }\r\n            // Init\r\n            let radius = (this.radius || 0);\r\n            let startAngle = (this.startAngle || 0);\r\n            let deltaAngle = 0;\r\n            let orientation = this.orientation;\r\n            let inward = orientation == \"auto\" ? \"auto\" : orientation == \"inward\";\r\n            const inside = this.inside;\r\n            const align = this.style.textAlign || \"left\";\r\n            const kerning = this.kerning || 0;\r\n            let clockwise = align == \"left\" ? 1 : -1;\r\n            const shouldReverse = !this._textReversed;\r\n            const ghostOnly = this._ghostOnly(targetGhostLayer);\r\n            const drawGhost = this._drawGhost(status, targetGhostLayer);\r\n            // Check if we need to invert the whole stuff\r\n            if (inward == \"auto\") {\r\n                // Calc max angle so we know whether we need to flip it\r\n                let maxAngle = 0;\r\n                let midAngle = 0;\r\n                $array.each(this._textInfo, (line, _index) => {\r\n                    const deltaAngle = startAngle + (line.width / (radius - line.height)) / 2 * -clockwise;\r\n                    if (deltaAngle > maxAngle) {\r\n                        maxAngle = deltaAngle;\r\n                    }\r\n                });\r\n                if (align == \"left\") {\r\n                    midAngle = (maxAngle + deltaAngle / 2) * $math.DEGREES;\r\n                }\r\n                else if (align == \"right\") {\r\n                    midAngle = (maxAngle - deltaAngle / 2) * $math.DEGREES;\r\n                }\r\n                else {\r\n                    midAngle = startAngle * $math.DEGREES;\r\n                }\r\n                midAngle = $math.normalizeAngle(midAngle);\r\n                inward = (midAngle >= 270) || (midAngle <= 90);\r\n            }\r\n            if (inward == true && shouldReverse) {\r\n                this._textInfo.reverse();\r\n                this._textReversed = true;\r\n            }\r\n            // if ((inward == false && align == \"left\") || (inward == true && align == \"right\")) {\r\n            // \tclockwise *= -1;\r\n            // }\r\n            // Process text info produced by _measure()\r\n            $array.each(this._textInfo, (line, _index) => {\r\n                const textHeight = line.height;\r\n                // Adjust radius (for `inside = false`)\r\n                // Radius adjustment for `inside = false` is below the line calculation\r\n                if (!inside) {\r\n                    radius += textHeight;\r\n                }\r\n                // Reverse letters if we're painting them counter-clockwise\r\n                if (((clockwise == -1 && inward) || (clockwise == 1 && !inward)) && shouldReverse) {\r\n                    line.textChunks.reverse();\r\n                }\r\n                // Init angles\r\n                let lineStartAngle = startAngle;\r\n                deltaAngle = 0;\r\n                // Adjust for center-align\r\n                if (align == \"center\") {\r\n                    lineStartAngle += (line.width / (radius - textHeight)) / 2 * -clockwise;\r\n                    deltaAngle = lineStartAngle - startAngle;\r\n                }\r\n                // if (inward == \"auto\") {\r\n                // \tlet midAngle;\r\n                // \tif (align == \"left\") {\r\n                // \t\tmidAngle = (lineStartAngle + deltaAngle / 2) * $math.DEGREES;\r\n                // \t}\r\n                // \telse if () {\r\n                // \t\tmidAngle = (lineStartAngle - deltaAngle / 2) * $math.DEGREES;\r\n                // \t}\r\n                // \tinward = (midAngle >= 270) || (midAngle <= 90);\r\n                // }\r\n                // Rotate letters if they are facing outward\r\n                lineStartAngle += (Math.PI * (inward ? 0 : 1)); // Rotate 180 if outward\r\n                // Savepoint\r\n                context.save();\r\n                if (interactive) {\r\n                    ghostContext.save();\r\n                }\r\n                // Assume starting angle\r\n                if (!ghostOnly) {\r\n                    context.rotate(lineStartAngle);\r\n                }\r\n                if (interactive) {\r\n                    ghostContext.rotate(lineStartAngle);\r\n                }\r\n                let angleShift = 0;\r\n                $array.each(line.textChunks, (chunk, _index) => {\r\n                    // Draw the letter\r\n                    const char = chunk.text;\r\n                    const charWidth = chunk.width;\r\n                    // Rotate half a letter\r\n                    angleShift = (charWidth / 2) / (radius - textHeight) * clockwise;\r\n                    if (!ghostOnly) {\r\n                        context.rotate(angleShift);\r\n                    }\r\n                    if (interactive) {\r\n                        ghostContext.rotate(angleShift);\r\n                    }\r\n                    // Set style\r\n                    if (chunk.style) {\r\n                        context.save();\r\n                        ghostContext.save();\r\n                        if (!ghostOnly) {\r\n                            context.font = chunk.style;\r\n                        }\r\n                        if (interactive) {\r\n                            ghostContext.font = chunk.style;\r\n                        }\r\n                    }\r\n                    if (chunk.fill) {\r\n                        context.save();\r\n                        if (!ghostOnly) {\r\n                            context.fillStyle = chunk.fill.toCSS();\r\n                        }\r\n                        // Color does not affect ghostContext so we not set it\r\n                    }\r\n                    // Center letters\r\n                    if (!ghostOnly) {\r\n                        context.textBaseline = \"middle\";\r\n                        context.textAlign = \"center\";\r\n                    }\r\n                    if (interactive) {\r\n                        ghostContext.textBaseline = \"middle\";\r\n                        ghostContext.textAlign = \"center\";\r\n                    }\r\n                    // Plop the letter\r\n                    if (layerDirty && !ghostOnly) {\r\n                        context.fillText(char, 0, (inward ? 1 : -1) * (0 - radius + textHeight / 2));\r\n                    }\r\n                    if (interactive && drawGhost) {\r\n                        ghostContext.fillText(char, 0, (inward ? 1 : -1) * (0 - radius + textHeight / 2));\r\n                    }\r\n                    if (chunk.fill) {\r\n                        context.restore();\r\n                        // Color does not affect ghostContext so we not set it\r\n                    }\r\n                    // Reset style\r\n                    if (chunk.style) {\r\n                        context.restore();\r\n                        ghostContext.restore();\r\n                    }\r\n                    // Rotate half a letter and add spacing\r\n                    angleShift = (charWidth / 2 + kerning) / (radius - textHeight) * clockwise;\r\n                    if (!ghostOnly) {\r\n                        context.rotate(angleShift);\r\n                    }\r\n                    if (interactive) {\r\n                        ghostContext.rotate(angleShift);\r\n                    }\r\n                });\r\n                // Restore angle\r\n                context.restore();\r\n                if (interactive) {\r\n                    ghostContext.restore();\r\n                }\r\n                // Adjust radius (for `inside = true`)\r\n                if (inside) {\r\n                    radius -= textHeight;\r\n                }\r\n            });\r\n            // Restore\r\n            context.restore();\r\n            if (interactive) {\r\n                ghostContext.restore();\r\n            }\r\n        }\r\n    }\r\n    _measure(status) {\r\n        switch (this.textType) {\r\n            case \"circular\":\r\n                return this._measureCircular(status);\r\n            default:\r\n                return super._measure(status);\r\n        }\r\n    }\r\n    _measureCircular(status) {\r\n        const context = status.layer.context;\r\n        const ghostContext = this._renderer._ghostLayer.context;\r\n        const rtl = this.style.direction == \"rtl\";\r\n        const oversizedBehavior = this.style.oversizedBehavior;\r\n        const maxWidth = this.style.maxWidth;\r\n        const truncate = $type.isNumber(maxWidth) && oversizedBehavior == \"truncate\";\r\n        const ellipsis = this.style.ellipsis || \"\";\r\n        let ellipsisMetrics;\r\n        //const wrap = $type.isNumber(maxWidth) && (oversizedBehavior == \"wrap\" || oversizedBehavior == \"wrap-no-break\");\r\n        // Reset text info\r\n        this.textVisible = true;\r\n        this._textInfo = [];\r\n        this._textReversed = false;\r\n        // Pre-render\r\n        context.save();\r\n        ghostContext.save();\r\n        this._prerender(status, true);\r\n        // Split up text into lines\r\n        const lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\r\n        let styleRestored = true;\r\n        let totalWidth = 0;\r\n        // Iterate through the lines\r\n        let offsetY = 0;\r\n        $array.each(lines, (line, _index) => {\r\n            // Split up line into format/value chunks\r\n            let chunks = TextFormatter.chunk(line, false, this.style.ignoreFormatting);\r\n            // Init line object\r\n            let lineInfo = {\r\n                offsetY: offsetY,\r\n                ascent: 0,\r\n                width: 0,\r\n                height: 0,\r\n                left: 0,\r\n                right: 0,\r\n                textChunks: []\r\n            };\r\n            let currentStyle;\r\n            let currentFill;\r\n            let currentChunkWidth;\r\n            //while(chunk = chunks.shift()) {\r\n            $array.each(chunks, (chunk, _index) => {\r\n                // Format chunk\r\n                if (chunk.type == \"format\") {\r\n                    if (chunk.text == \"[/]\") {\r\n                        if (!styleRestored) {\r\n                            context.restore();\r\n                            ghostContext.restore();\r\n                            styleRestored = true;\r\n                        }\r\n                        currentFill = undefined;\r\n                        currentStyle = undefined;\r\n                        currentChunkWidth = undefined;\r\n                    }\r\n                    else {\r\n                        let format = TextFormatter.getTextStyle(chunk.text);\r\n                        const fontStyle = this._getFontStyle(format);\r\n                        context.save();\r\n                        ghostContext.save();\r\n                        context.font = fontStyle;\r\n                        currentStyle = fontStyle;\r\n                        if (format.fill) {\r\n                            currentFill = format.fill;\r\n                        }\r\n                        if (format.width) {\r\n                            currentChunkWidth = $type.toNumber(format.width);\r\n                        }\r\n                        styleRestored = false;\r\n                    }\r\n                    if (truncate) {\r\n                        ellipsisMetrics = this._measureText(ellipsis, context);\r\n                    }\r\n                }\r\n                // Text format\r\n                else if (chunk.type == \"value\") {\r\n                    // Measure each letter\r\n                    let chars = chunk.text.match(/./ug) || [];\r\n                    if (rtl) {\r\n                        chars = $utils.splitString(chunk.text);\r\n                        chars.reverse();\r\n                    }\r\n                    for (let i = 0; i < chars.length; i++) {\r\n                        const char = chars[i];\r\n                        // Measure\r\n                        const metrics = this._measureText(char, context);\r\n                        let chunkWidth = metrics.width;\r\n                        // Chunk width?\r\n                        if (currentStyle && currentChunkWidth && (currentChunkWidth > chunkWidth)) {\r\n                            chunkWidth = currentChunkWidth;\r\n                        }\r\n                        const chunkHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\r\n                        if (chunkHeight > lineInfo.height) {\r\n                            lineInfo.height = chunkHeight;\r\n                        }\r\n                        if (metrics.actualBoundingBoxAscent > lineInfo.ascent) {\r\n                            lineInfo.ascent = metrics.actualBoundingBoxAscent;\r\n                        }\r\n                        totalWidth += chunkWidth;\r\n                        // Handle oversized behavior\r\n                        if (truncate) {\r\n                            // Measure ellipsis and check if it fits\r\n                            if (!ellipsisMetrics) {\r\n                                ellipsisMetrics = this._measureText(ellipsis, context);\r\n                            }\r\n                            const ellipsisWidth = ellipsisMetrics.actualBoundingBoxLeft + ellipsisMetrics.actualBoundingBoxRight;\r\n                            //totalWidth += ellipsisWidth;\r\n                            if ((totalWidth + ellipsisWidth) > maxWidth) {\r\n                                if (lineInfo.textChunks.length == 1) {\r\n                                    this.textVisible = false;\r\n                                }\r\n                                else {\r\n                                    lineInfo.width += ellipsisWidth;\r\n                                    lineInfo.left += ellipsisMetrics.actualBoundingBoxLeft;\r\n                                    lineInfo.right += ellipsisMetrics.actualBoundingBoxRight;\r\n                                    lineInfo.textChunks.push({\r\n                                        style: currentStyle,\r\n                                        fill: currentFill,\r\n                                        text: ellipsis,\r\n                                        width: ellipsisWidth,\r\n                                        height: chunkHeight + ellipsisMetrics.actualBoundingBoxDescent,\r\n                                        left: ellipsisMetrics.actualBoundingBoxLeft,\r\n                                        right: ellipsisMetrics.actualBoundingBoxRight,\r\n                                        ascent: ellipsisMetrics.actualBoundingBoxAscent,\r\n                                        offsetX: 0,\r\n                                        offsetY: chunkHeight,\r\n                                        textDecoration: undefined\r\n                                    });\r\n                                }\r\n                                break;\r\n                            }\r\n                        }\r\n                        lineInfo.width += chunkWidth;\r\n                        lineInfo.left += metrics.actualBoundingBoxLeft;\r\n                        lineInfo.right += metrics.actualBoundingBoxRight;\r\n                        lineInfo.textChunks.push({\r\n                            style: currentStyle,\r\n                            fill: currentFill,\r\n                            text: char,\r\n                            width: chunkWidth,\r\n                            height: chunkHeight + metrics.actualBoundingBoxDescent,\r\n                            left: metrics.actualBoundingBoxLeft,\r\n                            right: metrics.actualBoundingBoxRight,\r\n                            ascent: metrics.actualBoundingBoxAscent,\r\n                            offsetX: 0,\r\n                            offsetY: chunkHeight,\r\n                            textDecoration: undefined\r\n                        });\r\n                        if (rtl) {\r\n                            // @todo still needed?\r\n                            //break;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            if (this.style.lineHeight instanceof Percent) {\r\n                lineInfo.height *= this.style.lineHeight.value;\r\n            }\r\n            else {\r\n                lineInfo.height *= this.style.lineHeight || 1.2;\r\n            }\r\n            this._textInfo.push(lineInfo);\r\n            //lineInfo.offsetY += lineInfo.ascent;\r\n            offsetY += lineInfo.height;\r\n        });\r\n        if (!styleRestored) {\r\n            context.restore();\r\n            ghostContext.restore();\r\n        }\r\n        if (oversizedBehavior == \"hide\" && (totalWidth > maxWidth)) {\r\n            this.textVisible = false;\r\n        }\r\n        // Adjust chunk internal offsets\r\n        $array.each(this._textInfo, (lineInfo) => {\r\n            $array.each(lineInfo.textChunks, (chunk) => {\r\n                chunk.offsetY += Math.round((lineInfo.height - chunk.height + (lineInfo.ascent - chunk.ascent)) / 2);\r\n            });\r\n        });\r\n        context.restore();\r\n        ghostContext.restore();\r\n        return {\r\n            left: 0,\r\n            top: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n        };\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasImage extends CanvasDisplayObject {\r\n    constructor(renderer, image) {\r\n        super(renderer);\r\n        Object.defineProperty(this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"image\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"tainted\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowColor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowBlur\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOffsetX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOffsetY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOpacity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_imageMask\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.image = image;\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        if (this._imageMask) {\r\n            clearCanvas(this._imageMask);\r\n        }\r\n    }\r\n    getLocalBounds() {\r\n        if (!this._localBounds) {\r\n            let w = 0;\r\n            let h = 0;\r\n            if (this.width) {\r\n                w = this.width;\r\n            }\r\n            if (this.height) {\r\n                h = this.height;\r\n            }\r\n            this._localBounds = {\r\n                left: 0,\r\n                top: 0,\r\n                right: w,\r\n                bottom: h\r\n            };\r\n            this._addBounds(this._localBounds);\r\n        }\r\n        return this._localBounds;\r\n    }\r\n    _render(status, targetGhostLayer = 0) {\r\n        super._render(status);\r\n        if (this.image) {\r\n            if (this.tainted === undefined) {\r\n                this.tainted = isTainted(this.image);\r\n                status.layer.tainted = true;\r\n            }\r\n            if (this.tainted && this._renderer._omitTainted) {\r\n                return;\r\n            }\r\n            const ghostOnly = this._ghostOnly(targetGhostLayer);\r\n            const drawGhost = this._drawGhost(status, targetGhostLayer);\r\n            if (status.layer.dirty && !ghostOnly) {\r\n                if (this.shadowColor) {\r\n                    status.layer.context.shadowColor = this.shadowColor.toCSS(this.shadowOpacity || 1);\r\n                }\r\n                if (this.shadowBlur) {\r\n                    status.layer.context.shadowBlur = this.shadowBlur;\r\n                }\r\n                if (this.shadowOffsetX) {\r\n                    status.layer.context.shadowOffsetX = this.shadowOffsetX;\r\n                }\r\n                if (this.shadowOffsetY) {\r\n                    status.layer.context.shadowOffsetY = this.shadowOffsetY;\r\n                }\r\n                // TODO should this round ?\r\n                const width = this.width || this.image.naturalWidth;\r\n                const height = this.height || this.image.naturalHeight;\r\n                status.layer.context.drawImage(this.image, 0, 0, width, height);\r\n            }\r\n            if (this.interactive && this._isInteractive(status) && drawGhost) {\r\n                const mask = this._getMask(this.image);\r\n                this._renderer._ghostLayer.context.drawImage(mask, 0, 0);\r\n            }\r\n        }\r\n    }\r\n    clear() {\r\n        super.clear();\r\n        this.image = undefined;\r\n        this._imageMask = undefined;\r\n    }\r\n    _getMask(image) {\r\n        if (this._imageMask === undefined) {\r\n            // TODO should this round ?\r\n            const width = this.width || image.naturalWidth;\r\n            const height = this.height || image.naturalHeight;\r\n            // We need to create a second canvas because destination-in clears out the entire canvas\r\n            const canvas = document.createElement(\"canvas\");\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            const context = canvas.getContext(\"2d\");\r\n            context.imageSmoothingEnabled = false;\r\n            context.fillStyle = this._getColorId();\r\n            context.fillRect(0, 0, width, height);\r\n            if (!isTainted(image)) {\r\n                context.globalCompositeOperation = \"destination-in\";\r\n                context.drawImage(image, 0, 0, width, height);\r\n            }\r\n            this._imageMask = canvas;\r\n        }\r\n        return this._imageMask;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasRendererEvent {\r\n    constructor(event, originalPoint, point, bbox) {\r\n        Object.defineProperty(this, \"event\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: event\r\n        });\r\n        Object.defineProperty(this, \"originalPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: originalPoint\r\n        });\r\n        Object.defineProperty(this, \"point\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: point\r\n        });\r\n        Object.defineProperty(this, \"bbox\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: bbox\r\n        });\r\n        Object.defineProperty(this, \"id\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"simulated\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"native\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        if ($utils.supports(\"touchevents\") && event instanceof Touch) {\r\n            this.id = event.identifier;\r\n        }\r\n        else {\r\n            this.id = null;\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasRenderer extends ArrayDisposer {\r\n    constructor(resolution) {\r\n        super();\r\n        Object.defineProperty(this, \"view\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: document.createElement(\"div\")\r\n        });\r\n        Object.defineProperty(this, \"_layerDom\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: document.createElement(\"div\")\r\n        });\r\n        Object.defineProperty(this, \"layers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_dirtyLayers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"defaultLayer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.getLayer(0)\r\n        });\r\n        Object.defineProperty(this, \"_ghostLayer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new GhostLayer()\r\n        });\r\n        Object.defineProperty(this, \"_deferredGhostLayers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_patternCanvas\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: document.createElement(\"canvas\")\r\n        });\r\n        Object.defineProperty(this, \"_patternContext\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._patternCanvas.getContext(\"2d\")\r\n        });\r\n        Object.defineProperty(this, \"_realWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_realHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_calculatedWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_calculatedHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"resolution\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"interactionsEnabled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_listeners\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_colorId\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_colorMap\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_forceInteractive\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_omitTainted\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        // TODO this should store the Id as well\r\n        Object.defineProperty(this, \"_hovering\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Set()\r\n        });\r\n        Object.defineProperty(this, \"_dragging\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_mousedown\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_lastPointerMoveEvent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"tapToActivate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"tapToActivateTimeout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 3000\r\n        });\r\n        Object.defineProperty(this, \"_touchActive\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_touchActiveTimeout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        if (resolution == null) {\r\n            this.resolution = window.devicePixelRatio;\r\n        }\r\n        else {\r\n            this.resolution = resolution;\r\n        }\r\n        this.view.style.position = \"absolute\";\r\n        this.view.setAttribute(\"aria-hidden\", \"true\");\r\n        this.view.appendChild(this._layerDom);\r\n        this._disposers.push(new Disposer(() => {\r\n            $object.each(this._events, (_key, events) => {\r\n                events.disposer.dispose();\r\n            });\r\n            $array.each(this.layers, (layer) => {\r\n                clearCanvas(layer.view);\r\n                if (layer.exportableView) {\r\n                    clearCanvas(layer.exportableView);\r\n                }\r\n            });\r\n            clearCanvas(this._ghostLayer.view);\r\n            clearCanvas(this._patternCanvas);\r\n        }));\r\n        /*\r\n        this._disposers.push($utils.addEventListener(this._ghostLayer.view, \"click\", (originalEvent: MouseEvent) => {\r\n            const event = this.getEvent(originalEvent);\r\n            const target = this._getHitTarget(event.originalPoint, event.bbox);\r\n            console.debug(target);\r\n        }));\r\n        */\r\n        // Monitor for possible pixel ratio changes (when page is zoomed)\r\n        this._disposers.push($utils.onZoom(() => {\r\n            if (resolution == null) {\r\n                this.resolution = window.devicePixelRatio;\r\n            }\r\n        }));\r\n        // We need this in order top prevent default touch gestures when dragging\r\n        // draggable elements\r\n        if ($utils.supports(\"touchevents\")) {\r\n            const listener = (ev) => {\r\n                if (this._dragging.length !== 0) {\r\n                    $array.eachContinue(this._dragging, (item) => {\r\n                        if (item.value.shouldCancelTouch()) {\r\n                            ev.preventDefault();\r\n                            return false;\r\n                        }\r\n                        return true;\r\n                    });\r\n                }\r\n                // If touch down happends, delay touch out\r\n                if (this._touchActiveTimeout) {\r\n                    this._delayTouchDeactivate();\r\n                }\r\n            };\r\n            this._disposers.push($utils.addEventListener(window, \"touchstart\", listener, { passive: false }));\r\n            this._disposers.push($utils.addEventListener(this.view, \"touchstart\", listener, { passive: false }));\r\n            this._disposers.push($utils.addEventListener(this.view, \"touchmove\", () => {\r\n                // If touch is moving, delay touch out\r\n                if (this._touchActiveTimeout) {\r\n                    this._delayTouchDeactivate();\r\n                }\r\n            }, { passive: true }));\r\n            this._disposers.push($utils.addEventListener(window, \"click\", (_ev) => {\r\n                this._touchActive = false;\r\n            }, { passive: true }));\r\n            this._disposers.push($utils.addEventListener(this.view, \"click\", (_ev) => {\r\n                window.setTimeout(() => {\r\n                    this._touchActive = true;\r\n                    this._delayTouchDeactivate();\r\n                }, 100);\r\n            }, { passive: true }));\r\n        }\r\n        // Prevent scrolling of the window when hovering on \"wheelable\" object\r\n        if ($utils.supports(\"wheelevents\")) {\r\n            this._disposers.push($utils.addEventListener(this.view, \"wheel\", (ev) => {\r\n                let prevent = false;\r\n                this._hovering.forEach((obj) => {\r\n                    if (obj.wheelable) {\r\n                        prevent = true;\r\n                        return false;\r\n                    }\r\n                });\r\n                if (prevent) {\r\n                    ev.preventDefault();\r\n                }\r\n            }, { passive: false }));\r\n        }\r\n    }\r\n    /*protected _mouseMoveThrottler: Throttler = new Throttler(() => {\r\n        this._dispatchGlobalMousemove(this._lastPointerMoveEvent.event, this._lastPointerMoveEvent.native);\r\n    });\r\n    */\r\n    resetImageArray() {\r\n        this._ghostLayer.imageArray = undefined;\r\n    }\r\n    _delayTouchDeactivate() {\r\n        if (this._touchActiveTimeout) {\r\n            clearTimeout(this._touchActiveTimeout);\r\n        }\r\n        if (this.tapToActivateTimeout > 0) {\r\n            this._touchActiveTimeout = window.setTimeout(() => {\r\n                this._touchActive = false;\r\n            }, this.tapToActivateTimeout);\r\n        }\r\n    }\r\n    get debugGhostView() {\r\n        return !!this._ghostLayer.view.parentNode;\r\n    }\r\n    set debugGhostView(value) {\r\n        if (value) {\r\n            if (!this._ghostLayer.view.parentNode) {\r\n                this.view.appendChild(this._ghostLayer.view);\r\n            }\r\n        }\r\n        else {\r\n            if (this._ghostLayer.view.parentNode) {\r\n                this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view);\r\n            }\r\n        }\r\n    }\r\n    createLinearGradient(x1, y1, x2, y2) {\r\n        return this.defaultLayer.context.createLinearGradient(x1, y1, x2, y2);\r\n    }\r\n    createRadialGradient(x1, y1, radius1, x2, y2, radius2) {\r\n        return this.defaultLayer.context.createRadialGradient(x1, y1, radius1, x2, y2, radius2);\r\n    }\r\n    createPattern(graphics, background, repetition, width, height) {\r\n        // const patternCanvas = document.createElement(\"canvas\");\r\n        // const patternContext = patternCanvas.getContext(\"2d\")!;\r\n        // patternCanvas.width = width;\r\n        // patternCanvas.height = height;\r\n        // if (fill) {\r\n        // \tpatternContext.fillStyle = fill.toCSS();\r\n        // \tpatternContext.fillRect(0, 0, patternCanvas.width, patternCanvas.height);\r\n        // }\r\n        // const layer = {\r\n        // \tview: patternCanvas,\r\n        // \tcontext: patternContext,\r\n        // \tvisible: true,\r\n        // \torder: 0,\r\n        // \twidth: width,\r\n        // \theight: height,\r\n        // \tdirty: true\r\n        // };\r\n        // // patternContext.arc(0, 0, 50, 0, .5 * Math.PI);\r\n        // // patternContext.stroke();\r\n        // image.targetLayer = layer;\r\n        // image.render(layer);\r\n        //this._layerDom.appendChild(patternCanvas);\r\n        this._patternCanvas.width = width;\r\n        this._patternCanvas.height = height;\r\n        this._patternContext.clearRect(0, 0, width, height);\r\n        // patternCanvas.style.width = width * this.resolution + \"px\";\r\n        // patternCanvas.style.height = height * this.resolution + \"px\";\r\n        background.renderDetached(this._patternContext);\r\n        graphics.renderDetached(this._patternContext);\r\n        return this._patternContext.createPattern(this._patternCanvas, repetition);\r\n    }\r\n    makeContainer() {\r\n        return new CanvasContainer(this);\r\n    }\r\n    makeGraphics() {\r\n        return new CanvasGraphics(this);\r\n    }\r\n    makeText(text, style) {\r\n        return new CanvasText(this, text, style);\r\n    }\r\n    makeTextStyle() {\r\n        return new CanvasTextStyle();\r\n    }\r\n    makeRadialText(text, style) {\r\n        return new CanvasRadialText(this, text, style);\r\n    }\r\n    makePicture(image) {\r\n        return new CanvasImage(this, image);\r\n    }\r\n    resizeLayer(layer) {\r\n        layer.resize(this._calculatedWidth, this._calculatedHeight, this._calculatedWidth, this._calculatedHeight, this.resolution);\r\n    }\r\n    resizeGhost() {\r\n        this._ghostLayer.resize(this._calculatedWidth, this._calculatedHeight, this._calculatedWidth, this._calculatedHeight, this.resolution);\r\n    }\r\n    resize(realWidth, realHeight, calculatedWidth, calculatedHeight) {\r\n        this._realWidth = realWidth;\r\n        this._realHeight = realHeight;\r\n        this._calculatedWidth = calculatedWidth;\r\n        this._calculatedHeight = calculatedHeight;\r\n        $array.each(this.layers, (layer) => {\r\n            if (layer) {\r\n                layer.dirty = true;\r\n                this.resizeLayer(layer);\r\n            }\r\n        });\r\n        this.resizeGhost();\r\n        this.view.style.width = calculatedWidth + \"px\";\r\n        this.view.style.height = calculatedHeight + \"px\";\r\n    }\r\n    createDetachedLayer(willReadFrequently = false) {\r\n        const view = document.createElement(\"canvas\");\r\n        const context = view.getContext(\"2d\", { willReadFrequently: willReadFrequently });\r\n        const layer = new CanvasLayer(view, context);\r\n        view.style.position = \"absolute\";\r\n        view.style.top = \"0px\";\r\n        view.style.left = \"0px\";\r\n        return layer;\r\n    }\r\n    getLayerByOrder(order) {\r\n        const layers = this.layers;\r\n        const length = layers.length;\r\n        for (let i = 0; i < length; i++) {\r\n            const layer = layers[i];\r\n            if (layer.order == order) {\r\n                return layer;\r\n            }\r\n        }\r\n    }\r\n    getLayer(order, visible = true) {\r\n        let existingLayer = this.getLayerByOrder(order);\r\n        if (existingLayer) {\r\n            return existingLayer;\r\n        }\r\n        const layer = this.createDetachedLayer(order == 99);\r\n        layer.order = order;\r\n        layer.visible = visible;\r\n        layer.view.className = \"am5-layer-\" + order;\r\n        if (layer.visible) {\r\n            this.resizeLayer(layer);\r\n        }\r\n        const layers = this.layers;\r\n        layers.push(layer);\r\n        layers.sort((a, b) => {\r\n            if (a.order > b.order) {\r\n                return 1;\r\n            }\r\n            else if (a.order < b.order) {\r\n                return -1;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        });\r\n        const length = layers.length;\r\n        const layerIndex = $array.indexOf(layers, layer);\r\n        let next;\r\n        for (let i = layerIndex + 1; i < length; i++) {\r\n            if (layers[i].visible) {\r\n                next = layers[i];\r\n                break;\r\n            }\r\n        }\r\n        if (layer.visible) {\r\n            if (next === undefined) {\r\n                this._layerDom.appendChild(layer.view);\r\n            }\r\n            else {\r\n                this._layerDom.insertBefore(layer.view, next.view);\r\n            }\r\n        }\r\n        return layer;\r\n    }\r\n    render(root) {\r\n        this._dirtyLayers.length = 0;\r\n        this._deferredGhostLayers = [];\r\n        $array.each(this.layers, (layer) => {\r\n            if (layer) {\r\n                if (layer.dirty && layer.visible) {\r\n                    this._dirtyLayers.push(layer);\r\n                    layer.clear();\r\n                }\r\n            }\r\n        });\r\n        this._ghostLayer.clear();\r\n        root.render({\r\n            inactive: null,\r\n            layer: this.defaultLayer,\r\n        });\r\n        const deferredGhostLayers = this._deferredGhostLayers;\r\n        if (deferredGhostLayers.length) {\r\n            deferredGhostLayers.sort((a, b) => a - b);\r\n            $array.each(deferredGhostLayers, (layerx) => {\r\n                root.render({\r\n                    inactive: null,\r\n                    layer: this.defaultLayer\r\n                }, layerx);\r\n            });\r\n        }\r\n        this._ghostLayer.context.restore();\r\n        //setTimeout(() => {\r\n        // Remove this after the Chrome bug is fixed:\r\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=1279394\r\n        $array.each(this.layers, (layer) => {\r\n            if (layer) {\r\n                const context = layer.context;\r\n                context.beginPath();\r\n                context.moveTo(0, 0);\r\n                context.stroke();\r\n            }\r\n        });\r\n        $array.each(this._dirtyLayers, (layer) => {\r\n            layer.context.restore();\r\n            layer.dirty = false;\r\n        });\r\n        //}, 100)\r\n        if (this._hovering.size && this._lastPointerMoveEvent) {\r\n            const { events, target, native } = this._lastPointerMoveEvent;\r\n            //this._mouseMoveThrottler.run();\r\n            $array.each(events, (event) => {\r\n                this._dispatchGlobalMousemove(event, target, native);\r\n            });\r\n        }\r\n    }\r\n    paintId(obj) {\r\n        const id = distributeId(++this._colorId);\r\n        const color = Color.fromHex(id).toCSS();\r\n        this._colorMap[color] = obj;\r\n        return color;\r\n    }\r\n    _removeObject(obj) {\r\n        if (obj._colorId !== undefined) {\r\n            delete this._colorMap[obj._colorId];\r\n        }\r\n    }\r\n    // protected _identifyObjectByColor(colorId: number): CanvasDisplayObject | undefined {\r\n    // \treturn this._colorMap[colorId];\r\n    // }\r\n    _adjustBoundingBox(bbox) {\r\n        const margin = this._ghostLayer.margin;\r\n        return new DOMRect(-margin.left, -margin.top, bbox.width + margin.left + margin.right, bbox.height + margin.top + margin.bottom);\r\n    }\r\n    getEvent(originalEvent, adjustPoint = true) {\r\n        const bbox = this.view.getBoundingClientRect();\r\n        const x = originalEvent.clientX || 0;\r\n        const y = originalEvent.clientY || 0;\r\n        const widthScale = this._calculatedWidth / this._realWidth;\r\n        const heightScale = this._calculatedHeight / this._realHeight;\r\n        const originalPoint = {\r\n            x: x - bbox.left,\r\n            y: y - bbox.top,\r\n        };\r\n        const point = {\r\n            x: (x - (adjustPoint ? bbox.left : 0)) * widthScale,\r\n            y: (y - (adjustPoint ? bbox.top : 0)) * heightScale,\r\n        };\r\n        return new CanvasRendererEvent(originalEvent, originalPoint, point, this._adjustBoundingBox(bbox));\r\n    }\r\n    _getHitTarget(point, bbox, target) {\r\n        if (bbox.width === 0 || bbox.height === 0 || point.x < bbox.left || point.x > bbox.right || point.y < bbox.top || point.y > bbox.bottom) {\r\n            return;\r\n        }\r\n        if (!target || !this._layerDom.contains(target)) {\r\n            return;\r\n        }\r\n        const pixel = this._ghostLayer.getImageData(point, bbox);\r\n        if (pixel.data[0] === 0 && pixel.data[1] === 0 && pixel.data[2] === 0) {\r\n            return false;\r\n        }\r\n        const colorId = Color.fromRGB(pixel.data[0], pixel.data[1], pixel.data[2]).toCSS();\r\n        const hit = this._colorMap[colorId];\r\n        return hit;\r\n    }\r\n    getObjectAtPoint(point) {\r\n        const data = this._ghostLayer.getImageArray(point);\r\n        if (data[0] === 0 && data[1] === 0 && data[2] === 0) {\r\n            return undefined;\r\n        }\r\n        const colorId = Color.fromRGB(data[0], data[1], data[2]).toCSS();\r\n        const hit = this._colorMap[colorId];\r\n        return hit;\r\n    }\r\n    _withEvents(key, f) {\r\n        const events = this._events[key];\r\n        if (events !== undefined) {\r\n            events.dispatching = true;\r\n            try {\r\n                f(events);\r\n            }\r\n            finally {\r\n                events.dispatching = false;\r\n                if (events.cleanup) {\r\n                    events.cleanup = false;\r\n                    $array.keepIf(events.callbacks, (callback) => {\r\n                        return !callback.disposed;\r\n                    });\r\n                    if (events.callbacks.length === 0) {\r\n                        events.disposer.dispose();\r\n                        delete this._events[key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _dispatchEventAll(key, event) {\r\n        if (!this.interactionsEnabled) {\r\n            return;\r\n        }\r\n        this._withEvents(key, (events) => {\r\n            $array.each(events.callbacks, (callback) => {\r\n                if (!callback.disposed) {\r\n                    callback.callback.call(callback.context, event);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    _dispatchEvent(key, target, event) {\r\n        if (!this.interactionsEnabled) {\r\n            return false;\r\n        }\r\n        let dispatched = false;\r\n        this._withEvents(key, (events) => {\r\n            $array.each(events.callbacks, (callback) => {\r\n                if (!callback.disposed && callback.object === target) {\r\n                    callback.callback.call(callback.context, event);\r\n                    dispatched = true;\r\n                }\r\n            });\r\n        });\r\n        return dispatched;\r\n    }\r\n    _dispatchMousedown(originalEvent, originalTarget) {\r\n        const button = originalEvent.button;\r\n        if (button != 0 && button != 2 && button != 1 && button !== undefined) {\r\n            // Ignore non-primary mouse buttons\r\n            return;\r\n        }\r\n        const event = this.getEvent(originalEvent);\r\n        const target = this._getHitTarget(event.originalPoint, event.bbox, originalTarget);\r\n        if (target) {\r\n            const id = event.id;\r\n            let dragged = false;\r\n            eachTargets(target, (obj) => {\r\n                const info = { id: id, value: obj };\r\n                this._mousedown.push(info);\r\n                if (!dragged && this._dispatchEvent(\"pointerdown\", obj, event)) {\r\n                    // Only dispatch the first element which matches\r\n                    dragged = true;\r\n                    const has = this._dragging.some((x) => {\r\n                        return x.value === obj && x.id === id;\r\n                    });\r\n                    if (!has) {\r\n                        this._dragging.push(info);\r\n                    }\r\n                }\r\n                return true;\r\n            });\r\n        }\r\n    }\r\n    _dispatchGlobalMousemove(originalEvent, originalTarget, native) {\r\n        const event = this.getEvent(originalEvent);\r\n        const target = this._getHitTarget(event.originalPoint, event.bbox, originalTarget);\r\n        event.native = native;\r\n        if (target) {\r\n            this._hovering.forEach((obj) => {\r\n                if (!obj.contains(target)) {\r\n                    this._hovering.delete(obj);\r\n                    if (obj.cursorOverStyle) {\r\n                        $utils.setStyle(document.body, \"cursor\", obj._replacedCursorStyle);\r\n                    }\r\n                    this._dispatchEvent(\"pointerout\", obj, event);\r\n                }\r\n            });\r\n            if (event.native) {\r\n                eachTargets(target, (obj) => {\r\n                    if (!this._hovering.has(obj)) {\r\n                        this._hovering.add(obj);\r\n                        if (obj.cursorOverStyle) {\r\n                            obj._replacedCursorStyle = $utils.getStyle(document.body, \"cursor\");\r\n                            $utils.setStyle(document.body, \"cursor\", obj.cursorOverStyle);\r\n                        }\r\n                        this._dispatchEvent(\"pointerover\", obj, event);\r\n                    }\r\n                    return true;\r\n                });\r\n            }\r\n            //} else if (target === false) {\r\n        }\r\n        else {\r\n            this._hovering.forEach((obj) => {\r\n                if (obj.cursorOverStyle) {\r\n                    $utils.setStyle(document.body, \"cursor\", obj._replacedCursorStyle);\r\n                }\r\n                this._dispatchEvent(\"pointerout\", obj, event);\r\n            });\r\n            this._hovering.clear();\r\n        }\r\n        this._dispatchEventAll(\"globalpointermove\", event);\r\n    }\r\n    removeHovering(graphics) {\r\n        this._hovering.delete(graphics);\r\n        if (graphics.cursorOverStyle) {\r\n            $utils.setStyle(document.body, \"cursor\", graphics._replacedCursorStyle);\r\n        }\r\n    }\r\n    _dispatchGlobalMouseup(originalEvent, native) {\r\n        const event = this.getEvent(originalEvent);\r\n        event.native = native;\r\n        //const target = this._getHitTarget(event.originalPoint);\r\n        this._dispatchEventAll(\"globalpointerup\", event);\r\n    }\r\n    _dispatchDragMove(originalEvent) {\r\n        if (this._dragging.length !== 0) {\r\n            const event = this.getEvent(originalEvent);\r\n            const id = event.id;\r\n            this._dragging.forEach((obj) => {\r\n                if (obj.id === id) {\r\n                    this._dispatchEvent(\"pointermove\", obj.value, event);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _dispatchDragEnd(originalEvent, originalTarget) {\r\n        const button = originalEvent.button;\r\n        let clickevent;\r\n        if (button == 0 || button === undefined) {\r\n            clickevent = \"click\";\r\n        }\r\n        else if (button == 2) {\r\n            clickevent = \"rightclick\";\r\n        }\r\n        else if (button == 1) {\r\n            clickevent = \"middleclick\";\r\n        }\r\n        else {\r\n            // Ignore non-primary mouse buttons\r\n            return;\r\n        }\r\n        const event = this.getEvent(originalEvent);\r\n        const id = event.id;\r\n        if (this._mousedown.length !== 0) {\r\n            const target = this._getHitTarget(event.originalPoint, event.bbox, originalTarget);\r\n            if (target) {\r\n                this._mousedown.forEach((obj) => {\r\n                    if (obj.id === id && obj.value.contains(target)) {\r\n                        this._dispatchEvent(clickevent, obj.value, event);\r\n                    }\r\n                });\r\n            }\r\n            this._mousedown.length = 0;\r\n        }\r\n        if (this._dragging.length !== 0) {\r\n            this._dragging.forEach((obj) => {\r\n                if (obj.id === id) {\r\n                    this._dispatchEvent(\"pointerup\", obj.value, event);\r\n                }\r\n            });\r\n            this._dragging.length = 0;\r\n        }\r\n    }\r\n    _dispatchDoubleClick(originalEvent, originalTarget) {\r\n        const event = this.getEvent(originalEvent);\r\n        const target = this._getHitTarget(event.originalPoint, event.bbox, originalTarget);\r\n        if (target) {\r\n            eachTargets(target, (obj) => {\r\n                if (this._dispatchEvent(\"dblclick\", obj, event)) {\r\n                    return false;\r\n                }\r\n                else {\r\n                    return true;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _dispatchWheel(originalEvent, originalTarget) {\r\n        const event = this.getEvent(originalEvent);\r\n        const target = this._getHitTarget(event.originalPoint, event.bbox, originalTarget);\r\n        if (target) {\r\n            eachTargets(target, (obj) => {\r\n                if (this._dispatchEvent(\"wheel\", obj, event)) {\r\n                    return false;\r\n                }\r\n                else {\r\n                    return true;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _makeSharedEvent(key, f) {\r\n        if (this._listeners[key] === undefined) {\r\n            const listener = f();\r\n            this._listeners[key] = new CounterDisposer(() => {\r\n                delete this._listeners[key];\r\n                listener.dispose();\r\n            });\r\n        }\r\n        return this._listeners[key].increment();\r\n    }\r\n    _onPointerEvent(name, f) {\r\n        let native = false;\r\n        let timer = null;\r\n        function clear() {\r\n            timer = null;\r\n            native = false;\r\n        }\r\n        return new MultiDisposer([\r\n            new Disposer(() => {\r\n                if (timer !== null) {\r\n                    clearTimeout(timer);\r\n                }\r\n                clear();\r\n            }),\r\n            $utils.addEventListener(this.view, $utils.getRendererEvent(name), (_) => {\r\n                native = true;\r\n                if (timer !== null) {\r\n                    clearTimeout(timer);\r\n                }\r\n                timer = window.setTimeout(clear, 0);\r\n            }),\r\n            onPointerEvent(window, name, (ev, target) => {\r\n                if (timer !== null) {\r\n                    clearTimeout(timer);\r\n                    timer = null;\r\n                }\r\n                f(ev, target, native);\r\n                native = false;\r\n            }),\r\n        ]);\r\n    }\r\n    // This ensures that only a single DOM event is added (e.g. only a single mousemove event listener)\r\n    _initEvent(key) {\r\n        switch (key) {\r\n            case \"globalpointermove\":\r\n            case \"pointerover\":\r\n            case \"pointerout\":\r\n                return this._makeSharedEvent(\"pointermove\", () => {\r\n                    const listener = (events, target, native) => {\r\n                        this._lastPointerMoveEvent = { events, target, native };\r\n                        $array.each(events, (event) => {\r\n                            this._dispatchGlobalMousemove(event, target, native);\r\n                        });\r\n                    };\r\n                    return new MultiDisposer([\r\n                        this._onPointerEvent(\"pointerdown\", listener),\r\n                        this._onPointerEvent(\"pointermove\", listener),\r\n                    ]);\r\n                });\r\n            case \"globalpointerup\":\r\n                return this._makeSharedEvent(\"pointerup\", () => {\r\n                    const mouseup = this._onPointerEvent(\"pointerup\", (events, target, native) => {\r\n                        $array.each(events, (event) => {\r\n                            this._dispatchGlobalMouseup(event, native);\r\n                        });\r\n                        this._lastPointerMoveEvent = { events, target, native };\r\n                    });\r\n                    const pointercancel = this._onPointerEvent(\"pointercancel\", (events, target, native) => {\r\n                        $array.each(events, (event) => {\r\n                            this._dispatchGlobalMouseup(event, native);\r\n                        });\r\n                        this._lastPointerMoveEvent = { events, target, native };\r\n                    });\r\n                    return new Disposer(() => {\r\n                        mouseup.dispose();\r\n                        pointercancel.dispose();\r\n                    });\r\n                });\r\n            case \"click\":\r\n            case \"rightclick\":\r\n            case \"middleclick\":\r\n            case \"pointerdown\":\r\n            /*\r\n                return this._makeSharedEvent(\"pointerdown\", () => {\r\n                    return this._onPointerEvent(\"pointerdown\", (event, target, native) => {\r\n                        this._lastPointerMoveEvent = { event, target, native };\r\n                        this._dispatchMousedown(event)\r\n                    });\r\n                });\r\n            */\r\n            case \"pointermove\":\r\n            case \"pointerup\":\r\n                return this._makeSharedEvent(\"pointerdown\", () => {\r\n                    //const throttler = new Throttler();\r\n                    const mousedown = this._onPointerEvent(\"pointerdown\", (events, target) => {\r\n                        $array.each(events, (ev) => {\r\n                            this._dispatchMousedown(ev, target);\r\n                        });\r\n                    });\r\n                    // TODO handle throttling properly for multitouch\r\n                    const mousemove = this._onPointerEvent(\"pointermove\", (ev) => {\r\n                        //throttler.throttle(() => {\r\n                        $array.each(ev, (ev) => {\r\n                            this._dispatchDragMove(ev);\r\n                        });\r\n                        //});\r\n                    });\r\n                    const mouseup = this._onPointerEvent(\"pointerup\", (ev, target) => {\r\n                        $array.each(ev, (ev) => {\r\n                            this._dispatchDragEnd(ev, target);\r\n                        });\r\n                    });\r\n                    const pointercancel = this._onPointerEvent(\"pointercancel\", (ev, target) => {\r\n                        $array.each(ev, (ev) => {\r\n                            this._dispatchDragEnd(ev, target);\r\n                        });\r\n                    });\r\n                    return new Disposer(() => {\r\n                        mousedown.dispose();\r\n                        mousemove.dispose();\r\n                        mouseup.dispose();\r\n                        pointercancel.dispose();\r\n                    });\r\n                });\r\n            case \"dblclick\":\r\n                return this._makeSharedEvent(\"dblclick\", () => {\r\n                    return this._onPointerEvent(\"dblclick\", (ev, target) => {\r\n                        $array.each(ev, (ev) => {\r\n                            this._dispatchDoubleClick(ev, target);\r\n                        });\r\n                    });\r\n                });\r\n            case \"wheel\":\r\n                return this._makeSharedEvent(\"wheel\", () => {\r\n                    return $utils.addEventListener(this.view, $utils.getRendererEvent(\"wheel\"), (event) => {\r\n                        this._dispatchWheel(event, $utils.getEventTarget(event));\r\n                    }, { passive: false });\r\n                });\r\n        }\r\n    }\r\n    _addEvent(object, key, callback, context) {\r\n        let events = this._events[key];\r\n        if (events === undefined) {\r\n            events = this._events[key] = {\r\n                disposer: this._initEvent(key),\r\n                callbacks: [],\r\n                dispatching: false,\r\n                cleanup: false,\r\n            };\r\n        }\r\n        const listener = { object, context, callback, disposed: false };\r\n        events.callbacks.push(listener);\r\n        return new Disposer(() => {\r\n            listener.disposed = true;\r\n            if (events.dispatching) {\r\n                events.cleanup = true;\r\n            }\r\n            else {\r\n                $array.removeFirst(events.callbacks, listener);\r\n                if (events.callbacks.length === 0) {\r\n                    events.disposer.dispose();\r\n                    delete this._events[key];\r\n                }\r\n            }\r\n        });\r\n    }\r\n    getCanvas(root, options) {\r\n        // Make sure everything is rendered\r\n        this.render(root);\r\n        if (!options) {\r\n            options = {};\r\n        }\r\n        let scale = this.resolution;\r\n        let canvasWidth = Math.floor(this._calculatedWidth * this.resolution);\r\n        let canvasHeight = Math.floor(this._calculatedHeight * this.resolution);\r\n        // Check if we need to scale\r\n        if (options.minWidth && (options.minWidth > canvasWidth)) {\r\n            let minScale = options.minWidth / canvasWidth;\r\n            if (minScale > scale) {\r\n                scale = minScale * this.resolution;\r\n            }\r\n        }\r\n        if (options.minHeight && (options.minHeight > canvasHeight)) {\r\n            let minScale = options.minHeight / canvasHeight;\r\n            if (minScale > scale) {\r\n                scale = minScale * this.resolution;\r\n            }\r\n        }\r\n        if (options.maxWidth && (options.maxWidth < canvasWidth)) {\r\n            let maxScale = options.maxWidth / canvasWidth;\r\n            if (maxScale < scale) {\r\n                scale = maxScale * this.resolution;\r\n            }\r\n        }\r\n        if (options.maxHeight && (options.maxHeight > canvasHeight)) {\r\n            let maxScale = options.maxHeight / canvasHeight;\r\n            if (maxScale < scale) {\r\n                scale = maxScale * this.resolution;\r\n            }\r\n        }\r\n        // Check if we need to compensate for pixel ratio\r\n        if (options.maintainPixelRatio) {\r\n            scale /= this.resolution;\r\n        }\r\n        // Init list canvases to remove from DOM after export\r\n        const canvases = [];\r\n        // Set up new canvas for export\r\n        let forceRender = false;\r\n        const canvas = document.createElement(\"canvas\");\r\n        if (scale != this.resolution) {\r\n            forceRender = true;\r\n            canvasWidth = canvasWidth * scale / this.resolution;\r\n            canvasHeight = canvasHeight * scale / this.resolution;\r\n        }\r\n        canvas.width = canvasWidth;\r\n        canvas.height = canvasHeight;\r\n        // Add to DOM so it inherits CSS\r\n        canvas.style.position = \"fixed\";\r\n        canvas.style.top = \"-10000px\";\r\n        this.view.appendChild(canvas);\r\n        canvases.push(canvas);\r\n        // Context\r\n        const context = canvas.getContext(\"2d\");\r\n        let width = 0;\r\n        let height = 0;\r\n        let needRerender = false;\r\n        $array.each(this.layers, (layer) => {\r\n            if (layer && layer.visible) {\r\n                if (layer.tainted || forceRender) {\r\n                    needRerender = true;\r\n                    layer.exportableView = layer.view;\r\n                    layer.exportableContext = layer.context;\r\n                    layer.view = document.createElement(\"canvas\");\r\n                    // Add to DOM so it inherits CSS\r\n                    layer.view.style.position = \"fixed\";\r\n                    layer.view.style.top = \"-10000px\";\r\n                    this.view.appendChild(layer.view);\r\n                    canvases.push(layer.view);\r\n                    let extraX = 0;\r\n                    let extraY = 0;\r\n                    if (layer.margin) {\r\n                        extraX += layer.margin.left || 0 + layer.margin.right || 0;\r\n                        extraY += layer.margin.top || 0 + layer.margin.bottom || 0;\r\n                    }\r\n                    layer.view.width = canvasWidth + extraX;\r\n                    layer.view.height = canvasHeight + extraY;\r\n                    layer.context = layer.view.getContext(\"2d\");\r\n                    layer.dirty = true;\r\n                    layer.scale = scale;\r\n                }\r\n            }\r\n        });\r\n        if (needRerender) {\r\n            this._omitTainted = true;\r\n            this.render(root);\r\n            this._omitTainted = false;\r\n        }\r\n        $array.each(this.layers, (layer) => {\r\n            if (layer && layer.visible) {\r\n                // Layer is fine. Just plop it into our target canvas\r\n                let x = 0;\r\n                let y = 0;\r\n                if (layer.margin) {\r\n                    x = -(layer.margin.left || 0) * this.resolution;\r\n                    y = -(layer.margin.top || 0) * this.resolution;\r\n                }\r\n                context.drawImage(layer.view, x, y);\r\n                // Restore layer original canvas\r\n                if (layer.exportableView) {\r\n                    layer.view = layer.exportableView;\r\n                    layer.exportableView = undefined;\r\n                }\r\n                if (layer.exportableContext) {\r\n                    layer.context = layer.exportableContext;\r\n                    layer.exportableContext = undefined;\r\n                }\r\n                if (width < layer.view.clientWidth) {\r\n                    width = layer.view.clientWidth;\r\n                }\r\n                if (height < layer.view.clientHeight) {\r\n                    height = layer.view.clientHeight;\r\n                }\r\n                layer.scale = undefined;\r\n            }\r\n        });\r\n        canvas.style.width = width + \"px\";\r\n        canvas.style.height = height + \"px\";\r\n        $array.each(canvases, (canvas) => {\r\n            canvas.style.position = \"\";\r\n            canvas.style.top = \"\";\r\n            this.view.removeChild(canvas);\r\n        });\r\n        return canvas;\r\n    }\r\n}\r\nclass GhostLayer {\r\n    constructor() {\r\n        Object.defineProperty(this, \"view\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"context\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"margin\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {\r\n                left: 0,\r\n                right: 0,\r\n                top: 0,\r\n                bottom: 0,\r\n            }\r\n        });\r\n        Object.defineProperty(this, \"_resolution\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"imageArray\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.view = document.createElement(\"canvas\");\r\n        this.context = this.view.getContext(\"2d\", { alpha: false, willReadFrequently: true });\r\n        this.context.imageSmoothingEnabled = false;\r\n        this.view.style.position = \"absolute\";\r\n        this.view.style.top = \"0px\";\r\n        this.view.style.left = \"0px\";\r\n    }\r\n    resize(canvasWidth, canvasHeight, domWidth, domHeight, resolution) {\r\n        this._resolution = resolution;\r\n        canvasWidth += (this.margin.left + this.margin.right);\r\n        canvasHeight += (this.margin.top + this.margin.bottom);\r\n        // TODO this should take into account calculateSize\r\n        domWidth += (this.margin.left + this.margin.right);\r\n        domHeight += (this.margin.top + this.margin.bottom);\r\n        this.view.style.left = -this.margin.left + \"px\";\r\n        this.view.style.top = -this.margin.top + \"px\";\r\n        this._width = Math.floor(canvasWidth * resolution);\r\n        this._height = Math.floor(canvasHeight * resolution);\r\n        this.view.width = this._width;\r\n        this.view.style.width = domWidth + \"px\";\r\n        this.view.height = this._height;\r\n        this.view.style.height = domHeight + \"px\";\r\n    }\r\n    getImageData(point, bbox) {\r\n        return this.context.getImageData(\r\n        // TODO should this round ?\r\n        Math.round(((point.x - bbox.left) / bbox.width) * this._width), Math.round(((point.y - bbox.top) / bbox.height) * this._height), 1, 1);\r\n    }\r\n    getImageArray(point) {\r\n        if (!this.imageArray) {\r\n            this.imageArray = this.context.getImageData(0, 0, this._width, this._height).data;\r\n        }\r\n        const data = this.imageArray;\r\n        const x = Math.round(point.x * this._resolution);\r\n        const y = Math.round(point.y * this._resolution);\r\n        const i = (y * this._width + x) * 4;\r\n        return [data[i], data[i + 1], data[i + 2], data[i + 3]];\r\n    }\r\n    setMargin(layers) {\r\n        this.margin.left = 0;\r\n        this.margin.right = 0;\r\n        this.margin.top = 0;\r\n        this.margin.bottom = 0;\r\n        $array.each(layers, (layer) => {\r\n            if (layer.margin) {\r\n                this.margin.left = Math.max(this.margin.left, layer.margin.left);\r\n                this.margin.right = Math.max(this.margin.right, layer.margin.right);\r\n                this.margin.top = Math.max(this.margin.top, layer.margin.top);\r\n                this.margin.bottom = Math.max(this.margin.bottom, layer.margin.bottom);\r\n            }\r\n        });\r\n    }\r\n    clear() {\r\n        this.context.save();\r\n        this.context.fillStyle = '#000';\r\n        this.context.fillRect(0, 0, this._width, this._height);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasLayer {\r\n    constructor(view, context) {\r\n        Object.defineProperty(this, \"view\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"context\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"tainted\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"margin\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"order\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"visible\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"scale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"dirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"exportableView\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"exportableContext\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        this.view = view;\r\n        this.context = context;\r\n    }\r\n    resize(canvasWidth, canvasHeight, domWidth, domHeight, resolution) {\r\n        // TODO should this take into account calculateSize ?\r\n        if (this.width != null) {\r\n            canvasWidth = this.width;\r\n            domWidth = this.width;\r\n        }\r\n        // TODO should this take into account calculateSize ?\r\n        if (this.height != null) {\r\n            canvasHeight = this.height;\r\n            domHeight = this.height;\r\n        }\r\n        if (this.margin) {\r\n            canvasWidth += (this.margin.left + this.margin.right);\r\n            canvasHeight += (this.margin.top + this.margin.bottom);\r\n            // TODO this should take into account calculateSize\r\n            domWidth += (this.margin.left + this.margin.right);\r\n            domHeight += (this.margin.top + this.margin.bottom);\r\n            this.view.style.left = -this.margin.left + \"px\";\r\n            this.view.style.top = -this.margin.top + \"px\";\r\n        }\r\n        else {\r\n            this.view.style.left = \"0px\";\r\n            this.view.style.top = \"0px\";\r\n        }\r\n        this._width = Math.floor(canvasWidth * resolution);\r\n        this._height = Math.floor(canvasHeight * resolution);\r\n        this.view.width = this._width;\r\n        this.view.style.width = domWidth + \"px\";\r\n        this.view.height = this._height;\r\n        this.view.style.height = domHeight + \"px\";\r\n    }\r\n    clear() {\r\n        this.context.save();\r\n        this.context.clearRect(0, 0, this._width, this._height);\r\n    }\r\n}\r\n//# sourceMappingURL=CanvasRenderer.js.map","import { AnimationState } from \"./util/Animation\";\r\nimport { Container } from \"./render/Container\";\r\nimport { Text } from \"./render/Text\";\r\nimport { HorizontalLayout } from \"./render/HorizontalLayout\";\r\nimport { VerticalLayout } from \"./render/VerticalLayout\";\r\nimport { GridLayout } from \"./render/GridLayout\";\r\nimport { Disposer } from \"./util/Disposer\";\r\nimport { ResizeSensor } from \"./util/ResizeSensor\";\r\nimport { InterfaceColors } from \"./util/InterfaceColors\";\r\nimport { Graphics } from \"./render/Graphics\";\r\nimport { Rectangle } from \"./render/Rectangle\";\r\nimport { Tooltip } from \"./render/Tooltip\";\r\nimport { NumberFormatter } from \"./util/NumberFormatter\";\r\nimport { DateFormatter } from \"./util/DateFormatter\";\r\nimport { DurationFormatter } from \"./util/DurationFormatter\";\r\nimport { Language } from \"./util/Language\";\r\nimport { EventDispatcher } from \"./util/EventDispatcher\";\r\nimport { DefaultTheme } from \"../themes/DefaultTheme\";\r\nimport { CanvasRenderer } from \"./render/backend/CanvasRenderer\";\r\nimport { p100, percent, isPercent, Percent } from \"./util/Percent\";\r\nimport { color } from \"./util/Color\";\r\nimport { populateString } from \"./util/PopulateString\";\r\nimport { registry } from \"./Registry\";\r\nimport * as $order from \"./util/Order\";\r\nimport * as $array from \"./util/Array\";\r\nimport * as $object from \"./util/Object\";\r\nimport * as $utils from \"./util/Utils\";\r\nimport * as $type from \"./util/Type\";\r\nimport en from \"../../locales/en\";\r\nfunction rAF(fps, callback) {\r\n    if (fps == null) {\r\n        requestAnimationFrame(callback);\r\n    }\r\n    else {\r\n        setTimeout(() => {\r\n            requestAnimationFrame(callback);\r\n        }, 1000 / fps);\r\n    }\r\n}\r\n// TODO implement Disposer\r\n/**\r\n * Root element of the chart.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/getting-started/#Root_element} for more info\r\n */\r\nexport class Root {\r\n    constructor(id, settings = {}, isReal) {\r\n        /**\r\n         * A reference to original chart container (div element).\r\n         */\r\n        Object.defineProperty(this, \"dom\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_inner\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_isDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_isDirtyParents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_isDirtyAnimation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirtyParents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirtyBounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirtyPositions\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_ticker\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_tickers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_updateTick\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        /**\r\n         * Root's event dispatcher.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\r\n         */\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        /**\r\n         * @ignore\r\n         * @todo needs description\r\n         */\r\n        Object.defineProperty(this, \"animationTime\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_animations\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_renderer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_rootContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Main content container.\r\n         */\r\n        Object.defineProperty(this, \"container\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A [[Container]] used to display tooltips in.\r\n         */\r\n        Object.defineProperty(this, \"tooltipContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipContainerSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltip\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // Locale-related\r\n        /**\r\n         * @ignore\r\n         */\r\n        Object.defineProperty(this, \"language\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Language.new(this, {})\r\n        });\r\n        /**\r\n         * Locale used by the chart.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/locales/}\r\n         */\r\n        Object.defineProperty(this, \"locale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: en\r\n        });\r\n        // Date-time related\r\n        /**\r\n         * Use UTC when formatting date/time.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/#utc-and-time-zones} for more info\r\n         */\r\n        Object.defineProperty(this, \"utc\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * If set, will format date/time in specific time zone.\r\n         *\r\n         * The value should be named time zone, e.g.:\r\n         * `\"America/Vancouver\"`, `\"Australia/Sydney\"`, `\"UTC\"`.\r\n         *\r\n         * NOTE: Using time zone feature may noticeable affect performance of the\r\n         * chart, especially with large data sets, since every single date will need\r\n         * to be recalculated.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#time-zone} for more info\r\n         * @since 5.1.0\r\n         */\r\n        Object.defineProperty(this, \"timezone\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * The maximum FPS that the Root will run at.\r\n         *\r\n         * If `undefined` it will run at the highest FPS.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Performance} for more info\r\n         */\r\n        Object.defineProperty(this, \"fps\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Number formatter.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/} for more info\r\n         */\r\n        Object.defineProperty(this, \"numberFormatter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: NumberFormatter.new(this, {})\r\n        });\r\n        /**\r\n         * Date/time formatter.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\r\n         */\r\n        Object.defineProperty(this, \"dateFormatter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: DateFormatter.new(this, {})\r\n        });\r\n        /**\r\n         * Duration formatter.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\r\n         */\r\n        Object.defineProperty(this, \"durationFormatter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: DurationFormatter.new(this, {})\r\n        });\r\n        // Accessibility\r\n        /**\r\n         * Global tab index for using for the whole chart\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\r\n         */\r\n        Object.defineProperty(this, \"tabindex\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        //@todo maybe make this better\r\n        Object.defineProperty(this, \"_tabindexes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_a11yD\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_focusElementDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_focusElementContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_focusedSprite\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_isShift\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_keyboardDragPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipElementContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_readerAlertElement\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_skipNextGroupJump\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_logo\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipDiv\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Used for dynamically-created CSS and JavaScript with strict source policies.\r\n         */\r\n        Object.defineProperty(this, \"nonce\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Special color set to be used for various controls.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Interface_colors} for more info\r\n         */\r\n        Object.defineProperty(this, \"interfaceColors\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * An instance of vertical layout object that can be used to set `layout` setting\r\n         * of a [[Container]].\r\n         *\r\n         * @default VerticalLayout.new()\r\n         */\r\n        Object.defineProperty(this, \"verticalLayout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: VerticalLayout.new(this, {})\r\n        });\r\n        /**\r\n         * An instance of horizontal layout object that can be used to set `layout` setting\r\n         * of a [[Container]].\r\n         *\r\n         * @default HorizontalLayout.new()\r\n         */\r\n        Object.defineProperty(this, \"horizontalLayout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: HorizontalLayout.new(this, {})\r\n        });\r\n        /**\r\n         * An instance of grid layout object that can be used to set `layout` setting\r\n         * of a [[Container]].\r\n         *\r\n         * @default VerticalLayout.new()\r\n         */\r\n        Object.defineProperty(this, \"gridLayout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: GridLayout.new(this, {})\r\n        });\r\n        Object.defineProperty(this, \"_paused\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * Indicates whether chart should resized automatically when parent container\r\n         * width and/or height changes.\r\n         *\r\n         * If disabled (`autoResize = false`) you can make the chart resize manually\r\n         * by calling root element's `resize()` method.\r\n         */\r\n        Object.defineProperty(this, \"autoResize\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_fontHash\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"\"\r\n        });\r\n        Object.defineProperty(this, \"_isDisposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_disposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_resizeSensorDisposer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltips\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_htmlElementContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_htmlEnabledContainers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        /**\r\n         * Entities that have their `id` setting set.\r\n         *\r\n         * @since 5.11.0\r\n         */\r\n        Object.defineProperty(this, \"entitiesById\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_systemTooltip\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n        this._settings = settings;\r\n        if (settings.accessible == false) {\r\n            this._a11yD = true;\r\n        }\r\n        if (settings.useSafeResolution == null) {\r\n            settings.useSafeResolution = true;\r\n        }\r\n        let resolution;\r\n        if (settings.useSafeResolution) {\r\n            resolution = $utils.getSafeResolution();\r\n        }\r\n        this._renderer = new CanvasRenderer(resolution);\r\n        let dom;\r\n        if (id instanceof HTMLElement) {\r\n            dom = id;\r\n        }\r\n        else {\r\n            dom = document.getElementById(id);\r\n        }\r\n        $array.each(registry.rootElements, (root) => {\r\n            if (root.dom === dom) {\r\n                throw new Error(\"You cannot have multiple Roots on the same DOM node\");\r\n            }\r\n        });\r\n        this.interfaceColors = InterfaceColors.new(this, {});\r\n        if (dom === null) {\r\n            throw new Error(\"Could not find HTML element with id `\" + id + \"`\");\r\n        }\r\n        this.dom = dom;\r\n        let inner = document.createElement(\"div\");\r\n        inner.style.position = \"relative\";\r\n        inner.style.width = \"100%\";\r\n        inner.style.height = \"100%\";\r\n        dom.appendChild(inner);\r\n        const tooltipContainerBounds = settings.tooltipContainerBounds;\r\n        if (tooltipContainerBounds) {\r\n            this._tooltipContainerSettings = tooltipContainerBounds;\r\n        }\r\n        this._inner = inner;\r\n        this._updateComputedStyles();\r\n        registry.rootElements.push(this);\r\n    }\r\n    static new(id, settings) {\r\n        const root = new Root(id, settings, true);\r\n        root._init();\r\n        return root;\r\n    }\r\n    moveDOM(id) {\r\n        let dom;\r\n        if (id instanceof HTMLElement) {\r\n            dom = id;\r\n        }\r\n        else {\r\n            dom = document.getElementById(id);\r\n        }\r\n        if (dom) {\r\n            while (this.dom.childNodes.length > 0) {\r\n                dom.appendChild(this.dom.childNodes[0]);\r\n            }\r\n            this.dom = dom;\r\n            this._initResizeSensor();\r\n            this.resize();\r\n        }\r\n    }\r\n    _handleLogo() {\r\n        if (this._logo) {\r\n            const w = this.dom.offsetWidth;\r\n            const h = this.dom.offsetHeight;\r\n            if ((w <= 150) || (h <= 60)) {\r\n                this._logo.hide();\r\n            }\r\n            else {\r\n                this._logo.show();\r\n            }\r\n        }\r\n    }\r\n    _showBranding() {\r\n        if (!this._logo) {\r\n            const logo = this.tooltipContainer.children.push(Container.new(this, {\r\n                interactive: true,\r\n                interactiveChildren: false,\r\n                position: \"absolute\",\r\n                setStateOnChildren: true,\r\n                paddingTop: 9,\r\n                paddingRight: 9,\r\n                paddingBottom: 9,\r\n                paddingLeft: 9,\r\n                scale: .6,\r\n                y: percent(100),\r\n                centerY: p100,\r\n                tooltipY: 10,\r\n                tooltipText: \"Created using amCharts 5\",\r\n                tooltipX: p100,\r\n                cursorOverStyle: \"pointer\",\r\n                background: Rectangle.new(this, {\r\n                    fill: color(0x474758),\r\n                    fillOpacity: 0,\r\n                    tooltipY: 5\r\n                })\r\n            }));\r\n            logo.set(\"tooltip\", this.systemTooltip);\r\n            logo.events.on(\"click\", () => {\r\n                window.open(\"https://www.amcharts.com/\", \"_blank\");\r\n            });\r\n            logo.states.create(\"hover\", {});\r\n            const m = logo.children.push(Graphics.new(this, {\r\n                stroke: color(0xcccccc),\r\n                strokeWidth: 3,\r\n                svgPath: \"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6\"\r\n            }));\r\n            m.states.create(\"hover\", { stroke: color(0x3CABFF) });\r\n            const a = logo.children.push(Graphics.new(this, {\r\n                stroke: color(0x888888),\r\n                strokeWidth: 3,\r\n                svgPath: \"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0\"\r\n            }));\r\n            a.states.create(\"hover\", { stroke: color(0x474758) });\r\n            this._logo = logo;\r\n            this._handleLogo();\r\n        }\r\n    }\r\n    _getRealSize() {\r\n        return this.dom.getBoundingClientRect();\r\n    }\r\n    _getCalculatedSize(rect) {\r\n        if (this._settings.calculateSize) {\r\n            return this._settings.calculateSize(rect);\r\n        }\r\n        else {\r\n            return {\r\n                width: rect.width,\r\n                height: rect.height,\r\n            };\r\n        }\r\n    }\r\n    _init() {\r\n        const settings = this._settings;\r\n        if (settings.accessible !== false) {\r\n            if (settings.focusable) {\r\n                this._inner.setAttribute(\"focusable\", \"true\");\r\n                this._inner.setAttribute(\"tabindex\", this.tabindex + \"\");\r\n            }\r\n            if (settings.ariaLabel) {\r\n                this._inner.setAttribute(\"aria-label\", settings.ariaLabel);\r\n            }\r\n            if (settings.role) {\r\n                this._inner.setAttribute(\"role\", settings.role);\r\n            }\r\n        }\r\n        const renderer = this._renderer;\r\n        const rect = this._getRealSize();\r\n        const size = this._getCalculatedSize(rect);\r\n        const width = Math.floor(size.width);\r\n        const height = Math.floor(size.height);\r\n        const realWidth = Math.floor(rect.width);\r\n        const realHeight = Math.floor(rect.height);\r\n        const rootContainer = Container.new(this, {\r\n            visible: true,\r\n            width: width,\r\n            height: height,\r\n        });\r\n        this._rootContainer = rootContainer;\r\n        this._rootContainer._defaultThemes.push(DefaultTheme.new(this));\r\n        const container = rootContainer.children.push(Container.new(this, { visible: true, width: p100, height: p100 }));\r\n        this.container = container;\r\n        renderer.resize(realWidth, realHeight, width, height);\r\n        //@todo: better appendChild - refer\r\n        this._inner.appendChild(renderer.view);\r\n        // TODO: TMP TMP TMP for testing only, remove\r\n        //renderer.debugGhostView = true;\r\n        this._initResizeSensor();\r\n        // HTML content holder\r\n        const htmlElementContainer = document.createElement(\"div\");\r\n        this._htmlElementContainer = htmlElementContainer;\r\n        htmlElementContainer.className = \"am5-html-container\";\r\n        htmlElementContainer.style.position = \"absolute\";\r\n        htmlElementContainer.style.pointerEvents = \"none\";\r\n        if (!this._tooltipContainerSettings) {\r\n            htmlElementContainer.style.overflow = \"hidden\";\r\n        }\r\n        this._inner.appendChild(htmlElementContainer);\r\n        if (this._a11yD !== true) {\r\n            // Create element which is used to make announcements to screen reader\r\n            const readerAlertElement = document.createElement(\"div\");\r\n            readerAlertElement.className = \"am5-reader-container\";\r\n            readerAlertElement.setAttribute(\"role\", \"alert\");\r\n            // readerAlertElement.style.zIndex = \"-100000\";\r\n            // readerAlertElement.style.opacity = \"0\";\r\n            // readerAlertElement.style.top = \"0\";\r\n            readerAlertElement.style.position = \"absolute\";\r\n            readerAlertElement.style.width = \"1px\";\r\n            readerAlertElement.style.height = \"1px\";\r\n            readerAlertElement.style.overflow = \"hidden\";\r\n            readerAlertElement.style.clip = \"rect(1px, 1px, 1px, 1px)\";\r\n            this._readerAlertElement = readerAlertElement;\r\n            this._inner.appendChild(this._readerAlertElement);\r\n            const focusElementContainer = document.createElement(\"div\");\r\n            focusElementContainer.className = \"am5-focus-container\";\r\n            focusElementContainer.style.position = \"absolute\";\r\n            focusElementContainer.style.pointerEvents = \"none\";\r\n            focusElementContainer.style.top = \"0px\";\r\n            focusElementContainer.style.left = \"0px\";\r\n            focusElementContainer.style.overflow = \"hidden\";\r\n            focusElementContainer.style.width = width + \"px\";\r\n            focusElementContainer.style.height = height + \"px\";\r\n            focusElementContainer.setAttribute(\"role\", \"graphics-document\");\r\n            $utils.setInteractive(focusElementContainer, false);\r\n            this._focusElementContainer = focusElementContainer;\r\n            this._inner.appendChild(this._focusElementContainer);\r\n            const tooltipElementContainer = document.createElement(\"div\");\r\n            this._tooltipElementContainer = tooltipElementContainer;\r\n            tooltipElementContainer.className = \"am5-tooltip-container\";\r\n            this._inner.appendChild(tooltipElementContainer);\r\n            // Add keyboard events for accessibility, e.g. simulating drag with arrow\r\n            // keys and click with ENTER\r\n            if ($utils.supports(\"keyboardevents\")) {\r\n                this._disposers.push($utils.addEventListener(window, \"keydown\", (ev) => {\r\n                    const eventKey = $utils.getEventKey(ev);\r\n                    if (eventKey == \"Shift\") {\r\n                        this._isShift = true;\r\n                    }\r\n                    else if (eventKey == \"Tab\") {\r\n                        this._isShift = ev.shiftKey;\r\n                    }\r\n                }));\r\n                this._disposers.push($utils.addEventListener(window, \"keyup\", (ev) => {\r\n                    const eventKey = $utils.getEventKey(ev);\r\n                    if (eventKey == \"Shift\") {\r\n                        this._isShift = false;\r\n                    }\r\n                }));\r\n                this._disposers.push($utils.addEventListener(focusElementContainer, \"click\", () => {\r\n                    // Some screen readers convert ENTER (and some SPACE) press whil on\r\n                    // focused element to a \"click\" event, preventing actual \"keydown\"\r\n                    // event from firing. We're using this \"click\" event to still\r\n                    // generate internal click events.\r\n                    const focusedSprite = this._focusedSprite;\r\n                    if (focusedSprite) {\r\n                        const announceText = focusedSprite.get(\"clickAnnounceText\", \"\");\r\n                        if (announceText !== \"\") {\r\n                            this.readerAlert(announceText);\r\n                        }\r\n                        const downEvent = renderer.getEvent(new MouseEvent(\"click\"));\r\n                        focusedSprite.events.dispatch(\"click\", {\r\n                            type: \"click\",\r\n                            originalEvent: downEvent.event,\r\n                            point: downEvent.point,\r\n                            simulated: true,\r\n                            target: focusedSprite\r\n                        });\r\n                    }\r\n                }));\r\n                this._disposers.push($utils.addEventListener(focusElementContainer, \"keydown\", (ev) => {\r\n                    const focusedSprite = this._focusedSprite;\r\n                    if (focusedSprite) {\r\n                        if (ev.key == \"Escape\") {\r\n                            // ESC pressed - lose current focus\r\n                            $utils.blur();\r\n                            this._focusedSprite = undefined;\r\n                        }\r\n                        let dragOffsetX = 0;\r\n                        let dragOffsetY = 0;\r\n                        // TODO: figure out if using bogus MouseEvent is fine, or it will\r\n                        // fail on some platforms\r\n                        const eventKey = $utils.getEventKey(ev);\r\n                        switch (eventKey) {\r\n                            case \"Enter\":\r\n                            case \" \":\r\n                                const announceText = focusedSprite.get(\"clickAnnounceText\", \"\");\r\n                                if (announceText !== \"\") {\r\n                                    this.readerAlert(announceText);\r\n                                }\r\n                                if (eventKey == \" \" && focusedSprite.get(\"role\") != \"checkbox\") {\r\n                                    return;\r\n                                }\r\n                                ev.preventDefault();\r\n                                const downEvent = renderer.getEvent(new MouseEvent(\"mouse\"));\r\n                                focusedSprite.events.dispatch(\"click\", {\r\n                                    type: \"click\",\r\n                                    originalEvent: downEvent.event,\r\n                                    point: downEvent.point,\r\n                                    simulated: true,\r\n                                    target: focusedSprite\r\n                                });\r\n                                return;\r\n                            case \"ArrowLeft\":\r\n                                dragOffsetX = -6;\r\n                                break;\r\n                            case \"ArrowRight\":\r\n                                dragOffsetX = 6;\r\n                                break;\r\n                            case \"ArrowUp\":\r\n                                dragOffsetY = -6;\r\n                                break;\r\n                            case \"ArrowDown\":\r\n                                dragOffsetY = 6;\r\n                                break;\r\n                            default:\r\n                                return;\r\n                        }\r\n                        if (dragOffsetX != 0 || dragOffsetY != 0) {\r\n                            ev.preventDefault();\r\n                            if (!focusedSprite.isDragging()) {\r\n                                // Start dragging\r\n                                this._keyboardDragPoint = {\r\n                                    x: 0,\r\n                                    y: 0\r\n                                };\r\n                                const downEvent = renderer.getEvent(new MouseEvent(\"mousedown\", {\r\n                                    clientX: 0,\r\n                                    clientY: 0\r\n                                }));\r\n                                downEvent.point = {\r\n                                    x: 0,\r\n                                    y: 0\r\n                                };\r\n                                if (focusedSprite.events.isEnabled(\"pointerdown\")) {\r\n                                    focusedSprite.events.dispatch(\"pointerdown\", {\r\n                                        type: \"pointerdown\",\r\n                                        originalEvent: downEvent.event,\r\n                                        point: downEvent.point,\r\n                                        simulated: true,\r\n                                        target: focusedSprite\r\n                                    });\r\n                                }\r\n                            }\r\n                            else {\r\n                                // Move focus marker\r\n                                //this._positionFocusElement(focusedSprite);\r\n                            }\r\n                            // Move incrementally\r\n                            const dragPoint = this._keyboardDragPoint;\r\n                            dragPoint.x += dragOffsetX;\r\n                            dragPoint.y += dragOffsetY;\r\n                            const moveEvent = renderer.getEvent(new MouseEvent(\"mousemove\", {\r\n                                clientX: dragPoint.x,\r\n                                clientY: dragPoint.y\r\n                            }), false);\r\n                            if (focusedSprite.events.isEnabled(\"globalpointermove\")) {\r\n                                focusedSprite.events.dispatch(\"globalpointermove\", {\r\n                                    type: \"globalpointermove\",\r\n                                    originalEvent: moveEvent.event,\r\n                                    point: moveEvent.point,\r\n                                    simulated: true,\r\n                                    target: focusedSprite\r\n                                });\r\n                            }\r\n                        }\r\n                    }\r\n                }));\r\n                this._disposers.push($utils.addEventListener(focusElementContainer, \"keyup\", (ev) => {\r\n                    if (this._focusedSprite) {\r\n                        const focusedSprite = this._focusedSprite;\r\n                        const eventKey = $utils.getEventKey(ev);\r\n                        switch (eventKey) {\r\n                            case \"ArrowLeft\":\r\n                            case \"ArrowRight\":\r\n                            case \"ArrowUp\":\r\n                            case \"ArrowDown\":\r\n                                if (focusedSprite.isDragging()) {\r\n                                    // Simulate drag stop\r\n                                    const dragPoint = this._keyboardDragPoint;\r\n                                    const upEvent = renderer.getEvent(new MouseEvent(\"mouseup\", {\r\n                                        clientX: dragPoint.x,\r\n                                        clientY: dragPoint.y\r\n                                    }));\r\n                                    if (focusedSprite.events.isEnabled(\"globalpointerup\")) {\r\n                                        focusedSprite.events.dispatch(\"globalpointerup\", {\r\n                                            type: \"globalpointerup\",\r\n                                            originalEvent: upEvent.event,\r\n                                            point: upEvent.point,\r\n                                            simulated: true,\r\n                                            target: focusedSprite\r\n                                        });\r\n                                    }\r\n                                    //this._positionFocusElement(focusedSprite);\r\n                                    this._keyboardDragPoint = undefined;\r\n                                    // @todo dispatch mouseup event instead of calling dragStop?\r\n                                    // this._dispatchEvent(\"globalpointerup\", target, upEvent);\r\n                                    return;\r\n                                }\r\n                                else if (focusedSprite.get(\"focusableGroup\")) {\r\n                                    // Find next item in focusable group\r\n                                    const group = focusedSprite.get(\"focusableGroup\");\r\n                                    const items = this._tabindexes.filter((item) => {\r\n                                        return item.get(\"focusableGroup\") == group && item.getPrivate(\"focusable\") !== false && item.isVisibleDeep() ? true : false;\r\n                                    });\r\n                                    let index = items.indexOf(focusedSprite);\r\n                                    const lastIndex = items.length - 1;\r\n                                    index += (eventKey == \"ArrowRight\" || eventKey == \"ArrowDown\") ? 1 : -1;\r\n                                    if (index < 0) {\r\n                                        index = lastIndex;\r\n                                    }\r\n                                    else if (index > lastIndex) {\r\n                                        index = 0;\r\n                                    }\r\n                                    $utils.focus(items[index].getPrivate(\"focusElement\").dom);\r\n                                }\r\n                                break;\r\n                            case \"Tab\":\r\n                                const group = focusedSprite.get(\"focusableGroup\");\r\n                                if (group && this._isShift) {\r\n                                    if (!this._skipNextGroupJump) {\r\n                                        this._focusNext(focusedSprite.getPrivate(\"focusElement\").dom, -1, group);\r\n                                        this._skipNextGroupJump = true;\r\n                                    }\r\n                                    return;\r\n                                }\r\n                                break;\r\n                        }\r\n                    }\r\n                }));\r\n            }\r\n        }\r\n        this._startTicker();\r\n        this.setThemes([]);\r\n        this._addTooltip();\r\n        if (!this._hasLicense()) {\r\n            this._showBranding();\r\n        }\r\n    }\r\n    /**\r\n     * Returns an instance of a universal [[Tooltip]] instance.\r\n     * @since 5.14.0\r\n     */\r\n    get systemTooltip() {\r\n        if (!this._systemTooltip) {\r\n            const tooltip = Tooltip.new(this, {\r\n                themeTags: [\"system\"]\r\n            });\r\n            this._systemTooltip = tooltip;\r\n        }\r\n        return this._systemTooltip;\r\n    }\r\n    _initResizeSensor() {\r\n        if (this._resizeSensorDisposer) {\r\n            this._resizeSensorDisposer.dispose();\r\n        }\r\n        this._resizeSensorDisposer = new ResizeSensor(this.dom, () => {\r\n            if (this.autoResize) {\r\n                this.resize();\r\n            }\r\n        });\r\n        this._disposers.push(this._resizeSensorDisposer);\r\n    }\r\n    /**\r\n     * If automatic resizing of char is disabled (`root.autoResize = false`), it\r\n     * can be resized manually by calling this method.\r\n     */\r\n    resize() {\r\n        const rect = this._getRealSize();\r\n        const size = this._getCalculatedSize(rect);\r\n        const w = Math.floor(size.width);\r\n        const h = Math.floor(size.height);\r\n        if (w > 0 && h > 0) {\r\n            const realWidth = Math.floor(rect.width);\r\n            const realHeight = Math.floor(rect.height);\r\n            const htmlElementContainer = this._htmlElementContainer;\r\n            htmlElementContainer.style.width = w + \"px\";\r\n            htmlElementContainer.style.height = h + \"px\";\r\n            if (this._a11yD !== true) {\r\n                const focusElementContainer = this._focusElementContainer;\r\n                focusElementContainer.style.width = w + \"px\";\r\n                focusElementContainer.style.height = h + \"px\";\r\n            }\r\n            this._renderer.resize(realWidth, realHeight, w, h);\r\n            const rootContainer = this._rootContainer;\r\n            rootContainer.setPrivate(\"width\", w);\r\n            rootContainer.setPrivate(\"height\", h);\r\n            this._render();\r\n            this._handleLogo();\r\n        }\r\n    }\r\n    _render() {\r\n        this._renderer.render(this._rootContainer._display);\r\n        if (this._focusElementDirty) {\r\n            this._updateCurrentFocus();\r\n            this._focusElementDirty = false;\r\n        }\r\n    }\r\n    _runTickers(currentTime) {\r\n        $array.each(this._tickers, (f) => {\r\n            f(currentTime);\r\n        });\r\n    }\r\n    _runAnimations(currentTime) {\r\n        let running = 0;\r\n        $array.keepIf(this._animations, (animation) => {\r\n            const state = animation._runAnimation(currentTime);\r\n            if (state === AnimationState.Stopped) {\r\n                return false;\r\n            }\r\n            else if (state === AnimationState.Playing) {\r\n                ++running;\r\n                return true;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        });\r\n        this._isDirtyAnimation = false;\r\n        return running === 0;\r\n    }\r\n    _runDirties() {\r\n        //console.log(\"tick **************************************************************\");\t\t\r\n        let allParents = {};\r\n        while (this._isDirtyParents) {\r\n            // This must be before calling _prepareChildren\r\n            this._isDirtyParents = false;\r\n            $object.keys(this._dirtyParents).forEach((key) => {\r\n                const parent = this._dirtyParents[key];\r\n                delete this._dirtyParents[key];\r\n                if (!parent.isDisposed()) {\r\n                    allParents[parent.uid] = parent;\r\n                    parent._prepareChildren();\r\n                }\r\n            });\r\n        }\r\n        $object.keys(allParents).forEach((key) => {\r\n            allParents[key]._updateChildren();\r\n        });\r\n        const objects = [];\r\n        //\t\tconsole.log(\"_beforeChanged\")\r\n        $object.keys(this._dirty).forEach((key) => {\r\n            const entity = this._dirty[key];\r\n            if (entity.isDisposed()) {\r\n                delete this._dirty[entity.uid];\r\n            }\r\n            else {\r\n                objects.push(entity);\r\n                entity._beforeChanged();\r\n            }\r\n        });\r\n        //\t\tconsole.log(\"_changed\")\r\n        objects.forEach((entity) => {\r\n            entity._changed();\r\n            delete this._dirty[entity.uid];\r\n            entity._clearDirty();\r\n        });\r\n        this._isDirty = false;\r\n        const depths = {};\r\n        const bounds = [];\r\n        $object.keys(this._dirtyBounds).forEach((key) => {\r\n            const entity = this._dirtyBounds[key];\r\n            delete this._dirtyBounds[key];\r\n            if (!entity.isDisposed()) {\r\n                depths[entity.uid] = entity.depth();\r\n                bounds.push(entity);\r\n            }\r\n        });\r\n        this._positionHTMLElements();\r\n        // High depth -> low depth\r\n        bounds.sort((x, y) => {\r\n            return $order.compare(depths[y.uid], depths[x.uid]);\r\n        });\r\n        //\t\tconsole.log(\"_updateBounds\")\r\n        bounds.forEach((entity) => {\r\n            entity._updateBounds();\r\n        });\r\n        //\t\tconsole.log(\"_updatePosition\")\r\n        const dirtyPositions = this._dirtyPositions;\r\n        $object.keys(dirtyPositions).forEach((key) => {\r\n            const sprite = dirtyPositions[key];\r\n            delete dirtyPositions[key];\r\n            if (!sprite.isDisposed()) {\r\n                sprite._updatePosition();\r\n            }\r\n        });\r\n        //\t\tconsole.log(\"_afterChanged\")\r\n        objects.forEach((entity) => {\r\n            entity._afterChanged();\r\n        });\r\n        $object.keys(allParents).forEach((key) => {\r\n            allParents[key]._childrenPrep = false;\r\n            allParents[key]._childrenUpdt = false;\r\n        });\r\n    }\r\n    _renderFrame(currentTime) {\r\n        if (this._updateTick) {\r\n            if (this.events.isEnabled(\"framestarted\")) {\r\n                this.events.dispatch(\"framestarted\", {\r\n                    type: \"framestarted\",\r\n                    target: this,\r\n                    timestamp: currentTime,\r\n                });\r\n            }\r\n            this._checkComputedStyles();\r\n            this._runTickers(currentTime);\r\n            const animationDone = this._runAnimations(currentTime);\r\n            this._runDirties();\r\n            this._render();\r\n            this._renderer.resetImageArray();\r\n            this._positionHTMLElements();\r\n            if (this.events.isEnabled(\"frameended\")) {\r\n                this.events.dispatch(\"frameended\", {\r\n                    type: \"frameended\",\r\n                    target: this,\r\n                    timestamp: currentTime,\r\n                });\r\n            }\r\n            return this._tickers.length === 0 &&\r\n                animationDone &&\r\n                !this._isDirtyAnimation &&\r\n                !this._isDirty;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    _runTicker(currentTime, now) {\r\n        if (!this.isDisposed()) {\r\n            this.animationTime = currentTime;\r\n            const done = this._renderFrame(currentTime);\r\n            // No more work to do\r\n            if (done) {\r\n                this._ticker = null;\r\n                this.animationTime = null;\r\n            }\r\n            else {\r\n                if (!this._paused) {\r\n                    if (now) {\r\n                        this._ticker;\r\n                    }\r\n                    else {\r\n                        rAF(this.fps, this._ticker);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _runTickerNow(timeout = 10000) {\r\n        if (!this.isDisposed()) {\r\n            const endTime = performance.now() + timeout;\r\n            for (;;) {\r\n                const currentTime = performance.now();\r\n                if (currentTime >= endTime) {\r\n                    this.animationTime = null;\r\n                    break;\r\n                }\r\n                this.animationTime = currentTime;\r\n                const done = this._renderFrame(currentTime);\r\n                if (done) {\r\n                    this.animationTime = null;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _startTicker() {\r\n        if (this._ticker === null) {\r\n            this.animationTime = null;\r\n            this._ticker = (currentTime) => {\r\n                this._runTicker(currentTime);\r\n            };\r\n            rAF(this.fps, this._ticker);\r\n        }\r\n    }\r\n    /**\r\n     * Returns whether the root is updating or not.\r\n     */\r\n    get updateTick() {\r\n        return this._updateTick;\r\n    }\r\n    /**\r\n     * Enables or disables the root updating.\r\n     */\r\n    set updateTick(value) {\r\n        this._updateTick = value;\r\n        if (value) {\r\n            this._startTicker();\r\n        }\r\n    }\r\n    _addDirtyEntity(entity) {\r\n        this._isDirty = true;\r\n        if (this._dirty[entity.uid] === undefined) {\r\n            this._dirty[entity.uid] = entity;\r\n        }\r\n        this._startTicker();\r\n    }\r\n    _addDirtyParent(parent) {\r\n        this._isDirty = true;\r\n        this._isDirtyParents = true;\r\n        if (this._dirtyParents[parent.uid] === undefined) {\r\n            this._dirtyParents[parent.uid] = parent;\r\n        }\r\n        this._startTicker();\r\n    }\r\n    _addDirtyBounds(entity) {\r\n        this._isDirty = true;\r\n        if (this._dirtyBounds[entity.uid] === undefined) {\r\n            this._dirtyBounds[entity.uid] = entity;\r\n        }\r\n        this._startTicker();\r\n    }\r\n    _addDirtyPosition(sprite) {\r\n        this._isDirty = true;\r\n        if (this._dirtyPositions[sprite.uid] === undefined) {\r\n            this._dirtyPositions[sprite.uid] = sprite;\r\n        }\r\n        this._startTicker();\r\n    }\r\n    _addAnimation(animation) {\r\n        this._isDirtyAnimation = true;\r\n        // TODO use numeric id instead\r\n        if (this._animations.indexOf(animation) === -1) {\r\n            this._animations.push(animation);\r\n        }\r\n        this._startTicker();\r\n    }\r\n    _markDirty() {\r\n        this._isDirty = true;\r\n    }\r\n    _markDirtyRedraw() {\r\n        this.events.once(\"frameended\", () => {\r\n            this._isDirty = true;\r\n            this._startTicker();\r\n        });\r\n    }\r\n    eachFrame(f) {\r\n        this._tickers.push(f);\r\n        this._startTicker();\r\n        return new Disposer(() => {\r\n            $array.removeFirst(this._tickers, f);\r\n        });\r\n    }\r\n    markDirtyGlobal(container) {\r\n        if (!container) {\r\n            container = this.container;\r\n        }\r\n        container.walkChildren((child) => {\r\n            if (child instanceof Container) {\r\n                this.markDirtyGlobal(child);\r\n            }\r\n            child.markDirty();\r\n            child.markDirtyBounds();\r\n        });\r\n    }\r\n    /**\r\n     * Returns width of the target container, in pixels.\r\n     *\r\n     * @return Width\r\n     */\r\n    width() {\r\n        // TODO make this more efficient, maybe just return the renderer's width ?\r\n        return Math.floor(this._getCalculatedSize(this._getRealSize()).width);\r\n    }\r\n    /**\r\n     * Returns height of the target container, in pixels.\r\n     *\r\n     * @return Height\r\n     */\r\n    height() {\r\n        // TODO make this more efficient, maybe just return the renderer's height ?\r\n        return Math.floor(this._getCalculatedSize(this._getRealSize()).height);\r\n    }\r\n    /**\r\n     * Disposes root and all the content in it.\r\n     */\r\n    dispose() {\r\n        if (!this._isDisposed) {\r\n            this._isDisposed = true;\r\n            this._rootContainer.dispose();\r\n            this._renderer.dispose();\r\n            this.horizontalLayout.dispose();\r\n            this.verticalLayout.dispose();\r\n            this.interfaceColors.dispose();\r\n            $array.each(this._disposers, (x) => {\r\n                x.dispose();\r\n            });\r\n            if (this._inner) {\r\n                $utils.removeElement(this._inner);\r\n            }\r\n            $array.remove(registry.rootElements, this);\r\n        }\r\n    }\r\n    /**\r\n     * Returns `true` if root element is disposed.\r\n     *\r\n     * @return Disposed?\r\n     */\r\n    isDisposed() {\r\n        return this._isDisposed;\r\n    }\r\n    /**\r\n     * Triggers screen reader read out a message.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\r\n     * @param  text  Alert text\r\n     */\r\n    readerAlert(text) {\r\n        if (this._a11yD !== true) {\r\n            const element = this._readerAlertElement;\r\n            text = $utils.stripTags(text);\r\n            if (element.innerHTML == text) {\r\n                element.innerHTML = \"\";\r\n            }\r\n            element.innerHTML = text;\r\n        }\r\n    }\r\n    /**\r\n     * Sets themes to be used for the chart.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/themes/} for more info\r\n     * @param  themes  A list of themes\r\n     */\r\n    setThemes(themes) {\r\n        this._rootContainer.set(\"themes\", themes);\r\n        // otherwise new themes are not applied\r\n        const tooltipContainer = this.tooltipContainer;\r\n        if (tooltipContainer) {\r\n            tooltipContainer._applyThemes();\r\n        }\r\n        // @todo review this\r\n        const interfaceColors = this.interfaceColors;\r\n        if (interfaceColors) {\r\n            interfaceColors._applyThemes();\r\n        }\r\n    }\r\n    _addTooltip() {\r\n        if (!this.tooltipContainer) {\r\n            const tooltipContainerSettings = this._tooltipContainerSettings;\r\n            const tooltipContainer = this._rootContainer.children.push(Container.new(this, {\r\n                position: \"absolute\",\r\n                isMeasured: false,\r\n                width: p100,\r\n                height: p100,\r\n                layer: tooltipContainerSettings ? 35 : 30,\r\n                layerMargin: tooltipContainerSettings ? tooltipContainerSettings : undefined\r\n            }));\r\n            this.tooltipContainer = tooltipContainer;\r\n            const tooltip = Tooltip.new(this, {});\r\n            this.container.set(\"tooltip\", tooltip);\r\n            tooltip.hide(0);\r\n            this._tooltip = tooltip;\r\n        }\r\n    }\r\n    /**\r\n     * Accesibility\r\n     */\r\n    _registerTabindexOrder(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        if (target.get(\"focusable\")) {\r\n            $array.pushOne(this._tabindexes, target);\r\n        }\r\n        else {\r\n            $array.remove(this._tabindexes, target);\r\n        }\r\n        this._invalidateTabindexes();\r\n    }\r\n    _unregisterTabindexOrder(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        $array.remove(this._tabindexes, target);\r\n        this._invalidateTabindexes();\r\n    }\r\n    _invalidateTabindexes() {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        this._tabindexes.sort((a, b) => {\r\n            const aindex = a.get(\"tabindexOrder\", 0);\r\n            const bindex = b.get(\"tabindexOrder\", 0);\r\n            if (aindex == bindex) {\r\n                return 0;\r\n            }\r\n            else if (aindex > bindex) {\r\n                return 1;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        });\r\n        const groups = [];\r\n        $array.each(this._tabindexes, (item, index) => {\r\n            if (!item.getPrivate(\"focusElement\")) {\r\n                this._makeFocusElement(index, item);\r\n            }\r\n            else {\r\n                this._moveFocusElement(index, item);\r\n            }\r\n            const group = item.get(\"focusableGroup\");\r\n            if (group && item.getPrivate(\"focusable\") !== false) {\r\n                if (groups.indexOf(group) !== -1) {\r\n                    // Non-first element in the group, make it not directly focusable\r\n                    item.getPrivate(\"focusElement\").dom.setAttribute(\"tabindex\", \"-1\");\r\n                }\r\n                else {\r\n                    groups.push(group);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    _updateCurrentFocus() {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        if (this._focusedSprite) {\r\n            this._decorateFocusElement(this._focusedSprite);\r\n            this._positionFocusElement(this._focusedSprite);\r\n        }\r\n    }\r\n    _decorateFocusElement(target, focusElement) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        // Decorate with proper accessibility attributes\r\n        if (!focusElement) {\r\n            focusElement = target.getPrivate(\"focusElement\").dom;\r\n        }\r\n        if (!focusElement) {\r\n            return;\r\n        }\r\n        const role = target.get(\"role\");\r\n        if (role) {\r\n            focusElement.setAttribute(\"role\", role);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"role\");\r\n        }\r\n        const ariaLabel = target.get(\"ariaLabel\");\r\n        if (ariaLabel) {\r\n            const label = populateString(target, ariaLabel);\r\n            focusElement.setAttribute(\"aria-label\", label);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-label\");\r\n        }\r\n        const ariaLive = target.get(\"ariaLive\");\r\n        if (ariaLive) {\r\n            focusElement.setAttribute(\"aria-live\", ariaLive);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-live\");\r\n        }\r\n        const ariaChecked = target.get(\"ariaChecked\");\r\n        if (ariaChecked != null && role && [\"checkbox\", \"option\", \"radio\", \"menuitemcheckbox\", \"menuitemradio\", \"treeitem\"].indexOf(role) !== -1) {\r\n            focusElement.setAttribute(\"aria-checked\", ariaChecked ? \"true\" : \"false\");\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-checked\");\r\n        }\r\n        const ariaCurrent = target.get(\"ariaCurrent\");\r\n        if (ariaCurrent != null) {\r\n            focusElement.setAttribute(\"aria-current\", ariaCurrent);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-current\");\r\n        }\r\n        const ariaSelected = target.get(\"ariaSelected\");\r\n        if (ariaSelected != null && role && [\"gridcell\", \"option\", \"row\", \"tab\", \"columnheader\", \"rowheader\", \"treeitem\"].indexOf(role) !== -1) {\r\n            focusElement.setAttribute(\"aria-selected\", ariaSelected ? \"true\" : \"false\");\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-selected\");\r\n        }\r\n        if (target.get(\"ariaHidden\")) {\r\n            focusElement.setAttribute(\"aria-hidden\", \"true\");\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-hidden\");\r\n        }\r\n        const ariaOrientation = target.get(\"ariaOrientation\");\r\n        if (ariaOrientation) {\r\n            focusElement.setAttribute(\"aria-orientation\", ariaOrientation);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-orientation\");\r\n        }\r\n        const ariaValueNow = target.get(\"ariaValueNow\");\r\n        if (ariaValueNow) {\r\n            focusElement.setAttribute(\"aria-valuenow\", ariaValueNow);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-valuenow\");\r\n        }\r\n        const ariaValueMin = target.get(\"ariaValueMin\");\r\n        if (ariaValueMin) {\r\n            focusElement.setAttribute(\"aria-valuemin\", ariaValueMin);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-valuemin\");\r\n        }\r\n        const ariaValueMax = target.get(\"ariaValueMax\");\r\n        if (ariaValueMax) {\r\n            focusElement.setAttribute(\"aria-valuemax\", ariaValueMax);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-valuemax\");\r\n        }\r\n        const ariaValueText = target.get(\"ariaValueText\");\r\n        if (ariaValueText) {\r\n            focusElement.setAttribute(\"aria-valuetext\", ariaValueText);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-valuetext\");\r\n        }\r\n        const ariaControls = target.get(\"ariaControls\");\r\n        if (ariaControls) {\r\n            focusElement.setAttribute(\"aria-controls\", ariaControls);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-controls\");\r\n        }\r\n        if (target.get(\"visible\") && target.get(\"opacity\") !== 0 && target.get(\"role\") != \"tooltip\" && !target.isHidden() && target.getPrivate(\"focusable\") !== false && (target.height() || target.width())) {\r\n            if (focusElement.getAttribute(\"tabindex\") != \"-1\") {\r\n                focusElement.setAttribute(\"tabindex\", \"\" + this.tabindex);\r\n            }\r\n            focusElement.removeAttribute(\"aria-hidden\");\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"tabindex\");\r\n            focusElement.setAttribute(\"aria-hidden\", \"true\");\r\n        }\r\n    }\r\n    _makeFocusElement(index, target) {\r\n        if (target.getPrivate(\"focusElement\") || this._a11yD == true) {\r\n            return;\r\n        }\r\n        // Init\r\n        const focusElement = document.createElement(\"div\");\r\n        if (target.get(\"role\") != \"tooltip\") {\r\n            focusElement.tabIndex = this.tabindex;\r\n        }\r\n        focusElement.style.position = \"absolute\";\r\n        $utils.setInteractive(focusElement, false);\r\n        const disposers = [];\r\n        target.setPrivate(\"focusElement\", {\r\n            dom: focusElement,\r\n            disposers,\r\n        });\r\n        this._decorateFocusElement(target);\r\n        disposers.push($utils.addEventListener(focusElement, \"focus\", (ev) => {\r\n            this._handleFocus(ev);\r\n        }));\r\n        disposers.push($utils.addEventListener(focusElement, \"blur\", (ev) => {\r\n            this._handleBlur(ev);\r\n        }));\r\n        this._moveFocusElement(index, target);\r\n    }\r\n    _removeFocusElement(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        $array.remove(this._tabindexes, target);\r\n        const focusElement = target.getPrivate(\"focusElement\");\r\n        if (focusElement) {\r\n            const container = this._focusElementContainer;\r\n            container.removeChild(focusElement.dom);\r\n            $array.each(focusElement.disposers, (x) => {\r\n                x.dispose();\r\n            });\r\n        }\r\n    }\r\n    _hideFocusElement(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        const focusElement = target.getPrivate(\"focusElement\");\r\n        focusElement.dom.style.display = \"none\";\r\n    }\r\n    _moveFocusElement(index, target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        // Get container\r\n        const container = this._focusElementContainer;\r\n        const focusElement = target.getPrivate(\"focusElement\").dom;\r\n        if (focusElement === this._focusElementContainer.children[index]) {\r\n            // Nothing to do\r\n            return;\r\n        }\r\n        const next = this._focusElementContainer.children[index + 1];\r\n        if (next) {\r\n            container.insertBefore(focusElement, next);\r\n        }\r\n        else {\r\n            container.append(focusElement);\r\n        }\r\n    }\r\n    _positionFocusElement(target) {\r\n        if (this._a11yD == true || target == undefined) {\r\n            return;\r\n        }\r\n        const bounds = target.globalBounds();\r\n        let width = bounds.right == bounds.left ? target.width() : bounds.right - bounds.left;\r\n        let height = bounds.top == bounds.bottom ? target.height() : bounds.bottom - bounds.top;\r\n        const padding = this._settings.focusPadding !== undefined ? this._settings.focusPadding : 2;\r\n        let x = bounds.left - padding;\r\n        let y = bounds.top - padding;\r\n        if (width < 0) {\r\n            x += width;\r\n            width = Math.abs(width);\r\n        }\r\n        if (height < 0) {\r\n            y += height;\r\n            height = Math.abs(height);\r\n        }\r\n        const focusElement = target.getPrivate(\"focusElement\").dom;\r\n        focusElement.style.top = y + \"px\";\r\n        focusElement.style.left = x + \"px\";\r\n        focusElement.style.width = (width + padding * 2) + \"px\";\r\n        focusElement.style.height = (height + padding * 2) + \"px\";\r\n    }\r\n    _getSpriteByFocusElement(target) {\r\n        let found;\r\n        $array.eachContinue(this._tabindexes, (item, _index) => {\r\n            if (item.getPrivate(\"focusElement\").dom === target) {\r\n                found = item;\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        return found;\r\n    }\r\n    _handleFocus(ev) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        // Get element\r\n        //const focused = this._tabindexes[index];\r\n        const focused = this._getSpriteByFocusElement(ev.target);\r\n        if (!focused) {\r\n            return;\r\n        }\r\n        // Jump over hidden elements\r\n        if (!focused.isVisibleDeep()) {\r\n            this._focusNext(ev.target, this._isShift ? -1 : 1);\r\n            return;\r\n        }\r\n        // Size and position\r\n        this._positionFocusElement(focused);\r\n        //this._decorateFocusElement(focused);\r\n        this._focusedSprite = focused;\r\n        if (focused.events.isEnabled(\"focus\")) {\r\n            focused.events.dispatch(\"focus\", {\r\n                type: \"focus\",\r\n                originalEvent: ev,\r\n                target: focused\r\n            });\r\n        }\r\n        if (focused.getPrivate(\"focusElement\").dom.tabIndex == -1) {\r\n            this._skipNextGroupJump = false;\r\n        }\r\n    }\r\n    _focusNext(el, direction, group) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        const focusableElements = Array.from(document.querySelectorAll([\r\n            'a[href]',\r\n            'area[href]',\r\n            'button:not([disabled])',\r\n            'details',\r\n            'input:not([disabled])',\r\n            'iframe:not([disabled])',\r\n            'select:not([disabled])',\r\n            'textarea:not([disabled])',\r\n            '[contentEditable=\"\"]',\r\n            '[contentEditable=\"true\"]',\r\n            '[contentEditable=\"TRUE\"]',\r\n            '[tabindex]:not([tabindex^=\"-\"])',\r\n            //':not([disabled])'\r\n        ].join(',')));\r\n        let index = focusableElements.indexOf(el) + direction;\r\n        if (index < 0) {\r\n            index = focusableElements.length - 1;\r\n        }\r\n        else if (index >= focusableElements.length) {\r\n            index = 0;\r\n        }\r\n        const targetElement = focusableElements[index];\r\n        if (group && direction == -1) {\r\n            const target = this._getSpriteByFocusElement(targetElement);\r\n            if (target && target.get(\"focusableGroup\") == group) {\r\n                this._focusNext(targetElement, direction);\r\n                return;\r\n            }\r\n        }\r\n        targetElement.focus();\r\n    }\r\n    _handleBlur(ev) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        const focused = this._focusedSprite;\r\n        if (focused && !focused.isDisposed() && focused.events.isEnabled(\"blur\")) {\r\n            focused.events.dispatch(\"blur\", {\r\n                type: \"blur\",\r\n                originalEvent: ev,\r\n                target: focused\r\n            });\r\n        }\r\n        this._focusedSprite = undefined;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateTooltip(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        const text = $utils.stripTags(target._getText());\r\n        let tooltipElement = target.getPrivate(\"tooltipElement\");\r\n        if (target.get(\"role\") == \"tooltip\" && text != \"\") {\r\n            if (!tooltipElement) {\r\n                tooltipElement = this._makeTooltipElement(target);\r\n            }\r\n            if (tooltipElement.innerHTML != text) {\r\n                tooltipElement.innerHTML = text;\r\n            }\r\n            tooltipElement.setAttribute(\"aria-hidden\", target.isVisibleDeep() ? \"false\" : \"true\");\r\n        }\r\n        else if (tooltipElement) {\r\n            tooltipElement.remove();\r\n            target.removePrivate(\"tooltipElement\");\r\n        }\r\n    }\r\n    _makeTooltipElement(target) {\r\n        const container = this._tooltipElementContainer;\r\n        const tooltipElement = document.createElement(\"div\");\r\n        tooltipElement.style.position = \"absolute\";\r\n        tooltipElement.style.width = \"1px\";\r\n        tooltipElement.style.height = \"1px\";\r\n        tooltipElement.style.overflow = \"hidden\";\r\n        tooltipElement.style.clip = \"rect(1px, 1px, 1px, 1px)\";\r\n        $utils.setInteractive(tooltipElement, false);\r\n        this._decorateFocusElement(target, tooltipElement);\r\n        container.append(tooltipElement);\r\n        target.setPrivate(\"tooltipElement\", tooltipElement);\r\n        return tooltipElement;\r\n    }\r\n    _removeTooltipElement(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        const tooltipElement = target.getPrivate(\"tooltipElement\");\r\n        if (tooltipElement) {\r\n            const parent = tooltipElement.parentElement;\r\n            if (parent) {\r\n                parent.removeChild(tooltipElement);\r\n            }\r\n        }\r\n    }\r\n    _invalidateAccessibility(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        this._focusElementDirty = true;\r\n        const focusElement = target.getPrivate(\"focusElement\");\r\n        if (target.get(\"focusable\")) {\r\n            if (focusElement) {\r\n                this._decorateFocusElement(target);\r\n                this._positionFocusElement(target);\r\n            }\r\n            // else {\r\n            // \tthis._renderer._makeFocusElement(0, this);\r\n            // }\r\n        }\r\n        else if (focusElement) {\r\n            this._removeFocusElement(target);\r\n        }\r\n        //this.updateCurrentFocus();\r\n    }\r\n    /**\r\n     * Returns `true` if `target` is currently focused.\r\n     *\r\n     * @param   target  Target\r\n     * @return          Focused?\r\n     */\r\n    focused(target) {\r\n        return this._focusedSprite === target;\r\n    }\r\n    /**\r\n     * Converts document coordinates to coordinates withing root element.\r\n     *\r\n     * @param   point  Document point\r\n     * @return         Root point\r\n     */\r\n    documentPointToRoot(point) {\r\n        const rect = this._getRealSize();\r\n        const size = this._getCalculatedSize(rect);\r\n        const scaleWidth = size.width / rect.width;\r\n        const scaleHeight = size.height / rect.height;\r\n        return {\r\n            x: (point.x - rect.left) * scaleWidth,\r\n            y: (point.y - rect.top) * scaleHeight,\r\n        };\r\n    }\r\n    /**\r\n     * Converts root coordinates to document\r\n     *\r\n     * @param   point  Document point\r\n     * @return         Root point\r\n     */\r\n    rootPointToDocument(point) {\r\n        const rect = this._getRealSize();\r\n        const size = this._getCalculatedSize(rect);\r\n        const scaleWidth = size.width / rect.width;\r\n        const scaleHeight = size.height / rect.height;\r\n        return {\r\n            x: (point.x / scaleWidth) + rect.left,\r\n            y: (point.y / scaleHeight) + rect.top\r\n        };\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    addDisposer(disposer) {\r\n        this._disposers.push(disposer);\r\n        return disposer;\r\n    }\r\n    _updateComputedStyles() {\r\n        const styles = window.getComputedStyle(this.dom);\r\n        let fontHash = \"\";\r\n        $object.each(styles, (key, val) => {\r\n            if ($type.isString(key) && key.match(/^font/)) {\r\n                fontHash += val;\r\n            }\r\n        });\r\n        const changed = fontHash != this._fontHash;\r\n        if (changed) {\r\n            this._fontHash = fontHash;\r\n        }\r\n        return changed;\r\n    }\r\n    _checkComputedStyles() {\r\n        if (this._updateComputedStyles()) {\r\n            this._invalidateLabelBounds(this.container);\r\n        }\r\n    }\r\n    _invalidateLabelBounds(target) {\r\n        if (target instanceof Container) {\r\n            target.children.each((child) => {\r\n                this._invalidateLabelBounds(child);\r\n            });\r\n        }\r\n        else if (target instanceof Text) {\r\n            target.markDirtyBounds();\r\n        }\r\n    }\r\n    /**\r\n     * To all the clever heads out there. Yes, we did not make any attempts to\r\n     * scramble this.\r\n     *\r\n     * This is a part of a tool meant for our users to manage their commercial\r\n     * licenses for removal of amCharts branding from charts.\r\n     *\r\n     * The only legit way to do so is to purchase a commercial license for amCharts:\r\n     * https://www.amcharts.com/online-store/\r\n     *\r\n     * Removing or altering this code, or disabling amCharts branding in any other\r\n     * way is against the license and thus illegal.\r\n     */\r\n    _hasLicense() {\r\n        for (let i = 0; i < registry.licenses.length; i++) {\r\n            if (registry.licenses[i].match(/^AM5C.{5,}/i)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    _licenseApplied() {\r\n        if (this._logo) {\r\n            this._logo.set(\"forceHidden\", true);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    get debugGhostView() {\r\n        return this._renderer.debugGhostView;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    set debugGhostView(value) {\r\n        this._renderer.debugGhostView = value;\r\n    }\r\n    /**\r\n     * Set this to `true` if you need chart to require first a tap onto it before\r\n     * touch gesture related functionality like zoom/pan is turned on.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Touch_related_options} for more info\r\n     * @default false\r\n     * @since 5.2.9\r\n     * @param  value  Needs a tap to activate touch functions\r\n     */\r\n    set tapToActivate(value) {\r\n        this._renderer.tapToActivate = value;\r\n    }\r\n    /**\r\n     * @return Needs a tap to activate touch functions\r\n     */\r\n    get tapToActivate() {\r\n        return this._renderer.tapToActivate;\r\n    }\r\n    /**\r\n     * If `tapToActivate` is set to `true`, this setting will determine number\r\n     * of milliseconds the chart will stay \"active\", before releasing the\r\n     * controls back to the page.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Touch_related_options} for more info\r\n     * @default 3000\r\n     * @since 5.2.9\r\n     * @param  value  Timeout\r\n     */\r\n    set tapToActivateTimeout(value) {\r\n        this._renderer.tapToActivateTimeout = value;\r\n    }\r\n    /**\r\n     * @return Timeout\r\n     */\r\n    get tapToActivateTimeout() {\r\n        return this._renderer.tapToActivateTimeout;\r\n    }\r\n    _makeHTMLElement(target) {\r\n        // Get container\r\n        const container = this._htmlElementContainer;\r\n        // Init\r\n        const htmlElement = document.createElement(\"div\");\r\n        target.setPrivate(\"htmlElement\", htmlElement);\r\n        // Should we put this into a wrapper?\r\n        let needWrapper = false;\r\n        let wrapperTarget;\r\n        target._walkParents((parent) => {\r\n            if (parent.get(\"verticalScrollbar\")) {\r\n                needWrapper = true;\r\n                wrapperTarget = parent;\r\n                return false;\r\n            }\r\n        });\r\n        let htmlElementWrapper;\r\n        if (needWrapper) {\r\n            htmlElementWrapper = document.createElement(\"div\");\r\n            target.setPrivate(\"htmlElementWrapper\", htmlElementWrapper);\r\n            target.setPrivate(\"wrapperContainer\", wrapperTarget);\r\n            htmlElementWrapper.style.position = \"absolute\";\r\n            htmlElementWrapper.style.overflow = \"hidden\";\r\n            htmlElementWrapper.style.boxSizing = \"border-box\";\r\n            htmlElementWrapper.style.top = \"0px\";\r\n            htmlElementWrapper.style.left = \"0px\";\r\n            htmlElementWrapper.style.width = \"100%\";\r\n            htmlElementWrapper.style.height = \"100%\";\r\n            wrapperTarget.events.on(\"boundschanged\", () => {\r\n                this._positionHTMLElement(target);\r\n            });\r\n        }\r\n        //htmlElement.tabIndex = this.tabindex;\r\n        htmlElement.style.position = \"absolute\";\r\n        htmlElement.style.overflow = \"auto\";\r\n        htmlElement.style.boxSizing = \"border-box\";\r\n        $utils.setInteractive(htmlElement, target.get(\"interactive\", false));\r\n        // Translate events\r\n        if (target.events.isEnabled(\"click\")) {\r\n            $utils.setInteractive(htmlElement, true);\r\n            this._disposers.push($utils.addEventListener(htmlElement, \"click\", (ev) => {\r\n                const downEvent = this._renderer.getEvent(ev);\r\n                target.events.dispatch(\"click\", {\r\n                    type: \"click\",\r\n                    originalEvent: downEvent.event,\r\n                    point: downEvent.point,\r\n                    simulated: false,\r\n                    target: target\r\n                });\r\n            }));\r\n        }\r\n        this._positionHTMLElement(target);\r\n        if (needWrapper) {\r\n            htmlElementWrapper.append(htmlElement);\r\n            container.append(htmlElementWrapper);\r\n        }\r\n        else {\r\n            container.append(htmlElement);\r\n        }\r\n        $array.pushOne(this._htmlEnabledContainers, target);\r\n        return htmlElement;\r\n    }\r\n    _positionHTMLElements() {\r\n        $array.each(this._htmlEnabledContainers, (target) => {\r\n            this._positionHTMLElement(target);\r\n        });\r\n    }\r\n    _positionHTMLElement(target) {\r\n        const htmlElementWrapper = target.getPrivate(\"htmlElementWrapper\");\r\n        if (htmlElementWrapper) {\r\n            const wrapperTarget = target.getPrivate(\"wrapperContainer\");\r\n            if (wrapperTarget) {\r\n                const bounds = wrapperTarget.globalBounds();\r\n                htmlElementWrapper.style.clipPath = \"rect(\" + bounds.top + \"px \" + bounds.right + \"px \" + bounds.bottom + \"px \" + bounds.left + \"px)\";\r\n            }\r\n        }\r\n        const htmlElement = target.getPrivate(\"htmlElement\");\r\n        if (htmlElement) {\r\n            // Translate settings\r\n            const visualSettings = [\r\n                \"paddingTop\",\r\n                \"paddingRight\",\r\n                \"paddingBottom\",\r\n                \"paddingLeft\",\r\n                \"minWidth\",\r\n                \"minHeight\",\r\n                \"maxWidth\",\r\n                \"maxHeight\"\r\n            ];\r\n            $array.each(visualSettings, (setting) => {\r\n                const value = target.get(setting);\r\n                if (value) {\r\n                    htmlElement.style[setting] = value + \"px\";\r\n                }\r\n                else {\r\n                    htmlElement.style[setting] = \"\";\r\n                }\r\n            });\r\n            const strtingSettings = [\r\n                \"fontFamily\",\r\n                \"fontSize\",\r\n                \"fontStyle\",\r\n                \"fontWeight\",\r\n                \"fontStyle\",\r\n                \"fontVariant\",\r\n                \"textDecoration\"\r\n            ];\r\n            $array.each(strtingSettings, (setting) => {\r\n                const value = target.get(setting);\r\n                if (value) {\r\n                    if (setting == \"fontSize\" && !$type.isString(value)) {\r\n                        htmlElement.style[setting] = value + \"px\";\r\n                    }\r\n                    else {\r\n                        htmlElement.style[setting] = value + \"\";\r\n                    }\r\n                }\r\n                else {\r\n                    htmlElement.style[setting] = \"\";\r\n                }\r\n            });\r\n            // Init and reset scale / rotation\r\n            const scale = target.compositeScale() || 1;\r\n            const rotation = target.compositeRotation() || 0;\r\n            htmlElement.style.transform = \"\";\r\n            htmlElement.style.transformOrigin = \"\";\r\n            // Deal with opacity\r\n            const opacity = target.compositeOpacity();\r\n            setTimeout(() => {\r\n                htmlElement.style.opacity = opacity + \"\";\r\n            }, 10);\r\n            const visible = target.isVisibleDeep();\r\n            if (visible) {\r\n                htmlElement.style.display = \"block\";\r\n            }\r\n            // Deal with position\r\n            // const bounds = target.globalBounds();\r\n            // htmlElement.style.top = (bounds.top) + \"px\";\r\n            // htmlElement.style.left = (bounds.left) + \"px\";\r\n            let pos = {\r\n                x: target.x() + target.get(\"dx\", 0),\r\n                y: target.y() + target.get(\"dy\", 0)\r\n            };\r\n            if (target.parent) {\r\n                pos = target.parent.toGlobal(pos);\r\n            }\r\n            htmlElement.style.top = pos.y + \"px\";\r\n            htmlElement.style.left = pos.x + \"px\";\r\n            // Use width/height if those are set\r\n            const width = target.get(\"width\");\r\n            const height = target.get(\"height\");\r\n            let w = 0;\r\n            let h = 0;\r\n            if (width) {\r\n                w = target.width();\r\n            }\r\n            if (height) {\r\n                h = target.height();\r\n            }\r\n            if (!width || !height) {\r\n                htmlElement.style.position = \"fixed\";\r\n                htmlElement.style.width = \"\";\r\n                htmlElement.style.height = \"\";\r\n                const bbox = htmlElement.getBoundingClientRect();\r\n                htmlElement.style.position = \"absolute\";\r\n                if (!width)\r\n                    w = bbox.width;\r\n                if (!height)\r\n                    h = bbox.height;\r\n                let lw = w / scale;\r\n                let lh = h / scale;\r\n                let cx = target.get(\"centerX\", 0);\r\n                let cy = target.get(\"centerY\", 0);\r\n                let ll = 0;\r\n                let lr = 0;\r\n                let lt = 0;\r\n                let lb = 0;\r\n                if (cx instanceof Percent) {\r\n                    ll = -cx.value * lw;\r\n                    lr = (1 - cx.value) * lw;\r\n                }\r\n                else {\r\n                    ll = -cx;\r\n                    lr = lw - cx;\r\n                }\r\n                if (cy instanceof Percent) {\r\n                    lt = -cy.value * lh;\r\n                    lb = (1 - cy.value) * lh;\r\n                }\r\n                else {\r\n                    lt = -cy;\r\n                    lb = lh - cy;\r\n                }\r\n                target._localBounds = { left: ll, right: lr, top: lt, bottom: lb };\r\n                let previousBounds = target._adjustedLocalBounds;\r\n                let newBounds = target._display.getAdjustedBounds(target._localBounds);\r\n                target._adjustedLocalBounds = newBounds;\r\n                // compare each value of the bounds\r\n                if (previousBounds.left !== newBounds.left || previousBounds.right !== newBounds.right || previousBounds.top !== newBounds.top || previousBounds.bottom !== newBounds.bottom) {\r\n                    target.markDirtyBounds();\r\n                }\r\n            }\r\n            if (w > 0) {\r\n                htmlElement.style.minWidth = (w) + \"px\";\r\n            }\r\n            if (h > 0) {\r\n                htmlElement.style.minHeight = (h) + \"px\";\r\n            }\r\n            // Hide or show\r\n            if (!visible || opacity == 0) {\r\n                htmlElement.style.display = \"none\";\r\n            }\r\n            // Center position\r\n            const x = target.get(\"centerX\", 0);\r\n            const originX = isPercent(x) ? x.percent + \"%\" : x + \"px\";\r\n            const y = target.get(\"centerY\", 0);\r\n            const originY = isPercent(y) ? y.percent + \"%\" : y + \"px\";\r\n            if (x || y) {\r\n                htmlElement.style.transform = \"translate(-\" + originX + \", -\" + originY + \")\" + htmlElement.style.transform;\r\n            }\r\n            // Deal with scale\r\n            if (scale != 1) {\r\n                htmlElement.style.transform += \"scale(\" + scale + \")\";\r\n            }\r\n            if (rotation != 0) {\r\n                htmlElement.style.transform += \" rotate(\" + rotation + \"deg)\";\r\n            }\r\n            if (htmlElement.style.transform != \"\") {\r\n                htmlElement.style.transformOrigin = originX + \" \" + originY;\r\n                //htmlElement.style.transformOrigin = \"0% 0%\";\r\n            }\r\n        }\r\n    }\r\n    _setHTMLContent(target, html) {\r\n        let htmlElement = target.getPrivate(\"htmlElement\");\r\n        if (!htmlElement) {\r\n            htmlElement = this._makeHTMLElement(target);\r\n            if (!this.autoResize) {\r\n                this.resize();\r\n            }\r\n        }\r\n        if (htmlElement.innerHTML != html) {\r\n            htmlElement.innerHTML = html;\r\n        }\r\n    }\r\n    _removeHTMLContent(target) {\r\n        const htmlElementWrapper = target.getPrivate(\"htmlElementWrapper\");\r\n        const htmlElement = target.getPrivate(\"htmlElement\");\r\n        if (htmlElementWrapper) {\r\n            this._htmlElementContainer.removeChild(htmlElementWrapper);\r\n            target.removePrivate(\"htmlElement\");\r\n            target.removePrivate(\"htmlElementWrapper\");\r\n            target.removePrivate(\"wrapperContainer\");\r\n        }\r\n        else if (htmlElement) {\r\n            this._htmlElementContainer.removeChild(htmlElement);\r\n            target.removePrivate(\"htmlElement\");\r\n            target.removePrivate(\"wrapperContainer\");\r\n        }\r\n        $array.remove(this._htmlEnabledContainers, target);\r\n    }\r\n}\r\n//# sourceMappingURL=Root.js.map","import * as $type from \"../util/Type\";\r\nimport * as $math from \"../util/Math\";\r\nimport * as $utils from \"../util/Utils\";\r\nimport { Rectangle } from \"./Rectangle\";\r\n/**\r\n * Draws a rectangle with rounded corners.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class RoundedRectangle extends Rectangle {\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"cornerRadiusTL\") || this.isDirty(\"cornerRadiusTR\") || this.isDirty(\"cornerRadiusBR\") || this.isDirty(\"cornerRadiusBL\")) {\r\n            this._clear = true;\r\n        }\r\n    }\r\n    _draw() {\r\n        let width = this.width();\r\n        let height = this.height();\r\n        let wSign = width / Math.abs(width);\r\n        let hSign = height / Math.abs(height);\r\n        let x = 0;\r\n        let y = 0;\r\n        const strokeWidth = this.get(\"strokeWidth\", 0);\r\n        if (this.get(\"containStroke\", false)) {\r\n            width -= wSign * strokeWidth;\r\n            height -= hSign * strokeWidth;\r\n            x += wSign * strokeWidth / 2;\r\n            y += hSign * strokeWidth / 2;\r\n        }\r\n        let w = width;\r\n        let h = height;\r\n        if ($type.isNumber(w) && $type.isNumber(h)) {\r\n            let minSide = Math.min(w, h) / 2;\r\n            let crtl = $utils.relativeToValue(this.get(\"cornerRadiusTL\", 8), minSide);\r\n            let crtr = $utils.relativeToValue(this.get(\"cornerRadiusTR\", 8), minSide);\r\n            let crbr = $utils.relativeToValue(this.get(\"cornerRadiusBR\", 8), minSide);\r\n            let crbl = $utils.relativeToValue(this.get(\"cornerRadiusBL\", 8), minSide);\r\n            let maxcr = Math.min(Math.abs(w / 2), Math.abs(h / 2));\r\n            crtl = $math.fitToRange(crtl, 0, maxcr);\r\n            crtr = $math.fitToRange(crtr, 0, maxcr);\r\n            crbr = $math.fitToRange(crbr, 0, maxcr);\r\n            crbl = $math.fitToRange(crbl, 0, maxcr);\r\n            const display = this._display;\r\n            display.moveTo(x + crtl * wSign, y);\r\n            display.lineTo(x + w - crtr * wSign, y);\r\n            if (crtr > 0) {\r\n                display.arcTo(x + w, y, x + w, y + crtr * hSign, crtr);\r\n            }\r\n            display.lineTo(x + w, y + h - crbr * hSign);\r\n            if (crbr > 0) {\r\n                display.arcTo(x + w, y + h, x + w - crbr * wSign, y + h, crbr);\r\n            }\r\n            display.lineTo(x + crbl * wSign, y + h);\r\n            if (crbl > 0) {\r\n                display.arcTo(x, y + h, x, y + h - crbl * hSign, crbl);\r\n            }\r\n            display.lineTo(x, y + crtl * hSign);\r\n            if (crtl > 0) {\r\n                display.arcTo(x, y, x + crtl * wSign, y, crtl);\r\n            }\r\n            display.closePath();\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(RoundedRectangle, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"RoundedRectangle\"\r\n});\r\nObject.defineProperty(RoundedRectangle, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Rectangle.classNames.concat([RoundedRectangle.className])\r\n});\r\n//# sourceMappingURL=RoundedRectangle.js.map","import { List } from \"./List\";\r\n/**\r\n * A [[List]] that holds components data.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/data/} for more info\r\n */\r\nexport class ListData extends List {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * An optional processor for data.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/data/#Pre_processing_data} for more info\r\n         */\r\n        Object.defineProperty(this, \"processor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    incrementRef() { }\r\n    /**\r\n     * @ignore\r\n     */\r\n    decrementRef() { }\r\n    _onPush(newValue) {\r\n        if (this.processor) {\r\n            this.processor.processRow(newValue);\r\n        }\r\n        super._onPush(newValue);\r\n    }\r\n    _onInsertIndex(index, newValue) {\r\n        if (this.processor) {\r\n            this.processor.processRow(newValue);\r\n        }\r\n        super._onInsertIndex(index, newValue);\r\n    }\r\n    _onSetIndex(index, oldValue, newValue) {\r\n        if (this.processor) {\r\n            this.processor.processRow(newValue);\r\n        }\r\n        super._onSetIndex(index, oldValue, newValue);\r\n    }\r\n}\r\n/**\r\n * @deprecated\r\n * @todo remove\r\n */\r\nexport class JsonData {\r\n    constructor(value) {\r\n        Object.defineProperty(this, \"processor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_value\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._value = value;\r\n    }\r\n    incrementRef() { }\r\n    decrementRef() { }\r\n}\r\n//# sourceMappingURL=Data.js.map","import { __awaiter } from \"tslib\";\r\nimport { Settings } from \"../util/Entity\";\r\nimport { Container } from \"./Container\";\r\nimport { ListData } from \"../util/Data\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $object from \"../util/Object\";\r\n/**\r\n * A base element that holds data bit (data item) for any [[Component]].\r\n */\r\nexport class DataItem extends Settings {\r\n    constructor(component, dataContext, settings) {\r\n        super(settings);\r\n        /**\r\n         * A data item's owener [[Component]].\r\n         */\r\n        Object.defineProperty(this, \"component\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A reference to actual item in source data this item is based on.\r\n         */\r\n        Object.defineProperty(this, \"dataContext\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * @todo requires description\r\n         */\r\n        Object.defineProperty(this, \"bullets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A set of \"open\" values.\r\n         */\r\n        Object.defineProperty(this, \"open\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A set of \"close\" values.\r\n         */\r\n        Object.defineProperty(this, \"close\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.dataContext = dataContext;\r\n        this.component = component;\r\n        this._settings.visible = true;\r\n        this._checkDirty();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirty() {\r\n        this.component.markDirtyValues(this);\r\n    }\r\n    _startAnimation() {\r\n        this.component._root._addAnimation(this);\r\n    }\r\n    _animationTime() {\r\n        return this.component._root.animationTime;\r\n    }\r\n    _dispose() {\r\n        if (this.component) {\r\n            this.component.disposeDataItem(this);\r\n        }\r\n        super._dispose();\r\n    }\r\n    /**\r\n     * Shows a data item that's currently hidden.\r\n     */\r\n    show(duration) {\r\n        this.setRaw(\"visible\", true);\r\n        if (this.component) {\r\n            this.component.showDataItem(this, duration);\r\n        }\r\n    }\r\n    /**\r\n     * Hides a data item that's currently visible.\r\n     */\r\n    hide(duration) {\r\n        this.setRaw(\"visible\", false);\r\n        if (this.component) {\r\n            this.component.hideDataItem(this, duration);\r\n        }\r\n    }\r\n    isHidden() {\r\n        return !this.get(\"visible\");\r\n    }\r\n}\r\n/**\r\n * A base class for elements that make use of data.\r\n */\r\nexport class Component extends Container {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_data\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListData()\r\n        });\r\n        Object.defineProperty(this, \"_dataItems\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_mainDataItems\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._dataItems\r\n        });\r\n        Object.defineProperty(this, \"valueFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"fields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [\"id\"]\r\n        });\r\n        Object.defineProperty(this, \"_valueFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_valueFieldsF\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_fields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_fieldsF\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_valuesDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dataChanged\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dataGrouped\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * Indicates if the component has already been initialized.\r\n         */\r\n        Object.defineProperty(this, \"inited\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    /**\r\n     * Component's data.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/data/} for more info\r\n     */\r\n    set data(data) {\r\n        data.incrementRef();\r\n        this._data.decrementRef();\r\n        this._data = data;\r\n    }\r\n    /**\r\n     * @return  Data\r\n     */\r\n    get data() {\r\n        return this._data;\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        this._data.decrementRef();\r\n    }\r\n    _onDataClear() {\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this._data.incrementRef();\r\n        this._updateFields();\r\n        this._disposers.push(this.data.events.onAll((change) => {\r\n            const dataItems = this._mainDataItems;\r\n            this.markDirtyValues();\r\n            this._markDirtyGroup();\r\n            this._dataChanged = true;\r\n            if (change.type === \"clear\") {\r\n                $array.each(dataItems, (dataItem) => {\r\n                    dataItem.dispose();\r\n                });\r\n                dataItems.length = 0;\r\n                this._onDataClear();\r\n            }\r\n            else if (change.type === \"push\") {\r\n                const dataItem = new DataItem(this, change.newValue, this._makeDataItem(change.newValue));\r\n                dataItems.push(dataItem);\r\n                this.processDataItem(dataItem);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                const dataItem = dataItems[change.index];\r\n                const properties = this._makeDataItem(change.newValue);\r\n                if (dataItem.bullets && dataItem.bullets.length == 0) {\r\n                    dataItem.bullets = undefined;\r\n                }\r\n                $object.keys(properties).forEach((key) => {\r\n                    dataItem.animate({\r\n                        key: key,\r\n                        to: properties[key],\r\n                        duration: this.get(\"interpolationDuration\", 0),\r\n                        easing: this.get(\"interpolationEasing\"),\r\n                    });\r\n                });\r\n                dataItem.dataContext = change.newValue;\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                const dataItem = new DataItem(this, change.newValue, this._makeDataItem(change.newValue));\r\n                dataItems.splice(change.index, 0, dataItem);\r\n                this.processDataItem(dataItem);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                const dataItem = dataItems[change.index];\r\n                dataItem.dispose();\r\n                dataItems.splice(change.index, 1);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                const dataItem = dataItems[change.oldIndex];\r\n                dataItems.splice(change.oldIndex, 1);\r\n                dataItems.splice(change.newIndex, 0, dataItem);\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IStreamEvent type\");\r\n            }\r\n            this._afterDataChange();\r\n        }));\r\n    }\r\n    _updateFields() {\r\n        if (this.valueFields) {\r\n            this._valueFields = [];\r\n            this._valueFieldsF = {};\r\n            $array.each(this.valueFields, (key) => {\r\n                const field = this.get((key + \"Field\"));\r\n                if (field) {\r\n                    this._valueFields.push(key);\r\n                    this._valueFieldsF[key] = { fieldKey: key + \"Field\", workingKey: key + \"Working\" };\r\n                }\r\n            });\r\n        }\r\n        if (this.fields) {\r\n            this._fields = [];\r\n            this._fieldsF = {};\r\n            $array.each(this.fields, (key) => {\r\n                const field = this.get((key + \"Field\"));\r\n                if (field) {\r\n                    this._fields.push(key);\r\n                    this._fieldsF[key] = key + \"Field\";\r\n                }\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * A list of component's data items.\r\n     *\r\n     * @return  Data items\r\n     */\r\n    get dataItems() {\r\n        return this._dataItems;\r\n    }\r\n    processDataItem(_dataItem) { }\r\n    _makeDataItem(data) {\r\n        //const output: this[\"_dataItemSettings\"] = {};\r\n        const output = {}; // temporary to solve error\r\n        if (this._valueFields) {\r\n            $array.each(this._valueFields, (key) => {\r\n                const field = this.get((this._valueFieldsF[key].fieldKey));\r\n                output[key] = data[field];\r\n                output[this._valueFieldsF[key].workingKey] = output[key];\r\n            });\r\n        }\r\n        if (this._fields) {\r\n            $array.each(this._fields, (key) => {\r\n                const field = this.get((this._fieldsF[key]));\r\n                output[key] = data[field];\r\n            });\r\n        }\r\n        return output;\r\n    }\r\n    /**\r\n     * Creates a new data item and processes it.\r\n     *\r\n     * @param   data         Data item settings\r\n     * @param   dataContext  Data context\r\n     * @return               New data item\r\n     */\r\n    makeDataItem(data, dataContext) {\r\n        let dataItem = new DataItem(this, dataContext, data);\r\n        this.processDataItem(dataItem);\r\n        return dataItem;\r\n    }\r\n    /**\r\n     * Adds new explicit data item to series.\r\n     *\r\n     * @param   data         Data item settings\r\n     * @param   dataContext  Data context\r\n     * @return               New data item\r\n     */\r\n    pushDataItem(data, dataContext) {\r\n        const dataItem = this.makeDataItem(data, dataContext);\r\n        this._mainDataItems.push(dataItem);\r\n        return dataItem;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    disposeDataItem(_dataItem) {\r\n    }\r\n    /**\r\n     * Shows component's data item.\r\n     *\r\n     * @param   dataItem   Data item\r\n     * @param   _duration  Animation duration in milliseconds\r\n     * @return             Promise\r\n     */\r\n    showDataItem(dataItem, _duration) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            dataItem.set(\"visible\", true);\r\n        });\r\n    }\r\n    /**\r\n     * Hides component's data item.\r\n     *\r\n     * @param   dataItem   Data item\r\n     * @param   _duration  Animation duration in milliseconds\r\n     * @return             Promise\r\n     */\r\n    hideDataItem(dataItem, _duration) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            dataItem.set(\"visible\", false);\r\n        });\r\n    }\r\n    _clearDirty() {\r\n        super._clearDirty();\r\n        this._valuesDirty = false;\r\n    }\r\n    _afterDataChange() {\r\n    }\r\n    _afterChanged() {\r\n        super._afterChanged();\r\n        if (this._dataChanged) {\r\n            const type = \"datavalidated\";\r\n            if (this.events.isEnabled(type)) {\r\n                this.events.dispatch(type, { type: type, target: this });\r\n            }\r\n            this._dataChanged = false;\r\n        }\r\n        if (this._valuesDirty) {\r\n            const type = \"valueschanged\";\r\n            if (this.events.isEnabled(type)) {\r\n                this.events.dispatch(type, { type: type, target: this });\r\n            }\r\n        }\r\n        this.inited = true;\r\n    }\r\n    /**\r\n     * Forces a repaint of the element which relies on data.\r\n     *\r\n     * @since 5.0.21\r\n     */\r\n    markDirtyValues(_dataItem) {\r\n        this.markDirty();\r\n        this._valuesDirty = true;\r\n    }\r\n    _markDirtyGroup() {\r\n        this._dataGrouped = false;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtySize() {\r\n        this._sizeDirty = true;\r\n        this.markDirty();\r\n    }\r\n    /**\r\n     * Looks up and returns a data item by its ID.\r\n     *\r\n     * @param   id  ID\r\n     * @return      Data item\r\n     */\r\n    getDataItemById(id) {\r\n        return $array.find(this.dataItems, (dataItem) => {\r\n            return dataItem.get(\"id\") == id;\r\n        });\r\n    }\r\n}\r\nObject.defineProperty(Component, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Component\"\r\n});\r\nObject.defineProperty(Component, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Container.classNames.concat([Component.className])\r\n});\r\n//# sourceMappingURL=Component.js.map","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $type from \"./Type\";\r\nimport * as $utils from \"./Utils\";\r\n/**\r\n * Returns a `Promise` which can be used to execute code after number of\r\n * milliseconds.\r\n *\r\n * @param   ms  Sleep duration in ms\r\n * @return      Promise\r\n */\r\nexport function sleep(ms) {\r\n    return new Promise((resolve, _reject) => {\r\n        setTimeout(resolve, ms);\r\n    });\r\n}\r\n/**\r\n * Maps time period names to their numeric representations in milliseconds.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport let timeUnitDurations = {\r\n    millisecond: 1,\r\n    second: 1000,\r\n    minute: 60000,\r\n    hour: 3600000,\r\n    day: 86400000,\r\n    week: 604800000,\r\n    month: 365.242 / 12 * 86400000,\r\n    year: 31536000000\r\n};\r\n/**\r\n * Returns the next time unit that goes after source `unit`.\r\n *\r\n * E.g. \"hour\" is the next unit after \"minute\", etc.\r\n *\r\n * @ignore Exclude from docs\r\n * @param unit  Source time unit\r\n * @return Next time unit\r\n */\r\nexport function getNextUnit(unit) {\r\n    switch (unit) {\r\n        case \"year\":\r\n            return;\r\n        case \"month\":\r\n            return \"year\";\r\n        case \"week\":\r\n            return \"month\";\r\n        case \"day\":\r\n            return \"month\"; // not a mistake\r\n        case \"hour\":\r\n            return \"day\";\r\n        case \"minute\":\r\n            return \"hour\";\r\n        case \"second\":\r\n            return \"minute\";\r\n        case \"millisecond\":\r\n            return \"second\";\r\n    }\r\n}\r\n/**\r\n * Returns number of milliseconds in the `count` of time `unit`.\r\n *\r\n * Available units: \"millisecond\", \"second\", \"minute\", \"hour\", \"day\", \"week\",\r\n * \"month\", and \"year\".\r\n *\r\n * @param unit   Time unit\r\n * @param count  Number of units\r\n * @return Milliseconds\r\n */\r\nexport function getDuration(unit, count) {\r\n    if (count == null) {\r\n        count = 1;\r\n    }\r\n    return timeUnitDurations[unit] * count;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getIntervalDuration(interval) {\r\n    if (interval) {\r\n        return timeUnitDurations[interval.timeUnit] * interval.count;\r\n    }\r\n    return 0;\r\n}\r\nexport function getDateIntervalDuration(interval, date, firstDateOfWeek, utc, timezone) {\r\n    const unit = interval.timeUnit;\r\n    const count = interval.count;\r\n    if (unit == \"hour\" || unit == \"minute\" || unit == \"second\" || unit == \"millisecond\") {\r\n        return timeUnitDurations[interval.timeUnit] * interval.count;\r\n    }\r\n    else {\r\n        const firstTime = round(new Date(date.getTime()), unit, count, firstDateOfWeek, utc, undefined, timezone).getTime();\r\n        let lastTime = firstTime + count * getDuration(unit) * 1.05;\r\n        lastTime = round(new Date(lastTime), unit, 1, firstDateOfWeek, utc, undefined, timezone).getTime();\r\n        return lastTime - firstTime;\r\n    }\r\n}\r\n/**\r\n * Returns current `Date` object.\r\n *\r\n * @return Current date\r\n */\r\nexport function now() {\r\n    return new Date();\r\n}\r\n/**\r\n * Returns current timestamp.\r\n *\r\n * @return Current timestamp\r\n */\r\nexport function getTime() {\r\n    return now().getTime();\r\n}\r\n/**\r\n * Returns a copy of the `Date` object.\r\n *\r\n * @param date  Source date\r\n * @return Copy\r\n */\r\nexport function copy(date) {\r\n    return new Date(date.getTime()); // todo: check if this is ok. new Date(date) used to strip milliseconds on FF in v3\r\n}\r\n/**\r\n * Checks if the `unit` part of two `Date` objects do not match. Two dates\r\n * represent a \"range\" of time, rather the same time date.\r\n *\r\n * @param timeOne  timestamp\r\n * @param timeTwo  timestamp\r\n * @param unit     Time unit to check\r\n * @return Range?\r\n */\r\nexport function checkChange(timeOne, timeTwo, unit, utc, timezone) {\r\n    // quick\r\n    if ((timeTwo - timeOne) > getDuration(unit, 1.2)) {\r\n        return true;\r\n    }\r\n    let dateOne = new Date(timeOne);\r\n    let dateTwo = new Date(timeTwo);\r\n    if (timezone) {\r\n        dateOne = timezone.convertLocal(dateOne);\r\n        dateTwo = timezone.convertLocal(dateTwo);\r\n    }\r\n    let timeZoneOffset1 = 0;\r\n    let timeZoneOffset2 = 0;\r\n    if (!utc && unit != \"millisecond\") {\r\n        timeZoneOffset1 = dateOne.getTimezoneOffset();\r\n        dateOne.setUTCMinutes(dateOne.getUTCMinutes() - timeZoneOffset1);\r\n        timeZoneOffset2 = dateTwo.getTimezoneOffset();\r\n        dateTwo.setUTCMinutes(dateTwo.getUTCMinutes() - timeZoneOffset2);\r\n    }\r\n    let changed = false;\r\n    switch (unit) {\r\n        case \"year\":\r\n            if (dateOne.getUTCFullYear() != dateTwo.getUTCFullYear()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"month\":\r\n            if (dateOne.getUTCFullYear() != dateTwo.getUTCFullYear()) {\r\n                changed = true;\r\n            }\r\n            else if (dateOne.getUTCMonth() != dateTwo.getUTCMonth()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"day\":\r\n            if (dateOne.getUTCMonth() != dateTwo.getUTCMonth()) {\r\n                changed = true;\r\n            }\r\n            else if (dateOne.getUTCDate() != dateTwo.getUTCDate()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"hour\":\r\n            if (dateOne.getUTCHours() != dateTwo.getUTCHours()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"minute\":\r\n            if (dateOne.getUTCMinutes() != dateTwo.getUTCMinutes()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"second\":\r\n            if (dateOne.getUTCSeconds() != dateTwo.getUTCSeconds()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"millisecond\":\r\n            if (dateOne.getTime() != dateTwo.getTime()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n    }\r\n    if (changed) {\r\n        return changed;\r\n    }\r\n    let nextUnit = getNextUnit(unit);\r\n    if (nextUnit) {\r\n        return checkChange(timeOne, timeTwo, nextUnit, utc, timezone);\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Adds `count` of time `unit` to the source date. Returns a modified `Date` object.\r\n *\r\n * @param date   Source date\r\n * @param unit   Time unit\r\n * @param count  Number of units to add\r\n * @return Modified date\r\n */\r\nexport function add(date, unit, count, utc, timezone) {\r\n    let timeZoneOffset = 0;\r\n    if (!utc && unit != \"millisecond\") {\r\n        timeZoneOffset = date.getTimezoneOffset();\r\n        if (timezone) {\r\n            timeZoneOffset -= timezone.offsetUTC(date);\r\n        }\r\n        date.setUTCMinutes(date.getUTCMinutes() - timeZoneOffset);\r\n    }\r\n    switch (unit) {\r\n        case \"day\":\r\n            let day = date.getUTCDate();\r\n            date.setUTCDate(day + count);\r\n            break;\r\n        case \"second\":\r\n            let seconds = date.getUTCSeconds();\r\n            date.setUTCSeconds(seconds + count);\r\n            break;\r\n        case \"millisecond\":\r\n            let milliseconds = date.getUTCMilliseconds();\r\n            date.setUTCMilliseconds(milliseconds + count);\r\n            break;\r\n        case \"hour\":\r\n            let hours = date.getUTCHours();\r\n            date.setUTCHours(hours + count);\r\n            break;\r\n        case \"minute\":\r\n            let minutes = date.getUTCMinutes();\r\n            date.setUTCMinutes(minutes + count);\r\n            break;\r\n        case \"year\":\r\n            let year = date.getUTCFullYear();\r\n            date.setUTCFullYear(year + count);\r\n            break;\r\n        case \"month\":\r\n            const endDays = date.getUTCDate();\r\n            const startDays = new Date(date.getUTCFullYear(), date.getUTCMonth(), 0).getUTCDate();\r\n            let month = date.getUTCMonth();\r\n            if (endDays > startDays) {\r\n                date.setUTCMonth(month + count, startDays);\r\n            }\r\n            else {\r\n                date.setUTCMonth(month + count);\r\n            }\r\n            break;\r\n        case \"week\":\r\n            let wday = date.getUTCDate();\r\n            date.setUTCDate(wday + count * 7);\r\n            break;\r\n    }\r\n    if (!utc && unit != \"millisecond\") {\r\n        date.setUTCMinutes(date.getUTCMinutes() + timeZoneOffset);\r\n        if (unit == \"day\" || unit == \"week\" || unit == \"month\" || unit == \"year\") {\r\n            let newTimeZoneOffset = date.getTimezoneOffset();\r\n            if (timezone) {\r\n                newTimeZoneOffset += timezone.offsetUTC(date);\r\n            }\r\n            if (newTimeZoneOffset != timeZoneOffset) {\r\n                let diff = newTimeZoneOffset - timeZoneOffset;\r\n                date.setUTCMinutes(date.getUTCMinutes() + diff);\r\n                // solves issues if new time falls back to old time zone\r\n                if (date.getTimezoneOffset() != newTimeZoneOffset) {\r\n                    date.setUTCMinutes(date.getUTCMinutes() - diff);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return date;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function roun(time, unit, count, root, firstTime) {\r\n    let firstDate;\r\n    if (firstTime != null) {\r\n        firstDate = new Date(firstTime);\r\n    }\r\n    return round(new Date(time), unit, count, root.locale.firstDayOfWeek, root.utc, firstDate, root.timezone).getTime();\r\n}\r\n/**\r\n * \"Rounds\" the date to specific time unit.\r\n *\r\n * @param date             Source date\r\n * @param unit             Time unit\r\n * @param count            Number of units to round to\r\n * @param firstDateOfWeek  First day of week\r\n * @param utc              Use UTC timezone\r\n * @param firstDate        First date to round to\r\n * @param roundMinutes     Minutes to round to (some timezones use non-whole hour)\r\n * @param timezone         Use specific named timezone when rounding\r\n * @return New date\r\n */\r\nexport function round(date, unit, count, firstDateOfWeek, utc, firstDate, timezone) {\r\n    if (!timezone || utc) {\r\n        let timeZoneOffset = 0;\r\n        if (!utc && unit != \"millisecond\") {\r\n            timeZoneOffset = date.getTimezoneOffset();\r\n            date.setUTCMinutes(date.getUTCMinutes() - timeZoneOffset);\r\n        }\r\n        switch (unit) {\r\n            case \"day\":\r\n                let day = date.getUTCDate();\r\n                if (count > 1) {\r\n                    //\tday = Math.floor(day / count) * count;\r\n                    if (firstDate) {\r\n                        firstDate = round(firstDate, \"day\", 1);\r\n                        let difference = date.getTime() - firstDate.getTime();\r\n                        let unitCount = Math.floor(difference / getDuration(\"day\") / count);\r\n                        let duration = getDuration(\"day\", unitCount * count);\r\n                        date.setTime(firstDate.getTime() + duration - timeZoneOffset * getDuration(\"minute\"));\r\n                    }\r\n                }\r\n                else {\r\n                    date.setUTCDate(day);\r\n                }\r\n                date.setUTCHours(0, 0, 0, 0);\r\n                break;\r\n            case \"second\":\r\n                let seconds = date.getUTCSeconds();\r\n                if (count > 1) {\r\n                    seconds = Math.floor(seconds / count) * count;\r\n                }\r\n                date.setUTCSeconds(seconds, 0);\r\n                break;\r\n            case \"millisecond\":\r\n                if (count == 1) {\r\n                    return date; // much better for perf!\r\n                }\r\n                let milliseconds = date.getUTCMilliseconds();\r\n                milliseconds = Math.floor(milliseconds / count) * count;\r\n                date.setUTCMilliseconds(milliseconds);\r\n                break;\r\n            case \"hour\":\r\n                let hours = date.getUTCHours();\r\n                if (count > 1) {\r\n                    hours = Math.floor(hours / count) * count;\r\n                }\r\n                date.setUTCHours(hours, 0, 0, 0);\r\n                break;\r\n            case \"minute\":\r\n                let minutes = date.getUTCMinutes();\r\n                if (count > 1) {\r\n                    minutes = Math.floor(minutes / count) * count;\r\n                }\r\n                date.setUTCMinutes(minutes, 0, 0);\r\n                break;\r\n            case \"month\":\r\n                let month = date.getUTCMonth();\r\n                if (count > 1) {\r\n                    // only do this if count is 2, 3, 4, and 6\r\n                    if (count == 2 || count == 3 || count == 4 || count == 6) {\r\n                        month = Math.floor(month / count) * count;\r\n                    }\r\n                }\r\n                date.setUTCMonth(month, 1);\r\n                date.setUTCHours(0, 0, 0, 0);\r\n                break;\r\n            case \"year\":\r\n                let year = date.getUTCFullYear();\r\n                if (count > 1) {\r\n                    year = Math.floor(year / count) * count;\r\n                }\r\n                date.setUTCFullYear(year, 0, 1);\r\n                date.setUTCHours(0, 0, 0, 0);\r\n                break;\r\n            case \"week\":\r\n                if (count > 1) {\r\n                    if (firstDate) {\r\n                        firstDate = round(firstDate, \"week\", 1);\r\n                        let difference = date.getTime() - firstDate.getTime();\r\n                        let unitCount = Math.floor(difference / getDuration(\"week\") / count);\r\n                        let duration = getDuration(\"week\", unitCount * count);\r\n                        date.setTime(firstDate.getTime() + duration - timeZoneOffset * getDuration(\"minute\"));\r\n                    }\r\n                }\r\n                let wday = date.getUTCDate();\r\n                let weekDay = date.getUTCDay();\r\n                if (!$type.isNumber(firstDateOfWeek)) {\r\n                    firstDateOfWeek = 1;\r\n                }\r\n                if (weekDay >= firstDateOfWeek) {\r\n                    wday = wday - weekDay + firstDateOfWeek;\r\n                }\r\n                else {\r\n                    wday = wday - (7 + weekDay) + firstDateOfWeek;\r\n                }\r\n                date.setUTCDate(wday);\r\n                date.setUTCHours(0, 0, 0, 0);\r\n                break;\r\n        }\r\n        if (!utc && unit != \"millisecond\") {\r\n            date.setUTCMinutes(date.getUTCMinutes() + timeZoneOffset);\r\n            if (unit == \"day\" || unit == \"week\" || unit == \"month\" || unit == \"year\") {\r\n                let newTimeZoneOffset = date.getTimezoneOffset();\r\n                if (newTimeZoneOffset != timeZoneOffset) {\r\n                    let diff = newTimeZoneOffset - timeZoneOffset;\r\n                    date.setUTCMinutes(date.getUTCMinutes() + diff);\r\n                }\r\n            }\r\n        }\r\n        return date;\r\n    }\r\n    else {\r\n        if (isNaN(date.getTime())) {\r\n            return date;\r\n        }\r\n        let initialTime = date.getTime();\r\n        let tzoffset = timezone.offsetUTC(date);\r\n        let timeZoneOffset = date.getTimezoneOffset();\r\n        let parsedDate = timezone.parseDate(date);\r\n        let year = parsedDate.year;\r\n        let month = parsedDate.month;\r\n        let day = parsedDate.day;\r\n        let hour = parsedDate.hour;\r\n        let minute = parsedDate.minute;\r\n        let second = parsedDate.second;\r\n        let millisecond = parsedDate.millisecond;\r\n        let weekday = parsedDate.weekday;\r\n        let offsetDif = tzoffset - timeZoneOffset;\r\n        switch (unit) {\r\n            case \"day\":\r\n                if (count > 1 && firstDate) {\r\n                    firstDate = round(firstDate, \"day\", 1, firstDateOfWeek, utc, undefined, timezone);\r\n                    let difference = date.getTime() - firstDate.getTime();\r\n                    let unitCount = Math.floor(difference / getDuration(\"day\") / count);\r\n                    let duration = getDuration(\"day\", unitCount * count);\r\n                    date.setTime(firstDate.getTime() + duration);\r\n                    parsedDate = timezone.parseDate(date);\r\n                    year = parsedDate.year;\r\n                    month = parsedDate.month;\r\n                    day = parsedDate.day;\r\n                }\r\n                hour = 0;\r\n                minute = offsetDif;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n            case \"second\":\r\n                minute += offsetDif;\r\n                if (count > 1) {\r\n                    second = Math.floor(second / count) * count;\r\n                }\r\n                millisecond = 0;\r\n                break;\r\n            case \"millisecond\":\r\n                minute += offsetDif;\r\n                if (count > 1) {\r\n                    millisecond = Math.floor(millisecond / count) * count;\r\n                }\r\n                break;\r\n            case \"hour\":\r\n                if (count > 1) {\r\n                    hour = Math.floor(hour / count) * count;\r\n                }\r\n                minute = offsetDif;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n            case \"minute\":\r\n                if (count > 1) {\r\n                    minute = Math.floor(minute / count) * count;\r\n                }\r\n                minute += offsetDif;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n            case \"month\":\r\n                if (count > 1) {\r\n                    month = Math.floor(month / count) * count;\r\n                }\r\n                day = 1;\r\n                hour = 0;\r\n                minute = offsetDif;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n            case \"year\":\r\n                if (count > 1) {\r\n                    year = Math.floor(year / count) * count;\r\n                }\r\n                month = 0;\r\n                day = 1;\r\n                hour = 0;\r\n                minute = offsetDif;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n            case \"week\":\r\n                if (!$type.isNumber(firstDateOfWeek)) {\r\n                    firstDateOfWeek = 1;\r\n                }\r\n                if (weekday >= firstDateOfWeek) {\r\n                    day = day - weekday + firstDateOfWeek;\r\n                }\r\n                else {\r\n                    day = day - (7 + weekday) + firstDateOfWeek;\r\n                }\r\n                hour = 0;\r\n                minute = offsetDif;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n        }\r\n        date = new Date(year, month, day, hour, minute, second, millisecond);\r\n        // fix to solve #101989\r\n        const newTime = date.getTime();\r\n        let hDuration = 3600000;\r\n        if (unit == \"hour\") {\r\n            hDuration = 3600000 * count;\r\n        }\r\n        if (newTime + hDuration <= initialTime) {\r\n            if (unit == \"hour\" || unit == \"minute\" || unit == \"second\" || unit == \"millisecond\") {\r\n                date = new Date(newTime + hDuration);\r\n            }\r\n        }\r\n        // end of fix\r\n        let newTimeZoneOffset = date.getTimezoneOffset();\r\n        let newTzoffset = timezone.offsetUTC(date);\r\n        let newDiff = newTzoffset - newTimeZoneOffset;\r\n        if (newDiff != offsetDif) {\r\n            date.setTime(date.getTime() + (newDiff - offsetDif) * 60000);\r\n        }\r\n        return date;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function chooseInterval(index, duration, gridCount, intervals) {\r\n    let gridInterval = intervals[index];\r\n    let intervalDuration = getIntervalDuration(gridInterval);\r\n    let lastIndex = intervals.length - 1;\r\n    if (index >= lastIndex) {\r\n        return Object.assign({}, intervals[lastIndex]);\r\n    }\r\n    let count = Math.ceil(duration / intervalDuration);\r\n    if (duration < intervalDuration && index > 0) {\r\n        return Object.assign({}, intervals[index - 1]);\r\n    }\r\n    if (count <= gridCount) {\r\n        return Object.assign({}, intervals[index]);\r\n    }\r\n    else {\r\n        if (index + 1 < intervals.length) {\r\n            return chooseInterval(index + 1, duration, gridCount, intervals);\r\n        }\r\n        else {\r\n            return Object.assign({}, intervals[index]);\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getUnitValue(date, unit) {\r\n    switch (unit) {\r\n        case \"day\":\r\n            return date.getDate();\r\n        case \"second\":\r\n            return date.getSeconds();\r\n        case \"millisecond\":\r\n            return date.getMilliseconds();\r\n        case \"hour\":\r\n            return date.getHours();\r\n        case \"minute\":\r\n            return date.getMinutes();\r\n        case \"month\":\r\n            return date.getMonth();\r\n        case \"year\":\r\n            return date.getFullYear();\r\n        case \"week\":\r\n            return $utils.getWeek(date);\r\n    }\r\n}\r\n//# sourceMappingURL=Time.js.map","import { __awaiter } from \"tslib\";\r\nimport { Component } from \"../../core/render/Component\";\r\nimport { List } from \"../../core/util/List\";\r\nimport { Color } from \"../../core/util/Color\";\r\nimport { percentInterpolate } from \"../../core/util/Animation\";\r\nimport { Percent } from \"../../core/util/Percent\";\r\nimport { p100 } from \"../../core/util/Percent\";\r\nimport { Container } from \"../../core/render/Container\";\r\nimport { Label } from \"../../core/render/Label\";\r\n//import { Animations } from \"../../core/util/Animation\";\r\nimport * as $array from \"../../core/util/Array\";\r\nimport * as $type from \"../../core/util/Type\";\r\nimport * as $time from \"../../core/util/Time\";\r\n/**\r\n * A base class for all series.\r\n */\r\nexport class Series extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_aggregatesCalculated\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_selectionAggregatesCalculated\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dataProcessed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_psi\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_pei\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_baseSeriesDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * A chart series belongs to.\r\n         */\r\n        Object.defineProperty(this, \"chart\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * List of bullets to use for the series.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/bullets/} for more info\r\n         */\r\n        Object.defineProperty(this, \"bullets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new List()\r\n        });\r\n        /**\r\n         * A [[Container]] series' bullets are stored in.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"bulletsContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Container.new(this._root, { width: p100, height: p100, position: \"absolute\" })\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this.valueFields.push(\"value\", \"customValue\");\r\n        super._afterNew();\r\n        this.setPrivate(\"customData\", {});\r\n        this._disposers.push(this.bullets.events.onAll((change) => {\r\n            if (change.type === \"clear\") {\r\n                this._handleBullets(this.dataItems);\r\n            }\r\n            else if (change.type === \"push\") {\r\n                this._handleBullets(this.dataItems);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                this._handleBullets(this.dataItems);\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                this._handleBullets(this.dataItems);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                this._handleBullets(this.dataItems);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                this._handleBullets(this.dataItems);\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IListEvent type\");\r\n            }\r\n        }));\r\n    }\r\n    _dispose() {\r\n        this.bulletsContainer.dispose(); // can be in a different parent\r\n        super._dispose();\r\n    }\r\n    startIndex() {\r\n        let len = this.dataItems.length;\r\n        return Math.min(this.getPrivate(\"startIndex\", 0), len);\r\n    }\r\n    endIndex() {\r\n        let len = this.dataItems.length;\r\n        return Math.max(0, Math.min(this.getPrivate(\"endIndex\", len), len));\r\n    }\r\n    _handleBullets(dataItems) {\r\n        $array.each(dataItems, (dataItem) => {\r\n            const bullets = dataItem.bullets;\r\n            if (bullets) {\r\n                $array.each(bullets, (bullet) => {\r\n                    bullet.dispose();\r\n                });\r\n                dataItem.bullets = undefined;\r\n            }\r\n        });\r\n        this.markDirtyValues();\r\n    }\r\n    _makeBullets(dataItem) {\r\n        if (this._shouldMakeBullet(dataItem)) {\r\n            dataItem.bullets = [];\r\n            this.bullets.each((bulletFunction) => {\r\n                this._makeBullet(dataItem, bulletFunction);\r\n            });\r\n        }\r\n    }\r\n    _shouldMakeBullet(_dataItem) {\r\n        return true;\r\n    }\r\n    _makeBullet(dataItem, bulletFunction, index) {\r\n        const bullet = bulletFunction(this._root, this, dataItem);\r\n        if (bullet) {\r\n            bullet._index = index;\r\n            this._makeBulletReal(dataItem, bullet);\r\n        }\r\n        return bullet;\r\n    }\r\n    _makeBulletReal(dataItem, bullet) {\r\n        let sprite = bullet.get(\"sprite\");\r\n        if (sprite) {\r\n            sprite._setDataItem(dataItem);\r\n            sprite.setRaw(\"position\", \"absolute\");\r\n            this.bulletsContainer.children.push(sprite);\r\n        }\r\n        bullet.series = this;\r\n        dataItem.bullets.push(bullet);\r\n    }\r\n    /**\r\n     * Adds bullet directly to a data item.\r\n     *\r\n     * Please note: method accepts [[Bullet]] instance as a paramter, not a\r\n     * reference to a function.\r\n     *\r\n     * You should add Bullet instance, not a method like you do it on series.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/bullets/#Adding_directly_to_data_item} for more info\r\n     * @since 5.6.0\r\n     *\r\n     * @param  dataItem  Target data item\r\n     * @param  bullet    Bullet instance\r\n     */\r\n    addBullet(dataItem, bullet) {\r\n        if (!dataItem.bullets) {\r\n            dataItem.bullets = [];\r\n        }\r\n        if (bullet) {\r\n            this._makeBulletReal(dataItem, bullet);\r\n        }\r\n    }\r\n    _clearDirty() {\r\n        super._clearDirty();\r\n        this._aggregatesCalculated = false;\r\n        this._baseSeriesDirty = false;\r\n        this._selectionAggregatesCalculated = false;\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        let startIndex = this.startIndex();\r\n        let endIndex = this.endIndex();\r\n        if (this.isDirty(\"name\")) {\r\n            this.updateLegendValue();\r\n        }\r\n        if (this.isDirty(\"heatRules\")) {\r\n            this._valuesDirty = true;\r\n        }\r\n        if (this.isPrivateDirty(\"baseValueSeries\")) {\r\n            const baseValueSeries = this.getPrivate(\"baseValueSeries\");\r\n            if (baseValueSeries) {\r\n                this._disposers.push(baseValueSeries.onPrivate(\"startIndex\", () => {\r\n                    this._baseSeriesDirty = true;\r\n                    this.markDirtyValues();\r\n                }));\r\n            }\r\n        }\r\n        const calculateAggregates = this.get(\"calculateAggregates\");\r\n        if (calculateAggregates) {\r\n            if (this._valuesDirty && !this._dataProcessed) {\r\n                if (!this._aggregatesCalculated) {\r\n                    this._calculateAggregates(0, this.dataItems.length);\r\n                    this._aggregatesCalculated = true;\r\n                    if (startIndex != 0) {\r\n                        this._psi = undefined;\r\n                    }\r\n                }\r\n            }\r\n            if ((this._psi != startIndex || this._pei != endIndex || this.isPrivateDirty(\"adjustedStartIndex\")) && !this._selectionAggregatesCalculated) {\r\n                if (startIndex === 0 && endIndex === this.dataItems.length && this._aggregatesCalculated) {\r\n                    // void\r\n                }\r\n                else {\r\n                    this._calculateAggregates(startIndex, endIndex);\r\n                }\r\n                this._selectionAggregatesCalculated = true;\r\n            }\r\n        }\r\n        if (this.isDirty(\"tooltip\")) {\r\n            let tooltip = this.get(\"tooltip\");\r\n            if (tooltip) {\r\n                tooltip.hide(0);\r\n                tooltip.set(\"tooltipTarget\", this);\r\n            }\r\n        }\r\n        if (this.isDirty(\"fill\") || this.isDirty(\"stroke\")) {\r\n            let markerRectangle;\r\n            const legendDataItem = this.get(\"legendDataItem\");\r\n            if (legendDataItem) {\r\n                markerRectangle = legendDataItem.get(\"markerRectangle\");\r\n                if (markerRectangle) {\r\n                    if (this.isVisible()) {\r\n                        if (this.isDirty(\"stroke\")) {\r\n                            let stroke = this.get(\"stroke\");\r\n                            markerRectangle.set(\"stroke\", stroke);\r\n                        }\r\n                        if (this.isDirty(\"fill\")) {\r\n                            let fill = this.get(\"fill\");\r\n                            markerRectangle.set(\"fill\", fill);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this.updateLegendMarker(undefined);\r\n        }\r\n        if (this.bullets.length > 0) {\r\n            let startIndex = this.startIndex();\r\n            let endIndex = this.endIndex();\r\n            if (endIndex < this.dataItems.length) {\r\n                endIndex++;\r\n            }\r\n            for (let i = startIndex; i < endIndex; i++) {\r\n                let dataItem = this.dataItems[i];\r\n                if (!dataItem.bullets) {\r\n                    this._makeBullets(dataItem);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handleRemoved() {\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _adjustStartIndex(index) {\r\n        return index;\r\n    }\r\n    _calculateAggregates(startIndex, endIndex) {\r\n        let fields = this._valueFields;\r\n        if (!fields) {\r\n            throw new Error(\"No value fields are set for the series.\");\r\n        }\r\n        const sum = {};\r\n        const absSum = {};\r\n        const count = {};\r\n        const low = {};\r\n        const high = {};\r\n        const open = {};\r\n        const close = {};\r\n        const average = {};\r\n        const previous = {};\r\n        $array.each(fields, (key) => {\r\n            sum[key] = 0;\r\n            absSum[key] = 0;\r\n            count[key] = 0;\r\n        });\r\n        const len = this.dataItems.length;\r\n        $array.each(fields, (key) => {\r\n            let change = key + \"Change\";\r\n            let changePercent = key + \"ChangePercent\";\r\n            let changePrevious = key + \"ChangePrevious\";\r\n            let changePreviousPercent = key + \"ChangePreviousPercent\";\r\n            let changeSelection = key + \"ChangeSelection\";\r\n            let changeSelectionPercent = key + \"ChangeSelectionPercent\";\r\n            let openKey = \"valueY\";\r\n            if (key == \"valueX\" || key == \"openValueX\" || key == \"lowValueX\" || key == \"highValueX\") {\r\n                openKey = \"valueX\";\r\n            }\r\n            const baseValueSeries = this.getPrivate(\"baseValueSeries\");\r\n            const adjustedStartIndex = this.getPrivate(\"adjustedStartIndex\", startIndex);\r\n            // Function to calculate changes for a single data item\r\n            const calculateChangesForItem = (dataItem, key) => {\r\n                if (dataItem) {\r\n                    let value = dataItem.get(key);\r\n                    if (value != null) {\r\n                        dataItem.setRaw((changePrevious), value - previous[openKey]);\r\n                        dataItem.setRaw((changePreviousPercent), (value - previous[openKey]) / previous[openKey] * 100);\r\n                        dataItem.setRaw((changeSelection), value - open[openKey]);\r\n                        dataItem.setRaw((changeSelectionPercent), (value - open[openKey]) / open[openKey] * 100);\r\n                        previous[key] = value;\r\n                    }\r\n                }\r\n            };\r\n            for (let i = adjustedStartIndex; i < endIndex; i++) {\r\n                const dataItem = this.dataItems[i];\r\n                if (dataItem) {\r\n                    let value = dataItem.get(key);\r\n                    if (value != null) {\r\n                        count[key]++;\r\n                        sum[key] += value;\r\n                        absSum[key] += Math.abs(value);\r\n                        average[key] = sum[key] / count[key];\r\n                        if (low[key] > value || low[key] == null) {\r\n                            low[key] = value;\r\n                        }\r\n                        if (high[key] < value || high[key] == null) {\r\n                            high[key] = value;\r\n                        }\r\n                        close[key] = value;\r\n                        if (open[key] == null) {\r\n                            open[key] = value;\r\n                            previous[key] = value;\r\n                            if (baseValueSeries) {\r\n                                open[openKey] = baseValueSeries._getBase(openKey);\r\n                            }\r\n                        }\r\n                        if (startIndex === 0) {\r\n                            dataItem.setRaw((change), value - open[openKey]);\r\n                            dataItem.setRaw((changePercent), (value - open[openKey]) / open[openKey] * 100);\r\n                        }\r\n                        calculateChangesForItem(dataItem, key);\r\n                    }\r\n                }\r\n            }\r\n            // Calculate for endIndex item\r\n            if (endIndex < len) {\r\n                calculateChangesForItem(this.dataItems[endIndex], key);\r\n            }\r\n            // Calculate for endIndex+1 item if available\r\n            if (endIndex + 1 < len) {\r\n                calculateChangesForItem(this.dataItems[endIndex + 1], key);\r\n            }\r\n            if (startIndex > 0) {\r\n                startIndex--;\r\n            }\r\n            delete previous[key];\r\n            for (let i = startIndex; i < adjustedStartIndex; i++) {\r\n                const dataItem = this.dataItems[i];\r\n                if (dataItem) {\r\n                    let value = dataItem.get(key);\r\n                    if (previous[key] == null) {\r\n                        previous[key] = value;\r\n                    }\r\n                    if (value != null) {\r\n                        dataItem.setRaw((changePrevious), value - previous[openKey]);\r\n                        dataItem.setRaw((changePreviousPercent), (value - previous[openKey]) / previous[openKey] * 100);\r\n                        dataItem.setRaw((changeSelection), value - open[openKey]);\r\n                        dataItem.setRaw((changeSelectionPercent), (value - open[openKey]) / open[openKey] * 100);\r\n                        previous[key] = value;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        $array.each(fields, (key) => {\r\n            this.setPrivate((key + \"AverageSelection\"), average[key]);\r\n            this.setPrivate((key + \"CountSelection\"), count[key]);\r\n            this.setPrivate((key + \"SumSelection\"), sum[key]);\r\n            this.setPrivate((key + \"AbsoluteSumSelection\"), absSum[key]);\r\n            this.setPrivate((key + \"LowSelection\"), low[key]);\r\n            this.setPrivate((key + \"HighSelection\"), high[key]);\r\n            this.setPrivate((key + \"OpenSelection\"), open[key]);\r\n            this.setPrivate((key + \"CloseSelection\"), close[key]);\r\n        });\r\n        if (startIndex === 0 && endIndex === len) {\r\n            $array.each(fields, (key) => {\r\n                this.setPrivate((key + \"Average\"), average[key]);\r\n                this.setPrivate((key + \"Count\"), count[key]);\r\n                this.setPrivate((key + \"Sum\"), sum[key]);\r\n                this.setPrivate((key + \"AbsoluteSum\"), absSum[key]);\r\n                this.setPrivate((key + \"Low\"), low[key]);\r\n                this.setPrivate((key + \"High\"), high[key]);\r\n                this.setPrivate((key + \"Open\"), open[key]);\r\n                this.setPrivate((key + \"Close\"), close[key]);\r\n            });\r\n        }\r\n    }\r\n    _updateChildren() {\r\n        super._updateChildren();\r\n        this._psi = this.startIndex();\r\n        this._pei = this.endIndex();\r\n        if (this.isDirty(\"visible\")) {\r\n            this.bulletsContainer.set(\"visible\", this.get(\"visible\"));\r\n        }\r\n        // Apply heat rules\r\n        const rules = this.get(\"heatRules\");\r\n        if (this._valuesDirty && rules && rules.length > 0) {\r\n            $array.each(rules, (rule) => {\r\n                const minValue = rule.minValue || this.getPrivate((rule.dataField + \"Low\")) || 0;\r\n                const maxValue = rule.maxValue || this.getPrivate((rule.dataField + \"High\")) || 0;\r\n                $array.each(rule.target._entities, (target) => {\r\n                    const value = target.dataItem.get(rule.dataField);\r\n                    if (!$type.isNumber(value)) {\r\n                        if (rule.neutral) {\r\n                            target.set(rule.key, rule.neutral);\r\n                        }\r\n                        const states = target.states;\r\n                        if (states) {\r\n                            const defaultState = states.lookup(\"default\");\r\n                            if (defaultState && rule.neutral) {\r\n                                defaultState.set(rule.key, rule.neutral);\r\n                            }\r\n                        }\r\n                        if (!rule.customFunction) {\r\n                            return;\r\n                        }\r\n                    }\r\n                    if (rule.customFunction) {\r\n                        rule.customFunction.call(this, target, minValue, maxValue, value);\r\n                    }\r\n                    else {\r\n                        let percent;\r\n                        if (rule.logarithmic) {\r\n                            percent = (Math.log(value) * Math.LOG10E - Math.log(minValue) * Math.LOG10E) / ((Math.log(maxValue) * Math.LOG10E - Math.log(minValue) * Math.LOG10E));\r\n                        }\r\n                        else {\r\n                            percent = (value - minValue) / (maxValue - minValue);\r\n                        }\r\n                        if ($type.isNumber(value) && (!$type.isNumber(percent) || Math.abs(percent) == Infinity)) {\r\n                            percent = 0.5;\r\n                        }\r\n                        // fixes problems if all values are the same\r\n                        let propertyValue;\r\n                        if ($type.isNumber(rule.min)) {\r\n                            propertyValue = rule.min + (rule.max - rule.min) * percent;\r\n                        }\r\n                        else if (rule.min instanceof Color) {\r\n                            propertyValue = Color.interpolate(percent, rule.min, rule.max);\r\n                        }\r\n                        else if (rule.min instanceof Percent) {\r\n                            propertyValue = percentInterpolate(percent, rule.min, rule.max);\r\n                        }\r\n                        target.set(rule.key, propertyValue);\r\n                        const states = target.states;\r\n                        if (states) {\r\n                            const defaultState = states.lookup(\"default\");\r\n                            if (defaultState) {\r\n                                defaultState.set(rule.key, propertyValue);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        if (this.get(\"visible\")) {\r\n            let count = this.dataItems.length;\r\n            let startIndex = this.startIndex();\r\n            let endIndex = this.endIndex();\r\n            if (endIndex < count) {\r\n                endIndex++;\r\n            }\r\n            if (startIndex > 0) {\r\n                startIndex--;\r\n            }\r\n            for (let i = 0; i < startIndex; i++) {\r\n                this._hideBullets(this.dataItems[i]);\r\n            }\r\n            for (let i = startIndex; i < endIndex; i++) {\r\n                this._positionBullets(this.dataItems[i]);\r\n            }\r\n            for (let i = endIndex; i < count; i++) {\r\n                this._hideBullets(this.dataItems[i]);\r\n            }\r\n        }\r\n    }\r\n    _positionBullets(dataItem) {\r\n        if (dataItem.bullets) {\r\n            $array.each(dataItem.bullets, (bullet) => {\r\n                this._positionBullet(bullet);\r\n                const sprite = bullet.get(\"sprite\");\r\n                if (bullet.get(\"dynamic\")) {\r\n                    if (sprite) {\r\n                        sprite._markDirtyKey(\"fill\");\r\n                        sprite.markDirtySize();\r\n                    }\r\n                    if (sprite instanceof Container) {\r\n                        sprite.walkChildren((child) => {\r\n                            child._markDirtyKey(\"fill\");\r\n                            child.markDirtySize();\r\n                            if (child instanceof Label) {\r\n                                child.text.markDirtyText();\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                if (sprite instanceof Label && sprite.get(\"populateText\")) {\r\n                    sprite.text.markDirtyText();\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _hideBullets(dataItem) {\r\n        if (dataItem.bullets) {\r\n            $array.each(dataItem.bullets, (bullet) => {\r\n                let sprite = bullet.get(\"sprite\");\r\n                if (sprite) {\r\n                    sprite.setPrivate(\"visible\", false);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _positionBullet(_bullet) {\r\n    }\r\n    _placeBulletsContainer(chart) {\r\n        chart.bulletsContainer.children.moveValue(this.bulletsContainer);\r\n    }\r\n    _removeBulletsContainer() {\r\n        const bulletsContainer = this.bulletsContainer;\r\n        if (bulletsContainer.parent) {\r\n            bulletsContainer.parent.children.removeValue(bulletsContainer);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    disposeDataItem(dataItem) {\r\n        //super.disposeDataItem(dataItem); // does nothing\r\n        const bullets = dataItem.bullets;\r\n        if (bullets) {\r\n            $array.each(bullets, (bullet) => {\r\n                bullet.dispose();\r\n            });\r\n            dataItem.bullets = undefined;\r\n        }\r\n    }\r\n    _getItemReaderLabel() {\r\n        return \"\";\r\n    }\r\n    /**\r\n     * Shows series's data item.\r\n     *\r\n     * @param   dataItem  Data item\r\n     * @param   duration  Animation duration in milliseconds\r\n     * @return            Promise\r\n     */\r\n    showDataItem(dataItem, duration) {\r\n        const _super = Object.create(null, {\r\n            showDataItem: { get: () => super.showDataItem }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const promises = [_super.showDataItem.call(this, dataItem, duration)];\r\n            const bullets = dataItem.bullets;\r\n            if (bullets) {\r\n                $array.each(bullets, (bullet) => {\r\n                    const sprite = bullet.get(\"sprite\");\r\n                    if (sprite) {\r\n                        promises.push(sprite.show(duration));\r\n                    }\r\n                });\r\n            }\r\n            yield Promise.all(promises);\r\n        });\r\n    }\r\n    /**\r\n     * Hides series's data item.\r\n     *\r\n     * @param   dataItem  Data item\r\n     * @param   duration  Animation duration in milliseconds\r\n     * @return            Promise\r\n     */\r\n    hideDataItem(dataItem, duration) {\r\n        const _super = Object.create(null, {\r\n            hideDataItem: { get: () => super.hideDataItem }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const promises = [_super.hideDataItem.call(this, dataItem, duration)];\r\n            const bullets = dataItem.bullets;\r\n            if (bullets) {\r\n                $array.each(bullets, (bullet) => {\r\n                    const sprite = bullet.get(\"sprite\");\r\n                    if (sprite) {\r\n                        promises.push(sprite.hide(duration));\r\n                    }\r\n                });\r\n            }\r\n            yield Promise.all(promises);\r\n        });\r\n    }\r\n    _sequencedShowHide(show, duration) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.get(\"sequencedInterpolation\")) {\r\n                if (!$type.isNumber(duration)) {\r\n                    duration = this.get(\"interpolationDuration\", 0);\r\n                }\r\n                if (duration > 0) {\r\n                    const startIndex = this.startIndex();\r\n                    const endIndex = this.endIndex();\r\n                    yield Promise.all($array.map(this.dataItems, (dataItem, i) => __awaiter(this, void 0, void 0, function* () {\r\n                        let realDuration = duration || 0;\r\n                        if (i < startIndex - 10 || i > endIndex + 10) {\r\n                            realDuration = 0;\r\n                        }\r\n                        //let delay = this.get(\"sequencedDelay\", 0) * i + realDuration * (i - startIndex) / (endIndex - startIndex);\r\n                        let delay = this.get(\"sequencedDelay\", 0) + realDuration / (endIndex - startIndex);\r\n                        yield $time.sleep(delay * (i - startIndex));\r\n                        if (show) {\r\n                            yield this.showDataItem(dataItem, realDuration);\r\n                        }\r\n                        else {\r\n                            yield this.hideDataItem(dataItem, realDuration);\r\n                        }\r\n                    })));\r\n                }\r\n                else {\r\n                    yield Promise.all($array.map(this.dataItems, (dataItem) => {\r\n                        if (show) {\r\n                            return this.showDataItem(dataItem, 0);\r\n                        }\r\n                        else {\r\n                            return this.hideDataItem(dataItem, 0);\r\n                        }\r\n                    }));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateLegendValue(dataItem) {\r\n        if (dataItem) {\r\n            const legendDataItem = dataItem.get(\"legendDataItem\");\r\n            if (legendDataItem) {\r\n                const valueLabel = legendDataItem.get(\"valueLabel\");\r\n                if (valueLabel) {\r\n                    const text = valueLabel.text;\r\n                    let txt = \"\";\r\n                    valueLabel._setDataItem(dataItem);\r\n                    txt = this.get(\"legendValueText\", text.get(\"text\", \"\"));\r\n                    valueLabel.set(\"text\", txt);\r\n                    text.markDirtyText();\r\n                }\r\n                const label = legendDataItem.get(\"label\");\r\n                if (label) {\r\n                    const text = label.text;\r\n                    let txt = \"\";\r\n                    label._setDataItem(dataItem);\r\n                    txt = this.get(\"legendLabelText\", text.get(\"text\", \"\"));\r\n                    label.set(\"text\", txt);\r\n                    text.markDirtyText();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateLegendMarker(_dataItem) {\r\n    }\r\n    _onHide() {\r\n        super._onHide();\r\n        const tooltip = this.getTooltip();\r\n        if (tooltip) {\r\n            tooltip.hide();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    hoverDataItem(_dataItem) { }\r\n    /**\r\n     * @ignore\r\n     */\r\n    unhoverDataItem(_dataItem) { }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _getBase(key) {\r\n        const dataItem = this.dataItems[this.startIndex()];\r\n        if (dataItem) {\r\n            return dataItem.get(key);\r\n        }\r\n        return 0;\r\n    }\r\n}\r\nObject.defineProperty(Series, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Series\"\r\n});\r\nObject.defineProperty(Series, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Component.classNames.concat([Series.className])\r\n});\r\n//# sourceMappingURL=Series.js.map","/** @ignore */ /** */\r\nimport * as $math from \"./Math\";\r\n/**\r\n * @ignore\r\n */\r\nexport function segmentedLine(display, segments) {\r\n    for (let s = 0, len = segments.length; s < len; s++) {\r\n        const groups = segments[s];\r\n        if (groups.length > 0) {\r\n            let firstGroup = groups[0];\r\n            if (firstGroup.length > 0) {\r\n                let firstPoint = firstGroup[0];\r\n                display.moveTo(firstPoint.x, firstPoint.y);\r\n                for (let g = 0, len = groups.length; g < len; g++) {\r\n                    line(display, groups[g]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function line(display, points) {\r\n    for (let p = 0, len = points.length; p < len; p++) {\r\n        const point = points[p];\r\n        display.lineTo(point.x, point.y);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function moveTo(display, point) {\r\n    display.moveTo(point.x, point.y);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function clear(display) {\r\n    display.clear();\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function smoothedSegmentedline(display, segments, tensionX, tensionY) {\r\n    for (let s = 0, len = segments.length; s < len; s++) {\r\n        const groups = segments[s];\r\n        if (groups.length > 0) {\r\n            let firstGroup = groups[0];\r\n            if (firstGroup.length > 0) {\r\n                let firstPoint = firstGroup[0];\r\n                display.moveTo(firstPoint.x, firstPoint.y);\r\n                for (let g = 0, len = groups.length; g < len; g++) {\r\n                    const points = groups[g];\r\n                    if (points.length > 0) {\r\n                        display.lineTo(points[0].x, points[0].y);\r\n                    }\r\n                    smoothedLine(display, points, tensionX, tensionY);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function smoothedLine(display, points, tensionX, tensionY) {\r\n    for (let i = points.length - 1; i > 0; i--) {\r\n        let p0 = points[i];\r\n        let p1 = points[i - 1];\r\n        if (Math.abs(p0.x - p1.x) < 0.1 && Math.abs(p0.y - p1.y) < 0.1) {\r\n            points.splice(i - 1, 1);\r\n        }\r\n    }\r\n    if (points.length < 3 || (tensionX >= 1 && tensionY >= 1)) {\r\n        line(display, points);\r\n        return;\r\n    }\r\n    tensionX = 1 - tensionX + 0.00001;\r\n    tensionY = 1 - tensionY + 0.00001;\r\n    let first = points[0];\r\n    let last = points[points.length - 1];\r\n    let closed = false;\r\n    if ($math.round(first.x, 3) == $math.round(last.x) && $math.round(first.y) == $math.round(last.y)) {\r\n        closed = true;\r\n    }\r\n    // Can't moveTo here, as it wont be possible to have fill then.\r\n    let path = \"\";\r\n    for (let i = 0, len = points.length - 1; i < len; i++) {\r\n        let p0 = points[i - 1];\r\n        let p1 = points[i];\r\n        let p2 = points[i + 1];\r\n        let p3 = points[i + 2];\r\n        if (i === 0) {\r\n            if (closed) {\r\n                p0 = points[len - 2];\r\n            }\r\n            else {\r\n                p0 = points[0];\r\n            }\r\n        }\r\n        else if (i == len - 1) {\r\n            if (closed) {\r\n                p3 = points[1];\r\n            }\r\n            else {\r\n                p3 = p2;\r\n            }\r\n        }\r\n        let controlPointA = $math.getCubicControlPointA(p0, p1, p2, tensionX, tensionY);\r\n        let controlPointB = $math.getCubicControlPointB(p1, p2, p3, tensionX, tensionY);\r\n        display.bezierCurveTo(controlPointA.x, controlPointA.y, controlPointB.x, controlPointB.y, p2.x, p2.y);\r\n    }\r\n    return path;\r\n}\r\n//# sourceMappingURL=Draw.js.map","import { Graphics } from \"./Graphics\";\r\nimport * as $draw from \"../util/Draw\";\r\n/**\r\n * Draws a line.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nexport class Line extends Graphics {\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"points\") || this.isDirty(\"segments\") || this._sizeDirty || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\")) {\r\n            this._clear = true;\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this._clear) {\r\n            const points = this.get(\"points\");\r\n            const segments = this.get(\"segments\");\r\n            if (points && points.length > 0) {\r\n                let point = points[0];\r\n                this._display.moveTo(point.x, point.y);\r\n                $draw.segmentedLine(this._display, [[points]]);\r\n            }\r\n            else if (segments) {\r\n                $draw.segmentedLine(this._display, segments);\r\n            }\r\n            else if (!this.get(\"draw\")) {\r\n                let w = this.width();\r\n                let h = this.height();\r\n                this._display.moveTo(0, 0);\r\n                this._display.lineTo(w, h);\r\n            }\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Line, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Line\"\r\n});\r\nObject.defineProperty(Line, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Graphics.classNames.concat([Line.className])\r\n});\r\n//# sourceMappingURL=Line.js.map","import { Container } from \"../../core/render/Container\";\r\nimport { p100 } from \"../../core/util/Percent\";\r\n/**\r\n * A base class for all charts.\r\n */\r\nexport class Chart extends Container {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * A [[Container]] chart places its elements in.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"chartContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Container.new(this._root, { width: p100, height: p100, interactiveChildren: false }))\r\n        });\r\n        /**\r\n         * A [[Container]] chart places its bullets in.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"bulletsContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Container.new(this._root, { interactiveChildren: false, isMeasured: false, position: \"absolute\", width: p100, height: p100 })\r\n        });\r\n    }\r\n}\r\nObject.defineProperty(Chart, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Chart\"\r\n});\r\nObject.defineProperty(Chart, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Container.classNames.concat([Chart.className])\r\n});\r\n//# sourceMappingURL=Chart.js.map","import { Chart } from \"./Chart\";\r\nimport { Container } from \"../../core/render/Container\";\r\nimport { ListAutoDispose } from \"../../core/util/List\";\r\nimport { p100 } from \"../../core/util/Percent\";\r\nimport * as $array from \"../../core/util/Array\";\r\n/**\r\n * A base class for all series-based charts.\r\n */\r\nexport class SerialChart extends Chart {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * A [[Container]] where chart will store all series.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"seriesContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Container.new(this._root, { width: p100, height: p100, isMeasured: false })\r\n        });\r\n        /**\r\n         * A list of chart's series.\r\n         */\r\n        Object.defineProperty(this, \"series\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListAutoDispose()\r\n        });\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this._disposers.push(this.series);\r\n        const children = this.seriesContainer.children;\r\n        this._disposers.push(this.series.events.onAll((change) => {\r\n            if (change.type === \"clear\") {\r\n                $array.each(change.oldValues, (series) => {\r\n                    this._removeSeries(series);\r\n                });\r\n                const colors = this.get(\"colors\");\r\n                if (colors) {\r\n                    colors.reset();\r\n                }\r\n                const patterns = this.get(\"patterns\");\r\n                if (patterns) {\r\n                    patterns.reset();\r\n                }\r\n            }\r\n            else if (change.type === \"push\") {\r\n                children.moveValue(change.newValue);\r\n                this._processSeries(change.newValue);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                children.setIndex(change.index, change.newValue);\r\n                this._processSeries(change.newValue);\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                children.insertIndex(change.index, change.newValue);\r\n                this._processSeries(change.newValue);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                this._removeSeries(change.oldValue);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                children.moveValue(change.value, change.newIndex);\r\n                this._processSeries(change.value);\r\n            }\r\n            else if (change.type === \"swap\") {\r\n                const a = change.a;\r\n                const b = change.b;\r\n                const aIndex = this.series.indexOf(a);\r\n                const bIndex = this.series.indexOf(b);\r\n                children.moveValue(a, bIndex);\r\n                children.moveValue(b, aIndex);\r\n                this.series.each((series) => {\r\n                    this._processSeries(series);\r\n                    series.markDirtyValues();\r\n                });\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IListEvent type\");\r\n            }\r\n        }));\r\n    }\r\n    _processSeries(series) {\r\n        series.chart = this;\r\n        series._placeBulletsContainer(this);\r\n    }\r\n    _removeSeries(series) {\r\n        series._handleRemoved();\r\n        if (!series.isDisposed()) {\r\n            this.seriesContainer.children.removeValue(series);\r\n            series._removeBulletsContainer();\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(SerialChart, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"SerialChart\"\r\n});\r\nObject.defineProperty(SerialChart, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Chart.classNames.concat([SerialChart.className])\r\n});\r\n//# sourceMappingURL=SerialChart.js.map","import { Line } from \"./Line\";\r\n/**\r\n * Draws a tick element (mostly used on axes).\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n */\r\nexport class Tick extends Line {\r\n}\r\nObject.defineProperty(Tick, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Tick\"\r\n});\r\nObject.defineProperty(Tick, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Line.classNames.concat([Tick.className])\r\n});\r\n//# sourceMappingURL=Tick.js.map","import { Entity } from \"./Entity\";\r\nimport { Color } from \"./Color\";\r\n/**\r\n * An object which holds list of colors and can generate new ones.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Color_sets} for more info\r\n */\r\nexport class ColorSet extends Entity {\r\n    //protected _currentPass: number = 0;\r\n    _afterNew() {\r\n        // Applying themes because color set will not have parent\r\n        super._afterNewApplyThemes();\r\n        this._dirty[\"colors\"] = false;\r\n    }\r\n    _beforeChanged() {\r\n        if (this.isDirty(\"colors\")) {\r\n            this.reset();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    generateColors() {\r\n        this.setPrivate(\"currentPass\", this.getPrivate(\"currentPass\", 0) + 1);\r\n        const pass = this.getPrivate(\"currentPass\");\r\n        const colors = this.get(\"colors\", [this.get(\"baseColor\", Color.fromHex(0xff0000))]);\r\n        if (!this.getPrivate(\"numColors\")) {\r\n            this.setPrivate(\"numColors\", colors.length);\r\n        }\r\n        //const len = colors.length;\r\n        const len = this.getPrivate(\"numColors\");\r\n        //const start = len - this.getPrivate(\"numColors\")!;\r\n        const start = 0;\r\n        const passOptions = this.get(\"passOptions\");\r\n        const reuse = this.get(\"reuse\");\r\n        for (let i = start; i < len; i++) {\r\n            if (reuse) {\r\n                colors.push(colors[i]);\r\n            }\r\n            else {\r\n                const hsl = colors[i].toHSL();\r\n                let h = hsl.h + (passOptions.hue || 0) * pass;\r\n                while (h > 1)\r\n                    h -= 1;\r\n                let s = hsl.s + (passOptions.saturation || 0) * pass;\r\n                //if (s > 1) s -= Math.floor(s);\r\n                if (s > 1)\r\n                    s = 1;\r\n                if (s < 0)\r\n                    s = 0;\r\n                let l = hsl.l + (passOptions.lightness || 0) * pass;\r\n                //if (l > 1) l -= Math.floor(l);\r\n                while (l > 1)\r\n                    l -= 1;\r\n                colors.push(Color.fromHSL(h, s, l));\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Returns a [[Color]] at specific index.\r\n     *\r\n     * If there's no color at this index, a new color is generated.\r\n     *\r\n     * @param   index  Index\r\n     * @return         Color\r\n     */\r\n    getIndex(index) {\r\n        const colors = this.get(\"colors\", []);\r\n        const saturation = this.get(\"saturation\");\r\n        if (index >= colors.length) {\r\n            this.generateColors();\r\n            return this.getIndex(index);\r\n        }\r\n        return saturation != null ? Color.saturate(colors[index], saturation) : colors[index];\r\n    }\r\n    /**\r\n     * Returns next [[Color]] in the list.\r\n     *\r\n     * If the list is out of colors, new ones are generated dynamically.\r\n     */\r\n    next() {\r\n        let currentStep = this.getPrivate(\"currentStep\", this.get(\"startIndex\", 0));\r\n        this.setPrivate(\"currentStep\", currentStep + this.get(\"step\", 1));\r\n        return this.getIndex(currentStep);\r\n    }\r\n    /**\r\n     * Resets counter to the start of the list, so the next call for `next()` will\r\n     * return the first color.\r\n     */\r\n    reset() {\r\n        this.setPrivate(\"currentStep\", this.get(\"startIndex\", 0));\r\n        this.setPrivate(\"currentPass\", 0);\r\n    }\r\n}\r\nObject.defineProperty(ColorSet, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"ColorSet\"\r\n});\r\nObject.defineProperty(ColorSet, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Entity.classNames.concat([ColorSet.className])\r\n});\r\n//# sourceMappingURL=ColorSet.js.map","import { Theme } from \"../core/Theme\";\r\n/**\r\n * @ignore\r\n */\r\nexport class AnimatedTheme extends Theme {\r\n    setupDefaultRules() {\r\n        super.setupDefaultRules();\r\n        this.rule(\"Component\").setAll({\r\n            interpolationDuration: 600\r\n        });\r\n        this.rule(\"Hierarchy\").set(\"animationDuration\", 600);\r\n        this.rule(\"Scrollbar\").set(\"animationDuration\", 600);\r\n        this.rule(\"Tooltip\").set(\"animationDuration\", 300);\r\n        this.rule(\"MapChart\").set(\"animationDuration\", 1000);\r\n        this.rule(\"MapChart\").set(\"wheelDuration\", 300);\r\n        this.rule(\"Entity\").setAll({\r\n            stateAnimationDuration: 600\r\n        });\r\n        this.rule(\"Sprite\").states.create(\"default\", { stateAnimationDuration: 600 });\r\n        this.rule(\"Tooltip\", [\"axis\"]).setAll({\r\n            animationDuration: 200\r\n        });\r\n        this.rule(\"WordCloud\").set(\"animationDuration\", 500);\r\n        this.rule(\"Polygon\").set(\"animationDuration\", 600);\r\n        this.rule(\"ArcDiagram\").set(\"animationDuration\", 600);\r\n    }\r\n}\r\n//# sourceMappingURL=AnimatedTheme.js.map"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","SuppressedError","Percent","constructor","percent","Object","defineProperty","this","enumerable","configurable","writable","_value","toString","interpolate","min","max","normalize","Math","p100","p50","isPercent","isNaN","Number","toNumber","isNumber","converted","isString","match","newValue","replace","toDate","isDate","Date","num","repeat","string","amount","Array","join","call","getType","isObject","PLACEHOLDER","PLACEHOLDER2","indexOf","array","length","i","map","fn","output","each","eachReverse","eachContinue","remove","element","found","index","splice","removeFirst","move","toIndex","removeIndex","push","pushOne","copy","insertIndex","findIndex","matches","find","keepIf","keep","keys","object","assign","f","forEach","key","hasKey","hasOwnProperty","DisposerClass","_disposed","isDisposed","dispose","_dispose","Disposer","ArrayDisposer","super","arguments","$array.each","_disposers","x","MultiDisposer","disposers","CounterDisposer","increment","_counter","ready","document","readyState","listener","removeEventListener","addEventListener","dom","type","options","onZoom","window","_ev","supports","cap","getPointerId","event","pointerId","getRendererEvent","isTouchEvent","ev","Touch","PointerEvent","pointerType","MouseEvent","setStyle","property","style","getEventTarget","composedPath","path","target","isLocalEvent","a","b","cursor","parentNode","host","contains","root","setInteractive","interactive","pointerEvents","getEventKey","undefined","keyCode","getSafeResolution","test","navigator","vendor","relativeToValue","full","$type.isNumber","decimalPlaces","number","padString","len","char","trim","text","trimLeft","trimRight","cleanFormat","format","stripTags","escapeForRgex","getYearDay","date","utc","start","getFullYear","diff","getTime","getTimezoneOffset","floor","getWeek","_utc","d","UTC","getMonth","getDate","day","getUTCDay","setUTCDate","getUTCDate","firstDay","getUTCFullYear","ceil","getWeekYear","getMonthWeek","firstWeek","currentWeek","get12Hours","hours","base","getTimeZone","long","savings","timezone","d1","toLocaleString","timeZone","timeZoneName","substr","wotz","wtz","targetDate","utcDate","capitalizeFirst","charAt","toUpperCase","slice","hslToRgb","color","r","g","h","s","l","hue2rgb","p","q","t","round","rgbToHsl","getLightnessStep","isLight","mergeTags","tags1","tags2","filter","self","sameBounds","left","right","top","bottom","string2hex","parseInt","input","Color","fromAny","hex","_hex","toCSS","alpha","toCSSHex","$utils.padString","toHSL","$utils.rgbToHsl","fromHSL","rgb","$utils.hslToRgb","fromRGB","fromHex","fromString","fromCSS","val","rgba2hex","$type.isString","Error","alternative","lightAlternative","darkAlternative","light","dark","$utils.alternativeColor","from","to","mode","range","lighten","$utils.lighten","brighten","$utils.brighten","saturate","saturation","hsl","$utils.saturate","EventDispatcher","_listeners","_killed","_disabled","_iterating","_enabled","disposer","hasListeners","hasListenersByType","$array.any","killed","enable","disable","enableType","disableType","Infinity","_removeListener","_removeExistingListener","once","callback","context","_eachListener","info","isEnabled","removeType","has","$array.findIndex","_shouldDispatch","count","dispatch","_debounceDelay","_debounceTimeout","clearTimeout","setTimeout","_on","shouldClone","debounceDelay","onAll","_type","on","onDebounced","off","copyFrom","source","waitForAnimations","animations","promises","$object.each","_","animation","waitForStop","all","defaultInterpolate","percentInterpolate","colorInterpolate","AnimationState","checkBounds","List","initial","_values","values","removeValue","$array.indexOf","hasIndex","getIndex","_onPush","events","_onInsertIndex","_onSetIndex","oldValue","_onSwap","_onRemoveIndex","_onMoveIndex","oldIndex","newIndex","_onClear","oldValues","setIndex","$array.insertIndex","swap","value_a","value_b","$array.removeIndex","moveValue","unshift","pushAll","pop","shift","setAll","newArray","old","clear","Symbol","iterator","$array.eachReverse","ListAutoDispose","currentAutoDispose","autoDispose","ListTemplate","template","make","Children","container","_container","_events","change","_onRemoved","_onInserted","child","_setParent","childrenDisplay","_childrenDisplay","addChild","_display","addChildAt","removeChild","markDirtyBounds","markDirty","PI","RADIANS","DEGREES","precision","pow","fitToRange","sin","angle","cos","normalizeAngle","getArcBounds","cx","cy","startAngle","endAngle","radius","minX","MAX_VALUE","minY","maxX","maxY","bpoints","getArcPoint","fromAngle","toAngle","pt","y","arc","mergeBounds","bounds","bound","linear","cubic","out","ease","State","entity","settings","_entity","_settings","_userSettings","get","fallback","setRaw","set","$object.keys","_eachSetting","seen","defaultState","states","lookup","applyAnimate","duration","stateAnimationDuration","easing","stateAnimationEasing","$ease.cubic","animate","States","name","_states","create","state","newState","_applyState","_applyStateAnimated","registry","compare","compareArray","leftLength","rightLength","order","compareNumber","Adapters","add","callbacks","_callbacks","_markDirtyKey","$array.removeFirst","fold","Animation","loops","startingTime","_animation","_from","_to","_duration","_easing","_loops","_interpolate","getInterpolate","_oldTime","playing","_playing","stopped","_stopped","stop","pause","play","_startAnimation","percentage","_time","_reject","_checkEnded","_run","currentTime","_reset","counter","Settings","_checkDirty","_userProperties","resetUserSettings","_runAnimation","Stopped","paused","_animatingSettings","_stopAnimation","_set","_animatingPrivateSettings","_stopAnimationPrivate","setPrivate","_setPrivate","Playing","Paused","_key","_markDirtyPrivateKey","_settingEvents","onPrivate","_privateSettingEvents","offPrivate","getRaw","_sendKeyEvent","_sendPrivateKeyEvent","_setRaw","_prevSettings","removeAll","getPrivate","_privateSettings","_setPrivateRaw","_prevPrivateSettings","setPrivateRaw","removePrivate","$ease.linear","_animationTime","animatePrivate","enableDispose","Entity","isReal","templates","_createEvents","_root","_internalTemplates","id","_registerId","_template","_afterNew","_new","shouldApply","_setObjectTemplate","_applyTemplates","_setDefaults","_afterNewApplyThemes","_applyThemes","classNames","className","_setDefaultFn","_setDefault","_setRawDefault","_clearDirty","_dirty","_dirtyPrivate","isDirty","isPrivateDirty","isType","_pushPropertyDisposer","_disposerProperties","_disposeProperty","_removeObjectTemplate","_addDirtyEntity","_addAnimation","animationTime","_name","adapters","isUserSetting","_setSoft","_removeTemplateProperty","_userPrivateProperties","_removeTemplatePrivateProperty","_setTemplateProperty","_findTemplateByKey","_setTemplatePrivateProperty","_findTemplateByPrivateKey","_walkParents","_rootContainer","_applyStateByKey","other","_eachTemplate","_apply","_applyTemplate","_templateDisposers","privateSettings","_runSetup","setup","_findStaticTemplate","_templates","_disposeTemplates","_findTemplate","findIndexReverse","$array.findReverse","$array.find","_removeTemplates","force","isConnected","defaults","themes","themeTags","Set","tags","tag","_defaultThemes","theme","concat","allRules","rules","_lookupRules","rule","every","ordering","end","pivot","$array.getFirstSortedIndex","$order.compare","$order.compareArray","_changed","_beforeChanged","prevId","entitiesById","_afterChanged","addDisposer","delay","removeDispose","hasTag","addTag","removeTag","$array.remove","_t","locale","rest","language","translate","disposeSettings","$type.isObject","TemplateState","_stateChanged","TemplateStates","TemplateAdapters","Template","_checkDisposed","entities","_entities","SpriteEventDispatcher","sprite","_sprite","_makePointerEvent","originalEvent","point","simulated","native","_onRenderer","_rendererDisposers","rendererEvent","RENDERER_EVENTS","stopParentDispatch","_dispatchParents","dispatchParents","parent","click","isDragging","_hasDown","_hasMoved","rightclick","middleclick","dblclick","pointerover","_getBounds","globalBounds","strokeWidth","$math.inBounds","_renderer","removeHovering","pointerout","pointerdown","pointerup","globalpointerup","globalpointermove","wheel","Sprite","markDirtyKey","_addPercentagePositionChildren","markDirtyPosition","_removeTemplateField","_templateField","_processTemplateField","field","dataItem","dataContext","new","_setDataItem","oldDataItem","_dataItem","eventType","newDataItem","_parent","_addPercentageSizeChildren","$array.pushOne","_percentageSizeChildren","_percentagePositionChildren","_addDirtyPosition","updatePivotPoint","_localBounds","centerX","$utils.relativeToValue","centerY","_handleStates","previous","tooltip","setLayer","markDirtyLayer","tooltipMoveDp","_tooltipMoveDp","tooltipPointerDp","_tooltipPointerDp","isHover","showTooltip","isHidden","markDirtyAccessibility","display","draggable","_dragDp","dragStart","dragMove","dragStop","cancelTouch","tooltipText","tooltipHTML","showTooltipOn","_tooltipDp","getTooltip","hideTooltip","$utils.addEventListener","toggleKey","_toggleDp","_isDragging","scale","visible","_prevWidth","_sizeDirty","_updateSize","wheelable","_registerTabindexOrder","_unregisterTabindexOrder","blur","brightness","contrast","sepia","hue","invert","cursorOverStyle","_focusDp","exportable","_hoverDp","$utils.isTouchEvent","_handleOver","_handleOut","_isDown","_handleUp","_handleDown","inactive","_dragEvent","_dragPoint","_downPoint","$utils.getPointerId","_downPoints","downPoint","abs","dragEvent","dragPoint","$math.cos","$math.sin","hypot","getLocalBounds","depth","markDirtySize","_addDirtyBounds","isMeasured","invalidateBounds","_invalidateAccessibility","_updateBounds","oldBounds","_adjustedLocalBounds","newBounds","_fixMinBounds","getAdjustedBounds","minWidth","minHeight","privateWidth","privateHeight","_removeParent","children","hover","unhover","tooltipPosition","tooltipTarget","_setMatrix","toGlobal","_getTooltipPoint","lastTooltipCoords","label","width","height","markDirtyText","promise","show","timeout","hide","_updatePosition","dx","dy","_x","xx","yy","position","innerWidth","_y","innerHeight","_removeFocusElement","adjustedLocalBounds","localBounds","p0","p1","p2","p3","_onShow","_onHide","appear","success","_error","_isShowing","_isHidden","_isHiding","opacity","isShowing","isHiding","hovering","isFocus","focused","isVisible","isVisibleDeep","compositeOpacity","compositeScale","compositeRotation","rotation","maxWidth","w","maxHeight","_virtualParent","_walkParent","virtualParent","updateChildren","prevParent","getNumberFormatter","numberFormatter","getDateFormatter","dateFormatter","getDurationFormatter","durationFormatter","toLocal","_getDownPoint","_getDownPointId","sort","toFront","toBack","Pattern","makeGraphics","pattern","_pattern","_draw","_clear","_checkDirtyFill","repetition","fill","fillOpacity","backgroundDisplay","_backgroundDisplay","beginFill","drawRect","endFill","createPattern","PicturePattern","_load","canvas","colorOpacity","image","_image","patternWidth","patternHeight","fit","src","Image","decode","catch","BlendMode","visualSettings","Graphics","crisp","gradient","gradientTarget","strokeDasharray","setLineDash","strokeDashoffset","setLineDashOffset","blendMode","NORMAL","draw","svgPath","fillGradient","fillPattern","stroke","strokeGradient","strokePattern","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","shadow","stops","colorInherited","opacityInherited","getFill","strokeOpacity","resolution","lineJoin","lineCap","lineStyle","endStroke","Rectangle","wSign","hSign","eachChildren","Layout","HorizontalLayout","updateContainer","paddingLeft","availableWidth","totalPercent","childWidth","prevX","marginLeft","marginRight","VerticalLayout","paddingTop","availableHeight","childHeight","prevY","marginTop","marginBottom","GridLayout","paddingRight","minCellWidth","maxCellWidth","$math.fitToRange","columnCount","columnWidths","getColumnWidths","column","maxRowHeight","totalWidth","TextFormatter","escape","prefix","unescape","RegExp","cleanUp","chunk","quotedBlocks","noFormatting","res","chunks","split","$type.PLACEHOLDER","chunks2","i2","chunk2","isImage","getTextStyle","fontWeight","textDecoration","populateString","getTagValue","tagName","parts","reg","exec","prop","dateFields","numericFields","durationFields","method","params","$utils.trim","matches2","reg2","getTagValueFromObject","component","getCustomDataValue","customData","current","formatApplied","part","tmp","numberValue","$type.toNumber","dateValue","$type.toDate","$type.isDate","$type.isNaN","durationValue","encodeURIComponent","formatParts","Container","makeContainer","_childrenPrep","_childrenUpdt","allChildren","_removeHTMLContent","_prepareChildren","_updateChildren","interactiveChildren","_prevHeight","layout","contentMask","_contentMask","mask","updateBackground","background","verticalScrollbar","_contentHeight","bg","_contentWidth","pWidth","pHeight","horizontal","vertical","m","paddingBottom","childBounds","childX","childY","cl","cr","ct","cb","_addDirtyParent","_updateHTMLContent","html","_setHTMLContent","_positionHTMLElement","scrollToChild","ch","contentH","pos","startGrip","endGrip","interfaceColors","_vsbd0","wheelEvent","$utils.isLocalEvent","preventDefault","shiftY","deltaY","_vsbd1","walkChildren","updated","contentWidth","contentHeight","Text","makeTextStyle","makeText","textStyle","_getText","updateTooltip","_removeTooltipElement","wordWrapWidth","oversizedBehavior","invalidateVisibility","breakWords","ellipsis","ignoreFormatting","minScale","_textStyles","styleName","maxLength","lastNonAlphanumericIndex","substring","$utils.truncateTextWithEllipsis","_getAccessibleText","ariaLabel","Native","_observer","ResizeObserver","entries","entry","_targets","addTarget","observe","box","removeTarget","unobserve","$array.keepIf","Raf","_timer","lastTime","loop","now","newSize","getBoundingClientRect","size","requestAnimationFrame","cancelAnimationFrame","observer","ResizeSensor","_sensor","_element","_listener","$utils.onZoom","sensor","InterfaceColors","Label","_text","_makeText","_textKeys","propValue","_setMaxDimentions","_maybeUpdateHTMLColor","textAlign","textVisible","htmlElement","getText","getAccessibleText","PointedRectangle","bwh","xtl","ytl","xbl","d2","moveTo","stemX","lineTo","arcTo","stemY","closePath","Tooltip","$utils.mergeTags","_label","_updateBackground","_updateTextColor","tooltipContainer","_htmlContentHovered","_handleReaderAnnouncement","_tooltips","readerAlert","updateBackgroundColor","_keepHoverDp","outEvent","getEvent","_fillDp","_fillGrDp","_strokeDp","_labelDp","cw","parentW","parentH","layerMargin","_w","_h","pointTo","pointerOrientation","pointerLength","bgStrokeSizeY","bgStrokeSizeX","pointerX","pointerY","boundsW","boundsH","_fx","_fy","animationDuration","animationEasing","NumberFormatter","bns","sns","bs","suffix","formatted","toLowerCase","Intl","NumberFormat","$utils.cleanFormat","details","parseFormat","positive","negative","zero","mod","$object.copy","decimals","active","applyFormat","thousandSeparator","translateEmpty","decimalSeparator","thousands","passive","interval","separator","parsed","$type.PLACEHOLDER2","_part","item","partFormat","mods","modSpacing","applyPrefix","ol","parseFloat","toPrecision","exp","toExponential","$utils.decimalPlaces","toFixed","digits","exponent","zeros","$type.numberToString","ints","ip","intsr","reverse","c","decs","prefixes","newvalue","applied","k","parseDate","year","month","hour","minute","second","millisecond","weekday","formatToParts","toUTCDate","Timezone","DateTimeFormat","hour12","fractionalSecondDigits","_dtf","convertLocal","offset","offsetUTC","userOffset","setUTCMinutes","getUTCMinutes","newUserOffset","DateFormatter","ignoreTimezone","locales","originalDate","fullYear","minutes","seconds","milliseconds","timestamp","getUTCMonth","getUTCHours","getUTCSeconds","getUTCMilliseconds","getDay","getHours","getMinutes","getSeconds","getMilliseconds","$utils.getWeekYear","_getMonth","_getShortMonth","$utils.getWeek","$utils.getMonthWeek","$utils.getYearDay","translateFunc","_getShortWeekday","_getWeekday","firstDayOfWeek","$utils.get12Hours","$utils.getTimeZone","$utils.getTimezoneOffset","tz","tzh","tzm","toISOString","toUTCString","dateFormat","_months","_shortMonths","_weekdays","_shortWeekdays","parse","parsedIndexes","year3","year2","year1","monthShort","monthLong","weekdayShort","weekdayLong","yearDay","week","hourBase0","hour12Base0","hourBase1","hour12Base1","millisecondDigits","am","zone","iso","resValues","indexAdjust","getStringList","regex","resolveMonth","resolveShortMonth","setUTCFullYear","$utils.getDayFromWeek","isAm","ts","resolveTimezoneOffset","dir","isDefault","translateAll","list","$utils.escapeForRgex","DurationFormatter","Y","D","H","K","n","dmillisecond","dsecond","dminute","dhour","dday","dweek","dmonth","aminute","ahour","aday","aweek","amonth","ayear","baseUnit","getFormat","absolute","dirs","_unitAliases","tstamp","toTimeStamp","unit","_toTimeUnit","unitValue","_getUnitValue","code","maxValue","maxUnit","getValueUnit","currentUnit","ms","$object.eachContinue","_getUnitValues","timeUnit","en","_decimalSeparator","_thousandSeparator","_percentPrefix","_percentSuffix","_big_number_suffix_3","_big_number_suffix_6","_big_number_suffix_9","_big_number_suffix_12","_big_number_suffix_15","_big_number_suffix_18","_big_number_suffix_21","_big_number_suffix_24","_small_number_suffix_3","_small_number_suffix_6","_small_number_suffix_9","_small_number_suffix_12","_small_number_suffix_15","_small_number_suffix_18","_small_number_suffix_21","_small_number_suffix_24","_byte_suffix_B","_byte_suffix_KB","_byte_suffix_MB","_byte_suffix_GB","_byte_suffix_TB","_byte_suffix_PB","_date","_date_millisecond","_date_millisecond_full","_date_second","_date_second_full","_date_minute","_date_minute_full","_date_hour","_date_hour_short","_date_hour_full","_date_day","_date_day_full","_date_week","_date_week_full","_date_month","_date_month_full","_date_year","_duration_millisecond","_duration_millisecond_second","_duration_millisecond_minute","_duration_millisecond_hour","_duration_millisecond_day","_duration_millisecond_week","_duration_millisecond_month","_duration_millisecond_year","_duration_second","_duration_second_minute","_duration_second_hour","_duration_second_day","_duration_second_week","_duration_second_month","_duration_second_year","_duration_minute","_duration_minute_hour","_duration_minute_day","_duration_minute_week","_duration_minute_month","_duration_minute_year","_duration_hour","_duration_hour_day","_duration_hour_week","_duration_hour_month","_duration_hour_year","_duration_day","_duration_day_week","_duration_day_month","_duration_day_year","_duration_week","_duration_week_month","_duration_week_year","_duration_month","_duration_month_year","_duration_year","_era_ad","_era_bc","A","AM","PM","January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Oct","Nov","Dec","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat","_dateOrd","Play","Stop","Legend","Loading","Home","Chart","Series","Map","Export","Data","Print","PNG","JPG","GIF","SVG","PDF","JSON","CSV","XLSX","HTML","Close","Minimize","Confirm","Language","prompt","translation","translateAny","setTranslationAny","setTranslationsAny","translations","$array.map","Theme","setupDefaultRules","themeClass","_rules","ruleRaw","$array.getSortedIndex","setColor","ic","DefaultTheme","horizontalLayout","verticalLayout","bind","primaryButton","primaryButtonHover","primaryButtonDown","primaryButtonActive","primaryButtonDisabled","primaryButtonTextDisabled","primaryButtonText","primaryButtonStroke","secondaryButton","secondaryButtonHover","secondaryButtonDown","secondaryButtonActive","secondaryButtonText","secondaryButtonStroke","grid","alternativeBackground","alternativeText","disabled","passOptions","lightness","colors","reuse","startIndex","$ease.out","interpolationDuration","interpolationEasing","tooltipX","tooltipY","setStateOnChildren","pinchZoom","maxZoomLevel","minZoomLevel","zoomStep","maxPanOut","gap","checkered","centered","horizontalGap","verticalGap","density","minOpacity","maxOpacity","fillField","strokeField","nameField","layer","clickTarget","ariaChecked","focusable","role","cornerRadiusBL","cornerRadiusTL","cornerRadiusBR","cornerRadiusTR","populateText","stepCount","fontFamily","fontSize","textType","inside","baseRadius","orientation","editOn","multiLine","pointerBaseWidth","cornerRadius","shiftRadius","dRadius","dInnerRadius","locationX","locationY","getFillFromSprite","getStrokeFromSprite","autoTextColor","forceInactive","forceHidden","ariaValueMin","ariaValueMax","ariaLive","labelText","spikes","innerRadius","rotationStep","numberFormat","Matrix","tx","ty","setTransform","pivotX","pivotY","origin","applyInverse","append","matrix","a1","b1","c1","prepend","tx1","_slicedToArray","arr","isArray","_arr","_n","_d","_e","_s","_i","err","sliceIterator","TypeError","TAU","mapToEllipse","_ref","rx","ry","cosphi","sinphi","centerx","centery","approxUnitArc","ang1","ang2","tan","x1","y1","x2","y2","vectorAngle","ux","uy","vx","vy","dot","acos","arcToBezier","_ref2","px","py","_ref2$xAxisRotation","xAxisRotation","_ref2$largeArcFlag","largeArcFlag","_ref2$sweepFlag","sweepFlag","curves","pxp","pyp","lambda","sqrt","_getArcCenter","rxsq","rysq","pxpsq","pypsq","radicant","centerxp","centeryp","vx1","vy1","vx2","vy2","getArcCenter","_getArcCenter2","ratio","segments","curve","_mapToEllipse","_mapToEllipse2","_mapToEllipse3","checkArgs","actual","expected","checkMinArgs","checkEvenArgs","splitArcFlags","args","flag","assertBinary","eachTargets","hitTarget","onPointerEvent","$utils.getRendererEvent","$utils.getEventTarget","touches","changedTouches","$array.copy","isTainted","createElement","getContext","willReadFrequently","drawImage","getImageData","clearCanvas","view","CanvasPivot","CanvasDisplayObject","renderer","subStatus","status","_layer","_removeObject","getLayer","dirty","getCanvas","defaultLayer","margin","$utils.setInteractive","_ghostLayer","setMargin","layers","registerChildLayer","resizeLayer","resizeGhost","_addBounds","_bounds","_getColorId","_colorId","paintId","_isInteractive","_forceInteractive","_isInteractiveMask","_matrix","getLocalMatrix","_uMatrix","bn","_addEvent","_localMatrix","_transform","_transformMargin","_transformLayer","render","targetGhostLayer","_omitTainted","ghostLayer","ghostContext","save","_runPath","clip","globalAlpha","compoundAlpha","$array.move","_deferredGhostLayers","_render","restore","_targetGhostLayer","tainted","_ghostOnly","_drawGhost","_hovering","dragging","_dragging","some","shouldCancelTouch","tapToActivate","_touchActive","CanvasContainer","_children","_childLayers","deep","setPoint","Op","colorize","_context","_forceColor","colorizeGhost","forceColor","pathGhost","addBounds","BeginPath","beginPath","BeginFill","fillStyle","EndFill","clearShadow","EndStroke","LineStyle","strokeStyle","lineWidth","LineDash","dash","LineDashOffset","dashOffset","lineDashOffset","DrawRect","rect","DrawCircle","DrawEllipse","radiusX","radiusY","ellipse","Arc","anticlockwise","arcBounds","$math.getArcBounds","$math.DEGREES","ArcTo","LineTo","MoveTo","ClosePath","BezierCurveTo","cpX","cpY","cpX2","cpY2","toX","toY","bezierCurveTo","QuadraticCurveTo","quadraticCurveTo","Shadow","offsetX","offsetY","GraphicsImage","CanvasGraphics","_operations","_pushOp","op","_fillAlpha","_hasShadows","_strokeAlpha","drawCircle","drawEllipse","cpx","cpy","qcpx","qcpy","SEGMENTS_REGEXP","ARGS_REGEXP","relative","layerDirty","ghostOnly","drawGhost","globalCompositeOperation","renderDetached","CanvasText","_textInfo","_originalScale","_shared","direction","textBaseline","_prerender","ignoreGhost","ignoreFontWeight","fontStyle","_getFontStyle","font","style2","fontVariant","_measure","line","_index","textChunks","fillText","thickness","metrics","_measureText","actualBoundingBoxLeft","actualBoundingBoxRight","_ignoreFontWeight","rtl","truncate","wrap","refText","lines","currentStyle","styleRestored","lineInfo","ascent","actualBoundingBoxAscent","actualBoundingBoxDescent","currentFormat","currentFill","currentChunkWidth","currentVerticalAlign","currentDecoration","skipFurtherText","firstTextChunk","leftoverChunks","$array.eachContinue","verticalAlign","chunkWidth","truncated","ellipsisMetrics","ellipsisWidth","excessWidth","_truncateText","tmpText","leftBoundMod","rightBoundMod","boundsMod","chunkHeight","lineHeight","currentChunkOffset","baselineRatio","_fitRatio","maxW","maxH","fallbackBreakWords","measureText","fakeMetrics","div","innerText","visibility","body","appendChild","bbox","fontBoundingBoxAscent","fontBoundingBoxDescent","CanvasTextStyle","CanvasRadialText","_renderCircular","deltaAngle","inward","align","kerning","clockwise","shouldReverse","_textReversed","maxAngle","midAngle","$math.normalizeAngle","textHeight","lineStartAngle","rotate","angleShift","charWidth","_measureCircular","chars","rtlChar","splitPattern","segment","$utils.splitString","CanvasImage","_imageMask","naturalWidth","naturalHeight","_getMask","imageSmoothingEnabled","fillRect","CanvasRendererEvent","originalPoint","$utils.supports","identifier","CanvasRenderer","GhostLayer","_patternCanvas","devicePixelRatio","setAttribute","_layerDom","exportableView","_touchActiveTimeout","_delayTouchDeactivate","prevent","obj","resetImageArray","imageArray","tapToActivateTimeout","debugGhostView","createLinearGradient","createRadialGradient","radius1","radius2","graphics","_patternContext","clearRect","makeRadialText","makePicture","resize","_calculatedWidth","_calculatedHeight","realWidth","realHeight","calculatedWidth","calculatedHeight","_realWidth","_realHeight","createDetachedLayer","CanvasLayer","getLayerByOrder","existingLayer","insertBefore","_dirtyLayers","deferredGhostLayers","layerx","_lastPointerMoveEvent","_dispatchGlobalMousemove","distributeId","_colorMap","_adjustBoundingBox","DOMRect","adjustPoint","clientX","clientY","widthScale","heightScale","_getHitTarget","pixel","data","colorId","getObjectAtPoint","getImageArray","_withEvents","dispatching","cleanup","disposed","_dispatchEventAll","interactionsEnabled","_dispatchEvent","dispatched","_dispatchMousedown","originalTarget","button","dragged","_mousedown","delete","$utils.setStyle","_replacedCursorStyle","_dispatchGlobalMouseup","_dispatchDragMove","_dispatchDragEnd","clickevent","_dispatchDoubleClick","_dispatchWheel","_makeSharedEvent","_onPointerEvent","timer","_initEvent","mouseup","pointercancel","mousedown","mousemove","canvasWidth","canvasHeight","maxScale","maintainPixelRatio","canvases","forceRender","needRerender","exportableContext","extraX","extraY","clientWidth","clientHeight","domWidth","domHeight","_resolution","_width","_height","rAF","fps","Root","accessible","_a11yD","useSafeResolution","$utils.getSafeResolution","HTMLElement","getElementById","rootElements","inner","tooltipContainerBounds","_tooltipContainerSettings","_inner","_updateComputedStyles","_init","moveDOM","childNodes","_initResizeSensor","_handleLogo","_logo","offsetWidth","offsetHeight","_showBranding","logo","systemTooltip","open","_getRealSize","_getCalculatedSize","calculateSize","tabindex","rootContainer","htmlElementContainer","_htmlElementContainer","overflow","readerAlertElement","_readerAlertElement","focusElementContainer","_focusElementContainer","tooltipElementContainer","_tooltipElementContainer","eventKey","$utils.getEventKey","_isShift","shiftKey","focusedSprite","_focusedSprite","announceText","downEvent","activeElement","focus","$utils.blur","dragOffsetX","dragOffsetY","_keyboardDragPoint","moveEvent","upEvent","group","items","_tabindexes","lastIndex","el","_skipNextGroupJump","_focusNext","_startTicker","setThemes","_addTooltip","_hasLicense","_systemTooltip","_resizeSensorDisposer","autoResize","_focusElementDirty","_updateCurrentFocus","_runTickers","_tickers","_runAnimations","running","_animations","_isDirtyAnimation","_runDirties","allParents","_isDirtyParents","_dirtyParents","uid","objects","_isDirty","depths","_dirtyBounds","_positionHTMLElements","dirtyPositions","_dirtyPositions","_renderFrame","_updateTick","_checkComputedStyles","animationDone","_runTicker","_ticker","_paused","_runTickerNow","endTime","performance","updateTick","_markDirty","_markDirtyRedraw","eachFrame","markDirtyGlobal","_isDisposed","$utils.stripTags","innerHTML","tooltipContainerSettings","_tooltip","_invalidateTabindexes","aindex","bindex","groups","_moveFocusElement","_makeFocusElement","_decorateFocusElement","_positionFocusElement","focusElement","removeAttribute","ariaCurrent","ariaSelected","ariaOrientation","ariaValueNow","ariaValueText","ariaControls","getAttribute","tabIndex","_handleFocus","_handleBlur","_hideFocusElement","padding","focusPadding","_getSpriteByFocusElement","focusableElements","querySelectorAll","targetElement","tooltipElement","_makeTooltipElement","parentElement","documentPointToRoot","scaleWidth","scaleHeight","rootPointToDocument","styles","getComputedStyle","fontHash","changed","_fontHash","_invalidateLabelBounds","licenses","_licenseApplied","_makeHTMLElement","wrapperTarget","htmlElementWrapper","needWrapper","boxSizing","_htmlEnabledContainers","clipPath","setting","transform","transformOrigin","lw","lh","ll","lr","lt","lb","previousBounds","originX","originY","RoundedRectangle","minSide","crtl","crtr","crbr","crbl","maxcr","ListData","incrementRef","decrementRef","processor","processRow","DataItem","markDirtyValues","disposeDataItem","showDataItem","hideDataItem","Component","_dataItems","_data","_onDataClear","_updateFields","dataItems","_mainDataItems","_markDirtyGroup","_dataChanged","_makeDataItem","processDataItem","properties","bullets","_afterDataChange","valueFields","_valueFields","_valueFieldsF","fieldKey","workingKey","fields","_fields","_fieldsF","makeDataItem","pushDataItem","_valuesDirty","inited","_dataGrouped","getDataItemById","firstDateOfWeek","firstDate","timeZoneOffset","setUTCHours","setUTCSeconds","setUTCMilliseconds","setUTCMonth","wday","weekDay","newTimeZoneOffset","initialTime","tzoffset","parsedDate","offsetDif","newTime","hDuration","newDiff","setTime","_handleBullets","bulletsContainer","endIndex","bullet","_makeBullets","_shouldMakeBullet","bulletFunction","_makeBullet","_makeBulletReal","series","addBullet","_aggregatesCalculated","_baseSeriesDirty","_selectionAggregatesCalculated","updateLegendValue","baseValueSeries","_dataProcessed","_calculateAggregates","_psi","_pei","markerRectangle","legendDataItem","updateLegendMarker","_handleRemoved","_adjustStartIndex","sum","absSum","low","high","close","average","changePercent","changePrevious","changePreviousPercent","changeSelection","changeSelectionPercent","openKey","adjustedStartIndex","calculateChangesForItem","_getBase","minValue","dataField","neutral","customFunction","propertyValue","logarithmic","log","LOG10E","_hideBullets","_positionBullets","_positionBullet","_bullet","_placeBulletsContainer","chart","_removeBulletsContainer","_getItemReaderLabel","_super","_sequencedShowHide","realDuration","valueLabel","txt","hoverDataItem","unhoverDataItem","segmentedLine","firstGroup","firstPoint","points","Line","$draw.segmentedLine","SerialChart","seriesContainer","_removeSeries","reset","patterns","_processSeries","aIndex","bIndex","Tick","ColorSet","generateColors","pass","currentStep","AnimatedTheme"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61]}