import{a as e,b as t,s as a}from"./functions-CHZiqRQA.js";function i(i){const r=i.dataset.webhook||"https://hook.us2.make.com/kkvr63k2dtf7sgpx5n2alylvmgf2qvd5",o=i.querySelectorAll('[data-form="step"]'),n=i.querySelector('[data-phone-buddy-form="ticket-id-field"]'),s=i.querySelector('[data-form="next-btn"]'),l=s.firstChild.textContent,d=i.querySelector('[data-form="submit-btn"]'),u=d.firstChild.textContent,h=i.querySelector(".w-form-done"),c=i.querySelector(".w-form-fail"),y=i.querySelector("form");n&&(n.disabled=!0,n.type="hidden"),e({selectId:"Cancer-type",otherValue:557,fieldName:"Other-cancer-type",labelName:"Specify other type of lung cancer",placeholder:"Specify here"}),e({selectId:"How-did-you-heard-about-us",otherValue:98,fieldName:"Other-way-of-hearing-about-GO2",labelName:"Describe other way of hearing about GO2",placeholder:"Specify here"}),t({checkboxGroup:"Phone-Buddy-Treatment",otherValue:8,fieldName:"Other-treatment",labelName:"Specify treatment",placeholder:"Specify here"}),s.addEventListener("click",e=>{if(!e.isTrusted)return;if(e.currentTarget.classList.contains("disabled"))return e.preventDefault(),void e.stopImmediatePropagation();e.preventDefault(),e.stopImmediatePropagation();const t=a(o[0]);s.disabled=!0,s.classList.add("disabled"),s.firstChild.textContent="Please wait...",fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>{if(!e.ok)throw new Error("Submission failed");return e.json()}).then(e=>{n&&(n.value=e||"");const t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});s.dispatchEvent(t),c.style.display="none",c.setAttribute("aria-hidden","true")}).catch(e=>{c&&(c.style.display="block",c.setAttribute("aria-hidden","false"),c.setAttribute("tabindex","-1"),setTimeout(()=>c.focus(),50))}).finally(()=>{s.disabled=!1,s.classList.remove("disabled"),s.firstChild.textContent=l})},!0),d.addEventListener("click",e=>{if(e.preventDefault(),e.stopImmediatePropagation(),n?.value){const e=a(o[1]);e["ticket-id"]=n.value;let t=e["Phone-Buddy-Message"]||"";let i="";[{key:"Phone-Buddy-Treatment",label:"Treatment"},{key:"Other-treatment",label:"Other treatment"},{key:"How-did-you-heard-about-us",label:"How did you hear about GO2?"},{key:"Other-way-of-hearing-about-GO2",label:"Other way of hearing about GO2"}].forEach(t=>{if(e.hasOwnProperty(t.key)){const a=e[t.key];Array.isArray(a)&&a.length>0?i+=`\n${t.label}: ${a.join(", ")}`:("string"==typeof a&&""!==a.trim()||null!=a&&""!==a.toString().trim())&&(i+=`\n${t.label}: ${a}`)}}),i&&(t=t.trim()?`${t.trim()}.\n${i.trim()}`:i.trim()),e["Phone-Buddy-Message"]=t,d.disabled=!0,d.classList.add("disabled"),d.firstChild.textContent="Please wait...",fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>{if(!e.ok)throw new Error("Submission failed");return e.json()}).then(e=>{y&&(y.style.display="none",y.setAttribute("aria-hidden","true")),c&&(c.style.display="none",c.setAttribute("aria-hidden","true")),h&&(h.style.display="block",h.setAttribute("aria-hidden","false"),h.setAttribute("tabindex","-1"),setTimeout(()=>h.focus(),50))}).catch(e=>{y&&y.setAttribute("aria-hidden","true"),h&&(h.style.display="none",h.setAttribute("aria-hidden","true")),c&&(c.style.display="block",c.setAttribute("aria-hidden","false"),c.setAttribute("tabindex","-1"),setTimeout(()=>c.focus(),50))}).finally(()=>{d.disabled=!1,d.classList.remove("disabled"),d.firstChild.textContent=u})}else alert("There was an error updating your information...")},!0)}export{i as default};
//# sourceMappingURL=phone-buddy-BC0sFQlo.js.map
