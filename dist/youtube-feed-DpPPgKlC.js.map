{"version":3,"file":"youtube-feed-DpPPgKlC.js","sources":["../src/components/youtube-feed.js"],"sourcesContent":["const WORKER_URL = 'https://go2-centers-worker.nahuel-eba.workers.dev/videos'\n\n// How many videos to show per \"page\"\nconst PAGE_SIZE = 12\n// How many videos we fetch in total per request (initial or by category)\nconst MAX_VIDEOS = 30\n\nexport default async function (component) {\n  console.log('[YouTube] Component init ✅', component)\n\n  const listEl = component.querySelector('[fs-youtubefeed-element=\"list\"]')\n  const templateItem = component.querySelector('[fs-youtubefeed-element=\"item\"]')\n  const loadMoreBtn = component.querySelector('[fs-youtubefeed-element=\"load-more\"]')\n\n  // IMPORTANT: grab the real <select>, not the wrapper\n  let categorySelect =\n    component.querySelector('select[fs-youtube-categories=\"list\"]') ||\n    component.querySelector('[fs-youtube-categories=\"list\"]')\n\n  if (!listEl || !templateItem) {\n    console.warn('[YouTube] No list or template item found')\n    return\n  }\n\n  // Clone one item to use as template for dynamic items\n  // We DO NOT remove the original template from the DOM, so it can act as a loading skeleton\n  const itemTemplate = templateItem.cloneNode(true)\n\n  // --- State ---\n  let isLoading = false\n  let allVideos = [] // all videos for \"All\"\n  let currentCategoryId = 'all'\n  const cacheByCategory = {} // playlistId -> videos[]\n  const categoriesById = {} // playlistId -> playlist object\n  let visibleCount = PAGE_SIZE\n\n  function setLoading(loading) {\n    isLoading = loading\n    if (loading) {\n      component.classList.add('is-loading')\n    } else {\n      component.classList.remove('is-loading')\n    }\n  }\n\n  // Initial load\n  await fetchInitialData()\n\n  // Load more = front-only pagination\n  if (loadMoreBtn) {\n    loadMoreBtn.addEventListener('click', () => {\n      const list = getCurrentVideoList()\n      if (!list || list.length === 0) return\n\n      if (visibleCount >= list.length) {\n        updateLoadMoreVisibility(list)\n        return\n      }\n\n      const previous = visibleCount\n      visibleCount = Math.min(visibleCount + PAGE_SIZE, list.length)\n\n      console.time('[YouTube] Load more render')\n      renderCurrentList(true)\n      console.timeEnd('[YouTube] Load more render')\n\n      console.log(`[YouTube] Load more: from ${previous} → ${visibleCount} items (total ${list.length})`)\n    })\n  }\n\n  // -------------------------\n  // Initial data fetch\n  // -------------------------\n  async function fetchInitialData() {\n    console.time('[YouTube] Initial fetch')\n    try {\n      setLoading(true)\n\n      const sep = WORKER_URL.includes('?') ? '&' : '?'\n      const url = WORKER_URL + `${sep}maxVideos=${MAX_VIDEOS}`\n\n      const res = await fetch(url)\n      if (!res.ok) {\n        console.error('[YouTube] Error fetching videos', res.status)\n        return\n      }\n\n      const data = await res.json()\n      console.log('[YouTube] Initial data ✅', data)\n\n      if (data.channel) {\n        renderHeader(data.channel)\n      }\n\n      allVideos = Array.isArray(data.videos) ? data.videos : []\n      console.log('[YouTube] Initial videos count:', allVideos.length)\n\n      const categoriesArray = Array.isArray(data.categories) ? data.categories : []\n      console.log('[YouTube] Categories from worker:', categoriesArray.length, categoriesArray)\n\n      categoriesArray.forEach((cat) => {\n        if (cat && cat.id) {\n          categoriesById[cat.id] = cat\n        }\n      })\n\n      if (categoriesArray.length > 0) {\n        populateCategorySelect(categoriesArray)\n      } else {\n        console.warn('[YouTube] No categories returned from worker')\n      }\n\n      visibleCount = Math.min(PAGE_SIZE, allVideos.length)\n\n      console.time('[YouTube] Initial render')\n      renderCurrentList(false)\n      console.timeEnd('[YouTube] Initial render')\n\n      component.style.opacity = '1'\n    } catch (err) {\n      console.error('[YouTube] Error fetching videos', err)\n    } finally {\n      setLoading(false)\n      console.timeEnd('[YouTube] Initial fetch')\n    }\n  }\n\n  // -------------------------\n  // Which list is active\n  // -------------------------\n  function getCurrentVideoList() {\n    if (currentCategoryId === 'all') return allVideos\n    return cacheByCategory[currentCategoryId] || []\n  }\n\n  // -------------------------\n  // Render current list (with pagination)\n  // -------------------------\n  function renderCurrentList(isLoadMore = false) {\n    const currentList = getCurrentVideoList()\n    const toRender = currentList.slice(0, visibleCount)\n\n    console.log(\n      `[YouTube] renderCurrentList(): category=${currentCategoryId}, visible=${visibleCount}, totalInList=${currentList.length}`\n    )\n\n    clearList()\n    renderVideos(toRender, isLoadMore)\n    updateLoadMoreVisibility(currentList)\n  }\n\n  // -------------------------\n  // Populate category select\n  // -------------------------\n  function populateCategorySelect(categories) {\n    if (!categorySelect) {\n      console.warn('[YouTube] No category select found in DOM')\n      return\n    }\n\n    // If the first match is not a <select>, try to find the actual select\n    if (categorySelect.tagName !== 'SELECT') {\n      console.warn('[YouTube] categorySelect is not a <select>, trying select[fs-youtube-categories=\"list\"]')\n      const innerSelect = component.querySelector('select[fs-youtube-categories=\"list\"]')\n      if (innerSelect) {\n        categorySelect = innerSelect\n      }\n    }\n\n    if (!categorySelect || categorySelect.tagName !== 'SELECT') {\n      console.warn('[YouTube] Could not find native <select> for categories')\n      return\n    }\n\n    console.log('[YouTube] Populating native category <select> with', categories.length, 'categories')\n\n    categorySelect.multiple = false\n    categorySelect.innerHTML = ''\n\n    // \"All\" option\n    const optAll = document.createElement('option')\n    optAll.value = 'all'\n    optAll.textContent = 'All videos'\n    categorySelect.appendChild(optAll)\n\n    // Playlist options\n    categories.forEach((cat) => {\n      if (!cat || !cat.id || !cat.title) return\n      const opt = document.createElement('option')\n      opt.value = cat.id\n      opt.textContent = cat.title\n      categorySelect.appendChild(opt)\n    })\n\n    // Default value\n    categorySelect.value = 'all'\n\n    // Listen for changes\n    categorySelect.addEventListener('change', (event) => {\n      const value = event.target.value\n      console.log('[YouTube] change event from select →', value)\n      handleCategoryChange(value || 'all')\n    })\n\n    // Extra safety: poll for changes (in case Finsweet updates it)\n    startCategoryPolling(categorySelect)\n  }\n\n  // -------------------------\n  // Polling to detect Finsweet updates\n  // -------------------------\n  function startCategoryPolling(selectEl) {\n    let lastValue = selectEl.value || 'all'\n    console.log('[YouTube] Category polling initial value →', lastValue)\n\n    setInterval(() => {\n      const currentValue = selectEl.value || 'all'\n      if (currentValue !== lastValue) {\n        console.log('[YouTube] Category polling detected change →', lastValue, '→', currentValue)\n        lastValue = currentValue\n        handleCategoryChange(currentValue)\n      }\n    }, 300)\n  }\n\n  // -------------------------\n  // Category change handler\n  // -------------------------\n  async function handleCategoryChange(value) {\n    const newCategoryId = value || 'all'\n\n    if (newCategoryId === currentCategoryId) return\n\n    currentCategoryId = newCategoryId\n    console.log('[YouTube] Category change →', currentCategoryId)\n\n    visibleCount = PAGE_SIZE\n\n    if (currentCategoryId === 'all') {\n      renderCurrentList(false)\n      return\n    }\n\n    // Use cache if available\n    if (cacheByCategory[currentCategoryId]) {\n      const list = cacheByCategory[currentCategoryId]\n      visibleCount = Math.min(PAGE_SIZE, list.length)\n      renderCurrentList(false)\n      return\n    }\n\n    // Fetch this playlist\n    try {\n      setLoading(true)\n\n      const sep = WORKER_URL.includes('?') ? '&' : '?'\n      const url = WORKER_URL + `${sep}playlistId=${encodeURIComponent(currentCategoryId)}&maxVideos=${MAX_VIDEOS}`\n\n      console.log('[YouTube] Fetching category videos:', url)\n\n      const res = await fetch(url)\n      if (!res.ok) {\n        console.error('[YouTube] Error fetching category videos', res.status)\n        return\n      }\n\n      const data = await res.json()\n      const videos = Array.isArray(data.videos) ? data.videos : []\n\n      console.log(`[YouTube] Category ${currentCategoryId} fetched ${videos.length} videos`)\n\n      cacheByCategory[currentCategoryId] = videos\n      visibleCount = Math.min(PAGE_SIZE, videos.length)\n      renderCurrentList(false)\n    } catch (err) {\n      console.error('[YouTube] Error fetching category videos', err)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  // -------------------------\n  // Header\n  // -------------------------\n  function renderHeader(channel) {\n    const imgEl = component.querySelector('[fs-youtubefeed-element=\"profile-image\"]')\n    const nameEl = component.querySelector('[fs-youtubefeed-element=\"profile-name\"]')\n    const handleEl = component.querySelector('[fs-youtubefeed-element=\"profile-handle\"]')\n    const videoCountEl = component.querySelector('[fs-youtubefeed-element=\"video-count\"]')\n    const viewCountEl = component.querySelector('[fs-youtubefeed-element=\"view-count\"]')\n    const subCountEl = component.querySelector('[fs-youtubefeed-element=\"subscriber-count\"]')\n    const subscribeLinkEl = component.querySelector('[fs-youtubefeed-element=\"subscribe-button\"]')\n\n    if (imgEl && channel.profileImage) imgEl.src = channel.profileImage\n    if (imgEl && channel.title) imgEl.alt = channel.title\n    if (nameEl && channel.title) nameEl.textContent = channel.title\n    if (handleEl && channel.handle) handleEl.textContent = channel.handle\n    if (videoCountEl && channel.videoCount) {\n      videoCountEl.textContent = formatNumber(channel.videoCount)\n    }\n    if (viewCountEl && channel.viewCount) {\n      viewCountEl.textContent = formatNumber(channel.viewCount)\n    }\n    if (subCountEl && channel.subscriberCount) {\n      subCountEl.textContent = formatNumber(channel.subscriberCount)\n    }\n    if (subscribeLinkEl && channel.url) subscribeLinkEl.href = channel.url\n  }\n\n  // -------------------------\n  // List helpers\n  // -------------------------\n  function clearList() {\n    const t0 = performance.now()\n    while (listEl.firstChild) {\n      listEl.removeChild(listEl.firstChild)\n    }\n    const t1 = performance.now()\n    console.log('[YouTube] clearList():', (t1 - t0).toFixed(1), 'ms')\n  }\n\n  function renderVideos(videos, isLoadMore) {\n    if (!Array.isArray(videos)) return\n\n    const t0 = performance.now()\n\n    videos.forEach((video, idx) => {\n      const itemEl = itemTemplate.cloneNode(true)\n      fillSingleItem(itemEl, video)\n\n      // Base loading style for all renders\n      itemEl.style.opacity = '0'\n      itemEl.style.transform = 'translateY(6px)'\n\n      listEl.appendChild(itemEl)\n\n      // Stagger only on \"load more\"\n      if (isLoadMore) {\n        const delay = idx * 20\n        setTimeout(() => {\n          requestAnimationFrame(() => {\n            itemEl.style.transition = 'opacity 0.35s ease, transform 0.35s ease'\n            itemEl.style.opacity = '1'\n            itemEl.style.transform = 'translateY(0)'\n          })\n        }, delay)\n      } else {\n        // Normal fade-in for initial / category renders\n        requestAnimationFrame(() => {\n          itemEl.style.transition = 'opacity 0.3s ease, transform 0.3s ease'\n          itemEl.style.opacity = '1'\n          itemEl.style.transform = 'translateY(0)'\n        })\n      }\n    })\n\n    const t1 = performance.now()\n    console.log('[YouTube] renderVideos(): rendered', videos.length, 'items in', (t1 - t0).toFixed(1), 'ms')\n  }\n\n  function updateLoadMoreVisibility(currentList) {\n    if (!loadMoreBtn) return\n    const list = currentList || getCurrentVideoList()\n    if (!Array.isArray(list) || list.length <= visibleCount) {\n      loadMoreBtn.style.display = 'none'\n    } else {\n      loadMoreBtn.style.display = 'block'\n    }\n  }\n\n  // -------------------------\n  // Single item\n  // -------------------------\n  function fillSingleItem(itemEl, video) {\n    const thumbImg = itemEl.querySelector('[fs-youtubefeed-element=\"thumbnail\"]')\n    const thumbWrapper = itemEl.querySelector('[fs-youtubefeed-element=\"thumbnail-wrapper\"]')\n    const titleEl = itemEl.querySelector('[fs-youtubefeed-element=\"title\"]')\n    const dateEl = itemEl.querySelector('[fs-youtubefeed-element=\"published-date\"]')\n    const viewCountEl = itemEl.querySelector('[fs-youtubefeed-element=\"view-count\"]')\n    const likeCountEl = itemEl.querySelector('[fs-youtubefeed-element=\"like-count\"]')\n    const commentCountEl = itemEl.querySelector('[fs-youtubefeed-element=\"comment-count\"]')\n    const favouriteCountEl = itemEl.querySelector('[fs-youtubefeed-element=\"favourite-count\"]')\n    const categoriesEl = itemEl.querySelector('[fs-youtubefeed-element=\"categories\"]')\n\n    if (thumbImg && video.thumbnail) {\n      thumbImg.src = video.thumbnail\n      thumbImg.alt = video.title || ''\n    }\n\n    if (thumbWrapper && video.url) {\n      thumbWrapper.style.cursor = 'pointer'\n      thumbWrapper.onclick = () => {\n        window.open(video.url, '_blank', 'noopener')\n      }\n    }\n\n    if (titleEl) titleEl.textContent = video.title || ''\n    if (dateEl) dateEl.textContent = formatDate(video.publishedAt)\n\n    if (viewCountEl) viewCountEl.textContent = formatNumber(video.viewCount || '0')\n    if (likeCountEl) likeCountEl.textContent = formatNumber(video.likeCount || '0')\n    if (commentCountEl) {\n      commentCountEl.textContent = formatNumber(video.commentCount || '0')\n    }\n    if (favouriteCountEl) {\n      favouriteCountEl.textContent = formatNumber(video.likeCount || '0')\n    }\n\n    // Categories (for debugging / UX)\n    if (categoriesEl) {\n      categoriesEl.textContent = ''\n\n      if (Array.isArray(video.categories) && video.categories.length > 0) {\n        const titles = video.categories.map((id) => categoriesById[id]?.title).filter(Boolean)\n        if (titles.length > 0) {\n          categoriesEl.textContent = titles.join(' • ')\n        }\n      }\n    }\n  }\n\n  // -------------------------\n  // Utils\n  // -------------------------\n  function formatNumber(value) {\n    const num = Number(value)\n    if (Number.isNaN(num)) return value\n    return num.toLocaleString()\n  }\n\n  function formatDate(iso) {\n    if (!iso) return ''\n    const d = new Date(iso)\n    if (Number.isNaN(d.getTime())) return iso\n    return d.toLocaleDateString()\n  }\n}\n"],"names":[],"mappings":"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"}