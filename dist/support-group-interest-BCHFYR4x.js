import{g as e,i as t,j as r,h as o,s as a,v as n,c as i,a as s,b as l,f as d,r as c,d as p,e as m}from"./index-CmKJwrgB.js";import"./main-Bd-b5HeP.js";function u(u){(u.forEach?u:[u]).forEach(u=>{const f=u.dataset.webhook||"https://hook.us2.make.com/eyhunqogl9rgad784tzw3qf0klx5vusm",h=Array.from(u.querySelectorAll('[data-form="step"]')),y=u.querySelector("#id"),g=u.querySelector(".w-form-done"),S=u.querySelector(".w-form-fail"),b=u.querySelector("form");y&&(y.disabled=!0,y.type="hidden"),e({context:u,selectId:"connection-to-lung-cancer",otherValue:"other-connection",fieldName:"other-connection-to-lung-cancer",labelName:"Specify other connection to lung cancer",placeholder:"Specify here"}),t({context:u,checkboxGroup:"interests",otherValue:"Other interests",fieldName:"other-interests",labelName:"Specify other interests",placeholder:"Specify here",wrapperClass:"multi-form14_field-wrapper"}),r({context:u,selectId:"copy-of-building-community-guide",dependentValue:"Wants a copy via Mail"}),h.forEach((e,t)=>{0!==t&&e.classList.add("hide")}),u.addEventListener("click",async e=>{const t=e.target,r=t.closest('[data-form="next-btn"]'),w=t.closest('[data-form="submit-btn"]'),v=t.closest(".button_text");if(r||v&&r){o(S);const e=r.closest('[data-form="step"]');if(!e)return;const t=Array.from(b?.children||[]).indexOf(e);if(-1===t)return;const p=await a(e),m=[];if(0===t)n.isEmpty(p["first-name"]||"")&&m.push({fieldName:"first-name",error:"Enter your first name",appendAt:".multi-form14_field-wrapper"}),n.isEmpty(p["last-name"]||"")&&m.push({fieldName:"last-name",error:"Enter your last name",appendAt:".multi-form14_field-wrapper"}),n.isEmail(p.email||"")||m.push({fieldName:"email",error:"Enter a valid email address (example: name@email.com)",appendAt:".multi-form14_field-wrapper"});if(i(),m.length>0)return void s(m,e);const u=r.querySelector(".button_text")||r.firstChild,g=u?.textContent||"Next";l(r),fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(r=>{y&&(y.value=r.id),e.classList.add("hide");const o=t+1;o<h.length&&h[o].classList.remove("hide")}).catch(e=>{d(S)}).finally(()=>{c(r,g)})}if(w||v&&w){e.preventDefault(),e.stopImmediatePropagation(),o(S);const t=w.closest('[data-form="step"]');if(!t)return;if(-1===Array.from(b?.children||[]).indexOf(t))return;const r=await a(u),h=[];"other-connection-to-lung-cancer"in r&&n.isEmpty(r["other-connection-to-lung-cancer"]||"")&&h.push({fieldName:"other-connection-to-lung-cancer",error:"Tell us your conection to long cancer",appendAt:".multi-form14_field-wrapper"}),"other-interests"in r&&n.isEmpty(r["other-interests"]||"")&&h.push({fieldName:"other-interests",error:"Tell us what are your interests",appendAt:".multi-form14_field-wrapper"});const v="true"===t.querySelector("#street-address").closest("[data-depends-on]").getAttribute("data-active"),E=r["street-address"]??"";v&&n.isEmpty(E)&&h.push({fieldName:"street-address",error:"Enter a valid street address",appendAt:".multi-form14_field-wrapper"});const x="true"===t.querySelector("#city").closest("[data-depends-on]").getAttribute("data-active"),A=r.city??"";x&&n.isEmpty(A)&&h.push({fieldName:"city",error:"Enter a valid city name",appendAt:".multi-form14_field-wrapper"});const N="true"===t.querySelector("#zip-code").closest("[data-depends-on]").getAttribute("data-active"),q=r["zip-code"]??"";if(N&&!n.isPostalCode(String(q),"any")&&h.push({fieldName:"zip-code",error:"Enter a valid ZIP or postal code",appendAt:".multi-form14_field-wrapper"}),i(),h.length>0)return void s(h,t);"Wants a copy via Mail"!=document.querySelector("#copy-of-building-community-guide").value&&(delete r["street-address"],delete r.city,delete r.state,delete r["zip-code"]);const _=w.querySelector(".button_text")||w.firstChild,k=_?.textContent||"Submit";l(w),r.id=y.value,fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(e=>{if(!e.ok)throw new Error("Submission failed");return e.json()}).then(e=>{p(b),m(g)}).catch(e=>{d(S)}).finally(()=>{c(w,k)})}})})}export{u as default};
