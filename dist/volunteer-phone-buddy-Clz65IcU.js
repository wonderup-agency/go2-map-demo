import{g as e,i as t,h as r,s as o,v as a,c as n,a as i,b as l,d,r as u,e as s,f as h}from"./index-C0zVVJOs.js";import"./main-CBAfaC2f.js";function f(f){(f.forEach?f:[f]).forEach(f=>{const m=f.dataset.webhook||"https://hook.us2.make.com/vpc32gcapub110y6fye9o46a8nnlw7fq",c=Array.from(f.querySelectorAll('[data-form="step"]')),p=f.querySelector('[data-volunteer-phone-buddy-form="ticket-id-field"]');f.querySelector('[data-form="next-btn"]').firstChild.textContent;f.querySelector('[data-form="submit-btn"]').firstChild.textContent;const y=f.querySelector(".w-form-done"),b=f.querySelector(".w-form-fail"),O=f.querySelector("form");p&&(p.disabled=!0,p.type="hidden"),e({context:f,selectId:"Volunteer-Cancer-type",otherValue:557,fieldName:"Other-cancer-type",labelName:"Specify other type of lung cancer",placeholder:"Specify here"}),e({context:f,selectId:"Volunteer-How-did-you-heard-about-us",otherValue:98,fieldName:"Volunteer-Other-way-of-hearing-about-GO2",labelName:"Describe other way of hearing about GO2",placeholder:"Specify here"}),t({context:f,checkboxGroup:"Volunteer-Phone-Buddy-Treatment",otherValue:8,fieldName:"Volunteer-Other-treatment",labelName:"Specify treatment",placeholder:"Specify here",wrapperClass:"multi-form14_field-wrapper"}),c.forEach((e,t)=>{0!==t&&e.classList.add("hide")}),f.addEventListener("click",e=>{const t=e.target,f=t.closest('[data-form="next-btn"]'),w=t.closest('[data-form="submit-btn"]'),g=t.closest(".button_text");if(f||g&&f){r(b);const e=f.closest('[data-form="step"]');if(!e)return;const t=Array.from(O?.children||[]).indexOf(e);if(-1===t)return;const s=o(e),h=[];if(0===t){a.isEmpty(s["Volunteer-Phone-Buddy-Name"]||"")&&h.push({fieldName:"Volunteer-Phone-Buddy-Name",error:"Enter your full name",appendAt:".multi-form14_field-wrapper"}),a.isEmail(s["Volunteer-Phone-Buddy-Email"]||"")||h.push({fieldName:"Volunteer-Phone-Buddy-Email",error:"Enter a valid email address (example: name@email.com)",appendAt:".multi-form14_field-wrapper"});const e=s["Volunteer-Phone-Buddy-Phone"]||"";a.isMobilePhone(e,"any")||h.push({fieldName:"Volunteer-Phone-Buddy-Phone",error:"Enter a valid phone number (include area code)",appendAt:".multi-form14_field-wrapper"})}if(n(),h.length>0)return void i(h,e);const y=f.querySelector(".button_text")||f.firstChild,w=y?.textContent||"Next";l(f),fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(r=>{p&&(p.value=r?.ticket||r||""),e.classList.add("hide");const o=t+1;o<c.length&&c[o].classList.remove("hide")}).catch(e=>{d(b)}).finally(()=>{u(f,w)})}if(w||g&&w){e.preventDefault(),e.stopImmediatePropagation(),r(b);const t=w.closest('[data-form="step"]');if(!t)return;if(-1===Array.from(O?.children||[]).indexOf(t))return;const f=o(t),c=[];if(a.isPostalCode(String(f?.["Volunteer-Phone-Buddy-Zip-Code"]||""),"any")||c.push({fieldName:"Volunteer-Phone-Buddy-Zip-Code",error:"Enter a valid ZIP or postal code",appendAt:".multi-form14_field-wrapper"}),"Other-cancer-type"in f&&a.isEmpty(f["Other-cancer-type"]||"")&&c.push({fieldName:"Other-cancer-type",error:"Tell us what type of cancer you have",appendAt:".multi-form14_field-wrapper"}),"Volunteer-Other-treatment"in f&&a.isEmpty(f["Volunteer-Other-treatment"]||"")&&c.push({fieldName:"Volunteer-Other-treatment",error:"Specify the treatment you received",appendAt:".multi-form14_field-wrapper"}),"Volunteer-Other-way-of-hearing-about-GO2"in f&&a.isEmpty(f["Volunteer-Other-way-of-hearing-about-GO2"]||"")&&c.push({fieldName:"Volunteer-Other-way-of-hearing-about-GO2",error:"Describe how you heard about GO2",appendAt:".multi-form14_field-wrapper"}),n(),c.length>0)return void i(c,t);const g=w.querySelector(".button_text")||w.firstChild,V=g?.textContent||"Submit";l(w),f["ticket-id"]=p.value;let S=f["Interest-in-becoming-a-Phone-Buddy"]||"";let P="";[{key:"Volunteer-Phone-Buddy-Treatment",label:"Treatment"},{key:"Volunteer-Other-treatment",label:"Other treatment"},{key:"Volunteer-How-did-you-heard-about-us",label:"How did you hear about GO2?"},{key:"Volunteer-Other-way-of-hearing-about-GO2",label:"Other way of hearing about GO2"}].forEach(e=>{if(f.hasOwnProperty(e.key)){const t=f[e.key];let r="";Array.isArray(t)&&t.length>0?r=t.join(", "):"string"==typeof t&&""!==t.trim()?r=t:null!=t&&""!==t.toString().trim()&&(r=t.toString()),r&&(P+=`<br><strong>${e.label}:</strong> ${r}`)}}),P&&(S=S.trim()?`${S.trim()}.<br>${P.trim()}`:P.trim()),f["Interest-in-becoming-a-Phone-Buddy"]=S,fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}).then(e=>{if(!e.ok)throw new Error("Submission failed");return e.json()}).then(e=>{s(O),h(y)}).catch(e=>{d(b)}).finally(()=>{u(w,V)})}})})}export{f as default};
//# sourceMappingURL=volunteer-phone-buddy-Clz65IcU.js.map
